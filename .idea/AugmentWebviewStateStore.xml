<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiIyNDIwMDdlOS1hODYxLTQzNjAtYmM3ZS05N2IzN2FkOTQwMmUiLCJjb252ZXJzYXRpb25zIjp7IjRiOTAzMjc1LTdkOTAtNGExMS1iNThlLTg4MzZkMjRmYjg5YSI6eyJpZCI6IjRiOTAzMjc1LTdkOTAtNGExMS1iNThlLTg4MzZkMjRmYjg5YSIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMDJUMTk6NTE6NDUuMTA1WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTAyVDE5OjUxOjQ1LjEwNVoiLCJjaGF0SGlzdG9yeSI6W10sImZlZWRiYWNrU3RhdGVzIjp7fSwidG9vbFVzZVN0YXRlcyI6e30sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjpmYWxzZSwiZXh0cmFEYXRhIjp7Imhhc0RpcnR5RWRpdHMiOmZhbHNlfSwicGVyc29uYVR5cGUiOjB9LCI3NjVhYWQ1NC0wNzViLTRmYTQtOTJjMi03ZDNlMWU4NzA0NTkiOnsiaWQiOiI3NjVhYWQ1NC0wNzViLTRmYTQtOTJjMi03ZDNlMWU4NzA0NTkiLCJjcmVhdGVkQXRJc28iOiIyMDI1LTA1LTAyVDE5OjUxOjQ1LjI0NVoiLCJsYXN0SW50ZXJhY3RlZEF0SXNvIjoiMjAyNS0wNS0wMlQxOTo1MTo0NS4yNDVaIiwiY2hhdEhpc3RvcnkiOltdLCJmZWVkYmFja1N0YXRlcyI6e30sInRvb2xVc2VTdGF0ZXMiOnt9LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJyZXF1ZXN0SWRzIjpbXSwiaXNQaW5uZWQiOmZhbHNlLCJpc1NoYXJlYWJsZSI6ZmFsc2UsImV4dHJhRGF0YSI6eyJoYXNEaXJ0eUVkaXRzIjpmYWxzZX0sInBlcnNvbmFUeXBlIjowfSwiYzU1NmFiMTgtYjdhZi00ZDliLWE3NzYtMmIxYmFkMWI4ZGYxIjp7ImlkIjoiYzU1NmFiMTgtYjdhZi00ZDliLWE3NzYtMmIxYmFkMWI4ZGYxIiwiY3JlYXRlZEF0SXNvIjoiMjAyNS0wNS0wMlQxOTo1MTo1Mi42MjlaIiwibGFzdEludGVyYWN0ZWRBdElzbyI6IjIwMjUtMDUtMDJUMjA6NDU6MTIuNjI1WiIsImNoYXRIaXN0b3J5IjpbeyJyZXF1ZXN0X2lkIjoiNWU1MzZhODYtNzZjMS00YjFiLTljOWMtZTViNTFiOTgyNWFhIiwidXVpZCI6IjdmNGE1YzFlLTNiNjQtNDNhYS04YmUxLTU0NGZhOTRjZWZmMSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MCwidG9UaW1lc3RhbXAiOjE3NDYyMTU1MTI2MjksInNlZW5fc3RhdGUiOiJzZWVuIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImU3ZWE0MWE4LWExMjEtNDRjMi1iZjE4LTNhZjkyZjAwMDViOCIsInJlcXVlc3RfbWVzc2FnZSI6IuaIkei/meaYr+S4gOS4quW4jOacm+WwveWPr+iDvei/mOWOn3JlZGlz55qEamF2YeeJiOacrHJlZGlz5pyN5Yqh56uvIOaIkeW4jOacm+WwseaIkeeOsOWcqOeahOS7o+eggeeahOWGl+S9meiuvuiuoemDqOWIhui/m+ihjOS8mOWMliDkvaDmnInku4DkuYjlu7rorq7lkJciLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0Ijoi5oiR6L+Z5piv5LiA5Liq5biM5pyb5bC95Y+v6IO96L+Y5Y6fcmVkaXPnmoRqYXZh54mI5pyscmVkaXPmnI3liqHnq68g5oiR5biM5pyb5bCx5oiR546w5Zyo55qE5Luj56CB55qE5YaX5L2Z6K6+6K6h6YOo5YiG6L+b6KGM5LyY5YyWIOS9oOacieS7gOS5iOW7uuiuruWQlyJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQXlaMXNKV1hCRGNnOGZRcnV4VVdjcSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiXFx1NjdlNVxcdTYyN2VcXHU5ODc5XFx1NzZlZVxcdTc2ODRcXHU0ZTNiXFx1ODk4MVxcdTdlZDNcXHU2Nzg0XFx1ZmYwY1xcdTUzMDVcXHU2MmVjXFx1NGUzYlxcdTg5ODFcXHU3YzdiXFx1MzAwMVxcdTUzMDVcXHU3ZWQzXFx1Njc4NFxcdTU0OGNcXHU2ODM4XFx1NWZjM1xcdTUyOWZcXHU4MGZkXFx1NmEyMVxcdTU3NTdcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLkuLrkuobluK7liqnmgqjkvJjljJZKYXZh54mIUmVkaXPmnI3liqHnq6/nmoTlhpfkvZnorr7orqHpg6jliIbvvIzmiJHpnIDopoHlhYjkuobop6PmgqjnmoTku6PnoIHlupPnu5PmnoTlkozkuLvopoHnu4Tku7bjgILorqnmiJHlhYjojrflj5bkuIDkupvlhbPplK7kv6Hmga/vvIznhLblkI7mj5DkvpvlhbfkvZPnmoTkvJjljJblu7rorq7jgIJcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50Ijoi5oiR6L+Z5piv5LiA5Liq5biM5pyb5bC95Y+v6IO96L+Y5Y6fcmVkaXPnmoRqYXZh54mI5pyscmVkaXPmnI3liqHnq68g5oiR5biM5pyb5bCx5oiR546w5Zyo55qE5Luj56CB55qE5YaX5L2Z6K6+6K6h6YOo5YiG6L+b6KGM5LyY5YyWIOS9oOacieS7gOS5iOW7uuiuruWQlyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQxOTo1Mzo1NC4zNTdaIiwicmVzcG9uc2VfdGV4dCI6IuS4uuS6huW4ruWKqeaCqOS8mOWMlkphdmHniYhSZWRpc+acjeWKoeerr+eahOWGl+S9meiuvuiuoemDqOWIhu+8jOaIkemcgOimgeWFiOS6huino+aCqOeahOS7o+eggeW6k+e7k+aehOWSjOS4u+imgee7hOS7tuOAguiuqeaIkeWFiOiOt+WPluS4gOS6m+WFs+mUruS/oeaBr++8jOeEtuWQjuaPkOS+m+WFt+S9k+eahOS8mOWMluW7uuiuruOAglxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjkzNjM0ZDk2LWZhMGItNDk5YS05Y2UwLWQ5NDJmZjhjMDViYSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVRrN0gyVXNwTGJGNEJpaWJ4Y1BOeUgiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmFcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLorqnmiJHnu6fnu63ojrflj5bmm7TlpJrlhbPkuo5BT0bph43lhpnlmajnmoTkv6Hmga/vvIzlm6DkuLrmgqjmj5DliLDkuobov5nkuKrmlofku7bvvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEudXRpbC5FbnVtU2V0O1xuaW1wb3J0IGphdmEudXRpbC5TZXQ7XG4uLi5cblxuICAgIHB1YmxpYyBNeUNvbW1hbmRIYW5kbGVyKFJlZGlzQ29yZSByZWRpc0NvcmUsIEFPRkhhbmRsZXIgYW9mSGFuZGxlciwgUkRCSGFuZGxlciByZGJIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgICAgICB0aGlzLmFvZkhhbmRsZXIgPSBhb2ZIYW5kbGVyO1xuICAgICAgICB0aGlzLnJkYkhhbmRsZXIgPSByZGJIYW5kbGVyO1xuXG5cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBjaGFubmVsUmVhZDAoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCBtc2cpIHtcbiAgICAgICAgaWYgKG1zZyBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgICAgICAgICAgUmVzcEFycmF5IGFycmF5ID0gKFJlc3BBcnJheSkgbXNnO1xuICAgICAgICAgICAgUmVzcCByZXNwb25zZSA9IHByb2Nlc3NDb21tYW5kKGFycmF5KTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiB1bmtub3duIHJlcXVlc3QgdHlwZVwiKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgUmVzcCBwcm9jZXNzQ29tbWFuZChSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIGlmIChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZW1wdHkgY29tbWFuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXNwW10gYXJyYXkgPSBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKTtcbiAgICAgICAgICAgIFN0cmluZyBjb21tYW5kTmFtZSA9ICgoQnVsa1N0cmluZykgYXJyYXlbMF0pLmdldENvbnRlbnQoKS50b1V0ZjhTdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgQ29tbWFuZFR5cGUgY29tbWFuZFR5cGU7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZFR5cGUgPSBDb21tYW5kVHlwZS52YWx1ZU9mKGNvbW1hbmROYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biBjb21tYW5kICdcIiArIGNvbW1hbmROYW1lICsgXCInXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlSW5DbHVzdGVyKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNsdXN0ZXJDb21tYW5kKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBDb21tYW5kIGNvbW1hbmQgPSBjb21tYW5kVHlwZS5nZXRTdXBwbGllcigpLmFwcGx5KHJlZGlzQ29yZSk7XG4gICAgICAgICAgICBjb21tYW5kLnNldENvbnRleHQoYXJyYXkpO1xuXG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG5cbiAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGFycmF5Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZGJIYW5kbGVyLm5vdGlmeURhdGFDaGFuZ2VkKHJlZGlzQ29yZS5nZXRDdXJyZW50REIoKS5nZXRJZCgpLCAoKEJ1bGtTdHJpbmcpIGFycmF5WzFdKS5nZXRDb250ZW50KCkpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgaWYgKGN1cnJlbnROb2RlSWQuZXF1YWxzKHRhcmdldE5vZGVJZCkpIHtcbiAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKSk7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG5cbiAgICAgICAgICAgIC8vIOehruS/neacrOWcsOaJp+ihjOaXtuS5n+inpuWPkVJEQlxuICAgICAgICAgICAgaWYgKHJkYkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkgJiYgY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksIGtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGZvcndhcmRUb1RhcmdldE5vZGUodGFyZ2V0Tm9kZUlkLCBjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgUmVzcCBmb3J3YXJkVG9UYXJnZXROb2RlKFN0cmluZyB0YXJnZXROb2RlSWQsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOiOt+WPluebruagh+iKgueCueeahOacjeWKoeWunuS+i1xuICAgICAgICAgICAgUmVkaXNDbHVzdGVyIGNsdXN0ZXIgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q2x1c3RlcigpO1xuICAgICAgICAgICAgTXlSZWRpc1NlcnZpY2UgdGFyZ2V0U2VydmljZSA9IGNsdXN0ZXIuZ2V0Tm9kZSh0YXJnZXROb2RlSWQpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0U2VydmljZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8g6L2s5Y+R5ZG95Luk5Yiw55uu5qCH6IqC54K5XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdGFyZ2V0IG5vZGUgbm90IGF2YWlsYWJsZTogXCIgKyB0YXJnZXROb2RlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZm9yd2FyZGluZyBjb21tYW5kIHRvIG5vZGUgXCIgKyB0YXJnZXROb2RlSWQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFRocm93YWJsZSBjYXVzZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIFwiICsgY2F1c2UuZ2V0TWVzc2FnZSgpKSk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9zZXJ2ZXIvTXlSZWRpc1NlcnZpY2UuamF2YVxuLi4uXG5cbmltcG9ydCBpby5uZXR0eS5ib290c3RyYXAuU2VydmVyQm9vdHN0cmFwO1xuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5Qb29sZWRCeXRlQnVmQWxsb2NhdG9yO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuKjtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLnNvY2tldC5Tb2NrZXRDaGFubmVsO1xuaW1wb3J0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5EZWZhdWx0RXZlbnRFeGVjdXRvckdyb3VwO1xuaW1wb3J0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5EZWZhdWx0VGhyZWFkRmFjdG9yeTtcbmltcG9ydCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuRXZlbnRFeGVjdXRvckdyb3VwO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZUltcGw7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZTeW5jU3RyYXRlZ3k7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNsdXN0ZXIuQ2x1c3RlckNsaWVudDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5DbHVzdGVyTm9kZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5SZWRpc0NsdXN0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLkNvbXByZXNzaW9uQ29lZEM7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLk15Q29tbWFuZEhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLk15RGVjb2RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29kZXIuTXlSZXNwb25zZUVuY29kZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuRGVmYXVsdENoYW5uZWxTZWxlY3RTdHJhdGVneTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5Mb2NhbENoYW5uZWxPcHRpb247XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9Db21tYW5kVHlwZS5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jb21tYW5kO1xuXG5pbXBvcnQgamF2YS51dGlsLmZ1bmN0aW9uLkZ1bmN0aW9uO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuaW1wbC4qO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLmltcGwuSGFzaC4qO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLmltcGwuTGlzdC4qO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLmltcGwuU2V0Lio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuaW1wbC5TdHJpbmcuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5pbXBsLlpzZXQuKjtcblxucHVibGljIGVudW0gQ29tbWFuZFR5cGUge1xuICAgIFBJTkcoY29yZSAtPiBuZXcgUGluZygpKSxcbiAgICBJTkZPKEluZm86Om5ldyksXG4gICAgU0VUKFNldDo6bmV3KSxcbiAgICBERUwoRGVsOjpuZXcpLFxuICAgIElOQ1IoSW5jcjo6bmV3KSxcbiAgICBNU0VUKE1zZXQ6Om5ldyksXG4gICAgRVhJU1QoRXhpc3Q6Om5ldyksXG4gICAgRVhQSVJFKEV4cGlyZTo6bmV3KSxcbiAgICBTQUREKFNhZGQ6Om5ldyksXG4gICAgVFRMKFR0bDo6bmV3KSxcbiAgICBTTUVNQkVSUyhTbWVtZWJlcnM6Om5ldyksXG4gICAgU0lTTUVNQkVSKFNpc21lbWJlcjo6bmV3KSxcbiAgICBTQ0FSRChTY2FyZDo6bmV3KSxcbiAgICBTUkVNKFNyZW06Om5ldyksXG4gICAgU1BPUChTcG9wOjpuZXcpLFxuICAgIEhTRVQoSHNldDo6bmV3KSxcbiAgICBIR0VUKEhnZXQ6Om5ldyksXG4gICAgSE1FU1QoSG1lc3Q6Om5ldyksXG4gICAgSEdFVEFMTChIZ2V0YWxsOjpuZXcpLFxuICAgIEhNR0VUKEhtZ2V0OjpuZXcpLFxuICAgIEhERUwoSGRlbDo6bmV3KSxcbiAgICBIRVhJU1RTKEhleGlzdHM6Om5ldyksXG4gICAgSExFTihIbGVuOjpuZXcpLFxuICAgIExQVVNIKExwdXNoOjpuZXcpLFxuICAgIFJQVVNIKFJwdXNoOjpuZXcpLFxuICAgIExSQU5HRShMcmFuZ2U6Om5ldyksXG4gICAgTExFTihMbGVuOjpuZXcpLFxuICAgIExQT1AoTHBvcDo6bmV3KSxcbiAgICBSUE9QKFJwb3A6Om5ldyksXG4gICAgTFJFTShMcmVtOjpuZXcpLFxuICAgIFpBREQoWmFkZDo6bmV3KSxcbiAgICBaUkFOR0UoWnJhbmdlOjpuZXcpLFxuICAgIFpSRVZSQU5HRShacmV2cmFuZ2U6Om5ldyksXG4gICAgWlJBTkdFQllTQ09SRShacmFuZ2VieXNjb3JlOjpuZXcpLFxuICAgIFpSRU0oWnJlbTo6bmV3KSxcbiAgICBaQ0FSRChaY2FyZDo6bmV3KSxcbiAgICBaU0NPUkUoWnNjb3JlOjpuZXcpLFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvQU9GSGFuZGxlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5hb2Y7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbmltcG9ydCBpby5uZXR0eS5idWZmZXIuVW5wb29sZWQ7XG5pbXBvcnQgaW8ubmV0dHkudXRpbC5jb25jdXJyZW50LkNvbXBsZXRlRnV0dXJlO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5sb2FkZXIuQU9GTG9hZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YubG9hZGVyLkxvYWRlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnByb2Nlc3Nvci5BT0ZQcm9jZXNzb3I7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5wcm9jZXNzb3IuUHJvY2Vzc29yO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucmV3cml0ZXIuQU9GUmV3cml0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi53cml0ZXIuQU9GV3JpdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2Yud3JpdGVyLldyaXRlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL0FPRkJhY2tncm91bmRTZXJ2aWNlLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZjtcblxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucHJvY2Vzc29yLlByb2Nlc3NvcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbi8qKlxuICogQU9G5ZCO5Y+w5pyN5Yqh77yM6LSf6LSj566h55CGQU9G55qE5ZCO5Y+w5L+d5a2Y5ZKM5ZCM5q2l5pON5L2cXG4gKi9cbnB1YmxpYyBjbGFzcyBBT0ZCYWNrZ3JvdW5kU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQU9GQmFja2dyb3VuZFNlcnZpY2UuY2xhc3MpO1xuXG4gICAgcHJpdmF0ZSBmaW5hbCBQcm9jZXNzb3IgcHJvY2Vzc29yOyAgICAgICAgICAgLy8gQU9G5aSE55CG5ZmoXG4gICAgcHJpdmF0ZSBmaW5hbCBBT0ZTeW5jU3RyYXRlZ3kgc3luY1N0cmF0ZWd5OyAgLy8g5ZCM5q2l562W55WlXG4gICAgcHJpdmF0ZSBUaHJlYWQgc3luY1RocmVhZDsgICAgICAgICAgICAgICAgICAgLy8g5ZCM5q2l57q/56iLXG5cbiAgICAvKipcbiAgICAgKiDmnoTpgKBBT0blkI7lj7DmnI3liqFcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29yIEFPRuWkhOeQhuWZqFxuICAgICAqIEBwYXJhbSBzeW5jU3RyYXRlZ3kg5ZCM5q2l562W55WlXG4gICAgICovXG4gICAgcHVibGljIEFPRkJhY2tncm91bmRTZXJ2aWNlKFByb2Nlc3NvciBwcm9jZXNzb3IsIEFPRlN5bmNTdHJhdGVneSBzeW5jU3RyYXRlZ3kpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gc3luY1N0cmF0ZWd5O1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvcmRiL2NvcmUvUkRCSGFuZGxlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5yZGIuY29yZTtcblxuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmV4ZWN1dG9yLkV4ZWN1dG9yTWFuYWdlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLnBvbGljeS5DaGFuZ2VUcmFja2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIucG9saWN5LlNhdmVQb2xpY3k7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50Lio7XG5cbnB1YmxpYyBjbGFzcyBSREJIYW5kbGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlciBsb2dnZXIgPSBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlci5nZXRMb2dnZXIoUkRCSGFuZGxlci5jbGFzcyk7XG5cbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJTYXZlciBzYXZlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJEQkxvYWRlciBsb2FkZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBTYXZlUG9saWN5IHNhdmVQb2xpY3k7XG4gICAgcHJpdmF0ZSBmaW5hbCBDaGFuZ2VUcmFja2VyIGNoYW5nZVRyYWNrZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBFeGVjdXRvck1hbmFnZXIgZXhlY3V0b3JNYW5hZ2VyO1xuICAgIHByaXZhdGUgZmluYWwgUkRCRmlsZU1hbmFnZXIgZmlsZU1hbmFnZXI7XG5cbiAgICBwcml2YXRlIHZvbGF0aWxlIGJvb2xlYW4gaXNTYXZpbmcgPSBmYWxzZTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL0Jnc2F2ZS5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgaWYgKHJkYkhhbmRsZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgUkRCIHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey57uP5Zyo6L+b6KGM5L+d5a2YXG4gICAgICAgIGlmIChyZGJIYW5kbGVyLmlzU2F2aW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwiRVJSIEJhY2tncm91bmQgc2F2ZSBhbHJlYWR5IGluIHByb2dyZXNzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6Kem5Y+R5ZCO5Y+w5YWo6YeP5L+d5a2YXG4gICAgICAgIGJvb2xlYW4gc3RhcnRlZCA9IHJkYkhhbmRsZXIuYmdzYXZlKHRydWUpO1xuICAgICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJCYWNrZ3JvdW5kIHNhdmluZyBzdGFydGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgQmFja2dyb3VuZCBzYXZlIGNvdWxkIG5vdCBiZSBzdGFydGVkXCIpO1xuICAgICAgICB9XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvUmVkaXNDb3JlLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4O1xuXG4gaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDtcbiBpbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGFiYXNlLlJlZGlzREI7XG4gaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG4gaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5SZWRpc0RhdGE7XG4gaW1wb3J0IHNpdGUuaG5meTI1OC5zZXJ2ZXIuTXlSZWRpc1NlcnZpY2U7XG5cbiBpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gaW1wb3J0IGphdmEudXRpbC5NYXA7XG4gaW1wb3J0IGphdmEudXRpbC5TZXQ7XG4gXG4gcHVibGljIGludGVyZmFjZSBSZWRpc0NvcmVcbiB7XG4gICAgIFNldDxCeXRlc1dyYXBwZXI+IGtleXMoKTtcbiBcbiAgICAgdm9pZCBwdXRDbGllbnQoQnl0ZXNXcmFwcGVyIGNvbm5lY3Rpb25OYW1lLCBDaGFubmVsIGNoYW5uZWxDb250ZXh0KTtcbiBcbiAgICAgYm9vbGVhbiBleGlzdChCeXRlc1dyYXBwZXIga2V5KTtcbiBcbiAgICAgdm9pZCBwdXQoQnl0ZXNXcmFwcGVyIGtleSwgUmVkaXNEYXRhIHJlZGlzRGF0YSk7XG4gXG4gICAgIFJlZGlzRGF0YSBnZXQoQnl0ZXNXcmFwcGVyIGtleSk7XG4gXG4gICAgIGxvbmcgcmVtb3ZlKExpc3Q8Qnl0ZXNXcmFwcGVyPiBrZXlzKTtcbiBcbiAgICAgdm9pZCBjbGVhbkFsbCgpO1xuXG4gICAgIFJlZGlzREIgZ2V0Q3VycmVudERCKCk7XG5cbiAgICAgdm9pZCBzZWxlY3REQihpbnQgaW5kZXgpO1xuXG4gICAgIGludCBnZXREYk51bSgpO1xuXG4gICAgIE1hcDxCeXRlc1dyYXBwZXIsIFJlZGlzRGF0YT4gZ2V0QWxsKCk7XG5cbiAgICAgdm9pZCBzZXREQihpbnQgY3VycmVudERiLCBCeXRlc1dyYXBwZXIgYnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGEgcmVkaXNEYXRhKTtcblxuICAgICBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGdldERCRGF0YShpbnQgZGJJbmRleCk7XG5cbiAgICAgTXlSZWRpc1NlcnZpY2UgZ2V0UmVkaXNTZXJ2aWNlKCk7XG4gfS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvUmVkaXNDb3JlSW1wbC5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1ODtcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YWJhc2UuUmVkaXNEQjtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5SZWRpc0RhdGE7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEudXRpbC4qO1xuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwO1xuXG5wdWJsaWMgY2xhc3MgUmVkaXNDb3JlSW1wbCBpbXBsZW1lbnRzIFJlZGlzQ29yZSB7XG4gICAgcHJpdmF0ZSBmaW5hbCBMaXN0PFJlZGlzREI+IGRhdGFiYXNlcztcbiAgICBwcml2YXRlIGZpbmFsIGludCBkYk51bTtcbiAgICBwcml2YXRlIGZpbmFsIFRocmVhZExvY2FsPEludGVnZXI+IGN1cnJlbnREQjtcbiAgICBwcml2YXRlIGZpbmFsIENvbmN1cnJlbnRIYXNoTWFwPEJ5dGVzV3JhcHBlciwgQ2hhbm5lbD4gY2xpZW50cztcbiAgICBwcml2YXRlIGZpbmFsIE1hcDxDaGFubmVsLCBCeXRlc1dyYXBwZXI+IGNsaWVudE5hbWVzO1xuICAgIHByaXZhdGUgUkRCSGFuZGxlciByZGJIYW5kbGVyO1xuXG4gICAgcHJpdmF0ZSBNeVJlZGlzU2VydmljZSByZWRpc1NlcnZpY2U7XG5cblxuICAgIHB1YmxpYyBSZWRpc0NvcmVJbXBsKGludCBkYk51bSwgTXlSZWRpc1NlcnZpY2UgcmVkaXNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGJOdW0gPSBkYk51bTtcbiAgICAgICAgdGhpcy5kYXRhYmFzZXMgPSBuZXcgQXJyYXlMaXN0PD4oZGJOdW0pO1xuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRiTnVtOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGFiYXNlcy5hZGQobmV3IFJlZGlzREIoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudERCID0gVGhyZWFkTG9jYWwud2l0aEluaXRpYWwoKCkgLT4gMCk7XG4gICAgICAgIHRoaXMuY2xpZW50cyA9IG5ldyBDb25jdXJyZW50SGFzaE1hcDw+KCk7XG4gICAgICAgIHRoaXMuY2xpZW50TmFtZXMgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8PigpO1xuICAgICAgICB0aGlzLnJlZGlzU2VydmljZSA9IHJlZGlzU2VydmljZTtcbiAgICB9XG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlZGlzREIgZ2V0Q3VycmVudERCKCkge1xuICAgICAgICByZXR1cm4gZGF0YWJhc2VzLmdldChjdXJyZW50REIuZ2V0KCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNlbGVjdERCKGludCBpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IGRiTnVtKSB7XG4gICAgICAgICAgICBjdXJyZW50REIuc2V0KGluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIERCIGluZGV4XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFNldDxCeXRlc1dyYXBwZXI+IGtleXMoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50REIoKS5rZXlzKCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgcHV0Q2xpZW50KEJ5dGVzV3JhcHBlciBjb25uZWN0aW9uTmFtZSwgQ2hhbm5lbCBjaGFubmVsQ29udGV4dCkge1xuICAgICAgICBjbGllbnRzLnB1dChjb25uZWN0aW9uTmFtZSwgY2hhbm5lbENvbnRleHQpO1xuICAgICAgICBjbGllbnROYW1lcy5wdXQoY2hhbm5lbENvbnRleHQsIGNvbm5lY3Rpb25OYW1lKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgYm9vbGVhbiBleGlzdChCeXRlc1dyYXBwZXIga2V5KSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50REIoKS5leGlzdChrZXkpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHB1dChCeXRlc1dyYXBwZXIga2V5LCBSZWRpc0RhdGEgcmVkaXNEYXRhKSB7XG4gICAgICAgIGdldEN1cnJlbnREQigpLnB1dChrZXksIHJlZGlzRGF0YSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlZGlzRGF0YSBnZXQoQnl0ZXNXcmFwcGVyIGtleSkge1xuICAgICAgICByZXR1cm4gZ2V0Q3VycmVudERCKCkuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIGxvbmcgcmVtb3ZlKExpc3Q8Qnl0ZXNXcmFwcGVyPiBrZXlzKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50REIoKS5yZW1vdmUoa2V5cyk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgY2xlYW5BbGwoKSB7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpIHtcbiAgICAgICAgZ2V0Q3VycmVudERCKCkuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IHNpemUoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50REIoKS5zaXplKCk7XG4gICAgfVxuXG4gICAgcHVibGljIENoYW5uZWwgZ2V0Q2xpZW50KEJ5dGVzV3JhcHBlciBjb25uZWN0aW9uTmFtZSkge1xuICAgICAgICByZXR1cm4gY2xpZW50cy5nZXQoY29ubmVjdGlvbk5hbWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBCeXRlc1dyYXBwZXIgZ2V0Q2xpZW50TmFtZShDaGFubmVsIGNoYW5uZWxDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjbGllbnROYW1lcy5nZXQoY2hhbm5lbENvbnRleHQpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHJlbW92ZUNsaWVudChDaGFubmVsIGNoYW5uZWxDb250ZXh0KSB7XG4gICAgICAgIEJ5dGVzV3JhcHBlciBjb25uZWN0aW9uTmFtZSA9IGNsaWVudE5hbWVzLnJlbW92ZShjaGFubmVsQ29udGV4dCk7XG4gICAgICAgIGlmIChjb25uZWN0aW9uTmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbGllbnRzLnJlbW92ZShjb25uZWN0aW9uTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldERiTnVtKCkge1xuICAgICAgICByZXR1cm4gZGJOdW07XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIE1hcDxCeXRlc1dyYXBwZXIsIFJlZGlzRGF0YT4gZ2V0QWxsKCkge1xuICAgICAgICBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IG1hcCA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgZm9yIChSZWRpc0RCIHJlZGlzREIgOiBkYXRhYmFzZXMpIHtcbiAgICAgICAgICAgIGZvciAoQnl0ZXNXcmFwcGVyIGtleSA6IHJlZGlzREIua2V5cygpKSB7XG4gICAgICAgICAgICAgICAgUmVkaXNEYXRhIHJlZGlzRGF0YSA9IHJlZGlzREIuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlZGlzRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5wdXQobmV3IEJ5dGVzV3JhcHBlcihrZXkuZ2V0Qnl0ZXMoKSksIHJlZGlzRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc2V0REIoaW50IGN1cnJlbnREYiwgQnl0ZXNXcmFwcGVyIGJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhIHJlZGlzRGF0YSkge1xuICAgICAgICBkYXRhYmFzZXMuZ2V0KGN1cnJlbnREYikucHV0KGJ5dGVzV3JhcHBlciwgcmVkaXNEYXRhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBkaXNjb25uZWN0Q2xpZW50KENoYW5uZWwgY2hhbm5lbCkge1xuICAgICAgICBCeXRlc1dyYXBwZXIgY29ubmVjdGlvbk5hbWUgPSBjbGllbnROYW1lcy5yZW1vdmUoY2hhbm5lbCk7XG4gICAgICAgIGlmIChjb25uZWN0aW9uTmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbGllbnRzLnJlbW92ZShjb25uZWN0aW9uTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgTWFwPEJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhPiBnZXREQkRhdGEoaW50IGRiSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGRhdGFiYXNlcy5nZXQoZGJJbmRleCkuZ2V0QWxsKCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIE15UmVkaXNTZXJ2aWNlIGdldFJlZGlzU2VydmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHJlZGlzU2VydmljZTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBSREJIYW5kbGVyIGdldFJEQkhhbmRsZXIoKSB7XG4gICAgICAgIHJldHVybiByZGJIYW5kbGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldFJEQkhhbmRsZXIoUkRCSGFuZGxlciByZGJIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMucmRiSGFuZGxlciA9IHJkYkhhbmRsZXI7XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvUmVkaXNDbHVzdGVyTGF1bmNoZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTg7XG5cbmltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5SZWRpc0NsdXN0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ291bnREb3duTGF0Y2g7XG5cbnB1YmxpYyBjbGFzcyBSZWRpc0NsdXN0ZXJMYXVuY2hlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50W10gUE9SVFMgPSB7NjM3OSwgNjM4MCwgNjM4MSwgNjM4Mn07XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgQ291bnREb3duTGF0Y2ggTEFUQ0ggPSBuZXcgQ291bnREb3duTGF0Y2goUE9SVFMubGVuZ3RoKTtcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgUmVkaXNDbHVzdGVyIGNsdXN0ZXIgPSBuZXcgUmVkaXNDbHVzdGVyKHRydWUpO1xuXG4gICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgUE9SVFMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZpbmFsIFN0cmluZyBub2RlSWQgPSBcIm5vZGVcIiArIChpICsgMSk7XG4gICAgICAgICAgICBmaW5hbCBpbnQgcG9ydCA9IFBPUlRTW2ldO1xuICAgICAgICAgICAgbmV3IFRocmVhZCgoKSAtPiBzdGFydE5vZGUoY2x1c3Rlciwgbm9kZUlkLCBwb3J0KSkuc3RhcnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBMQVRDSC5hd2FpdCgpOyAvLyDnrYnlvoXmiYDmnInoioLngrnlkK/liqhcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkFsbCBub2RlcyBzdGFydGVkLiBDbHVzdGVyIGlzIHJlYWR5LlwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5Yid5aeL5YyW5YiG54mHXG4gICAgICAgICAgICBjbHVzdGVyLmluaXRpYWxpemVTaGFyZGluZygpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU2hhcmRpbmcgaW5pdGlhbGl6ZWQuXCIpO1xuXG4gICAgICAgICAgICAvLyDkv53mjIHnqIvluo/ov5DooYxcbiAgICAgICAgICAgIGtlZXBSdW5uaW5nKCk7XG4gICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkNsdXN0ZXIgc3RhcnR1cCBpbnRlcnJ1cHRlZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHN0YXJ0Tm9kZShSZWRpc0NsdXN0ZXIgY2x1c3RlciwgU3RyaW5nIG5vZGVJZCwgaW50IHBvcnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN0YXJ0aW5nIG5vZGUgXCIgKyBub2RlSWQgKyBcIiBvbiBwb3J0IFwiICsgcG9ydCk7XG4gICAgICAgICAgICBjbHVzdGVyLmFkZE5vZGUobm9kZUlkLCBcImxvY2FsaG9zdFwiLCBwb3J0KTtcbiAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIHNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUobm9kZUlkKTtcbiAgICAgICAgICAgIHNlcnZpY2Uuc3RhcnQoKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vZGUgXCIgKyBub2RlSWQgKyBcIiBzdGFydGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRmFpbGVkIHRvIHN0YXJ0IG5vZGUgXCIgKyBub2RlSWQgKyBcIjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBMQVRDSC5jb3VudERvd24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHZvaWQga2VlcFJ1bm5pbmcoKSB7XG4gICAgICAgIFJ1bnRpbWUuZ2V0UnVudGltZSgpLmFkZFNodXRkb3duSG9vayhuZXcgVGhyZWFkKCgpIC0+IHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNodXR0aW5nIGRvd24gUmVkaXMgY2x1c3Rlci4uLlwiKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFRocmVhZC5zbGVlcCgxMDAwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvc2VydmVyL1JlZGlzU2VydmljZS5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5zZXJ2ZXI7XG5cbmltcG9ydCBzaXRlLmhuZnkyNTguUmVkaXNDb3JlO1xuXG5wdWJsaWMgaW50ZXJmYWNlIFJlZGlzU2VydmljZSB7XG4gICAgdm9pZCBzdGFydCgpO1xuICAgIHZvaWQgY2xvc2UoKTtcbiAgICBNeVJlZGlzU2VydmljZSBnZXRSZWRpc1NlcnZpY2UoKTtcblxuICAgIFJlZGlzQ29yZSBnZXRSZWRpc0NvcmUoKTtcbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvUmVkaXNTZXJ2ZXJTdGFydGVyLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgUmVkaXNTZXJ2ZXJTdGFydGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihSZWRpc1NlcnZlclN0YXJ0ZXIuY2xhc3MpO1xuICAgIHByaXZhdGUgc3RhdGljIFJlZGlzU2VydmljZSByZWRpc1NlcnZpY2U7XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICAvL+m7mOiupOerr+WPo1xuICAgICAgICBpbnQgcG9ydCA9IDYzNzk7XG5cbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwb3J0ID0gSW50ZWdlci5wYXJzZUludChhcmdzWzBdKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW52YWxpZCBwb3J0IG51bWJlciwgdXNpbmcgZGVmYXVsdDogXCIgKyBwb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWIm+W7uuW5tuWQr+WKqFJlZGlz5pyN5YqhXG4gICAgICAgIHJlZGlzU2VydmljZSA9IG5ldyBNeVJlZGlzU2VydmljZShwb3J0KTtcblxuICAgICAgICAvLyDmt7vliqDlhbPpl63pkqnlrZBcbiAgICAgICAgUnVudGltZS5nZXRSdW50aW1lKCkuYWRkU2h1dGRvd25Ib29rKG5ldyBUaHJlYWQoKCkgLT4ge1xuICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuato+WcqOWFs+mXrVJlZGlz5pyN5Yqh5ZmoLi4uXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZWRpc1NlcnZpY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAvLyDnu5nkuIDkupvml7bpl7Torqnml6Xlv5flrozmiJDlhpnlhaVcbiAgICAgICAgICAgICAgICBUaHJlYWQuc2xlZXAoNTAwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5YWz6Zet5pyN5Yqh5pe25Y+R55Sf6ZSZ6K+vXCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIlJlZGlz5pyN5Yqh5Zmo5bey5YWz6ZetXCIpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmVkaXNTZXJ2aWNlLnN0YXJ0KCk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jbHVzdGVyL1JlZGlzQ2x1c3Rlci5qYXZhXG4uLi5cblxuICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemVTaGFyZGluZygpIHtcbiAgICAgICAgaWYgKHNoYXJkaW5nRW5hYmxlZCAmJiAhbm9kZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBMaXN0PFN0cmluZz4gbm9kZUlkcyA9IG5ldyBBcnJheUxpc3Q8Pihub2Rlcy5rZXlTZXQoKSk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJJbml0aWFsaXppbmcgc2hhcmRpbmcgd2l0aCBub2RlczogXCIgKyBub2RlSWRzKTtcbiAgICAgICAgICAgIHRoaXMuc2hhcmRpbmdTdHJhdGVneSA9IG5ldyBDb25zaXN0ZW50SGFzaFNoYXJkaW5nKG5vZGVJZHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc3RvcCgpIHtcbiAgICAgICAgZm9yIChNeVJlZGlzU2VydmljZSBzZXJ2aWNlIDogc2VydmljZXMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIHNlcnZpY2UuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBNeVJlZGlzU2VydmljZSBnZXROb2RlKFN0cmluZyBub2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIHNlcnZpY2VzLmdldChub2RlSWQpO1xuICAgIH1cbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoTWFwLkVudHJ5PFN0cmluZywgTXlSZWRpc1NlcnZpY2U+IGVudHJ5IDogc2VydmljZXMuZW50cnlTZXQoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTdGFydGluZyBub2RlOiBcIiArIGVudHJ5LmdldEtleSgpICsgXCIgb24gcG9ydCBcIiArIGVudHJ5LmdldFZhbHVlKCkuZ2V0UG9ydCgpKTtcbiAgICAgICAgICAgICAgICBlbnRyeS5nZXRWYWx1ZSgpLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm9kZSBcIiArIGVudHJ5LmdldEtleSgpICsgXCIgc3RhcnRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkZhaWxlZCB0byBzdGFydCBub2RlIFwiICsgZW50cnkuZ2V0S2V5KCkgKyBcIjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjb25uZWN0Tm9kZXMoKSB7XG4gICAgICAgIC8vIOS4uuavj+S4quiKgueCueWIm+W7uuS4juWFtuS7luiKgueCueeahOi/nuaOpVxuICAgICAgICBmb3IgKE1hcC5FbnRyeTxTdHJpbmcsIE15UmVkaXNTZXJ2aWNlPiBlbnRyeSA6IHNlcnZpY2VzLmVudHJ5U2V0KCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBjdXJyZW50Tm9kZUlkID0gZW50cnkuZ2V0S2V5KCk7XG4gICAgICAgICAgICBNeVJlZGlzU2VydmljZSBjdXJyZW50U2VydmljZSA9IGVudHJ5LmdldFZhbHVlKCk7XG4gICAgICAgICAgICBDbHVzdGVyTm9kZSBjdXJyZW50Tm9kZSA9IG5vZGVzLmdldChjdXJyZW50Tm9kZUlkKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY2x1c3Rlci9DbHVzdGVyTWFuYWdlci5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIENsdXN0ZXJNYW5hZ2VyIHtcbiAgICBwcml2YXRlIFJlZGlzQ2x1c3RlciBjbHVzdGVyO1xuXG4gICAgcHVibGljIENsdXN0ZS4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUF5WjFzSldYQkRjZzhmUXJ1eFVXY3EifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMTk6NTQ6MDQuNTc5WiIsInJlc3BvbnNlX3RleHQiOiLorqnmiJHnu6fnu63ojrflj5bmm7TlpJrlhbPkuo5BT0bph43lhpnlmajnmoTkv6Hmga/vvIzlm6DkuLrmgqjmj5DliLDkuobov5nkuKrmlofku7bvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIxZGQxNmI3Yi1lNzE5LTQ0ZmItYmY5NS1iMjVmZTJiMTg0M2IiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFHR2h5UFIzcVIzaEtpTVhuUUF2aW9SIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmFcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLorqnmiJHnu6fnu63kuobop6NBT0blpITnkIblmajnmoTlrp7njrDvvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZi5yZXdyaXRlcjtcbiAgICAgMlx0XG4gICAgIDNcdFxuICAgICA0XHRcbiAgICAgNVx0aW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuICAgICA2XHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLlVucG9vbGVkO1xuICAgICA3XHRpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG4gICAgIDhcdGltcG9ydCBzaXRlLmhuZnkyNTguUmVkaXNDb3JlO1xuICAgICA5XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbiAgICAxMFx0aW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5SZWRpc0RhdGE7XG4gICAgMTFcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuQnVsa1N0cmluZztcbiAgICAxMlx0aW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuICAgIDEzXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3BBcnJheTtcbiAgICAxNFx0XG4gICAgMTVcdGltcG9ydCBqYXZhLmlvLkZpbGU7XG4gICAgMTZcdGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuICAgIDE3XHRpbXBvcnQgamF2YS5pby5SYW5kb21BY2Nlc3NGaWxlO1xuICAgIDE4XHRpbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjtcbiAgICAxOVx0aW1wb3J0IGphdmEubmlvLmNoYW5uZWxzLkZpbGVDaGFubmVsO1xuICAgIDIwXHRpbXBvcnQgamF2YS5uaW8uZmlsZS5GaWxlcztcbiAgICAyMVx0aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgMjJcdGltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7XG4gICAgMjNcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAyNFx0aW1wb3J0IGphdmEudXRpbC5NYXA7XG4gICAgMjVcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWljQm9vbGVhbjtcbiAgICAyNlx0cHVibGljIGNsYXNzIEFPRlJld3JpdGVyIHtcbiAgICAyN1x0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKEFPRlJld3JpdGVyLmNsYXNzKTtcbiAgICAyOFx0XG4gICAgMjlcdCAgICAvL+aguOW/g1xuICAgIDMwXHQgICAgcHJpdmF0ZSBmaW5hbCBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuICAgIDMxXHQgICAgLy/kuLTml7bmlofku7blkI1cbiAgICAzMlx0ICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIHRlbXBGaWxlbmFtZTtcbiAgICAzM1x0ICAgIC8vQU9G5paH5Lu25ZCNXG4gICAgMzRcdCAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBhb2ZGaWxlbmFtZTtcbiAgICAzNVx0ICAgIC8v5piv5ZCm5Zyo6YeN5YaZ5rWB56iLXG4gICAgMzZcdCAgICBwcml2YXRlIGZpbmFsIEF0b21pY0Jvb2xlYW4gaXNSZXdyaXRpbmc7XG4gICAgMzdcdCAgICAvL+mHjeWGmeeahGJ1ZmZlcuWkp+Wwj1xuICAgIDM4XHQgICAgcHJpdmF0ZSBpbnQgYnVmZmVyU2l6ZTtcbiAgICAzOVx0XG4gICAgNDBcdFxuICAgIDQxXHQgICAgcHVibGljIEFPRlJld3JpdGVyKFJlZGlzQ29yZSByZWRpc0NvcmUsIFN0cmluZyBhb2ZGaWxlbmFtZSwgaW50IGJ1ZmZlclNpemUpIHtcbiAgICA0Mlx0ICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICA0M1x0ICAgICAgICB0aGlzLmFvZkZpbGVuYW1lID0gYW9mRmlsZW5hbWU7XG4gICAgNDRcdCAgICAgICAgdGhpcy50ZW1wRmlsZW5hbWUgPSBhb2ZGaWxlbmFtZStcIi50bXBcIjtcbiAgICA0NVx0ICAgICAgICB0aGlzLmlzUmV3cml0aW5nID0gbmV3IEF0b21pY0Jvb2xlYW4oZmFsc2UpO1xuICAgIDQ2XHQgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG4gICAgNDdcdCAgICB9XG4gICAgNDhcdFxuICAgIDQ5XHQgICAgcHVibGljIGJvb2xlYW4gY2FuUmV3cml0ZSgpe1xuICAgIDUwXHQgICAgICAgIHJldHVybiAhaXNSZXdyaXRpbmcuZ2V0KCk7XG4gICAgNTFcdCAgICB9XG4gICAgNTJcdFxuICAgIDUzXHQgICAgTGlzdDxCeXRlQnVmZmVyPiByZXdyaXRlQnVmZmVyO1xuICAgIDU0XHRcbiAgICA1NVx0ICAgIHB1YmxpYyBib29sZWFuIHJld3JpdGUoKXtcbiAgICA1Nlx0ICAgICAgICBpZighaXNSZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSx0cnVlKSl7XG4gICAgNTdcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuato+WcqOmHjeWGmVwiKTtcbiAgICA1OFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDU5XHQgICAgICAgIH1cbiAgICA2MFx0XG4gICAgNjFcdCAgICAgICAgdHJ5e1xuICAgIDYyXHQgICAgICAgICAgICByZXdyaXRlQnVmZmVyID0gQ29sbGVjdGlvbnMuc3luY2hyb25pemVkTGlzdChuZXcgQXJyYXlMaXN0PD4oKSk7XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0YXJ0UmV3cml0ZUJ1ZmZlcigpO1xuICAgIDY1XHRcbiAgICA2Nlx0ICAgICAgICAgICAgRmlsZSB0ZW1wRmlsZSA9IG5ldyBGaWxlKHRlbXBGaWxlbmFtZSk7XG4gICAgNjdcdCAgICAgICAgICAgIGlmKHRlbXBGaWxlLmV4aXN0cygpKXtcbiAgICA2OFx0ICAgICAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xuICAgIDY5XHQgICAgICAgICAgICB9XG4gICAgNzBcdFxuICAgIDcxXHRcbiAgICA3Mlx0XG4gICAgNzNcdCAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGRvV3JpdGUoKTtcbiAgICA3NFx0XG4gICAgNzVcdFxuICAgIDc2XHQgICAgICAgICAgICBpZihzdWNjZXNzKXtcbiAgICA3N1x0ICAgICAgICAgICAgICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gYnVmZmVycyA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RvcFJld3JpdGVCdWZmZXJBbmRHZXQoKTtcbiAgICA3OFx0XG4gICAgNzlcdCAgICAgICAgICAgICAgICAvLyDlsIbph43lhpnmnJ/pl7TnmoTlkb3ku6Tov73liqDliLDmlrBBT0bmlofku7ZcbiAgICA4MFx0ICAgICAgICAgICAgICAgIGFwcGVuZFJld3JpdGVCdWZmZXJUb1RlbXBGaWxlKGJ1ZmZlcnMpO1xuICAgIDgxXHRcbiAgICA4Mlx0ICAgICAgICAgICAgICAgIC8vIOWOn+WtkOaAp+WcsOabv+aNouaWh+S7tlxuICAgIDgzXHQgICAgICAgICAgICAgICAgYXRvbWljUmVwbGFjZUZpbGUodGVtcEZpbGUsIG5ldyBGaWxlKGFvZkZpbGVuYW1lKSk7XG4gICAgODRcdCAgICAgICAgICAgIH1lbHNle1xuICAgIDg1XHQgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6YeN5YaZ5aSx6LSlXCIpO1xuICAgIDg2XHQgICAgICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XG4gICAgODdcdFxuICAgIDg4XHQgICAgICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgIDg5XHQgICAgICAgICAgICB9XG4gICAgOTBcdCAgICAgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIDkxXHQgICAgICAgIH1jYXRjaChFeGNlcHRpb24gZSl7XG4gICAgOTJcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGR1cmluZyBBT0ZSZXdyaXRlclwiLCBlKTtcbiAgICA5M1x0ICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgIDk0XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgOTVcdCAgICAgICAgfWZpbmFsbHkge1xuICAgIDk2XHQgICAgICAgICAgICBpc1Jld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgIDk3XHQgICAgICAgIH1cbiAgICA5OFx0ICAgIH1cbiAgICA5OVx0XG4gICAxMDBcdCAgICBwcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSBmaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgMTAxXHQgICAgICAgIGlmKCF0ZW1wRmlsZS5yZW5hbWVUbyhmaWxlKSl7XG4gICAxMDJcdCAgICAgICAgICAgIEZpbGUgYmFja3VwID0gbmV3IEZpbGUoZmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSArIFwiLmJha1wiKTtcbiAgIDEwM1x0ICAgICAgICAgICAgaWYoZmlsZS5leGlzdHMoKSl7XG4gICAxMDRcdCAgICAgICAgICAgICAgICBpZihiYWNrdXAuZXhpc3RzKCkpe1xuICAgMTA1XHQgICAgICAgICAgICAgICAgICAgIGJhY2t1cC5kZWxldGUoKTtcbiAgIDEwNlx0ICAgICAgICAgICAgICAgIH1cbiAgIDEwN1x0ICAgICAgICAgICAgICAgIGZpbGUucmVuYW1lVG8oYmFja3VwKTtcbiAgIDEwOFx0ICAgICAgICAgICAgfVxuICAgMTA5XHRcbiAgIDExMFx0ICAgICAgICAgICAgaWYoIXRlbXBGaWxlLnJlbmFtZVRvKHRlbXBGaWxlKSl7XG4gICAxMTFcdCAgICAgICAgICAgICAgICBGaWxlcy5jb3B5KHRlbXBGaWxlLnRvUGF0aCgpLCBmaWxlLnRvUGF0aCgpKTtcbiAgIDExMlx0ICAgICAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xuICAgMTEzXHQgICAgICAgICAgICB9XG4gICAxMTRcdFxuICAgMTE1XHQgICAgICAgICAgICBpZihiYWNrdXAuZXhpc3RzKCkpe1xuICAgMTE2XHQgICAgICAgICAgICAgICAgYmFja3VwLmRlbGV0ZSgpO1xuICAgMTE3XHQgICAgICAgICAgICB9XG4gICAxMThcdCAgICAgICAgfVxuICAgMTE5XHQgICAgfVxuICAgMTIwXHRcbiAgIDEyMVx0XG4gICAxMjJcdCAgICBwcml2YXRlIHZvaWQgYXBwZW5kUmV3cml0ZUJ1ZmZlclRvVGVtcEZpbGUoTGlzdDxCeXRlQnVmZmVyPiBidWZmZXJzKSB0aHJvd3MgSU9FeGNlcHRpb257XG4gICAxMjNcdCAgICAgICAgaWYoYnVmZmVycz09bnVsbCB8fCBidWZmZXJzLmlzRW1wdHkoKSl7XG4gICAxMjRcdCAgICAgICAgICAgIHJldHVybjtcbiAgIDEyNVx0ICAgICAgICB9XG4gICAxMjZcdCAgICAgICAgdHJ5KFJhbmRvbUFjY2Vzc0ZpbGUgcmFmID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUodGVtcEZpbGVuYW1lLFwicndcIik7XG4gICAxMjdcdCAgICAgICAgRmlsZUNoYW5uZWwgZmlsZUNoYW5uZWwgPSByYWYuZ2V0Q2hhbm5lbCgpOyl7XG4gICAxMjhcdCAgICAgICAgICAgIGZpbGVDaGFubmVsLnBvc2l0aW9uKGZpbGVDaGFubmVsLnNpemUoKSk7XG4gICAxMjlcdFxuICAgMTMwXHQgICAgICAgICAgICBmb3IoQnl0ZUJ1ZmZlciBidWZmZXIgOiBidWZmZXJzKXtcbiAgIDEzMVx0ICAgICAgICAgICAgICAgIGlmKGJ1ZmZlci5oYXNSZW1haW5pbmcoKSAmJiBidWZmZXIhPW51bGwpe1xuICAgMTMyXHQgICAgICAgICAgICAgICAgICAgIGZpbGVDaGFubmVsLndyaXRlKGJ1ZmZlcik7XG4gICAxMzNcdCAgICAgICAgICAgICAgICB9XG4gICAxMzRcdCAgICAgICAgICAgIH1cbiAgIDEzNVx0ICAgICAgICAgICAgZmlsZUNoYW5uZWwuZm9yY2UoZmFsc2UpO1xuICAgMTM2XHQgICAgICAgIH1cbiAgIDEzN1x0XG4gICAxMzhcdCAgICB9XG4gICAxMzlcdFxuICAgMTQwXHRcbiAgIDE0MVx0ICAgIHByaXZhdGUgYm9vbGVhbiBkb1dyaXRlKCkge1xuICAgMTQyXHQgICAgICAgIHRyeShSYW5kb21BY2Nlc3NGaWxlIHJhZiA9IG5ldyBSYW5kb21BY2Nlc3NGaWxlKHRlbXBGaWxlbmFtZSxcInJ3XCIpO1xuICAgMTQzXHQgICAgICAgICAgICBGaWxlQ2hhbm5lbCBmaWxlQ2hhbm5lbCA9IHJhZi5nZXRDaGFubmVsKCk7XG4gICAxNDRcdCAgICAgICAgKXtcbiAgIDE0NVx0ICAgICAgICAgICAgQnl0ZUJ1ZiBieXRlQnVmID0gVW5wb29sZWQuYnVmZmVyKCk7XG4gICAxNDZcdFxuICAgMTQ3XHQgICAgICAgICAgICBmb3IoaW50IGk9MDtpPHJlZGlzQ29yZS5nZXREYk51bSgpO2krKyl7XG4gICAxNDhcdFxuICAgMTQ5XHQgICAgICAgICAgICAgICAgTWFwPEJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhPiBkYkRhdGEgPSByZWRpc0NvcmUuZ2V0REJEYXRhKGkpO1xuICAgMTUwXHQgICAgICAgICAgICAgICAgaWYoIWRiRGF0YS5pc0VtcHR5KCkpe1xuICAgMTUxXHQgICAgICAgICAgICAgICAgICAgIHdyaXRlU2VsZWN0Q29tbWFuZChieXRlQnVmLGkpO1xuICAgMTUyXHQgICAgICAgICAgICAgICAgICAgIGZsdXNoSWZOZWVkZWQoYnl0ZUJ1ZixmaWxlQ2hhbm5lbCk7XG4gICAxNTNcdCAgICAgICAgICAgICAgICB9XG4gICAxNTRcdCAgICAgICAgICAgICAgICBmb3IoTWFwLkVudHJ5PEJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhPiBlbnRyeSA6IGRiRGF0YS5lbnRyeVNldCgpKXtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICBCeXRlc1dyYXBwZXIga2V5ID0gZW50cnkuZ2V0S2V5KCk7XG4gICAxNTZcdCAgICAgICAgICAgICAgICAgICAgUmVkaXNEYXRhIHZhbHVlID0gZW50cnkuZ2V0VmFsdWUoKTtcbiAgIDE1N1x0XG4gICAxNThcdCAgICAgICAgICAgICAgICAgICAgTGlzdDxSZXNwPiBjb21tYW5kTGlzdCA9IHZhbHVlLmNvbnZlcnRUb1JFU1AoKTtcbiAgIDE1OVx0ICAgICAgICAgICAgICAgICAgICBmb3IoUmVzcCBjb21tYW5kIDogY29tbWFuZExpc3Qpe1xuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kLndyaXRlKGNvbW1hbmQsIGJ5dGVCdWYpO1xuICAgMTYxXHQgICAgICAgICAgICAgICAgICAgICAgICBmbHVzaElmTmVlZGVkKGJ5dGVCdWYsZmlsZUNoYW5uZWwpO1xuICAgMTYyXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDE2M1x0ICAgICAgICAgICAgICAgIH1cbiAgIDE2NFx0ICAgICAgICAgICAgfVxuICAgMTY1XHQgICAgICAgICAgICBpZihieXRlQnVmLnJlYWRhYmxlQnl0ZXMoKT4wKXtcbiAgIDE2Nlx0ICAgICAgICAgICAgICAgIEJ5dGVCdWZmZXIgIGJ5dGVCdWZmZXIgPSBieXRlQnVmLm5pb0J1ZmZlcigpO1xuICAgMTY3XHQgICAgICAgICAgICAgICAgZmlsZUNoYW5uZWwud3JpdGUoYnl0ZUJ1ZmZlcik7XG4gICAxNjhcdCAgICAgICAgICAgIH1cbiAgIDE2OVx0XG4gICAxNzBcdCAgICAgICAgfWNhdGNoKEV4Y2VwdGlvbiBlKXtcbiAgIDE3MVx0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZHVyaW5nIEFPRlJld3JpdGVyXCIsIGUpO1xuICAgMTcyXHQgICAgICAgIH1cbiAgIDE3M1x0ICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDE3NFx0ICAgIH1cbiAgIDE3NVx0XG4gICAxNzZcdCAgICBwcml2YXRlIHZvaWQgd3JpdGVTZWxlY3RDb21tYW5kKEJ5dGVCdWYgYnl0ZUJ1ZiwgaW50IGkpIHtcbiAgIDE3N1x0ICAgICAgICBMaXN0PFJlc3A+IHNlbGVjdENvbW1hbmQgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDE3OFx0ICAgICAgICBzZWxlY3RDb21tYW5kLmFkZChuZXcgQnVsa1N0cmluZyhuZXcgQnl0ZXNXcmFwcGVyKFwiU0VMRUNUXCIuZ2V0Qnl0ZXMoKSkpKTtcbiAgIDE3OVx0ICAgICAgICBzZWxlY3RDb21tYW5kLmFkZChuZXcgQnVsa1N0cmluZyhuZXcgQnl0ZXNXcmFwcGVyKFN0cmluZy52YWx1ZU9mKGkpLmdldEJ5dGVzKCkpKSk7XG4gICAxODBcdFxuICAgMTgxXHQgICAgICAgIFJlc3BBcnJheSBzZWxlY3RDb21tYW5kQXJyYXkgPSBuZXcgUmVzcEFycmF5KHNlbGVjdENvbW1hbmQudG9BcnJheShuZXcgUmVzcFswXSkpO1xuICAgMTgyXHQgICAgICAgIHNlbGVjdENvbW1hbmRBcnJheS53cml0ZShzZWxlY3RDb21tYW5kQXJyYXksIGJ5dGVCdWYpO1xuICAgMTgzXHRcbiAgIDE4NFx0ICAgIH1cbiAgIDE4NVx0XG4gICAxODZcdCAgICBwcml2YXRlIHZvaWQgZmx1c2hJZk5lZWRlZChCeXRlQnVmIGJ1ZmZlciwgRmlsZUNoYW5uZWwgY2hhbm5lbCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgIDE4N1x0ICAgICAgICAvLyDlvZPnvJPlhrLljLrkvb/nlKjotoXov4c3NSXml7bliLfmlrBcbiAgIDE4OFx0ICAgICAgICBpZiAoYnVmZmVyLnJlYWRhYmxlQnl0ZXMoKSA+IChidWZmZXJTaXplICogMC43NSkpIHtcbiAgIDE4OVx0ICAgICAgICAgICAgQnl0ZUJ1ZmZlciBieXRlQnVmZmVyID0gYnVmZmVyLm5pb0J1ZmZlcigpO1xuICAgMTkwXHQgICAgICAgICAgICBjaGFubmVsLndyaXRlKGJ5dGVCdWZmZXIpO1xuICAgMTkxXHQgICAgICAgICAgICBidWZmZXIuY2xlYXIoKTtcbiAgIDE5Mlx0ICAgICAgICB9XG4gICAxOTNcdCAgICB9XG4gICAxOTRcdFxuICAgMTk1XHRcbiAgIDE5Nlx0fVxuICAgMTk3XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDE5N1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxVGs3SDJVc3BMYkY0QmlpYnhjUE55SCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQxOTo1NDowOC43NDRaIiwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkee7p+e7reS6huino0FPRuWkhOeQhuWZqOeahOWunueOsO+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjFkNGU2ZmZjLWRlN2ItNDI1MS05OTU3LWY5YmNkYWY0NjIwOCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUZuWFZWN25IYW41UTZyQ1AyQldLbnIiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Byb2Nlc3Nvci9BT0ZQcm9jZXNzb3IuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IuiuqeaIkeWGjeS6huino+S4gOS4i0FPRuWkhOeQhuWZqOWSjFJEQuWkhOeQhuWZqOeahOWunueOsO+8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvQU9GSGFuZGxlci5qYXZhOlxuICAgICAxXHRwYWNrYWdlIHNpdGUuaG5meTI1OC5hb2Y7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG4gICAgIDRcdGltcG9ydCBpby5uZXR0eS5idWZmZXIuVW5wb29sZWQ7XG4gICAgIDVcdGltcG9ydCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuQ29tcGxldGVGdXR1cmU7XG4gICAgIDZcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbiAgICAgN1x0aW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG4gICAgIDhcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLmxvYWRlci5BT0ZMb2FkZXI7XG4gICAgIDlcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLmxvYWRlci5Mb2FkZXI7XG4gICAgMTBcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnByb2Nlc3Nvci5BT0ZQcm9jZXNzb3I7XG4gICAgMTFcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnByb2Nlc3Nvci5Qcm9jZXNzb3I7XG4gICAgMTJcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnJld3JpdGVyLkFPRlJld3JpdGVyO1xuICAgIDEzXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi53cml0ZXIuQU9GV3JpdGVyO1xuICAgIDE0XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi53cml0ZXIuV3JpdGVyO1xuICAgIDE1XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG4gICAgMTZcdFxuICAgIDE3XHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAxOFx0aW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7XG4gICAgMTlcdGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuICAgIDIwXHRpbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zO1xuICAgIDIxXHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMjJcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db21wbGV0YWJsZUZ1dHVyZTtcbiAgICAyM1x0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNCb29sZWFuO1xuICAgIDI0XHRcbiAgICAyNVx0LyoqXG4gICAgMjZcdCAqIEFPRuWkhOeQhuWZqO+8jOi0n+i0o+euoeeQhkFPRueahOWQhOS4que7hOS7tuWSjOaTjeS9nFxuICAgIDI3XHQgKi9cbiAgICAyOFx0cHVibGljIGNsYXNzIEFPRkhhbmRsZXIge1xuICAgIDI5XHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQU9GSGFuZGxlci5jbGFzcyk7XG4gICAgMzBcdFxuICAgIDMxXHQgICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcgZmlsZW5hbWU7ICAgICAgICAgICAgICAgLy8gQU9G5paH5Lu25ZCNXG4gICAgMzJcdCAgICBwcml2YXRlIGZpbmFsIFdyaXRlciB3cml0ZXI7ICAgICAgICAgICAgICAgICAvLyBBT0blhpnlhaXlmahcbiAgICAzM1x0ICAgIHByaXZhdGUgZmluYWwgUHJvY2Vzc29yIHByb2Nlc3NvcjsgICAgICAgICAgIC8vIEFPRuWkhOeQhuWZqFxuICAgIDM0XHQgICAgcHJpdmF0ZSBmaW5hbCBMb2FkZXIgbG9hZGVyOyAgICAgICAgICAgICAgICAgLy8gQU9G5Yqg6L295ZmoXG4gICAgMzVcdCAgICBwcml2YXRlIGZpbmFsIEFPRkJhY2tncm91bmRTZXJ2aWNlIGJhY2tncm91bmRTZXJ2aWNlOyAgLy8gQU9G5ZCO5Y+w5pyN5YqhXG4gICAgMzZcdCAgICBwcml2YXRlIEFPRlN5bmNTdHJhdGVneSBzeW5jU3RyYXRlZ3k7ICAgICAgICAvLyDlkIzmraXnrZbnlaVcbiAgICAzN1x0XG4gICAgMzhcdCAgICBwcml2YXRlIEFPRlJld3JpdGVyIHJld3JpdGVyO1xuICAgIDM5XHQgICAgcHJpdmF0ZSBmaW5hbCBBdG9taWNCb29sZWFuIHJld3JpdGluZztcbiAgICA0MFx0ICAgIHByaXZhdGUgVGhyZWFkIHJld3JpdGVUaHJlYWQ7XG4gICAgNDFcdCAgICBMaXN0PEJ5dGVCdWZmZXI+IHJld3JpdGVCdWZmZXI7XG4gICAgNDJcdCAgICBwcml2YXRlIEF0b21pY0Jvb2xlYW4gY29sbGVjdGluZ1Jld3JpdGVCdWZmZXIgPSBuZXcgQXRvbWljQm9vbGVhbihmYWxzZSk7XG4gICAgNDNcdFxuICAgIDQ0XHQgICAgcHJpdmF0ZSBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiByZXdyaXRlRnV0dXJlO1xuICAgIDQ1XHRcbiAgICA0Nlx0ICAgIC8qKlxuICAgIDQ3XHQgICAgICog5p6E6YCgQU9G5aSE55CG5ZmoXG4gICAgNDhcdCAgICAgKiBAcGFyYW0gZmlsZW5hbWUgQU9G5paH5Lu25ZCNXG4gICAgNDlcdCAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIOWmguaenOWIm+W7uuaWh+S7tuWksei0pVxuICAgIDUwXHQgICAgICovXG4gICAgNTFcdCAgICBwdWJsaWMgQU9GSGFuZGxlcihTdHJpbmcgZmlsZW5hbWUsIFJlZGlzQ29yZSByZWRpc0NvcmUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgNTJcdCAgICAgICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgIDUzXHQgICAgICAgIC8vIDEuIOiuvue9rum7mOiupOWQjOatpeetlueVpeS4uuavj+enkuWQjOatpVxuICAgIDU0XHQgICAgICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gQU9GU3luY1N0cmF0ZWd5LkVWRVJZU0VDO1xuICAgIDU1XHQgICAgICAgIC8vIDIuIOWIm+W7ukFPRuWGmeWFpeWZqFxuICAgIDU2XHQgICAgICAgIHRoaXMud3JpdGVyID0gbmV3IEFPRldyaXRlcihmaWxlbmFtZSwgc3luY1N0cmF0ZWd5KTtcbiAgICA1N1x0ICAgICAgICAvLyAzLiDliJvlu7pBT0blpITnkIblmajvvIzorr7nva7nvJPlhrLljLrlpKflsI/kuLoyTUJcbiAgICA1OFx0ICAgICAgICB0aGlzLnByb2Nlc3NvciA9IG5ldyBBT0ZQcm9jZXNzb3Iod3JpdGVyLCAyICogMTAyNCAqIDEwMjQpO1xuICAgIDU5XHQgICAgICAgIC8vIDQuIOWIm+W7ukFPRuWKoOi9veWZqFxuICAgIDYwXHQgICAgICAgIHRoaXMubG9hZGVyID0gbmV3IEFPRkxvYWRlcigpO1xuICAgIDYxXHQgICAgICAgIC8vIDUuIOWIm+W7ukFPRuWQjuWPsOacjeWKoVxuICAgIDYyXHQgICAgICAgIHRoaXMuYmFja2dyb3VuZFNlcnZpY2UgPSBuZXcgQU9GQmFja2dyb3VuZFNlcnZpY2UocHJvY2Vzc29yLCBzeW5jU3RyYXRlZ3kpO1xuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICB0aGlzLnJld3JpdGVyID0gbmV3IEFPRlJld3JpdGVyKHJlZGlzQ29yZSwgZmlsZW5hbWUsMioxMDI0KjEwMjQpO1xuICAgIDY1XHQgICAgICAgIHRoaXMucmV3cml0aW5nID0gbmV3IEF0b21pY0Jvb2xlYW4oZmFsc2UpO1xuICAgIDY2XHQgICAgfVxuICAgIDY3XHRcbiAgICA2OFx0ICAgIC8qKlxuICAgIDY5XHQgICAgICog5ZCv5YqoQU9G5aSE55CG5ZmoXG4gICAgNzBcdCAgICAgKi9cbiAgICA3MVx0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KCkge1xuICAgIDcyXHQgICAgICAgIC8vIOWQr+WKqOWQjuWPsOacjeWKoVxuICAgIDczXHQgICAgICAgIGJhY2tncm91bmRTZXJ2aWNlLnN0YXJ0KCk7XG4gICAgNzRcdCAgICB9XG4gICAgNzVcdFxuICAgIDc2XHQgICAgLyoqXG4gICAgNzdcdCAgICAgKiDov73liqDlkb3ku6TliLBBT0ZcbiAgICA3OFx0ICAgICAqIEBwYXJhbSBjb21tYW5kIOimgei/veWKoOeahOWRveS7pFxuICAgIDc5XHQgICAgICovXG4gICAgODBcdCAgICBwdWJsaWMgdm9pZCBhcHBlbmQoUmVzcCBjb21tYW5kKSB7XG4gICAgODFcdCAgICAgICAgLy8g5bCG5ZG95Luk5Lqk57uZ5aSE55CG5Zmo77yM5aSE55CG5Zmo5Lya5LuO5a+55bqU55qEQ29tbWFuZOmYn+WIl+S4reiOt+WPluWRveS7pFxuICAgIDgyXHQgICAgICAgIHByb2Nlc3Nvci5hcHBlbmQoY29tbWFuZCk7XG4gICAgODNcdFxuICAgIDg0XHQgICAgICAgIGlmKGNvbGxlY3RpbmdSZXdyaXRlQnVmZmVyLmdldCgpICYmIHJld3JpdGVCdWZmZXIgIT0gbnVsbCl7XG4gICAgODVcdCAgICAgICAgICAgIEJ5dGVCdWYgYnVmID0gVW5wb29sZWQuZGlyZWN0QnVmZmVyKCk7XG4gICAgODZcdCAgICAgICAgICAgIGNvbW1hbmQud3JpdGUoY29tbWFuZCwgYnVmKTtcbiAgICA4N1x0ICAgICAgICAgICAgQnl0ZUJ1ZmZlciBieXRlQnVmZmVyID0gYnVmLm5pb0J1ZmZlcigpO1xuICAgIDg4XHQgICAgICAgICAgICByZXdyaXRlQnVmZmVyLmFkZChieXRlQnVmZmVyKTtcbiAgICA4OVx0ICAgICAgICAgICAgYnVmLnJlbGVhc2UoKTtcbiAgICA5MFx0ICAgICAgICB9XG4gICAgOTFcdCAgICB9XG4gICAgOTJcdFxuICAgIDkzXHQgICAgLyoqXG4gICAgOTRcdCAgICAgKiDlgZzmraJBT0blpITnkIblmahcbiAgICA5NVx0ICAgICAqL1xuICAgIDk2XHQgICAgcHVibGljIHZvaWQgc3RvcCgpIHtcbiAgICA5N1x0ICAgICAgICAvLyAxLiDlgZzmraLlkI7lj7DmnI3liqFcbiAgICA5OFx0ICAgICAgICBiYWNrZ3JvdW5kU2VydmljZS5zdG9wKCk7XG4gICAgOTlcdCAgICAgICAgLy8gMi4g5YWz6Zet5YaZ5YWl5ZmoXG4gICAxMDBcdCAgICAgICAgd3JpdGVyLmNsb3NlKCk7XG4gICAxMDFcdFxuICAgMTAyXHQgICAgfVxuICAgMTAzXHRcbiAgIDEwNFx0ICAgIC8qKlxuICAgMTA1XHQgICAgICog6K6+572u5ZCM5q2l562W55WlXG4gICAxMDZcdCAgICAgKiBAcGFyYW0gc3RyYXRlZ3kg5paw55qE5ZCM5q2l562W55WlXG4gICAxMDdcdCAgICAgKi9cbiAgIDEwOFx0ICAgIHB1YmxpYyB2b2lkIHNldFN5bmNTdHJhdGVneShBT0ZTeW5jU3RyYXRlZ3kgc3RyYXRlZ3kpIHtcbiAgIDEwOVx0ICAgICAgICB0aGlzLnN5bmNTdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgMTEwXHQgICAgfVxuICAgMTExXHRcbiAgIDExMlx0ICAgIC8qKlxuICAgMTEzXHQgICAgICog5Yqg6L29QU9G5paH5Lu2XG4gICAxMTRcdCAgICAgKiBAcGFyYW0gcmVkaXNDb3JlIFJlZGlz5qC45b+D5a6e5L6LXG4gICAxMTVcdCAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIOWmguaenOWKoOi9veWksei0pVxuICAgMTE2XHQgICAgICovXG4gICAxMTdcdCAgICBwdWJsaWMgdm9pZCBsb2FkKFJlZGlzQ29yZSByZWRpc0NvcmUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAxMThcdCAgICAgICAgLy8g5L2/55So5Yqg6L295Zmo5Yqg6L29QU9G5paH5Lu2XG4gICAxMTlcdCAgICAgICAgbG9hZGVyLmxvYWQoZmlsZW5hbWUsIHJlZGlzQ29yZSk7XG4gICAxMjBcdCAgICB9XG4gICAxMjFcdFxuICAgMTIyXHQgICAgcHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgIDEyM1x0ICAgICAgICBpZiAocmV3cml0aW5nLmdldCgpKSB7XG4gICAxMjRcdCAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5bey5pyJ6YeN5YaZ5Lu75Yqh5Zyo6L+b6KGM5Lit77yM5b+955Wl5q2k5qyh6K+35rGCXCIpO1xuICAgMTI1XHQgICAgICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgMTI2XHQgICAgICAgICAgICBmdXR1cmUuY29tcGxldGUoZmFsc2UpO1xuICAgMTI3XHQgICAgICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgMTI4XHQgICAgICAgIH1cbiAgIDEyOVx0ICAgICAgICBpZiAoIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgMTMwXHQgICAgICAgICAgICBsb2dnZXIud2FybihcIumHjeWGmeaWh+S7tuWksei0pe+8jOivt+ajgOafpemHjeWGmeaWh+S7tuaYr+WQpuato+WcqOiiq+S9v+eUqFwiKTtcbiAgIDEzMVx0ICAgICAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgIDEzMlx0ICAgICAgICAgICAgZnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgIDEzM1x0ICAgICAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgIDEzNFx0ICAgICAgICB9XG4gICAxMzVcdFxuICAgMTM2XHQgICAgICAgIGlmIChyZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSwgdHJ1ZSkpIHtcbiAgIDEzN1x0ICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XG4gICAxMzhcdCAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlLnJ1bkFzeW5jKCgpIC0+IHtcbiAgIDEzOVx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZ6YC76L6R5YmN77yM56Gu5L+d5omA5pyJ5pWw5o2u6YO95bey5Yi355uYXG4gICAxNDFcdCAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc29yLmZsdXNoKCk7XG4gICAxNDJcdFxuICAgMTQzXHQgICAgICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmVxuICAgMTQ0XHQgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGUoKTtcbiAgIDE0NVx0XG4gICAxNDZcdCAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bph43lhpnmiJDlip/lrozmiJBcIik7XG4gICAxNDhcdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJBT0bph43lhpnlpLHotKVcIik7XG4gICAxNTBcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMTUxXHRcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xuICAgMTUzXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnov4fnqIvkuK3lh7rplJlcIiwgZSk7XG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAxNTZcdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgMTU4XHQgICAgICAgICAgICAgICAgfVxuICAgMTU5XHQgICAgICAgICAgICB9KTtcbiAgIDE2MFx0ICAgICAgICB9XG4gICAxNjFcdCAgICAgICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG4gICAxNjJcdCAgICAgICAgfVxuICAgMTYzXHRcbiAgIDE2NFx0XG4gICAxNjVcdFxuICAgMTY2XHQgICAgcHVibGljIGJvb2xlYW4gaXNSZXdyaXRpbmcoKXtcbiAgIDE2N1x0ICAgICAgICByZXR1cm4gcmV3cml0aW5nLmdldCgpO1xuICAgMTY4XHQgICAgfVxuICAgMTY5XHRcbiAgIDE3MFx0XG4gICAxNzFcdFxuICAgMTcyXHQgICAgcHVibGljIHZvaWQgc3RhcnRSZXdyaXRlQnVmZmVyKCkge1xuICAgMTczXHQgICAgICAgIHJld3JpdGVCdWZmZXIgPSBDb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRMaXN0KG5ldyBBcnJheUxpc3Q8PigpKTtcbiAgIDE3NFx0ICAgICAgICBjb2xsZWN0aW5nUmV3cml0ZUJ1ZmZlci5zZXQodHJ1ZSk7XG4gICAxNzVcdCAgICB9XG4gICAxNzZcdFxuICAgMTc3XHRcbiAgIDE3OFx0ICAgIHB1YmxpYyB2b2lkIGRpc2NhcmRSZXdyaXRlQnVmZmVyKCkge1xuICAgMTc5XHQgICAgICAgIGNvbGxlY3RpbmdSZXdyaXRlQnVmZmVyLnNldChmYWxzZSk7XG4gICAxODBcdCAgICAgICAgcmV3cml0ZUJ1ZmZlciA9IG51bGw7XG4gICAxODFcdCAgICB9XG4gICAxODJcdFxuICAgMTgzXHQgICAgcHVibGljIExpc3Q8Qnl0ZUJ1ZmZlcj4gc3RvcFJld3JpdGVCdWZmZXJBbmRHZXQoKSB7XG4gICAxODRcdCAgICAgICAgY29sbGVjdGluZ1Jld3JpdGVCdWZmZXIuc2V0KGZhbHNlKTtcbiAgIDE4NVx0ICAgICAgICBMaXN0PEJ5dGVCdWZmZXI+IHJlc3VsdCA9IHJld3JpdGVCdWZmZXI7XG4gICAxODZcdCAgICAgICAgcmV3cml0ZUJ1ZmZlciA9IG51bGw7XG4gICAxODdcdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgIDE4OFx0ICAgIH1cbiAgIDE4OVx0fVxuICAgMTkwXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDE5MFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxR0doeVBSM3FSM2hLaU1YblFBdmlvUiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQxOTo1NDoxMy4wMDlaIiwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkeWGjeS6huino+S4gOS4i0FPRuWkhOeQhuWZqOWSjFJEQuWkhOeQhuWZqOeahOWunueOsO+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjdhZTQ1NGQ0LTdiOGYtNDE1NC1hZTUzLTJlZGNkNTdlYmUyYiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVVmS2VzVjNxa3VxNnJBcE1NVDZuVmIiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvcmRiL2NvcmUvUkRCSGFuZGxlci5qYXZhXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcHJvY2Vzc29yL0FPRlByb2Nlc3Nvci5qYXZhOlxuICAgICAxXHRwYWNrYWdlIHNpdGUuaG5meTI1OC5hb2YucHJvY2Vzc29yO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuICAgICA0XHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLlVucG9vbGVkO1xuICAgICA1XHRpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG4gICAgIDZcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLndyaXRlci5Xcml0ZXI7XG4gICAgIDdcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbiAgICAgOFx0aW1wb3J0IHNpdGUuaG5meTI1OC51dGlscy5Eb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlO1xuICAgICA5XHRcbiAgICAxMFx0aW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG4gICAgMTFcdGltcG9ydCBqYXZhLm5pby5CeXRlQnVmZmVyO1xuICAgIDEyXHRpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuTGlua2VkQmxvY2tpbmdRdWV1ZTtcbiAgICAxM1x0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlRpbWVVbml0O1xuICAgIDE0XHRpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0Jvb2xlYW47XG4gICAgMTVcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5sb2Nrcy5SZWVudHJhbnRMb2NrO1xuICAgIDE2XHRcbiAgICAxN1x0LyoqXG4gICAgMThcdCAqIEFPRuWkhOeQhuWZqO+8jOi0n+i0o+WwhuWRveS7pOi/veWKoOWIsEFPRuaWh+S7tlxuICAgIDE5XHQgKi9cbiAgICAyMFx0cHVibGljIGNsYXNzIEFPRlByb2Nlc3NvciBpbXBsZW1lbnRzIFByb2Nlc3NvciB7XG4gICAgMjFcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihBT0ZQcm9jZXNzb3IuY2xhc3MpO1xuICAgIDIyXHRcbiAgICAyM1x0ICAgIHByaXZhdGUgZmluYWwgRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZSBidWZmZXJRdWV1ZTsgICAgLy8g5Y+M57yT5Yay6Zif5YiXXG4gICAgMjRcdCAgICBwcml2YXRlIGZpbmFsIFdyaXRlciB3cml0ZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWh+S7tuWGmeWFpeWZqFxuICAgIDI1XHQgICAgcHJpdmF0ZSBmaW5hbCBBdG9taWNCb29sZWFuIHJ1bm5pbmc7ICAgICAgICAgICAgICAgICAgICAvLyDov5DooYznirbmgIHmoIflv5dcbiAgICAyNlx0XG4gICAgMjdcdFxuICAgIDI4XHQgICAgcHJpdmF0ZSBmaW5hbCBpbnQgYmF0Y2hTaXplO1xuICAgIDI5XHQgICAgcHJpdmF0ZSBCeXRlQnVmIGJhdGNoQnVmZmVyO1xuICAgIDMwXHQgICAgcHJpdmF0ZSBmaW5hbCBSZWVudHJhbnRMb2NrIGJhdGNoTG9jayA9IG5ldyBSZWVudHJhbnRMb2NrKCk7XG4gICAgMzFcdCAgICAvKipcbiAgICAzMlx0ICAgICAqIOaehOmAoEFPRuWkhOeQhuWZqFxuICAgIDMzXHQgICAgICogQHBhcmFtIHdyaXRlciDmlofku7blhpnlhaXlmahcbiAgICAzNFx0ICAgICAqIEBwYXJhbSBidWZmZXJTaXplIOe8k+WGsuWMuuWkp+Wwj1xuICAgIDM1XHQgICAgICovXG4gICAgMzZcdCAgICBwdWJsaWMgQU9GUHJvY2Vzc29yKFdyaXRlciB3cml0ZXIsIGludCBidWZmZXJTaXplLCBpbnQgYmF0Y2hTaXplKSB7XG4gICAgMzdcdCAgICAgICAgLy8gMS4g5Yid5aeL5YyW57uE5Lu2XG4gICAgMzhcdCAgICAgICAgdGhpcy53cml0ZXIgPSB3cml0ZXI7XG4gICAgMzlcdCAgICAgICAgdGhpcy5idWZmZXJRdWV1ZSA9IG5ldyBEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlKGJ1ZmZlclNpemUpO1xuICAgIDQwXHQgICAgICAgIHRoaXMucnVubmluZyA9IG5ldyBBdG9taWNCb29sZWFuKHRydWUpO1xuICAgIDQxXHQgICAgICAgIHRoaXMuYmF0Y2hTaXplID0gYmF0Y2hTaXplO1xuICAgIDQyXHQgICAgICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBVbnBvb2xlZC5kaXJlY3RCdWZmZXIoYmF0Y2hTaXplKTtcbiAgICA0M1x0ICAgIH1cbiAgICA0NFx0XG4gICAgNDVcdCAgICBwdWJsaWMgQU9GUHJvY2Vzc29yKFdyaXRlciB3cml0ZXIsIGludCBidWZmZXJTaXplKSB7XG4gICAgNDZcdCAgICAgICAgdGhpcyh3cml0ZXIsIGJ1ZmZlclNpemUsIDQwOTYpOyAvLyDpu5jorqTmibnlpITnkIblpKflsI/kuLo0S0JcbiAgICA0N1x0ICAgIH1cbiAgICA0OFx0XG4gICAgNDlcdCAgICBAT3ZlcnJpZGVcbiAgICA1MFx0ICAgIHB1YmxpYyB2b2lkIGFwcGVuZChSZXNwIGNvbW1hbmQpIHtcbiAgICA1MVx0ICAgICAgICAvLyDlpoLmnpzkuI3lnKjov5DooYznirbmgIHvvIzkuI3lpITnkIblkb3ku6RcbiAgICA1Mlx0ICAgICAgICBpZiAoIXJ1bm5pbmcuZ2V0KCkpIHtcbiAgICA1M1x0ICAgICAgICAgICAgcmV0dXJuO1xuICAgIDU0XHQgICAgICAgIH1cbiAgICA1NVx0XG4gICAgNTZcdCAgICAgICAgdHJ5IHtcbiAgICA1N1x0ICAgICAgICAgICAgYmF0Y2hMb2NrLmxvY2soKTtcbiAgICA1OFx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA1OVx0ICAgICAgICAgICAgICAgIC8vIOS8sOiuoeWRveS7pOWkp+Wwj++8jOWmguaenOi2hei/h+aJueWkhOeQhue8k+WGsuWMuuWkp+Wwj++8jOebtOaOpeWGmeWFpVxuICAgIDYwXHQgICAgICAgICAgICAgICAgaW50IGVzdGltYXRlZFNpemUgPSBlc3RpbWF0ZUNvbW1hbmRTaXplKGNvbW1hbmQpO1xuICAgIDYxXHRcbiAgICA2Mlx0ICAgICAgICAgICAgICAgIGlmIChlc3RpbWF0ZWRTaXplID4gYmF0Y2hTaXplKSB7XG4gICAgNjNcdCAgICAgICAgICAgICAgICAgICAgLy8g5ZG95Luk5aSq5aSn77yM5Y2V54us5aSE55CGXG4gICAgNjRcdCAgICAgICAgICAgICAgICAgICAgQnl0ZUJ1ZiBidWYgPSBVbnBvb2xlZC5kaXJlY3RCdWZmZXIoZXN0aW1hdGVkU2l6ZSk7XG4gICAgNjVcdCAgICAgICAgICAgICAgICAgICAgY29tbWFuZC53cml0ZShjb21tYW5kLCBidWYpO1xuICAgIDY2XHQgICAgICAgICAgICAgICAgICAgIEJ5dGVCdWZmZXIgYnl0ZUJ1ZmZlciA9IGJ1Zi5uaW9CdWZmZXIoKTtcbiAgICA2N1x0ICAgICAgICAgICAgICAgICAgICBidWZmZXJRdWV1ZS5wdXQoYnl0ZUJ1ZmZlcik7XG4gICAgNjhcdCAgICAgICAgICAgICAgICAgICAgYnVmLnJlbGVhc2UoKTtcbiAgICA2OVx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgNzBcdCAgICAgICAgICAgICAgICB9XG4gICAgNzFcdFxuICAgIDcyXHQgICAgICAgICAgICAgICAgLy8g5aaC5p6c5om55aSE55CG57yT5Yay5Yy65Ymp5L2Z56m66Ze05LiN6Laz77yM5YWI5Yi35pawXG4gICAgNzNcdCAgICAgICAgICAgICAgICBpZiAoYmF0Y2hCdWZmZXIud3JpdGFibGVCeXRlcygpIDwgZXN0aW1hdGVkU2l6ZSkge1xuICAgIDc0XHQgICAgICAgICAgICAgICAgICAgIGZsdXNoQmF0Y2goKTtcbiAgICA3NVx0ICAgICAgICAgICAgICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICAgICAgICAgICAgICAvLyDlsIblkb3ku6TlhpnlhaXmibnlpITnkIbnvJPlhrLljLpcbiAgICA3OFx0ICAgICAgICAgICAgICAgIGludCB3cml0ZXJJbmRleCA9IGJhdGNoQnVmZmVyLndyaXRlckluZGV4KCk7XG4gICAgNzlcdCAgICAgICAgICAgICAgICBjb21tYW5kLndyaXRlKGNvbW1hbmQsIGJhdGNoQnVmZmVyKTtcbiAgICA4MFx0XG4gICAgODFcdCAgICAgICAgICAgICAgICAvLyDlpoLmnpzmibnlpITnkIbnvJPlhrLljLrlt7Lmu6HvvIzliLfmlrBcbiAgICA4Mlx0ICAgICAgICAgICAgICAgIGlmIChiYXRjaEJ1ZmZlci53cml0YWJsZUJ5dGVzKCkgPCBiYXRjaFNpemUgLyAxMCkgeyAvLyDliankvZnkuI3otrMxMCXml7bliLfmlrBcbiAgICA4M1x0ICAgICAgICAgICAgICAgICAgICBmbHVzaEJhdGNoKCk7XG4gICAgODRcdCAgICAgICAgICAgICAgICB9XG4gICAgODVcdCAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgODZcdCAgICAgICAgICAgICAgICBiYXRjaExvY2sudW5sb2NrKCk7XG4gICAgODdcdCAgICAgICAgICAgIH1cbiAgICA4OFx0ICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7XG4gICAgODlcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFPRlByb2Nlc3Nvci5hcHBlbmQoKSBpbnRlcnJ1cHRlZFwiLCBlKTtcbiAgICA5MFx0ICAgICAgICAgICAgVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTtcbiAgICA5MVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDkyXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0ZQcm9jZXNzb3IuYXBwZW5kKCkgZXJyb3JcIiwgZSk7XG4gICAgOTNcdCAgICAgICAgfVxuICAgIDk0XHQgICAgfVxuICAgIDk1XHRcbiAgICA5Nlx0XG4gICAgOTdcdCAgICBwcml2YXRlIGludCBlc3RpbWF0ZUNvbW1hbmRTaXplKFJlc3AgY29tbWFuZCkge1xuICAgIDk4XHQgICAgICAgIGlmIChjb21tYW5kID09IG51bGwpIHtcbiAgICA5OVx0ICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAxMDBcdCAgICAgICAgfVxuICAgMTAxXHRcbiAgIDEwMlx0ICAgICAgICByZXR1cm4gMTI4O1xuICAgMTAzXHQgICAgfVxuICAgMTA0XHRcbiAgIDEwNVx0ICAgIC8qKlxuICAgMTA2XHQgICAgICog5Yi35paw5om55aSE55CG57yT5Yay5Yy6XG4gICAxMDdcdCAgICAgKi9cbiAgIDEwOFx0ICAgIHByaXZhdGUgdm9pZCBmbHVzaEJhdGNoKCkgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uIHtcbiAgIDEwOVx0ICAgICAgICBpZiAoIGJhdGNoQnVmZmVyID09IG51bGx8fGJhdGNoQnVmZmVyLnJlYWRhYmxlQnl0ZXMoKSA8PSAwKSB7XG4gICAxMTBcdCAgICAgICAgICAgIHJldHVybjtcbiAgIDExMVx0ICAgICAgICB9XG4gICAxMTJcdFxuICAgMTEzXHQgICAgICAgIC8vIOiOt+WPluaJueWkhOeQhueahEJ5dGVCdWZmZXLlubbmlL7lhaXpmJ/liJdcbiAgIDExNFx0ICAgICAgICBCeXRlQnVmZmVyIGJ5dGVCdWZmZXIgPSBiYXRjaEJ1ZmZlci5uaW9CdWZmZXIoMCwgYmF0Y2hCdWZmZXIucmVhZGFibGVCeXRlcygpKTtcbiAgIDExNVx0ICAgICAgICBidWZmZXJRdWV1ZS5wdXQoYnl0ZUJ1ZmZlcik7XG4gICAxMTZcdFxuICAgMTE3XHQgICAgICAgIC8vIOmHiuaUvuaXp+e8k+WGsuWMuu+8jOWIm+W7uuaWsOe8k+WGsuWMulxuICAgMTE4XHQgICAgICAgIGJhdGNoQnVmZmVyLnJlbGVhc2UoKTtcbiAgIDExOVx0ICAgICAgICBiYXRjaEJ1ZmZlciA9IFVucG9vbGVkLmRpcmVjdEJ1ZmZlcihiYXRjaFNpemUpO1xuICAgMTIwXHQgICAgfVxuICAgMTIxXHRcbiAgIDEyMlx0XG4gICAxMjNcdCAgICBAT3ZlcnJpZGVcbiAgIDEyNFx0ICAgIHB1YmxpYyB2b2lkIGZsdXNoKCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgIDEyNVx0ICAgICAgICB0cnkge1xuICAgMTI2XHQgICAgICAgICAgICBiYXRjaExvY2subG9jaygpO1xuICAgMTI3XHQgICAgICAgICAgICB0cnkge1xuICAgMTI4XHQgICAgICAgICAgICAgICAgLy8g5Yi35paw5om55aSE55CG57yT5Yay5Yy6XG4gICAxMjlcdCAgICAgICAgICAgICAgICBmbHVzaEJhdGNoKCk7XG4gICAxMzBcdCAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAxMzFcdCAgICAgICAgICAgICAgICBiYXRjaExvY2sudW5sb2NrKCk7XG4gICAxMzJcdCAgICAgICAgICAgIH1cbiAgIDEzM1x0XG4gICAxMzRcdCAgICAgICAgICAgIC8vIOS7juWPjOe8k+WGsumYn+WIl+S4reiOt+WPluW+heWGmeWFpeeahOe8k+WGsuWMulxuICAgMTM1XHQgICAgICAgICAgICBCeXRlQnVmZmVyIGJ1ZmZlciA9IGJ1ZmZlclF1ZXVlLnBvbGwoKTtcbiAgIDEzNlx0XG4gICAxMzdcdCAgICAgICAgICAgIGlmIChidWZmZXIgIT0gbnVsbCAmJiBidWZmZXIuaGFzUmVtYWluaW5nKCkpIHtcbiAgIDEzOFx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAxMzlcdCAgICAgICAgICAgICAgICAgICAgLy8g5bCG57yT5Yay5Yy65YaZ5YWl5paH5Lu2XG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgd3JpdGVyLndyaXRlKGJ1ZmZlcik7XG4gICAxNDFcdCAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAxNDJcdCAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9GUHJvY2Vzc29yLmZsdXNoKCkgSU8gZXJyb3JcIiwgZSk7XG4gICAxNDNcdCAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgIDE0NFx0ICAgICAgICAgICAgICAgIH1cbiAgIDE0NVx0ICAgICAgICAgICAgfVxuICAgMTQ2XHQgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHtcbiAgIDE0N1x0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9GUHJvY2Vzc29yLmZsdXNoKCkgaW50ZXJydXB0ZWRcIiwgZSk7XG4gICAxNDhcdCAgICAgICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuaW50ZXJydXB0KCk7XG4gICAxNDlcdCAgICAgICAgfVxuICAgMTUwXHQgICAgfVxuICAgMTUxXHRcbiAgIDE1Mlx0ICAgIEBPdmVycmlkZVxuICAgMTUzXHQgICAgcHVibGljIHZvaWQgc3RvcCgpIHtcbiAgIDE1NFx0ICAgICAgICAvLyDlgZzmraLlpITnkIblmahcbiAgIDE1NVx0ICAgICAgICBpZiAocnVubmluZy5jb21wYXJlQW5kU2V0KHRydWUsIGZhbHNlKSkge1xuICAgMTU2XHQgICAgICAgICAgICB0cnkge1xuICAgMTU3XHQgICAgICAgICAgICAgICAgYmF0Y2hMb2NrLmxvY2soKTtcbiAgIDE1OFx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAxNTlcdCAgICAgICAgICAgICAgICAgICAgLy8g56Gu5L+d5omA5pyJ5om55aSE55CG5pWw5o2u6YO96KKr5Yi35pawXG4gICAxNjBcdCAgICAgICAgICAgICAgICAgICAgZmx1c2hCYXRjaCgpO1xuICAgMTYxXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDE2Mlx0ICAgICAgICAgICAgICAgICAgICBiYXRjaExvY2sudW5sb2NrKCk7XG4gICAxNjNcdCAgICAgICAgICAgICAgICB9XG4gICAxNjRcdFxuICAgMTY1XHQgICAgICAgICAgICAgICAgLy8g6YeK5pS+6LWE5rqQXG4gICAxNjZcdCAgICAgICAgICAgICAgICBpZiAoYmF0Y2hCdWZmZXIgIT0gbnVsbCkge1xuICAgMTY3XHQgICAgICAgICAgICAgICAgICAgIGJhdGNoQnVmZmVyLnJlbGVhc2UoKTtcbiAgIDE2OFx0ICAgICAgICAgICAgICAgICAgICBiYXRjaEJ1ZmZlciA9IG51bGw7XG4gICAxNjlcdCAgICAgICAgICAgICAgICB9XG4gICAxNzBcdCAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxNzFcdCAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBkdXJpbmcgQU9GUHJvY2Vzc29yIHNodXRkb3duXCIsIGUpO1xuICAgMTcyXHQgICAgICAgICAgICB9XG4gICAxNzNcdCAgICAgICAgfVxuICAgMTc0XHQgICAgfVxuICAgMTc1XHRcbiAgIDE3Nlx0ICAgIEBPdmVycmlkZVxuICAgMTc3XHQgICAgcHVibGljIGJvb2xlYW4gaXNSdW5uaW5nKCkge1xuICAgMTc4XHQgICAgICAgIHJldHVybiBydW5uaW5nLmdldCgpO1xuICAgMTc5XHQgICAgfVxuICAgMTgwXHRcbiAgIDE4MVx0ICAgIC8qKlxuICAgMTgyXHQgICAgICog6I635Y+W5YaZ5YWl5L2N572u77yM55So5LqO55uR5o6nXG4gICAxODNcdCAgICAgKi9cbiAgIDE4NFx0ICAgIHB1YmxpYyBsb25nIGdldFdyaXRlUG9zaXRpb24oKSB7XG4gICAxODVcdCAgICAgICAgcmV0dXJuIGJ1ZmZlclF1ZXVlLmdldFdyaXRlUG9zaXRpb24oKTtcbiAgIDE4Nlx0ICAgIH1cbiAgIDE4N1x0XG4gICAxODhcdCAgICAvKipcbiAgIDE4OVx0ICAgICAqIOiOt+WPluWIt+ebmOS9jee9ru+8jOeUqOS6juebkeaOp1xuICAgMTkwXHQgICAgICovXG4gICAxOTFcdCAgICBwdWJsaWMgbG9uZyBnZXRGbHVzaFBvc2l0aW9uKCkge1xuICAgMTkyXHQgICAgICAgIHJldHVybiBidWZmZXJRdWV1ZS5nZXRGbHVzaFBvc2l0aW9uKCk7XG4gICAxOTNcdCAgICB9XG4gICAxOTRcdFxuICAgMTk1XHQgICAgLyoqXG4gICAxOTZcdCAgICAgKiDojrflj5bmnKrliLfnm5jmlbDmja7lpKflsI/vvIznlKjkuo7nm5HmjqdcbiAgIDE5N1x0ICAgICAqL1xuICAgMTk4XHQgICAgcHVibGljIGxvbmcgZ2V0VW5mbHVzaGVkU2l6ZSgpIHtcbiAgIDE5OVx0ICAgICAgICByZXR1cm4gYnVmZmVyUXVldWUuZ2V0VW5mbHVzaGVkU2l6ZSgpO1xuICAgMjAwXHQgICAgfVxuICAgMjAxXHR9XG4gICAyMDJcdFxuICAgMjAzXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDIwM1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRm5YVlY3bkhhbjVRNnJDUDJCV0tuciJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQxOTo1NDoyNi40MDVaIiwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmZGExOTYwZi0yNzQ0LTRiN2UtYjA0Mi1lMWNlYTUzZjJkNzEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE5VGZUWng5ekd6YTZaVkhROERRWGI1IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3V0aWxzL0RvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IuiuqeaIkeWGjeS6huino+S4gOS4i+WPjOe8k+WGsumYn+WIl+eahOWunueOsO+8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJIYW5kbGVyLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnJkYi5jb3JlO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG4gICAgIDRcdGltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuICAgICA1XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5leGVjdXRvci5FeGVjdXRvck1hbmFnZXI7XG4gICAgIDZcdGltcG9ydCBzaXRlLmhuZnkyNTgucmRiLnBvbGljeS5DaGFuZ2VUcmFja2VyO1xuICAgICA3XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5wb2xpY3kuU2F2ZVBvbGljeTtcbiAgICAgOFx0XG4gICAgIDlcdGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuICAgIDEwXHRpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuKjtcbiAgICAxMVx0XG4gICAgMTJcdHB1YmxpYyBjbGFzcyBSREJIYW5kbGVyIHtcbiAgICAxM1x0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyIGxvZ2dlciA9IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyLmdldExvZ2dlcihSREJIYW5kbGVyLmNsYXNzKTtcbiAgICAxNFx0XG4gICAgMTVcdCAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgMTZcdCAgICBwcml2YXRlIGZpbmFsIFJEQlNhdmVyIHNhdmVyO1xuICAgIDE3XHQgICAgcHJpdmF0ZSBmaW5hbCBSREJMb2FkZXIgbG9hZGVyO1xuICAgIDE4XHQgICAgcHJpdmF0ZSBmaW5hbCBTYXZlUG9saWN5IHNhdmVQb2xpY3k7XG4gICAgMTlcdCAgICBwcml2YXRlIGZpbmFsIENoYW5nZVRyYWNrZXIgY2hhbmdlVHJhY2tlcjtcbiAgICAyMFx0ICAgIHByaXZhdGUgZmluYWwgRXhlY3V0b3JNYW5hZ2VyIGV4ZWN1dG9yTWFuYWdlcjtcbiAgICAyMVx0ICAgIHByaXZhdGUgZmluYWwgUkRCRmlsZU1hbmFnZXIgZmlsZU1hbmFnZXI7XG4gICAgMjJcdFxuICAgIDIzXHQgICAgcHJpdmF0ZSB2b2xhdGlsZSBib29sZWFuIGlzU2F2aW5nID0gZmFsc2U7XG4gICAgMjRcdFxuICAgIDI1XHQgICAgcHVibGljIFJEQkhhbmRsZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSkge1xuICAgIDI2XHQgICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIDI3XHQgICAgICAgIHRoaXMuZXhlY3V0b3JNYW5hZ2VyID0gbmV3IEV4ZWN1dG9yTWFuYWdlcigpO1xuICAgIDI4XHQgICAgICAgIHRoaXMuc2F2ZXIgPSBuZXcgUkRCU2F2ZXIocmVkaXNDb3JlLCBleGVjdXRvck1hbmFnZXIuZ2V0SW9FeGVjdXRvcigpKTtcbiAgICAyOVx0ICAgICAgICB0aGlzLmxvYWRlciA9IG5ldyBSREJMb2FkZXIocmVkaXNDb3JlKTtcbiAgICAzMFx0ICAgICAgICB0aGlzLnNhdmVQb2xpY3kgPSBuZXcgU2F2ZVBvbGljeSgpO1xuICAgIDMxXHQgICAgICAgIHRoaXMuY2hhbmdlVHJhY2tlciA9IG5ldyBDaGFuZ2VUcmFja2VyKCk7XG4gICAgMzJcdCAgICAgICAgdGhpcy5maWxlTWFuYWdlciA9IG5ldyBSREJGaWxlTWFuYWdlcigpO1xuICAgIDMzXHQgICAgfVxuICAgIDM0XHRcbiAgICAzNVx0ICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoKSB7XG4gICAgMzZcdCAgICAgICAgdHJ5IHtcbiAgICAzN1x0ICAgICAgICAgICAgbG9hZCgpO1xuICAgIDM4XHQgICAgICAgICAgICBzdGFydEF1dG9TYXZlKCk7XG4gICAgMzlcdCAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuICAgIDQwXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLliJ3lp4vljJZSRELlpITnkIblmajlpLHotKVcIiwgZSk7XG4gICAgNDFcdCAgICAgICAgfVxuICAgIDQyXHQgICAgfVxuICAgIDQzXHRcbiAgICA0NFx0ICAgIHByaXZhdGUgdm9pZCBzdGFydEF1dG9TYXZlKCkge1xuICAgIDQ1XHQgICAgICAgIGV4ZWN1dG9yTWFuYWdlci5nZXRTY2hlZHVsZXIoKS5zY2hlZHVsZUF0Rml4ZWRSYXRlKCgpIC0+IHtcbiAgICA0Nlx0ICAgICAgICAgICAgdHJ5IHtcbiAgICA0N1x0ICAgICAgICAgICAgICAgIGNoZWNrU2F2ZUNvbmRpdGlvbnMoKTtcbiAgICA0OFx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA0OVx0ICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuiHquWKqOS/neWtmOajgOafpeWksei0pVwiLCBlKTtcbiAgICA1MFx0ICAgICAgICAgICAgfVxuICAgIDUxXHQgICAgICAgIH0sIDEsIDEsIFRpbWVVbml0LlNFQ09ORFMpO1xuICAgIDUyXHQgICAgfVxuICAgIDUzXHRcbiAgICA1NFx0ICAgIHByaXZhdGUgdm9pZCBjaGVja1NhdmVDb25kaXRpb25zKCkge1xuICAgIDU1XHQgICAgICAgIGlmIChpc1NhdmluZykgcmV0dXJuO1xuICAgIDU2XHRcbiAgICA1N1x0ICAgICAgICBsb25nIG5vdyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC8gMTAwMDtcbiAgICA1OFx0ICAgICAgICBpZiAoc2F2ZVBvbGljeS5zaG91bGRGdWxsU2F2ZShub3cpKSB7XG4gICAgNTlcdCAgICAgICAgICAgIGJnc2F2ZSh0cnVlKTtcbiAgICA2MFx0ICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZVRyYWNrZXIuaGFzTW9kaWZpY2F0aW9ucygpKSB7XG4gICAgNjFcdCAgICAgICAgICAgIGJnc2F2ZShmYWxzZSk7XG4gICAgNjJcdCAgICAgICAgfVxuICAgIDYzXHQgICAgfVxuICAgIDY0XHRcbiAgICA2NVx0ICAgIHB1YmxpYyB2b2lkIG5vdGlmeURhdGFDaGFuZ2VkKGludCBkYkluZGV4LCBCeXRlc1dyYXBwZXIga2V5KSB7XG4gICAgNjZcdCAgICAgICAgc2F2ZVBvbGljeS5yZWNvcmRDaGFuZ2UoKTtcbiAgICA2N1x0ICAgICAgICBjaGFuZ2VUcmFja2VyLnRyYWNrQ2hhbmdlKGRiSW5kZXgsIGtleSk7XG4gICAgNjhcdCAgICB9XG4gICAgNjlcdFxuICAgIDcwXHQgICAgcHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHNhdmUoKSB7XG4gICAgNzFcdCAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICA3Mlx0ICAgICAgICBpZiAoIWJnc2F2ZSh0cnVlKSkge1xuICAgIDczXHQgICAgICAgICAgICBmdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCLlt7LmnInkv53lrZjku7vliqHov5DooYxcIikpO1xuICAgIDc0XHQgICAgICAgIH0gZWxzZSB7XG4gICAgNzVcdCAgICAgICAgICAgIGV4ZWN1dG9yTWFuYWdlci5nZXRTYXZlRXhlY3V0b3IoKS5leGVjdXRlKCgpIC0+IHtcbiAgICA3Nlx0ICAgICAgICAgICAgICAgIHdoaWxlIChpc1NhdmluZykgVGhyZWFkLnlpZWxkKCk7XG4gICAgNzdcdCAgICAgICAgICAgICAgICBmdXR1cmUuY29tcGxldGUodHJ1ZSk7XG4gICAgNzhcdCAgICAgICAgICAgIH0pO1xuICAgIDc5XHQgICAgICAgIH1cbiAgICA4MFx0ICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgIDgxXHQgICAgfVxuICAgIDgyXHRcbiAgICA4M1x0ICAgIHB1YmxpYyBib29sZWFuIGJnc2F2ZShib29sZWFuIGZ1bGxTYXZlKSB7XG4gICAgODRcdCAgICAgICAgaWYgKGlzU2F2aW5nKSB7XG4gICAgODVcdCAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5bey5pyJUkRC5L+d5a2Y5Lu75Yqh5Zyo6L+b6KGM5Lit77yM5b+955Wl5q2k5qyh6K+35rGCXCIpO1xuICAgIDg2XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgODdcdCAgICAgICAgfVxuICAgIDg4XHRcbiAgICA4OVx0ICAgICAgICBpc1NhdmluZyA9IHRydWU7XG4gICAgOTBcdCAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Vm9pZD4gc2F2ZUZ1dHVyZTtcbiAgICA5MVx0XG4gICAgOTJcdCAgICAgICAgaWYgKGZ1bGxTYXZlKSB7XG4gICAgOTNcdCAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5ZCO5Y+w5YWo6YeP5L+d5a2YUkRC5paH5Lu2XCIpO1xuICAgIDk0XHQgICAgICAgICAgICBzYXZlRnV0dXJlID0gc2F2ZXIuc2F2ZUZ1bGxSREIoKTtcbiAgICA5NVx0ICAgICAgICB9IGVsc2Uge1xuICAgIDk2XHQgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIuW8gOWni+WQjuWPsOWinumHj+S/neWtmFJEQuaWh+S7tlwiKTtcbiAgICA5N1x0ICAgICAgICAgICAgc2F2ZUZ1dHVyZSA9IHNhdmVyLnNhdmVJbmNyZW1lbnRhbFJEQihjaGFuZ2VUcmFja2VyLmdldE1vZGlmaWVkRGF0YSgpKTtcbiAgICA5OFx0ICAgICAgICB9XG4gICAgOTlcdFxuICAgMTAwXHQgICAgICAgIHNhdmVGdXR1cmUud2hlbkNvbXBsZXRlKChyZXN1bHQsIGV4KSAtPiB7XG4gICAxMDFcdCAgICAgICAgICAgIGlmIChleCAhPSBudWxsKSB7XG4gICAxMDJcdCAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLlkI7lj7Dkv53lrZhSRELmlofku7blpLHotKVcIiwgZXgpO1xuICAgMTAzXHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTA0XHQgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJSRELmlofku7ZcIiArIChmdWxsU2F2ZSA/IFwi5YWo6YePXCIgOiBcIuWinumHj1wiKSArIFwi5ZCO5Y+w5L+d5a2Y5a6M5oiQXCIpO1xuICAgMTA1XHQgICAgICAgICAgICAgICAgaWYgKGZ1bGxTYXZlKSB7XG4gICAxMDZcdCAgICAgICAgICAgICAgICAgICAgY2hhbmdlVHJhY2tlci5jbGVhcigpO1xuICAgMTA3XHQgICAgICAgICAgICAgICAgfVxuICAgMTA4XHQgICAgICAgICAgICB9XG4gICAxMDlcdCAgICAgICAgICAgIGlzU2F2aW5nID0gZmFsc2U7XG4gICAxMTBcdCAgICAgICAgfSk7XG4gICAxMTFcdFxuICAgMTEyXHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgMTEzXHQgICAgfVxuICAgMTE0XHRcbiAgIDExNVx0ICAgIHB1YmxpYyB2b2lkIGxvYWQoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgMTE2XHQgICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5Yqg6L29UkRC5paH5Lu2XCIpO1xuICAgMTE3XHQgICAgICAgIGxvYWRlci5jbGVhckFsbERhdGFiYXNlcygpO1xuICAgMTE4XHRcbiAgIDExOVx0ICAgICAgICBpZiAoZmlsZU1hbmFnZXIuZnVsbFJkYkV4aXN0cygpKSB7XG4gICAxMjBcdCAgICAgICAgICAgIGxvYWRlci5sb2FkUkRCKGZpbGVNYW5hZ2VyLmdldEZ1bGxSZGJGaWxlKCkpO1xuICAgMTIxXHQgICAgICAgIH1cbiAgIDEyMlx0XG4gICAxMjNcdCAgICAgICAgaWYgKGZpbGVNYW5hZ2VyLmluY3JlbWVudGFsUmRiRXhpc3RzKCkpIHtcbiAgIDEyNFx0ICAgICAgICAgICAgbG9hZGVyLmxvYWRSREIoZmlsZU1hbmFnZXIuZ2V0SW5jcmVtZW50YWxSZGJGaWxlKCkpO1xuICAgMTI1XHQgICAgICAgIH1cbiAgIDEyNlx0XG4gICAxMjdcdCAgICAgICAgbG9nZ2VyLmluZm8oXCJSRELmlofku7bliqDovb3miJDlip9cIik7XG4gICAxMjhcdCAgICB9XG4gICAxMjlcdFxuICAgMTMwXHQgICAgcHVibGljIHZvaWQgc2h1dGRvd24oKSB7XG4gICAxMzFcdCAgICAgICAgZXhlY3V0b3JNYW5hZ2VyLnNodXRkb3duKCk7XG4gICAxMzJcdCAgICB9XG4gICAxMzNcdFxuICAgMTM0XHQgICAgcHVibGljIGJvb2xlYW4gaXNTYXZpbmcoKSB7XG4gICAxMzVcdCAgICAgICAgcmV0dXJuIGlzU2F2aW5nO1xuICAgMTM2XHQgICAgfVxuICAgMTM3XHR9XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzdcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVVmS2VzVjNxa3VxNnJBcE1NVDZuVmIifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMTk6NTQ6MzAuNDg4WiIsInJlc3BvbnNlX3RleHQiOiLorqnmiJHlho3kuobop6PkuIDkuIvlj4znvJPlhrLpmJ/liJfnmoTlrp7njrDvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3OTg4NmZkMS03OThiLTRjZDMtYmU4YS03OTY5YjI3MmEyNWUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLln7rkuo7lr7nku6PnoIHnmoTliIbmnpDvvIzmiJHnjrDlnKjlj6/ku6XkuLrmgqjmj5DkvpvkuIDkupvlhbPkuo5KYXZh54mIUmVkaXPmnI3liqHnq6/lhpfkvZnorr7orqHkvJjljJbnmoTlu7rorq7jgILku6XkuIvmmK/miJHnmoTliIbmnpDlkozlu7rorq7vvJpcblxuIyMg5LyY5YyW5bu66K6uXG5cbiMjIyAxLiBBT0bph43lhpnlmajkvJjljJZcblxuPGF1Z21lbnRfY29kZV9zbmlwcGV0IHBhdGg9XCJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YVwiIG1vZGU9XCJFWENFUlBUXCI+XG5gYGBqYXZhXG5wdWJsaWMgYm9vbGVhbiByZXdyaXRlKCl7XG4gICAgaWYoIWlzUmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsdHJ1ZSkpe1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCLmraPlnKjph43lhplcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnl7XG4gICAgICAgIHJld3JpdGVCdWZmZXIgPSBDb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRMaXN0KG5ldyBBcnJheUxpc3Q8PigpKTtcblxuICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0YXJ0UmV3cml0ZUJ1ZmZlcigpO1xuXG4gICAgICAgIEZpbGUgdGVtcEZpbGUgPSBuZXcgRmlsZSh0ZW1wRmlsZW5hbWUpO1xuICAgICAgICBpZih0ZW1wRmlsZS5leGlzdHMoKSl7XG4gICAgICAgICAgICB0ZW1wRmlsZS5kZWxldGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGRvV3JpdGUoKTtcblxuICAgICAgICBpZihzdWNjZXNzKXtcbiAgICAgICAgICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gYnVmZmVycyA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RvcFJld3JpdGVCdWZmZXJBbmRHZXQoKTtcblxuICAgICAgICAgICAgLy8g5bCG6YeN5YaZ5pyf6Ze055qE5ZG95Luk6L+95Yqg5Yiw5pawQU9G5paH5Lu2XG4gICAgICAgICAgICBhcHBlbmRSZXdyaXRlQnVmZmVyVG9UZW1wRmlsZShidWZmZXJzKTtcblxuICAgICAgICAgICAgLy8g5Y6f5a2Q5oCn5Zyw5pu/5o2i5paH5Lu2XG4gICAgICAgICAgICBhdG9taWNSZXBsYWNlRmlsZSh0ZW1wRmlsZSwgbmV3IEZpbGUoYW9mRmlsZW5hbWUpKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLph43lhpnlpLHotKVcIik7XG4gICAgICAgICAgICB0ZW1wRmlsZS5kZWxldGUoKTtcblxuICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1jYXRjaChFeGNlcHRpb24gZSl7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGR1cmluZyBBT0ZSZXdyaXRlclwiLCBlKTtcbiAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfWZpbmFsbHkge1xuICAgICAgICBpc1Jld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgIH1cbn1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxuKirkvJjljJblu7rorq4qKu+8mlxuXG4xLiAqKumHjeaehGF0b21pY1JlcGxhY2VGaWxl5pa55rOVKirvvJpcbiAgIC0g56ysMTEw6KGM5pyJ5LiA5LiqYnVn77yMYHRlbXBGaWxlLnJlbmFtZVRvKHRlbXBGaWxlKWDlupTor6XmmK9gdGVtcEZpbGUucmVuYW1lVG8oZmlsZSlgXG4gICAtIOaWh+S7tuabv+aNoumAu+i+keWPr+S7peeugOWMlu+8jOWHj+WwkeS4jeW/heimgeeahOaWh+S7tuaTjeS9nFxuXG4yLiAqKuS8mOWMluS4tOaXtuWPmOmHj+S9v+eUqCoq77yaXG4gICAtIOexu+aIkOWRmOWPmOmHj2ByZXdyaXRlQnVmZmVyYOW6lOivpeaYr+WxgOmDqOWPmOmHj++8jOS4jemcgOimgeS9nOS4uuexu+aIkOWRmFxuXG4zLiAqKui1hOa6kOeuoeeQhuS8mOWMlioq77yaXG4gICAtIOS9v+eUqHRyeS13aXRoLXJlc291cmNlc+ehruS/neaWh+S7tui1hOa6kOato+ehruWFs+mXrVxuXG4jIyMgMi4gQU9GSGFuZGxlcuS8mOWMllxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmFcIiBtb2RlPVwiRVhDRVJQVFwiPlxuYGBgamF2YVxucHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgICBpZiAocmV3cml0aW5nLmdldCgpKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKFwi5bey5pyJ6YeN5YaZ5Lu75Yqh5Zyo6L+b6KGM5Lit77yM5b+955Wl5q2k5qyh6K+35rGCXCIpO1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBmdXR1cmUuY29tcGxldGUoZmFsc2UpO1xuICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgIH1cbiAgICBpZiAoIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgICAgICBsb2dnZXIud2FybihcIumHjeWGmeaWh+S7tuWksei0pe+8jOivt+ajgOafpemHjeWGmeaWh+S7tuaYr+WQpuato+WcqOiiq+S9v+eUqFwiKTtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgZnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgICB9XG5cbiAgICBpZiAocmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XG4gICAgICAgIHJld3JpdGVGdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZS5ydW5Bc3luYygoKSAtPiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmemAu+i+keWJje+8jOehruS/neaJgOacieaVsOaNrumDveW3suWIt+ebmFxuICAgICAgICAgICAgICAgIHByb2Nlc3Nvci5mbHVzaCgpO1xuXG4gICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZXG4gICAgICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gcmV3cml0ZXIucmV3cml0ZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bph43lhpnmiJDlip/lrozmiJBcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJBT0bph43lhpnlpLHotKVcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZShzdWNjZXNzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9G6YeN5YaZ6L+H56iL5Lit5Ye66ZSZXCIsIGUpO1xuICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KGUpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICByZXdyaXRpbmcuc2V0KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXdyaXRlRnV0dXJlO1xufVxuYGBgXG48L2F1Z21lbnRfY29kZV9zbmlwcGV0PlxuXG4qKuS8mOWMluW7uuiurioq77yaXG5cbjEuICoq5YeP5bCR6YeN5aSN5Luj56CBKirvvJpcbiAgIC0g5Yib5bu6Q29tcGxldGFibGVGdXR1cmXnmoTku6PnoIHph43lpI3kuobkuInmrKHvvIzlj6/ku6Xmj5Dlj5bkuLrmlrnms5VcbiAgIC0g6YeN5YaZ54q25oCB5qOA5p+l6YC76L6R5Y+v5Lul5ZCI5bm2XG5cbjIuICoq57q/56iL5rGg566h55CGKirvvJpcbiAgIC0gYENvbXBsZXRhYmxlRnV0dXJlLnJ1bkFzeW5jYOS9v+eUqOeahOaYr+m7mOiupOe6v+eoi+axoO+8jOW7uuiuruS9v+eUqOiHquWumuS5iee6v+eoi+axoOS7peS+v+abtOWlveWcsOaOp+WItui1hOa6kFxuXG4zLiAqKueKtuaAgeeuoeeQhuS8mOWMlioq77yaXG4gICAtIGByZXdyaXRpbmdg54q25oCB5Y+Y6YeP5LiOYHJld3JpdGVyLmNhblJld3JpdGUoKWDlrZjlnKjlip/og73ph43lj6DvvIzlj6/ku6Xnu5/kuIBcblxuIyMjIDMuIEFPRlByb2Nlc3NvcuS8mOWMllxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9wcm9jZXNzb3IvQU9GUHJvY2Vzc29yLmphdmFcIiBtb2RlPVwiRVhDRVJQVFwiPlxuYGBgamF2YVxucHJpdmF0ZSBpbnQgZXN0aW1hdGVDb21tYW5kU2l6ZShSZXNwIGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiAxMjg7XG59XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cbioq5LyY5YyW5bu66K6uKirvvJpcblxuMS4gKirlkb3ku6TlpKflsI/kvLDnrpfkvJjljJYqKu+8mlxuICAgLSDlvZPliY3nmoRlc3RpbWF0ZUNvbW1hbmRTaXpl5pa55rOV5oC75piv6L+U5Zue5Zu65a6a5YC8MTI477yM6L+Z5LiN5aSf57K+56GuXG4gICAtIOW7uuiuruWunueOsOabtOWHhuehrueahOWkp+Wwj+S8sOeul++8jOagueaNruWRveS7pOexu+Wei+WSjOWPguaVsOaVsOmHj1xuXG4yLiAqKuaJueWkhOeQhue8k+WGsuWMuueuoeeQhioq77yaXG4gICAtIOW9k+WJjeeahOaJueWkhOeQhue8k+WGsuWMuueuoeeQhumAu+i+keWPr+S7peS8mOWMlu+8jOWHj+WwkeWGheWtmOWIhumFjeWSjOmHiuaUvlxuXG4zLiAqKuaAp+iDveebkeaOpyoq77yaXG4gICAtIOa3u+WKoOabtOWkmuaAp+iDveaMh+agh++8jOWmguWRveS7pOWkhOeQhumAn+eOh+OAgeW5s+Wdh+WRveS7pOWkp+Wwj+etiVxuXG4jIyMgNC4gRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZeS8mOWMllxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3V0aWxzL0RvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUuamF2YVwiIG1vZGU9XCJFWENFUlBUXCI+XG5gYGBqYXZhXG5AT3ZlcnJpZGVcbnB1YmxpYyB2b2lkIHB1dChCeXRlQnVmZmVyIHNyYykgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uIHtcbiAgICBpZiAoY2xvc2VkKSB7XG4gICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJRdWV1ZSBpcyBjbG9zZWRcIik7XG4gICAgfVxuXG4gICAgbG9jay5sb2NrKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgaW50IHJlcXVpcmVkU3BhY2UgPSBzcmMucmVtYWluaW5nKCk7XG5cbiAgICAgICAgLy8g5aaC5p6c5b2T5YmN57yT5Yay5Yy656m66Ze05LiN6Laz77yM562J5b6F5Yi35pawXG4gICAgICAgIHdoaWxlIChjdXJyZW50QnVmZmVyLnJlbWFpbmluZygpIDwgcmVxdWlyZWRTcGFjZSkge1xuICAgICAgICAgICAgLy8g5aaC5p6c57yT5Yay5Yy65aSq5bCP5peg5rOV5pS+5YWl5pWw5o2u77yM5oqb5Ye65byC5bi4XG4gICAgICAgICAgICBpZiAocmVxdWlyZWRTcGFjZSA+IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJCdWZmZXIgdG9vIGxhcmdlOiBcIiArIHJlcXVpcmVkU3BhY2UgKyBcIiBieXRlcywgbWF4IGlzIFwiICsgYnVmZmVyU2l6ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjee8k+WGsuWMuuW3suS9v+eUqOepuumXtOi2hei/h+S4gOWNiu+8jOS4u+WKqOinpuWPkeS6pOaNolxuICAgICAgICAgICAgaWYgKGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA+IGJ1ZmZlclNpemUgLyAyKSB7XG4gICAgICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgICAgICAgICAgICAgICBub3RGdWxsLnNpZ25hbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDlkKbliJnnrYnlvoXnqbrpl7Tlj5jlvpflj6/nlKhcbiAgICAgICAgICAgICAgICBub3RGdWxsLmF3YWl0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgaXMgY2xvc2VkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOiusOW9leWGmeWFpeWJjeeahOS9jee9ru+8jOeUqOS6jui3n+i4qlxuICAgICAgICBpbnQgYmVmb3JlUG9zID0gY3VycmVudEJ1ZmZlci5wb3NpdGlvbigpO1xuXG4gICAgICAgIC8vIOaJp+ihjOaVsOaNruWGmeWFpVxuICAgICAgICBjdXJyZW50QnVmZmVyLnB1dChzcmMpO1xuXG4gICAgICAgIC8vIOabtOaWsOWGmeWFpeS9jee9rlxuICAgICAgICB3cml0ZVBvc2l0aW9uICs9IChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgLSBiZWZvcmVQb3MpO1xuXG4gICAgICAgIC8vIOmAmuefpeacieaWsOaVsOaNruWPr+eUqFxuICAgICAgICBub3RFbXB0eS5zaWduYWwoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgIH1cbn1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxuKirkvJjljJblu7rorq4qKu+8mlxuXG4xLiAqKuWHj+WwkemUgeernuS6iSoq77yaXG4gICAtIOW9k+WJjeWunueOsOS4re+8jOaJgOacieaTjeS9nOmDveS9v+eUqOWQjOS4gOS4qumUge+8jOWPr+iDveWvvOiHtOmrmOW5tuWPkeS4i+eahOaAp+iDveeTtumiiFxuICAgLSDogIPomZHkvb/nlKjliIbnprvplIHnrZbnlaXvvIzor7vlhpnmk43kvZzkvb/nlKjkuI3lkIznmoTplIFcblxuMi4gKirlhoXlrZjliIbphY3kvJjljJYqKu+8mlxuICAgLSDlvZPliY3lrp7njrDlnKjmnoTpgKDlh73mlbDkuK3nm7TmjqXliIbphY3kuKTkuKpEaXJlY3RCeXRlQnVmZmVy77yM6L+Z5Y+v6IO95a+86Ie05aSn6YeP5YaF5a2Y5Y2g55SoXG4gICAtIOiAg+iZkeS9v+eUqOaxoOWMluetlueVpeaIluW7tui/n+WIhumFjVxuXG4zLiAqKuS4jeW/heimgeeahOaWueazleWunueOsCoq77yaXG4gICAtIOiuuOWkmuS4jeaUr+aMgeeahOmbhuWQiOaTjeS9nOaWueazleWPr+S7peenu+mZpO+8jOaIluiAheS9v+eUqOaKveixoeexu+iAjOS4jeaYr+WunueOsOaOpeWPo1xuXG4jIyMgNS4gUkRCSGFuZGxlcuS8mOWMllxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3JkYi9jb3JlL1JEQkhhbmRsZXIuamF2YVwiIG1vZGU9XCJFWENFUlBUXCI+XG5gYGBqYXZhXG5wcml2YXRlIHZvaWQgY2hlY2tTYXZlQ29uZGl0aW9ucygpIHtcbiAgICBpZiAoaXNTYXZpbmcpIHJldHVybjtcblxuICAgIGxvbmcgbm93ID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLyAxMDAwO1xuICAgIGlmIChzYXZlUG9saWN5LnNob3VsZEZ1bGxTYXZlKG5vdykpIHtcbiAgICAgICAgYmdzYXZlKHRydWUpO1xuICAgIH0gZWxzZSBpZiAoY2hhbmdlVHJhY2tlci5oYXNNb2RpZmljYXRpb25zKCkpIHtcbiAgICAgICAgYmdzYXZlKGZhbHNlKTtcbiAgICB9XG59XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cbioq5LyY5YyW5bu66K6uKirvvJpcblxuMS4gKirkv53lrZjnrZbnlaXkvJjljJYqKu+8mlxuICAgLSDlvZPliY3nmoTkv53lrZjmnaHku7bmo4Dmn6Xmr4/np5LmiafooYzkuIDmrKHvvIzlj6/og73lr7zoh7TkuI3lv4XopoHnmoRDUFXmtojogJdcbiAgIC0g6ICD6JmR5L2/55So5pu05pm66IO955qE6Kem5Y+R5py65Yi277yM5aaC5Z+65LqO5Y+Y5pu05pWw6YeP55qE6ZiI5YC8XG5cbjIuICoq6LWE5rqQ566h55CGKirvvJpcbiAgIC0g6ICD6JmR5re75Yqg6LWE5rqQ6ZmQ5Yi277yM5aaC5pyA5aSn5bm25Y+R5L+d5a2Y5Lu75Yqh5pWw44CB5pyA5aSn5YaF5a2Y5L2/55So6YeP562JXG5cbjMuICoq6ZSZ6K+v5oGi5aSNKirvvJpcbiAgIC0g5aKe5by66ZSZ6K+v5oGi5aSN5py65Yi277yM56Gu5L+d5Zyo5L+d5a2Y5aSx6LSl5pe26IO95aSf5q2j56Gu5oGi5aSNXG5cbiMjIyA2LiDmlbTkvZPmnrbmnoTkvJjljJZcblxuMS4gKirkvp3otZbms6jlhaXkvJjljJYqKu+8mlxuICAgLSDlvZPliY3ku6PnoIHkuK3lrZjlnKjlpKfph4/nm7TmjqXkvp3otZbvvIzlpoJgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKWBcbiAgIC0g5bu66K6u5L2/55So5L6d6LWW5rOo5YWl5qGG5p625oiW5bel5Y6C5qih5byP566A5YyW57uE5Lu26Ze05L6d6LWWXG5cbjIuICoq6YWN572u566h55CGKirvvJpcbiAgIC0g56Gs57yW56CB55qE6YWN572u5YC877yI5aaC57yT5Yay5Yy65aSn5bCP77yJ5bqU6K+l5o+Q5Y+W5Yiw6YWN572u5paH5Lu25LitXG4gICAtIOWunueOsOWKqOaAgemFjee9ruabtOaWsOacuuWItlxuXG4zLiAqKuebkeaOp+WSjOaMh+aghyoq77yaXG4gICAtIOa3u+WKoOabtOWFqOmdoueahOaAp+iDveebkeaOp+WSjOaMh+agh+aUtumbhlxuICAgLSDlrp7njrDlgaXlurfmo4Dmn6Xlkozoh6rliqjmgaLlpI3mnLrliLZcblxuNC4gKirku6PnoIHlpI3nlKgqKu+8mlxuICAgLSBBT0blkoxSRELmqKHlnZfmnInnsbvkvLznmoTlip/og73vvIjlpoLlkI7lj7Dkv53lrZjvvInvvIzlj6/ku6Xmj5Dlj5blhbHkuqvnu4Tku7ZcbiAgIC0g5L2/55So5pu05aSa6K6+6K6h5qih5byP5YeP5bCR6YeN5aSN5Luj56CBXG5cbiMjIOWFt+S9k+WunueOsOW7uuiurlxuXG4jIyMgMS4g5LyY5YyWQU9GUmV3cml0ZXLkuK3nmoRhdG9taWNSZXBsYWNlRmlsZeaWueazlVxuXG5gYGBqYXZhXG5wcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSB0YXJnZXRGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIC8vIOWwneivleebtOaOpemHjeWRveWQje+8iOWcqOWkp+WkmuaVsOezu+e7n+S4iuaYr+WOn+WtkOaTjeS9nO+8iVxuICAgIGlmICh0ZW1wRmlsZS5yZW5hbWVUbyh0YXJnZXRGaWxlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIOWmguaenOebtOaOpemHjeWRveWQjeWksei0pe+8jOS9v+eUqOWkh+S7veetlueVpVxuICAgIEZpbGUgYmFja3VwRmlsZSA9IG5ldyBGaWxlKHRhcmdldEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkgKyBcIi5iYWtcIik7XG4gICAgXG4gICAgLy8g5Yig6Zmk5bey5a2Y5Zyo55qE5aSH5Lu95paH5Lu2XG4gICAgaWYgKGJhY2t1cEZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgYmFja3VwRmlsZS5kZWxldGUoKTtcbiAgICB9XG4gICAgXG4gICAgLy8g5aaC5p6c55uu5qCH5paH5Lu25a2Y5Zyo77yM5bCG5YW26YeN5ZG95ZCN5Li65aSH5Lu9XG4gICAgaWYgKHRhcmdldEZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgaWYgKCF0YXJnZXRGaWxlLnJlbmFtZVRvKGJhY2t1cEZpbGUpKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIm+W7uuWkh+S7veaWh+S7tu+8jOWwhuS9v+eUqOWkjeWItuaWueW8j+abv+aNolwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyDlpI3liLbkuLTml7bmlofku7bliLDnm67moIfkvY3nva5cbiAgICBGaWxlcy5jb3B5KHRlbXBGaWxlLnRvUGF0aCgpLCB0YXJnZXRGaWxlLnRvUGF0aCgpKTtcbiAgICB0ZW1wRmlsZS5kZWxldGUoKTtcbiAgICBcbiAgICAvLyDmk43kvZzmiJDlip/lkI7liKDpmaTlpIfku71cbiAgICBpZiAoYmFja3VwRmlsZS5leGlzdHMoKSkge1xuICAgICAgICBiYWNrdXBGaWxlLmRlbGV0ZSgpO1xuICAgIH1cbn1cbmBgYFxuXG4jIyMgMi4g5LyY5YyWQU9GSGFuZGxlcuS4reeahHN0YXJ0UmV3cml0ZeaWueazlVxuXG5gYGBqYXZhXG5wdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gc3RhcnRSZXdyaXRlKCkge1xuICAgIC8vIOWmguaenOW3sue7j+WcqOmHjeWGmeaIluS4jeiDvemHjeWGme+8jOi/lOWbnuWksei0pVxuICAgIGlmIChyZXdyaXRpbmcuZ2V0KCkgfHwgIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgICAgICBTdHJpbmcgcmVhc29uID0gcmV3cml0aW5nLmdldCgpID8gXCLlt7LmnInph43lhpnku7vliqHlnKjov5vooYzkuK1cIiA6IFwi6YeN5YaZ5paH5Lu25q2j5Zyo6KKr5L2/55SoXCI7XG4gICAgICAgIGxvZ2dlci53YXJuKFwiQU9G6YeN5YaZ5aSx6LSlOiBcIiArIHJlYXNvbik7XG4gICAgICAgIHJldHVybiBDb21wbGV0YWJsZUZ1dHVyZS5jb21wbGV0ZWRGdXR1cmUoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICAvLyDlsJ3or5Xorr7nva7ph43lhpnnirbmgIFcbiAgICBpZiAocmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XG4gICAgICAgIHJld3JpdGVGdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBcbiAgICAgICAgLy8g5L2/55So6Ieq5a6a5LmJ57q/56iL5rGg5omn6KGM6YeN5YaZ5Lu75YqhXG4gICAgICAgIGV4ZWN1dG9yU2VydmljZS5zdWJtaXQoKCkgLT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhpnliY3liLfnm5hcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3IuZmx1c2goKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhplcbiAgICAgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSByZXdyaXRlci5yZXdyaXRlKCk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oc3VjY2VzcyA/IFwiQU9G6YeN5YaZ5oiQ5Yqf5a6M5oiQXCIgOiBcIkFPRumHjeWGmeWksei0pVwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnov4fnqIvkuK3lh7rplJlcIiwgZSk7XG4gICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBcblxuIyMjIDMuIOS8mOWMlkFPRlByb2Nlc3NvcuS4reeahGVzdGltYXRlQ29tbWFuZFNpemXmlrnms5VcblxuYGBgamF2YVxucHJpdmF0ZSBpbnQgZXN0aW1hdGVDb21tYW5kU2l6ZShSZXNwIGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29tbWFuZCBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBjb21tYW5kO1xuICAgICAgICBSZXNwW10gZWxlbWVudHMgPSBhcnJheS5nZXRBcnJheSgpO1xuICAgICAgICBcbiAgICAgICAgLy8g5Z+656GA5aSn5bCPICsg5q+P5Liq5YWD57Sg55qE5Lyw6K6h5aSn5bCPXG4gICAgICAgIGludCBzaXplID0gODsgLy8g5pWw57uE5aS06YOo5aSn5bCPXG4gICAgICAgIFxuICAgICAgICBmb3IgKFJlc3AgZWxlbWVudCA6IGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEJ1bGtTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBCdWxrU3RyaW5n55qE5aSn5bCPID0g5aS06YOoICsg5YaF5a656ZW/5bqmXG4gICAgICAgICAgICAgICAgQnVsa1N0cmluZyBidWxrU3RyaW5nID0gKEJ1bGtTdHJpbmcpIGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgc2l6ZSArPSA4ICsgYnVsa1N0cmluZy5nZXRDb250ZW50KCkuZ2V0Qnl0ZXMoKS5sZW5ndGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOWFtuS7luexu+Wei+eahOm7mOiupOWkp+Wwj1xuICAgICAgICAgICAgICAgIHNpemUgKz0gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbiAgICBcbiAgICAvLyDpu5jorqTlpKflsI9cbiAgICByZXR1cm4gNjQ7XG59XG5gYGBcblxuIyMjIDQuIOS8mOWMlkRvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWXnmoTlhoXlrZjnrqHnkIZcblxuYGBgamF2YVxuLy8g5Zyo5p6E6YCg5Ye95pWw5Lit5re75Yqg5bu26L+f5YiG6YWN6YCJ6aG5XG5wcml2YXRlIGJvb2xlYW4gbGF6eUFsbG9jYXRpb24gPSBmYWxzZTtcblxucHVibGljIERvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUoaW50IGJ1ZmZlclNpemUsIGJvb2xlYW4gbGF6eUFsbG9jYXRpb24pIHtcbiAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuICAgIHRoaXMubGF6eUFsbG9jYXRpb24gPSBsYXp5QWxsb2NhdGlvbjtcbiAgICBcbiAgICBpZiAoIWxhenlBbGxvY2F0aW9uKSB7XG4gICAgICAgIC8vIOeri+WNs+WIhumFjVxuICAgICAgICB0aGlzLmN1cnJlbnRCdWZmZXIgPSBCeXRlQnVmZmVyLmFsbG9jYXRlRGlyZWN0KGJ1ZmZlclNpemUpO1xuICAgICAgICB0aGlzLmZsdXNoaW5nQnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICB9XG59XG5cbi8vIOehruS/nee8k+WGsuWMuuW3suWIhumFjVxucHJpdmF0ZSB2b2lkIGVuc3VyZUJ1ZmZlcnNBbGxvY2F0ZWQoKSB7XG4gICAgaWYgKGN1cnJlbnRCdWZmZXIgPT0gbnVsbCkge1xuICAgICAgICBjdXJyZW50QnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICB9XG4gICAgaWYgKGZsdXNoaW5nQnVmZmVyID09IG51bGwpIHtcbiAgICAgICAgZmx1c2hpbmdCdWZmZXIgPSBCeXRlQnVmZmVyLmFsbG9jYXRlRGlyZWN0KGJ1ZmZlclNpemUpO1xuICAgIH1cbn1cblxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBwdXQoQnl0ZUJ1ZmZlciBzcmMpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7XG4gICAgaWYgKGNsb3NlZCkge1xuICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgaXMgY2xvc2VkXCIpO1xuICAgIH1cbiAgICBcbiAgICBlbnN1cmVCdWZmZXJzQWxsb2NhdGVkKCk7IC8vIOehruS/nee8k+WGsuWMuuW3suWIhumFjVxuICAgIFxuICAgIC8vIOWFtuS9meS7o+eggeS4jeWPmC4uLlxufVxuYGBgXG5cbiMjIOaAu+e7k1xuXG7ln7rkuo7lr7nmgqjnmoRKYXZh54mIUmVkaXPmnI3liqHnq6/ku6PnoIHnmoTliIbmnpDvvIzmiJHlj5HnjrDkuoblh6DkuKrlj6/ku6XkvJjljJbnmoTlhpfkvZnorr7orqHpg6jliIbvvJpcblxuMS4gKirmlofku7bmk43kvZzlhpfkvZkqKu+8mkFPRlJld3JpdGVy5Lit55qE5paH5Lu25pu/5o2i6YC76L6R5Y+v5Lul566A5YyW77yM5YeP5bCR5LiN5b+F6KaB55qE5paH5Lu25pON5L2c44CCXG5cbjIuICoq54q25oCB566h55CG6YeN5aSNKirvvJpBT0ZIYW5kbGVy5ZKMQU9GUmV3cml0ZXLkuK3nmoTnirbmgIHnrqHnkIblrZjlnKjph43lj6DvvIzlj6/ku6Xnu5/kuIDjgIJcblxuMy4gKirlhoXlrZjnrqHnkIbmlYjnjofkvY4qKu+8mkRvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWXnmoTlhoXlrZjliIbphY3nrZbnlaXlj6/ku6XkvJjljJbvvIzlh4/lsJHlhoXlrZjljaDnlKjjgIJcblxuNC4gKirku6PnoIHph43lpI0qKu+8muWkmuS4que7hOS7tuS4reWtmOWcqOexu+S8vOeahOWKn+iDveWunueOsO+8jOWPr+S7peaPkOWPluWFseS6q+e7hOS7tuOAglxuXG41LiAqKumFjee9ruehrOe8lueggSoq77ya57yT5Yay5Yy65aSn5bCP562J6YWN572u5YC856Gs57yW56CB5Zyo5Luj56CB5Lit77yM5bqU6K+l5o+Q5Y+W5Yiw6YWN572u5paH5Lu244CCXG5cbjYuICoq5L6d6LWW5YWz57O75aSN5p2CKirvvJrnu4Tku7bpl7TnmoTkvp3otZblhbPns7vlpI3mnYLvvIzlj6/ku6Xkvb/nlKjkvp3otZbms6jlhaXnroDljJbjgIJcblxu6YCa6L+H5a6e5pa95LiK6L+w5LyY5YyW5bu66K6u77yM5oKo55qESmF2YeeJiFJlZGlz5pyN5Yqh56uv5Y+v5Lul6I635b6X5pu05aW955qE5oCn6IO944CB5pu05L2O55qE6LWE5rqQ5Y2g55So5ZKM5pu06auY55qE5Y+v57u05oqk5oCn44CCXG5cbuaCqOW4jOacm+aIkeWvueWTquS4quWFt+S9k+e7hOS7tueahOS8mOWMlui/m+ihjOabtOivpue7hueahOivtOaYjuWQl++8nyJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiLln7rkuo7lr7nku6PnoIHnmoTliIbmnpDvvIzmiJHnjrDlnKjlj6/ku6XkuLrmgqjmj5DkvpvkuIDkupvlhbPkuo5KYXZh54mIUmVkaXPmnI3liqHnq6/lhpfkvZnorr7orqHkvJjljJbnmoTlu7rorq7jgILku6XkuIvmmK/miJHnmoTliIbmnpDlkozlu7rorq7vvJpcblxuIyMg5LyY5YyW5bu66K6uXG5cbiMjIyAxLiBBT0bph43lhpnlmajkvJjljJZcblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YSBtb2RlPUVYQ0VSUFRcbnB1YmxpYyBib29sZWFuIHJld3JpdGUoKXtcbiAgICBpZighaXNSZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSx0cnVlKSl7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIuato+WcqOmHjeWGmVwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeXtcbiAgICAgICAgcmV3cml0ZUJ1ZmZlciA9IENvbGxlY3Rpb25zLnN5bmNocm9uaXplZExpc3QobmV3IEFycmF5TGlzdDw+KCkpO1xuXG4gICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RhcnRSZXdyaXRlQnVmZmVyKCk7XG5cbiAgICAgICAgRmlsZSB0ZW1wRmlsZSA9IG5ldyBGaWxlKHRlbXBGaWxlbmFtZSk7XG4gICAgICAgIGlmKHRlbXBGaWxlLmV4aXN0cygpKXtcbiAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZG9Xcml0ZSgpO1xuXG4gICAgICAgIGlmKHN1Y2Nlc3Mpe1xuICAgICAgICAgICAgTGlzdDxCeXRlQnVmZmVyPiBidWZmZXJzID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdG9wUmV3cml0ZUJ1ZmZlckFuZEdldCgpO1xuXG4gICAgICAgICAgICAvLyDlsIbph43lhpnmnJ/pl7TnmoTlkb3ku6Tov73liqDliLDmlrBBT0bmlofku7ZcbiAgICAgICAgICAgIGFwcGVuZFJld3JpdGVCdWZmZXJUb1RlbXBGaWxlKGJ1ZmZlcnMpO1xuXG4gICAgICAgICAgICAvLyDljp/lrZDmgKflnLDmm7/mjaLmlofku7ZcbiAgICAgICAgICAgIGF0b21pY1JlcGxhY2VGaWxlKHRlbXBGaWxlLCBuZXcgRmlsZShhb2ZGaWxlbmFtZSkpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIumHjeWGmeWksei0pVwiKTtcbiAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xuXG4gICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLmRpc2NhcmRSZXdyaXRlQnVmZmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfWNhdGNoKEV4Y2VwdGlvbiBlKXtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZHVyaW5nIEFPRlJld3JpdGVyXCIsIGUpO1xuICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLmRpc2NhcmRSZXdyaXRlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9ZmluYWxseSB7XG4gICAgICAgIGlzUmV3cml0aW5nLnNldChmYWxzZSk7XG4gICAgfVxufVxuYGBgYFxuXG4qKuS8mOWMluW7uuiurioq77yaXG5cbjEuICoq6YeN5p6EYXRvbWljUmVwbGFjZUZpbGXmlrnms5UqKu+8mlxuICAgLSDnrKwxMTDooYzmnInkuIDkuKpidWfvvIxgdGVtcEZpbGUucmVuYW1lVG8odGVtcEZpbGUpYOW6lOivpeaYr2B0ZW1wRmlsZS5yZW5hbWVUbyhmaWxlKWBcbiAgIC0g5paH5Lu25pu/5o2i6YC76L6R5Y+v5Lul566A5YyW77yM5YeP5bCR5LiN5b+F6KaB55qE5paH5Lu25pON5L2cXG5cbjIuICoq5LyY5YyW5Li05pe25Y+Y6YeP5L2/55SoKirvvJpcbiAgIC0g57G75oiQ5ZGY5Y+Y6YePYHJld3JpdGVCdWZmZXJg5bqU6K+l5piv5bGA6YOo5Y+Y6YeP77yM5LiN6ZyA6KaB5L2c5Li657G75oiQ5ZGYXG5cbjMuICoq6LWE5rqQ566h55CG5LyY5YyWKirvvJpcbiAgIC0g5L2/55SodHJ5LXdpdGgtcmVzb3VyY2Vz56Gu5L+d5paH5Lu26LWE5rqQ5q2j56Gu5YWz6ZetXG5cbiMjIyAyLiBBT0ZIYW5kbGVy5LyY5YyWXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL0FPRkhhbmRsZXIuamF2YSBtb2RlPUVYQ0VSUFRcbnB1YmxpYyBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBzdGFydFJld3JpdGUoKSB7XG4gICAgaWYgKHJld3JpdGluZy5nZXQoKSkge1xuICAgICAgICBsb2dnZXIud2FybihcIuW3suaciemHjeWGmeS7u+WKoeWcqOi/m+ihjOS4re+8jOW/veeVpeatpOasoeivt+axglwiKTtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgZnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgICB9XG4gICAgaWYgKCFyZXdyaXRlci5jYW5SZXdyaXRlKCkpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCLph43lhpnmlofku7blpLHotKXvvIzor7fmo4Dmn6Xph43lhpnmlofku7bmmK/lkKbmraPlnKjooqvkvb/nlKhcIik7XG4gICAgICAgIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IGZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XG4gICAgICAgIGZ1dHVyZS5jb21wbGV0ZShmYWxzZSk7XG4gICAgICAgIHJldHVybiBmdXR1cmU7XG4gICAgfVxuXG4gICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICByZXdyaXRlRnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmUucnVuQXN5bmMoKCkgLT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhpnpgLvovpHliY3vvIznoa7kv53miYDmnInmlbDmja7pg73lt7LliLfnm5hcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3IuZmx1c2goKTtcblxuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmVxuICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGUoKTtcblxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwiQU9G6YeN5YaZ5oiQ5Yqf5a6M5oiQXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiQU9G6YeN5YaZ5aSx6LSlXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGUoc3VjY2Vzcyk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFPRumHjeWGmei/h+eoi+S4reWHuumUmVwiLCBlKTtcbiAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlRXhjZXB0aW9uYWxseShlKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgcmV3cml0aW5nLnNldChmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV3cml0ZUZ1dHVyZTtcbn1cbmBgYGBcblxuKirkvJjljJblu7rorq4qKu+8mlxuXG4xLiAqKuWHj+WwkemHjeWkjeS7o+eggSoq77yaXG4gICAtIOWIm+W7ukNvbXBsZXRhYmxlRnV0dXJl55qE5Luj56CB6YeN5aSN5LqG5LiJ5qyh77yM5Y+v5Lul5o+Q5Y+W5Li65pa55rOVXG4gICAtIOmHjeWGmeeKtuaAgeajgOafpemAu+i+keWPr+S7peWQiOW5tlxuXG4yLiAqKue6v+eoi+axoOeuoeeQhioq77yaXG4gICAtIGBDb21wbGV0YWJsZUZ1dHVyZS5ydW5Bc3luY2Dkvb/nlKjnmoTmmK/pu5jorqTnur/nqIvmsaDvvIzlu7rorq7kvb/nlKjoh6rlrprkuYnnur/nqIvmsaDku6Xkvr/mm7Tlpb3lnLDmjqfliLbotYTmupBcblxuMy4gKirnirbmgIHnrqHnkIbkvJjljJYqKu+8mlxuICAgLSBgcmV3cml0aW5nYOeKtuaAgeWPmOmHj+S4jmByZXdyaXRlci5jYW5SZXdyaXRlKClg5a2Y5Zyo5Yqf6IO96YeN5Y+g77yM5Y+v5Lul57uf5LiAXG5cbiMjIyAzLiBBT0ZQcm9jZXNzb3LkvJjljJZcblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcHJvY2Vzc29yL0FPRlByb2Nlc3Nvci5qYXZhIG1vZGU9RVhDRVJQVFxucHJpdmF0ZSBpbnQgZXN0aW1hdGVDb21tYW5kU2l6ZShSZXNwIGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiAxMjg7XG59XG5gYGBgXG5cbioq5LyY5YyW5bu66K6uKirvvJpcblxuMS4gKirlkb3ku6TlpKflsI/kvLDnrpfkvJjljJYqKu+8mlxuICAgLSDlvZPliY3nmoRlc3RpbWF0ZUNvbW1hbmRTaXpl5pa55rOV5oC75piv6L+U5Zue5Zu65a6a5YC8MTI477yM6L+Z5LiN5aSf57K+56GuXG4gICAtIOW7uuiuruWunueOsOabtOWHhuehrueahOWkp+Wwj+S8sOeul++8jOagueaNruWRveS7pOexu+Wei+WSjOWPguaVsOaVsOmHj1xuXG4yLiAqKuaJueWkhOeQhue8k+WGsuWMuueuoeeQhioq77yaXG4gICAtIOW9k+WJjeeahOaJueWkhOeQhue8k+WGsuWMuueuoeeQhumAu+i+keWPr+S7peS8mOWMlu+8jOWHj+WwkeWGheWtmOWIhumFjeWSjOmHiuaUvlxuXG4zLiAqKuaAp+iDveebkeaOpyoq77yaXG4gICAtIOa3u+WKoOabtOWkmuaAp+iDveaMh+agh++8jOWmguWRveS7pOWkhOeQhumAn+eOh+OAgeW5s+Wdh+WRveS7pOWkp+Wwj+etiVxuXG4jIyMgNC4gRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZeS8mOWMllxuXG5gYGBgamF2YSBwYXRoPXNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3V0aWxzL0RvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUuamF2YSBtb2RlPUVYQ0VSUFRcbkBPdmVycmlkZVxucHVibGljIHZvaWQgcHV0KEJ5dGVCdWZmZXIgc3JjKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgIGlmIChjbG9zZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcIlF1ZXVlIGlzIGNsb3NlZFwiKTtcbiAgICB9XG5cbiAgICBsb2NrLmxvY2soKTtcbiAgICB0cnkge1xuICAgICAgICBpbnQgcmVxdWlyZWRTcGFjZSA9IHNyYy5yZW1haW5pbmcoKTtcblxuICAgICAgICAvLyDlpoLmnpzlvZPliY3nvJPlhrLljLrnqbrpl7TkuI3otrPvvIznrYnlvoXliLfmlrBcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRCdWZmZXIucmVtYWluaW5nKCkgPCByZXF1aXJlZFNwYWNlKSB7XG4gICAgICAgICAgICAvLyDlpoLmnpznvJPlhrLljLrlpKrlsI/ml6Dms5XmlL7lhaXmlbDmja7vvIzmipvlh7rlvILluLhcbiAgICAgICAgICAgIGlmIChyZXF1aXJlZFNwYWNlID4gYnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkJ1ZmZlciB0b28gbGFyZ2U6IFwiICsgcmVxdWlyZWRTcGFjZSArIFwiIGJ5dGVzLCBtYXggaXMgXCIgKyBidWZmZXJTaXplKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5aaC5p6c5b2T5YmN57yT5Yay5Yy65bey5L2/55So56m66Ze06LaF6L+H5LiA5Y2K77yM5Li75Yqo6Kem5Y+R5Lqk5o2iXG4gICAgICAgICAgICBpZiAoY3VycmVudEJ1ZmZlci5wb3NpdGlvbigpID4gYnVmZmVyU2l6ZSAvIDIpIHtcbiAgICAgICAgICAgICAgICBzd2FwQXJlYSgpO1xuICAgICAgICAgICAgICAgIG5vdEZ1bGwuc2lnbmFsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOWQpuWImeetieW+heepuumXtOWPmOW+l+WPr+eUqFxuICAgICAgICAgICAgICAgIG5vdEZ1bGwuYXdhaXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJRdWV1ZSBpcyBjbG9zZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g6K6w5b2V5YaZ5YWl5YmN55qE5L2N572u77yM55So5LqO6Lef6LiqXG4gICAgICAgIGludCBiZWZvcmVQb3MgPSBjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgLy8g5omn6KGM5pWw5o2u5YaZ5YWlXG4gICAgICAgIGN1cnJlbnRCdWZmZXIucHV0KHNyYyk7XG5cbiAgICAgICAgLy8g5pu05paw5YaZ5YWl5L2N572uXG4gICAgICAgIHdyaXRlUG9zaXRpb24gKz0gKGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSAtIGJlZm9yZVBvcyk7XG5cbiAgICAgICAgLy8g6YCa55+l5pyJ5paw5pWw5o2u5Y+v55SoXG4gICAgICAgIG5vdEVtcHR5LnNpZ25hbCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAgfVxufVxuYGBgYFxuXG4qKuS8mOWMluW7uuiurioq77yaXG5cbjEuICoq5YeP5bCR6ZSB56ue5LqJKirvvJpcbiAgIC0g5b2T5YmN5a6e546w5Lit77yM5omA5pyJ5pON5L2c6YO95L2/55So5ZCM5LiA5Liq6ZSB77yM5Y+v6IO95a+86Ie06auY5bm25Y+R5LiL55qE5oCn6IO955O26aKIXG4gICAtIOiAg+iZkeS9v+eUqOWIhuemu+mUgeetlueVpe+8jOivu+WGmeaTjeS9nOS9v+eUqOS4jeWQjOeahOmUgVxuXG4yLiAqKuWGheWtmOWIhumFjeS8mOWMlioq77yaXG4gICAtIOW9k+WJjeWunueOsOWcqOaehOmAoOWHveaVsOS4reebtOaOpeWIhumFjeS4pOS4qkRpcmVjdEJ5dGVCdWZmZXLvvIzov5nlj6/og73lr7zoh7TlpKfph4/lhoXlrZjljaDnlKhcbiAgIC0g6ICD6JmR5L2/55So5rGg5YyW562W55Wl5oiW5bu26L+f5YiG6YWNXG5cbjMuICoq5LiN5b+F6KaB55qE5pa55rOV5a6e546wKirvvJpcbiAgIC0g6K645aSa5LiN5pSv5oyB55qE6ZuG5ZCI5pON5L2c5pa55rOV5Y+v5Lul56e76Zmk77yM5oiW6ICF5L2/55So5oq96LGh57G76ICM5LiN5piv5a6e546w5o6l5Y+jXG5cbiMjIyA1LiBSREJIYW5kbGVy5LyY5YyWXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvcmRiL2NvcmUvUkRCSGFuZGxlci5qYXZhIG1vZGU9RVhDRVJQVFxucHJpdmF0ZSB2b2lkIGNoZWNrU2F2ZUNvbmRpdGlvbnMoKSB7XG4gICAgaWYgKGlzU2F2aW5nKSByZXR1cm47XG5cbiAgICBsb25nIG5vdyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC8gMTAwMDtcbiAgICBpZiAoc2F2ZVBvbGljeS5zaG91bGRGdWxsU2F2ZShub3cpKSB7XG4gICAgICAgIGJnc2F2ZSh0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZVRyYWNrZXIuaGFzTW9kaWZpY2F0aW9ucygpKSB7XG4gICAgICAgIGJnc2F2ZShmYWxzZSk7XG4gICAgfVxufVxuYGBgYFxuXG4qKuS8mOWMluW7uuiurioq77yaXG5cbjEuICoq5L+d5a2Y562W55Wl5LyY5YyWKirvvJpcbiAgIC0g5b2T5YmN55qE5L+d5a2Y5p2h5Lu25qOA5p+l5q+P56eS5omn6KGM5LiA5qyh77yM5Y+v6IO95a+86Ie05LiN5b+F6KaB55qEQ1BV5raI6ICXXG4gICAtIOiAg+iZkeS9v+eUqOabtOaZuuiDveeahOinpuWPkeacuuWItu+8jOWmguWfuuS6juWPmOabtOaVsOmHj+eahOmYiOWAvFxuXG4yLiAqKui1hOa6kOeuoeeQhioq77yaXG4gICAtIOiAg+iZkea3u+WKoOi1hOa6kOmZkOWItu+8jOWmguacgOWkp+W5tuWPkeS/neWtmOS7u+WKoeaVsOOAgeacgOWkp+WGheWtmOS9v+eUqOmHj+etiVxuXG4zLiAqKumUmeivr+aBouWkjSoq77yaXG4gICAtIOWinuW8uumUmeivr+aBouWkjeacuuWItu+8jOehruS/neWcqOS/neWtmOWksei0peaXtuiDveWkn+ato+ehruaBouWkjVxuXG4jIyMgNi4g5pW05L2T5p625p6E5LyY5YyWXG5cbjEuICoq5L6d6LWW5rOo5YWl5LyY5YyWKirvvJpcbiAgIC0g5b2T5YmN5Luj56CB5Lit5a2Y5Zyo5aSn6YeP55u05o6l5L6d6LWW77yM5aaCYHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKClgXG4gICAtIOW7uuiuruS9v+eUqOS+nei1luazqOWFpeahhuaetuaIluW3peWOguaooeW8j+eugOWMlue7hOS7tumXtOS+nei1llxuXG4yLiAqKumFjee9rueuoeeQhioq77yaXG4gICAtIOehrOe8lueggeeahOmFjee9ruWAvO+8iOWmgue8k+WGsuWMuuWkp+Wwj++8ieW6lOivpeaPkOWPluWIsOmFjee9ruaWh+S7tuS4rVxuICAgLSDlrp7njrDliqjmgIHphY3nva7mm7TmlrDmnLrliLZcblxuMy4gKirnm5HmjqflkozmjIfmoIcqKu+8mlxuICAgLSDmt7vliqDmm7TlhajpnaLnmoTmgKfog73nm5HmjqflkozmjIfmoIfmlLbpm4ZcbiAgIC0g5a6e546w5YGl5bq35qOA5p+l5ZKM6Ieq5Yqo5oGi5aSN5py65Yi2XG5cbjQuICoq5Luj56CB5aSN55SoKirvvJpcbiAgIC0gQU9G5ZKMUkRC5qih5Z2X5pyJ57G75Ly855qE5Yqf6IO977yI5aaC5ZCO5Y+w5L+d5a2Y77yJ77yM5Y+v5Lul5o+Q5Y+W5YWx5Lqr57uE5Lu2XG4gICAtIOS9v+eUqOabtOWkmuiuvuiuoeaooeW8j+WHj+WwkemHjeWkjeS7o+eggVxuXG4jIyDlhbfkvZPlrp7njrDlu7rorq5cblxuIyMjIDEuIOS8mOWMlkFPRlJld3JpdGVy5Lit55qEYXRvbWljUmVwbGFjZUZpbGXmlrnms5VcblxuYGBgamF2YVxucHJpdmF0ZSB2b2lkIGF0b21pY1JlcGxhY2VGaWxlKEZpbGUgdGVtcEZpbGUsIEZpbGUgdGFyZ2V0RmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAvLyDlsJ3or5Xnm7TmjqXph43lkb3lkI3vvIjlnKjlpKflpJrmlbDns7vnu5/kuIrmmK/ljp/lrZDmk43kvZzvvIlcbiAgICBpZiAodGVtcEZpbGUucmVuYW1lVG8odGFyZ2V0RmlsZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyDlpoLmnpznm7TmjqXph43lkb3lkI3lpLHotKXvvIzkvb/nlKjlpIfku73nrZbnlaVcbiAgICBGaWxlIGJhY2t1cEZpbGUgPSBuZXcgRmlsZSh0YXJnZXRGaWxlLmdldEFic29sdXRlUGF0aCgpICsgXCIuYmFrXCIpO1xuICAgIFxuICAgIC8vIOWIoOmZpOW3suWtmOWcqOeahOWkh+S7veaWh+S7tlxuICAgIGlmIChiYWNrdXBGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgIGJhY2t1cEZpbGUuZGVsZXRlKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIOWmguaenOebruagh+aWh+S7tuWtmOWcqO+8jOWwhuWFtumHjeWRveWQjeS4uuWkh+S7vVxuICAgIGlmICh0YXJnZXRGaWxlLmV4aXN0cygpKSB7XG4gICAgICAgIGlmICghdGFyZ2V0RmlsZS5yZW5hbWVUbyhiYWNrdXBGaWxlKSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6Dms5XliJvlu7rlpIfku73mlofku7bvvIzlsIbkvb/nlKjlpI3liLbmlrnlvI/mm7/mjaJcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g5aSN5Yi25Li05pe25paH5Lu25Yiw55uu5qCH5L2N572uXG4gICAgRmlsZXMuY29weSh0ZW1wRmlsZS50b1BhdGgoKSwgdGFyZ2V0RmlsZS50b1BhdGgoKSk7XG4gICAgdGVtcEZpbGUuZGVsZXRlKCk7XG4gICAgXG4gICAgLy8g5pON5L2c5oiQ5Yqf5ZCO5Yig6Zmk5aSH5Lu9XG4gICAgaWYgKGJhY2t1cEZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgYmFja3VwRmlsZS5kZWxldGUoKTtcbiAgICB9XG59XG5gYGBcblxuIyMjIDIuIOS8mOWMlkFPRkhhbmRsZXLkuK3nmoRzdGFydFJld3JpdGXmlrnms5VcblxuYGBgamF2YVxucHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgICAvLyDlpoLmnpzlt7Lnu4/lnKjph43lhpnmiJbkuI3og73ph43lhpnvvIzov5Tlm57lpLHotKVcbiAgICBpZiAocmV3cml0aW5nLmdldCgpIHx8ICFyZXdyaXRlci5jYW5SZXdyaXRlKCkpIHtcbiAgICAgICAgU3RyaW5nIHJlYXNvbiA9IHJld3JpdGluZy5nZXQoKSA/IFwi5bey5pyJ6YeN5YaZ5Lu75Yqh5Zyo6L+b6KGM5LitXCIgOiBcIumHjeWGmeaWh+S7tuato+WcqOiiq+S9v+eUqFwiO1xuICAgICAgICBsb2dnZXIud2FybihcIkFPRumHjeWGmeWksei0pTogXCIgKyByZWFzb24pO1xuICAgICAgICByZXR1cm4gQ29tcGxldGFibGVGdXR1cmUuY29tcGxldGVkRnV0dXJlKGZhbHNlKTtcbiAgICB9XG4gICAgXG4gICAgLy8g5bCd6K+V6K6+572u6YeN5YaZ54q25oCBXG4gICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICByZXdyaXRlRnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOS9v+eUqOiHquWumuS5iee6v+eoi+axoOaJp+ihjOmHjeWGmeS7u+WKoVxuICAgICAgICBleGVjdXRvclNlcnZpY2Uuc3VibWl0KCgpIC0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZ5YmN5Yi355uYXG4gICAgICAgICAgICAgICAgcHJvY2Vzc29yLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZXG4gICAgICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gcmV3cml0ZXIucmV3cml0ZSgpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKHN1Y2Nlc3MgPyBcIkFPRumHjeWGmeaIkOWKn+WujOaIkFwiIDogXCJBT0bph43lhpnlpLHotKVcIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZShzdWNjZXNzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9G6YeN5YaZ6L+H56iL5Lit5Ye66ZSZXCIsIGUpO1xuICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KGUpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICByZXdyaXRpbmcuc2V0KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXdyaXRlRnV0dXJlO1xufVxuYGBgXG5cbiMjIyAzLiDkvJjljJZBT0ZQcm9jZXNzb3LkuK3nmoRlc3RpbWF0ZUNvbW1hbmRTaXpl5pa55rOVXG5cbmBgYGphdmFcbnByaXZhdGUgaW50IGVzdGltYXRlQ29tbWFuZFNpemUoUmVzcCBjb21tYW5kKSB7XG4gICAgaWYgKGNvbW1hbmQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgXG4gICAgaWYgKGNvbW1hbmQgaW5zdGFuY2VvZiBSZXNwQXJyYXkpIHtcbiAgICAgICAgUmVzcEFycmF5IGFycmF5ID0gKFJlc3BBcnJheSkgY29tbWFuZDtcbiAgICAgICAgUmVzcFtdIGVsZW1lbnRzID0gYXJyYXkuZ2V0QXJyYXkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWfuuehgOWkp+WwjyArIOavj+S4quWFg+e0oOeahOS8sOiuoeWkp+Wwj1xuICAgICAgICBpbnQgc2l6ZSA9IDg7IC8vIOaVsOe7hOWktOmDqOWkp+Wwj1xuICAgICAgICBcbiAgICAgICAgZm9yIChSZXNwIGVsZW1lbnQgOiBlbGVtZW50cykge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBCdWxrU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gQnVsa1N0cmluZ+eahOWkp+WwjyA9IOWktOmDqCArIOWGheWuuemVv+W6plxuICAgICAgICAgICAgICAgIEJ1bGtTdHJpbmcgYnVsa1N0cmluZyA9IChCdWxrU3RyaW5nKSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIHNpemUgKz0gOCArIGJ1bGtTdHJpbmcuZ2V0Q29udGVudCgpLmdldEJ5dGVzKCkubGVuZ3RoO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDlhbbku5bnsbvlnovnmoTpu5jorqTlpKflsI9cbiAgICAgICAgICAgICAgICBzaXplICs9IDE2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgXG4gICAgLy8g6buY6K6k5aSn5bCPXG4gICAgcmV0dXJuIDY0O1xufVxuYGBgXG5cbiMjIyA0LiDkvJjljJZEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVl55qE5YaF5a2Y566h55CGXG5cbmBgYGphdmFcbi8vIOWcqOaehOmAoOWHveaVsOS4rea3u+WKoOW7tui/n+WIhumFjemAiemhuVxucHJpdmF0ZSBib29sZWFuIGxhenlBbGxvY2F0aW9uID0gZmFsc2U7XG5cbnB1YmxpYyBEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlKGludCBidWZmZXJTaXplLCBib29sZWFuIGxhenlBbGxvY2F0aW9uKSB7XG4gICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZTtcbiAgICB0aGlzLmxhenlBbGxvY2F0aW9uID0gbGF6eUFsbG9jYXRpb247XG4gICAgXG4gICAgaWYgKCFsYXp5QWxsb2NhdGlvbikge1xuICAgICAgICAvLyDnq4vljbPliIbphY1cbiAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICAgICAgdGhpcy5mbHVzaGluZ0J1ZmZlciA9IEJ5dGVCdWZmZXIuYWxsb2NhdGVEaXJlY3QoYnVmZmVyU2l6ZSk7XG4gICAgfVxufVxuXG4vLyDnoa7kv53nvJPlhrLljLrlt7LliIbphY1cbnByaXZhdGUgdm9pZCBlbnN1cmVCdWZmZXJzQWxsb2NhdGVkKCkge1xuICAgIGlmIChjdXJyZW50QnVmZmVyID09IG51bGwpIHtcbiAgICAgICAgY3VycmVudEJ1ZmZlciA9IEJ5dGVCdWZmZXIuYWxsb2NhdGVEaXJlY3QoYnVmZmVyU2l6ZSk7XG4gICAgfVxuICAgIGlmIChmbHVzaGluZ0J1ZmZlciA9PSBudWxsKSB7XG4gICAgICAgIGZsdXNoaW5nQnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICB9XG59XG5cbkBPdmVycmlkZVxucHVibGljIHZvaWQgcHV0KEJ5dGVCdWZmZXIgc3JjKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgIGlmIChjbG9zZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcIlF1ZXVlIGlzIGNsb3NlZFwiKTtcbiAgICB9XG4gICAgXG4gICAgZW5zdXJlQnVmZmVyc0FsbG9jYXRlZCgpOyAvLyDnoa7kv53nvJPlhrLljLrlt7LliIbphY1cbiAgICBcbiAgICAvLyDlhbbkvZnku6PnoIHkuI3lj5guLi5cbn1cbmBgYFxuXG4jIyDmgLvnu5Ncblxu5Z+65LqO5a+55oKo55qESmF2YeeJiFJlZGlz5pyN5Yqh56uv5Luj56CB55qE5YiG5p6Q77yM5oiR5Y+R546w5LqG5Yeg5Liq5Y+v5Lul5LyY5YyW55qE5YaX5L2Z6K6+6K6h6YOo5YiG77yaXG5cbjEuICoq5paH5Lu25pON5L2c5YaX5L2ZKirvvJpBT0ZSZXdyaXRlcuS4reeahOaWh+S7tuabv+aNoumAu+i+keWPr+S7peeugOWMlu+8jOWHj+WwkeS4jeW/heimgeeahOaWh+S7tuaTjeS9nOOAglxuXG4yLiAqKueKtuaAgeeuoeeQhumHjeWkjSoq77yaQU9GSGFuZGxlcuWSjEFPRlJld3JpdGVy5Lit55qE54q25oCB566h55CG5a2Y5Zyo6YeN5Y+g77yM5Y+v5Lul57uf5LiA44CCXG5cbjMuICoq5YaF5a2Y566h55CG5pWI546H5L2OKirvvJpEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVl55qE5YaF5a2Y5YiG6YWN562W55Wl5Y+v5Lul5LyY5YyW77yM5YeP5bCR5YaF5a2Y5Y2g55So44CCXG5cbjQuICoq5Luj56CB6YeN5aSNKirvvJrlpJrkuKrnu4Tku7bkuK3lrZjlnKjnsbvkvLznmoTlip/og73lrp7njrDvvIzlj6/ku6Xmj5Dlj5blhbHkuqvnu4Tku7bjgIJcblxuNS4gKirphY3nva7noaznvJbnoIEqKu+8mue8k+WGsuWMuuWkp+Wwj+etiemFjee9ruWAvOehrOe8lueggeWcqOS7o+eggeS4re+8jOW6lOivpeaPkOWPluWIsOmFjee9ruaWh+S7tuOAglxuXG42LiAqKuS+nei1luWFs+ezu+Wkjeadgioq77ya57uE5Lu26Ze055qE5L6d6LWW5YWz57O75aSN5p2C77yM5Y+v5Lul5L2/55So5L6d6LWW5rOo5YWl566A5YyW44CCXG5cbumAmui/h+WunuaWveS4iui/sOS8mOWMluW7uuiuru+8jOaCqOeahEphdmHniYhSZWRpc+acjeWKoeerr+WPr+S7peiOt+W+l+abtOWlveeahOaAp+iDveOAgeabtOS9jueahOi1hOa6kOWNoOeUqOWSjOabtOmrmOeahOWPr+e7tOaKpOaAp+OAglxuXG7mgqjluIzmnJvmiJHlr7nlk6rkuKrlhbfkvZPnu4Tku7bnmoTkvJjljJbov5vooYzmm7Tor6bnu4bnmoTor7TmmI7lkJfvvJ9cbiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC91dGlscy9Eb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnV0aWxzO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7XG4gICAgIDRcdGltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjtcbiAgICAgNVx0aW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjtcbiAgICAgNlx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkJsb2NraW5nUXVldWU7XG4gICAgIDdcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5UaW1lVW5pdDtcbiAgICAgOFx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmxvY2tzLkNvbmRpdGlvbjtcbiAgICAgOVx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmxvY2tzLlJlZW50cmFudExvY2s7XG4gICAgMTBcdFxuICAgIDExXHRwdWJsaWMgY2xhc3MgRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZSBpbXBsZW1lbnRzIEJsb2NraW5nUXVldWU8Qnl0ZUJ1ZmZlcj4ge1xuICAgIDEyXHQgICAgcHJpdmF0ZSBmaW5hbCBpbnQgYnVmZmVyU2l6ZTtcbiAgICAxM1x0ICAgIHByaXZhdGUgQnl0ZUJ1ZmZlciBjdXJyZW50QnVmZmVyO1xuICAgIDE0XHQgICAgcHJpdmF0ZSBCeXRlQnVmZmVyIGZsdXNoaW5nQnVmZmVyO1xuICAgIDE1XHRcbiAgICAxNlx0ICAgIHByaXZhdGUgZmluYWwgUmVlbnRyYW50TG9jayBsb2NrID0gbmV3IFJlZW50cmFudExvY2soKTtcbiAgICAxN1x0ICAgIHByaXZhdGUgZmluYWwgQ29uZGl0aW9uIG5vdEZ1bGwgPSBsb2NrLm5ld0NvbmRpdGlvbigpO1xuICAgIDE4XHQgICAgcHJpdmF0ZSBmaW5hbCBDb25kaXRpb24gbm90RW1wdHkgPSBsb2NrLm5ld0NvbmRpdGlvbigpO1xuICAgIDE5XHRcbiAgICAyMFx0ICAgIHByaXZhdGUgdm9sYXRpbGUgYm9vbGVhbiBjbG9zZWQgPSBmYWxzZTtcbiAgICAyMVx0XG4gICAgMjJcdCAgICBwcml2YXRlIHZvbGF0aWxlIGxvbmcgd3JpdGVQb3NpdGlvbiA9IDA7XG4gICAgMjNcdCAgICBwcml2YXRlIHZvbGF0aWxlIGxvbmcgZmx1c2hQb3NpdGlvbiA9IDA7XG4gICAgMjRcdFxuICAgIDI1XHRcbiAgICAyNlx0XG4gICAgMjdcdCAgICBwdWJsaWMgRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZShpbnQgYnVmZmVyU2l6ZSkge1xuICAgIDI4XHQgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG4gICAgMjlcdCAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICAzMFx0ICAgICAgICB0aGlzLmZsdXNoaW5nQnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICAzMVx0ICAgIH1cbiAgICAzMlx0XG4gICAgMzNcdCAgICBAT3ZlcnJpZGVcbiAgICAzNFx0ICAgIHB1YmxpYyB2b2lkIHB1dChCeXRlQnVmZmVyIHNyYykgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uIHtcbiAgICAzNVx0ICAgICAgICBpZiAoY2xvc2VkKSB7XG4gICAgMzZcdCAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJRdWV1ZSBpcyBjbG9zZWRcIik7XG4gICAgMzdcdCAgICAgICAgfVxuICAgIDM4XHRcbiAgICAzOVx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgICA0MFx0ICAgICAgICB0cnkge1xuICAgIDQxXHQgICAgICAgICAgICBpbnQgcmVxdWlyZWRTcGFjZSA9IHNyYy5yZW1haW5pbmcoKTtcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjee8k+WGsuWMuuepuumXtOS4jei2s++8jOetieW+heWIt+aWsFxuICAgIDQ0XHQgICAgICAgICAgICB3aGlsZSAoY3VycmVudEJ1ZmZlci5yZW1haW5pbmcoKSA8IHJlcXVpcmVkU3BhY2UpIHtcbiAgICA0NVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOe8k+WGsuWMuuWkquWwj+aXoOazleaUvuWFpeaVsOaNru+8jOaKm+WHuuW8guW4uFxuICAgIDQ2XHQgICAgICAgICAgICAgICAgaWYgKHJlcXVpcmVkU3BhY2UgPiBidWZmZXJTaXplKSB7XG4gICAgNDdcdCAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcbiAgICA0OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQnVmZmVyIHRvbyBsYXJnZTogXCIgKyByZXF1aXJlZFNwYWNlICsgXCIgYnl0ZXMsIG1heCBpcyBcIiArIGJ1ZmZlclNpemUpO1xuICAgIDQ5XHQgICAgICAgICAgICAgICAgfVxuICAgIDUwXHRcbiAgICA1MVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjee8k+WGsuWMuuW3suS9v+eUqOepuumXtOi2hei/h+S4gOWNiu+8jOS4u+WKqOinpuWPkeS6pOaNolxuICAgIDUyXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA+IGJ1ZmZlclNpemUgLyAyKSB7XG4gICAgNTNcdCAgICAgICAgICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgICA1NFx0ICAgICAgICAgICAgICAgICAgICBub3RGdWxsLnNpZ25hbCgpO1xuICAgIDU1XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgICAgICAvLyDlkKbliJnnrYnlvoXnqbrpl7Tlj5jlvpflj6/nlKhcbiAgICA1N1x0ICAgICAgICAgICAgICAgICAgICBub3RGdWxsLmF3YWl0KCk7XG4gICAgNThcdCAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlZCkge1xuICAgIDU5XHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgaXMgY2xvc2VkXCIpO1xuICAgIDYwXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgICA2MVx0ICAgICAgICAgICAgICAgIH1cbiAgICA2Mlx0ICAgICAgICAgICAgfVxuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICAgICAgLy8g6K6w5b2V5YaZ5YWl5YmN55qE5L2N572u77yM55So5LqO6Lef6LiqXG4gICAgNjVcdCAgICAgICAgICAgIGludCBiZWZvcmVQb3MgPSBjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCk7XG4gICAgNjZcdFxuICAgIDY3XHQgICAgICAgICAgICAvLyDmiafooYzmlbDmja7lhpnlhaVcbiAgICA2OFx0ICAgICAgICAgICAgY3VycmVudEJ1ZmZlci5wdXQoc3JjKTtcbiAgICA2OVx0XG4gICAgNzBcdCAgICAgICAgICAgIC8vIOabtOaWsOWGmeWFpeS9jee9rlxuICAgIDcxXHQgICAgICAgICAgICB3cml0ZVBvc2l0aW9uICs9IChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgLSBiZWZvcmVQb3MpO1xuICAgIDcyXHRcbiAgICA3M1x0ICAgICAgICAgICAgLy8g6YCa55+l5pyJ5paw5pWw5o2u5Y+v55SoXG4gICAgNzRcdCAgICAgICAgICAgIG5vdEVtcHR5LnNpZ25hbCgpO1xuICAgIDc1XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgNzZcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAgNzdcdCAgICAgICAgfVxuICAgIDc4XHQgICAgfVxuICAgIDc5XHRcbiAgICA4MFx0XG4gICAgODFcdCAgICBAT3ZlcnJpZGVcbiAgICA4Mlx0ICAgIHB1YmxpYyBCeXRlQnVmZmVyIHRha2UoKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgIDgzXHQgICAgICAgIGxvY2subG9jaygpO1xuICAgIDg0XHQgICAgICAgIHRyeSB7XG4gICAgODVcdCAgICAgICAgICAgIHdoaWxlIChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgPT0gMCAmJiAhY2xvc2VkKSB7XG4gICAgODZcdCAgICAgICAgICAgICAgICBub3RFbXB0eS5hd2FpdCgpO1xuICAgIDg3XHQgICAgICAgICAgICB9XG4gICAgODhcdFxuICAgIDg5XHQgICAgICAgICAgICBpZiAoY2xvc2VkICYmIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwKSB7XG4gICAgOTBcdCAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICA5MVx0ICAgICAgICAgICAgfVxuICAgIDkyXHRcbiAgICA5M1x0ICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgICA5NFx0XG4gICAgOTVcdCAgICAgICAgICAgIG5vdEZ1bGwuc2lnbmFsKCk7XG4gICAgOTZcdCAgICAgICAgICAgIHJldHVybiBmbHVzaGluZ0J1ZmZlcjtcbiAgICA5N1x0ICAgICAgICB9IGZpbmFsbHkge1xuICAgIDk4XHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgIDk5XHQgICAgICAgIH1cbiAgIDEwMFx0ICAgIH1cbiAgIDEwMVx0XG4gICAxMDJcdCAgICBwcml2YXRlIHZvaWQgc3dhcEFyZWEoKSB7XG4gICAxMDNcdCAgICAgICAgLy8g5Lqk5o2i57yT5Yay5Yy6XG4gICAxMDRcdCAgICAgICAgQnl0ZUJ1ZmZlciB0ZW1wID0gZmx1c2hpbmdCdWZmZXI7XG4gICAxMDVcdCAgICAgICAgZmx1c2hpbmdCdWZmZXIgPSBjdXJyZW50QnVmZmVyO1xuICAgMTA2XHQgICAgICAgIGN1cnJlbnRCdWZmZXIgPSB0ZW1wO1xuICAgMTA3XHRcbiAgIDEwOFx0ICAgICAgICAvLyDlh4blpIfov5Tlm57nmoTnvJPlhrLljLpcbiAgIDEwOVx0ICAgICAgICBmbHVzaGluZ0J1ZmZlci5mbGlwKCk7XG4gICAxMTBcdCAgICAgICAgY3VycmVudEJ1ZmZlci5jbGVhcigpO1xuICAgMTExXHRcbiAgIDExMlx0ICAgICAgICBmbHVzaFBvc2l0aW9uID0gd3JpdGVQb3NpdGlvbjtcbiAgIDExM1x0ICAgIH1cbiAgIDExNFx0XG4gICAxMTVcdCAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHtcbiAgIDExNlx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDExN1x0ICAgICAgICB0cnkge1xuICAgMTE4XHQgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgMTE5XHQgICAgICAgICAgICBub3RFbXB0eS5zaWduYWxBbGwoKTtcbiAgIDEyMFx0ICAgICAgICAgICAgbm90RnVsbC5zaWduYWxBbGwoKTtcbiAgIDEyMVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTIyXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMTIzXHQgICAgICAgIH1cbiAgIDEyNFx0ICAgIH1cbiAgIDEyNVx0XG4gICAxMjZcdCAgICBAT3ZlcnJpZGVcbiAgIDEyN1x0ICAgIHB1YmxpYyBib29sZWFuIG9mZmVyKEJ5dGVCdWZmZXIgYnl0ZUJ1ZmZlcikge1xuICAgMTI4XHQgICAgICAgIGlmIChjbG9zZWQpIHtcbiAgIDEyOVx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTMwXHQgICAgICAgIH1cbiAgIDEzMVx0XG4gICAxMzJcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAxMzNcdCAgICAgICAgdHJ5IHtcbiAgIDEzNFx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRCdWZmZXIucmVtYWluaW5nKCkgPCBieXRlQnVmZmVyLnJlbWFpbmluZygpKSB7XG4gICAxMzVcdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAxMzZcdCAgICAgICAgICAgIH1cbiAgIDEzN1x0ICAgICAgICAgICAgY3VycmVudEJ1ZmZlci5wdXQoYnl0ZUJ1ZmZlcik7XG4gICAxMzhcdCAgICAgICAgICAgIG5vdEVtcHR5LnNpZ25hbCgpO1xuICAgMTM5XHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDE0MFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTQxXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMTQyXHQgICAgICAgIH1cbiAgIDE0M1x0ICAgIH1cbiAgIDE0NFx0XG4gICAxNDVcdCAgICBAT3ZlcnJpZGVcbiAgIDE0Nlx0ICAgIHB1YmxpYyBib29sZWFuIG9mZmVyKEJ5dGVCdWZmZXIgYnl0ZUJ1ZmZlciwgbG9uZyB0aW1lb3V0LCBUaW1lVW5pdCB1bml0KSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgMTQ3XHQgICAgICAgIGlmIChjbG9zZWQpIHtcbiAgIDE0OFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTQ5XHQgICAgICAgIH1cbiAgIDE1MFx0XG4gICAxNTFcdCAgICAgICAgbG9uZyBuYW5vcyA9IHVuaXQudG9OYW5vcyh0aW1lb3V0KTtcbiAgIDE1Mlx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDE1M1x0ICAgICAgICB0cnkge1xuICAgMTU0XHQgICAgICAgICAgICB3aGlsZSAoY3VycmVudEJ1ZmZlci5yZW1haW5pbmcoKSA8IGJ5dGVCdWZmZXIucmVtYWluaW5nKCkpIHtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgIGlmIChuYW5vcyA8PSAwKSB7XG4gICAxNTZcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTU3XHQgICAgICAgICAgICAgICAgfVxuICAgMTU4XHQgICAgICAgICAgICAgICAgbmFub3MgPSBub3RGdWxsLmF3YWl0TmFub3MobmFub3MpO1xuICAgMTU5XHQgICAgICAgICAgICAgICAgaWYgKGNsb3NlZCkge1xuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDE2MVx0ICAgICAgICAgICAgICAgIH1cbiAgIDE2Mlx0ICAgICAgICAgICAgfVxuICAgMTYzXHQgICAgICAgICAgICBjdXJyZW50QnVmZmVyLnB1dChieXRlQnVmZmVyKTtcbiAgIDE2NFx0ICAgICAgICAgICAgbm90RW1wdHkuc2lnbmFsKCk7XG4gICAxNjVcdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgMTY2XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAxNjdcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAxNjhcdCAgICAgICAgfVxuICAgMTY5XHQgICAgfVxuICAgMTcwXHRcbiAgIDE3MVx0ICAgIEBPdmVycmlkZVxuICAgMTcyXHQgICAgcHVibGljIEJ5dGVCdWZmZXIgcG9sbCgpIHtcbiAgIDE3M1x0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDE3NFx0ICAgICAgICB0cnkge1xuICAgMTc1XHQgICAgICAgICAgICBpZiAoY3VycmVudEJ1ZmZlci5wb3NpdGlvbigpID09IDApIHtcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgMTc3XHQgICAgICAgICAgICB9XG4gICAxNzhcdFxuICAgMTc5XHQgICAgICAgICAgICAvLyDkuqTmjaLnvJPlhrLljLpcbiAgIDE4MFx0ICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgIDE4MVx0XG4gICAxODJcdCAgICAgICAgICAgIG5vdEZ1bGwuc2lnbmFsKCk7XG4gICAxODNcdCAgICAgICAgICAgIHJldHVybiBmbHVzaGluZ0J1ZmZlcjtcbiAgIDE4NFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTg1XHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMTg2XHQgICAgICAgIH1cbiAgIDE4N1x0ICAgIH1cbiAgIDE4OFx0XG4gICAxODlcdCAgICBAT3ZlcnJpZGVcbiAgIDE5MFx0ICAgIHB1YmxpYyBCeXRlQnVmZmVyIHBvbGwobG9uZyB0aW1lb3V0LCBUaW1lVW5pdCB1bml0KSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgMTkxXHQgICAgICAgIGxvbmcgbmFub3MgPSB1bml0LnRvTmFub3ModGltZW91dCk7XG4gICAxOTJcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAxOTNcdCAgICAgICAgdHJ5IHtcbiAgIDE5NFx0ICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwICYmICFjbG9zZWQpIHtcbiAgIDE5NVx0ICAgICAgICAgICAgICAgIGlmIChuYW5vcyA8PSAwKSB7XG4gICAxOTZcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAxOTdcdCAgICAgICAgICAgICAgICB9XG4gICAxOThcdCAgICAgICAgICAgICAgICBuYW5vcyA9IG5vdEVtcHR5LmF3YWl0TmFub3MobmFub3MpO1xuICAgMTk5XHQgICAgICAgICAgICB9XG4gICAyMDBcdFxuICAgMjAxXHQgICAgICAgICAgICBpZiAoY2xvc2VkICYmIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwKSB7XG4gICAyMDJcdCAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgIDIwM1x0ICAgICAgICAgICAgfVxuICAgMjA0XHRcbiAgIDIwNVx0ICAgICAgICAgICAgLy8g5Lqk5o2i57yT5Yay5Yy6XG4gICAyMDZcdCAgICAgICAgICAgIHN3YXBBcmVhKCk7XG4gICAyMDdcdFxuICAgMjA4XHQgICAgICAgICAgICBub3RGdWxsLnNpZ25hbCgpO1xuICAgMjA5XHQgICAgICAgICAgICByZXR1cm4gZmx1c2hpbmdCdWZmZXI7XG4gICAyMTBcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDIxMVx0ICAgICAgICAgICAgbG9jay51bmxvY2soKTtcbiAgIDIxMlx0ICAgICAgICB9XG4gICAyMTNcdCAgICB9XG4gICAyMTRcdFxuICAgMjE1XHQgICAgQE92ZXJyaWRlXG4gICAyMTZcdCAgICBwdWJsaWMgaW50IHJlbWFpbmluZ0NhcGFjaXR5KCkge1xuICAgMjE3XHQgICAgICAgIGxvY2subG9jaygpO1xuICAgMjE4XHQgICAgICAgIHRyeSB7XG4gICAyMTlcdCAgICAgICAgICAgIHJldHVybiBjdXJyZW50QnVmZmVyLnJlbWFpbmluZygpO1xuICAgMjIwXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAyMjFcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAyMjJcdCAgICAgICAgfVxuICAgMjIzXHQgICAgfVxuICAgMjI0XHRcbiAgIDIyNVx0ICAgIEBPdmVycmlkZVxuICAgMjI2XHQgICAgcHVibGljIGludCBkcmFpblRvKENvbGxlY3Rpb248PyBzdXBlciBCeXRlQnVmZmVyPiBjKSB7XG4gICAyMjdcdCAgICAgICAgcmV0dXJuIGRyYWluVG8oYywgSW50ZWdlci5NQVhfVkFMVUUpO1xuICAgMjI4XHQgICAgfVxuICAgMjI5XHRcbiAgIDIzMFx0ICAgIEBPdmVycmlkZVxuICAgMjMxXHQgICAgcHVibGljIGludCBkcmFpblRvKENvbGxlY3Rpb248PyBzdXBlciBCeXRlQnVmZmVyPiBjLCBpbnQgbWF4RWxlbWVudHMpIHtcbiAgIDIzMlx0ICAgICAgICBpZiAoYyA9PSBudWxsKSB0aHJvdyBuZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oKTtcbiAgIDIzM1x0ICAgICAgICBpZiAoYyA9PSB0aGlzKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7XG4gICAyMzRcdCAgICAgICAgaWYgKG1heEVsZW1lbnRzIDw9IDApIHJldHVybiAwO1xuICAgMjM1XHRcbiAgIDIzNlx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDIzN1x0ICAgICAgICB0cnkge1xuICAgMjM4XHQgICAgICAgICAgICBpbnQgbiA9IE1hdGgubWluKG1heEVsZW1lbnRzLCAxKTsgLy8g5oiR5Lus5q+P5qyh5pyA5aSa5Y+q6IO95Y+W5LiA5Liq57yT5Yay5Yy6XG4gICAyMzlcdFxuICAgMjQwXHQgICAgICAgICAgICBpZiAoY3VycmVudEJ1ZmZlci5wb3NpdGlvbigpID09IDApIHtcbiAgIDI0MVx0ICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgMjQyXHQgICAgICAgICAgICB9XG4gICAyNDNcdFxuICAgMjQ0XHQgICAgICAgICAgICAvLyDkuqTmjaLnvJPlhrLljLpcbiAgIDI0NVx0ICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgIDI0Nlx0XG4gICAyNDdcdCAgICAgICAgICAgIGMuYWRkKGZsdXNoaW5nQnVmZmVyKTtcbiAgIDI0OFx0ICAgICAgICAgICAgbm90RnVsbC5zaWduYWwoKTtcbiAgIDI0OVx0ICAgICAgICAgICAgcmV0dXJuIG47XG4gICAyNTBcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDI1MVx0ICAgICAgICAgICAgbG9jay51bmxvY2soKTtcbiAgIDI1Mlx0ICAgICAgICB9XG4gICAyNTNcdCAgICB9XG4gICAyNTRcdFxuICAgMjU1XHQgICAgQE92ZXJyaWRlXG4gICAyNTZcdCAgICBwdWJsaWMgaW50IHNpemUoKSB7XG4gICAyNTdcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAyNThcdCAgICAgICAgdHJ5IHtcbiAgIDI1OVx0ICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKTtcbiAgIDI2MFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMjYxXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMjYyXHQgICAgICAgIH1cbiAgIDI2M1x0ICAgIH1cbiAgIDI2NFx0XG4gICAyNjVcdCAgICBAT3ZlcnJpZGVcbiAgIDI2Nlx0ICAgIHB1YmxpYyBib29sZWFuIGlzRW1wdHkoKSB7XG4gICAyNjdcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAyNjhcdCAgICAgICAgdHJ5IHtcbiAgIDI2OVx0ICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwO1xuICAgMjcwXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAyNzFcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAyNzJcdCAgICAgICAgfVxuICAgMjczXHQgICAgfVxuICAgMjc0XHRcbiAgIDI3NVx0ICAgIEBPdmVycmlkZVxuICAgMjc2XHQgICAgcHVibGljIGJvb2xlYW4gY29udGFpbnMoT2JqZWN0IG8pIHtcbiAgIDI3N1x0ICAgICAgICByZXR1cm4gZmFsc2U7IC8vIOS4jeaUr+aMgeatpOaTjeS9nFxuICAgMjc4XHQgICAgfVxuICAgMjc5XHRcbiAgIDI4MFx0ICAgIEBPdmVycmlkZVxuICAgMjgxXHQgICAgcHVibGljIEl0ZXJhdG9yPEJ5dGVCdWZmZXI+IGl0ZXJhdG9yKCkge1xuICAgMjgyXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDI4M1x0ICAgIH1cbiAgIDI4NFx0XG4gICAyODVcdCAgICBAT3ZlcnJpZGVcbiAgIDI4Nlx0ICAgIHB1YmxpYyBPYmplY3RbXSB0b0FycmF5KCkge1xuICAgMjg3XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDI4OFx0ICAgIH1cbiAgIDI4OVx0XG4gICAyOTBcdCAgICBAT3ZlcnJpZGVcbiAgIDI5MVx0ICAgIHB1YmxpYyA8VD4gVFtdIHRvQXJyYXkoVFtdIGEpIHtcbiAgIDI5Mlx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsgLy8g5LiN5pSv5oyB5q2k5pON5L2cXG4gICAyOTNcdCAgICB9XG4gICAyOTRcdFxuICAgMjk1XHQgICAgQE92ZXJyaWRlXG4gICAyOTZcdCAgICBwdWJsaWMgYm9vbGVhbiByZW1vdmUoT2JqZWN0IG8pIHtcbiAgIDI5N1x0ICAgICAgICByZXR1cm4gZmFsc2U7IC8vIOS4jeaUr+aMgeatpOaTjeS9nFxuICAgMjk4XHQgICAgfVxuICAgMjk5XHRcbiAgIDMwMFx0ICAgIEBPdmVycmlkZVxuICAgMzAxXHQgICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNBbGwoQ29sbGVjdGlvbjw/PiBjKSB7XG4gICAzMDJcdCAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDMwM1x0ICAgIH1cbiAgIDMwNFx0XG4gICAzMDVcdCAgICBAT3ZlcnJpZGVcbiAgIDMwNlx0ICAgIHB1YmxpYyBib29sZWFuIGFkZEFsbChDb2xsZWN0aW9uPD8gZXh0ZW5kcyBCeXRlQnVmZmVyPiBjKSB7XG4gICAzMDdcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7IC8vIOS4jeaUr+aMgeatpOaTjeS9nFxuICAgMzA4XHQgICAgfVxuICAgMzA5XHRcbiAgIDMxMFx0ICAgIEBPdmVycmlkZVxuICAgMzExXHQgICAgcHVibGljIGJvb2xlYW4gcmVtb3ZlQWxsKENvbGxlY3Rpb248Pz4gYykge1xuICAgMzEyXHQgICAgICAgIHJldHVybiBmYWxzZTsgLy8g5LiN5pSv5oyB5q2k5pON5L2cXG4gICAzMTNcdCAgICB9XG4gICAzMTRcdFxuICAgMzE1XHQgICAgQE92ZXJyaWRlXG4gICAzMTZcdCAgICBwdWJsaWMgYm9vbGVhbiByZXRhaW5BbGwoQ29sbGVjdGlvbjw/PiBjKSB7XG4gICAzMTdcdCAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDMxOFx0ICAgIH1cbiAgIDMxOVx0XG4gICAzMjBcdCAgICBAT3ZlcnJpZGVcbiAgIDMyMVx0ICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkge1xuICAgMzIyXHQgICAgICAgIGxvY2subG9jaygpO1xuICAgMzIzXHQgICAgICAgIHRyeSB7XG4gICAzMjRcdCAgICAgICAgICAgIGN1cnJlbnRCdWZmZXIuY2xlYXIoKTtcbiAgIDMyNVx0ICAgICAgICAgICAgZmx1c2hpbmdCdWZmZXIuY2xlYXIoKTtcbiAgIDMyNlx0ICAgICAgICAgICAgbm90RnVsbC5zaWduYWxBbGwoKTtcbiAgIDMyN1x0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMzI4XHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMzI5XHQgICAgICAgIH1cbiAgIDMzMFx0ICAgIH1cbiAgIDMzMVx0XG4gICAzMzJcdCAgICBAT3ZlcnJpZGVcbiAgIDMzM1x0ICAgIHB1YmxpYyBib29sZWFuIGFkZChCeXRlQnVmZmVyIGJ5dGVCdWZmZXIpIHtcbiAgIDMzNFx0ICAgICAgICBpZiAob2ZmZXIoYnl0ZUJ1ZmZlcikpIHtcbiAgIDMzNVx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAzMzZcdCAgICAgICAgfVxuICAgMzM3XHQgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJRdWV1ZSBmdWxsXCIpO1xuICAgMzM4XHQgICAgfVxuICAgMzM5XHRcbiAgIDM0MFx0ICAgIEBPdmVycmlkZVxuICAgMzQxXHQgICAgcHVibGljIEJ5dGVCdWZmZXIgcmVtb3ZlKCkge1xuICAgMzQyXHQgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gcG9sbCgpO1xuICAgMzQzXHQgICAgICAgIGlmIChidWZmZXIgPT0gbnVsbCkge1xuICAgMzQ0XHQgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgZW1wdHlcIik7XG4gICAzNDVcdCAgICAgICAgfVxuICAgMzQ2XHQgICAgICAgIHJldHVybiBidWZmZXI7XG4gICAzNDdcdCAgICB9XG4gICAzNDhcdFxuICAgMzQ5XHQgICAgQE92ZXJyaWRlXG4gICAzNTBcdCAgICBwdWJsaWMgQnl0ZUJ1ZmZlciBlbGVtZW50KCkge1xuICAgMzUxXHQgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gcGVlaygpO1xuICAgMzUyXHQgICAgICAgIGlmIChidWZmZXIgPT0gbnVsbCkge1xuICAgMzUzXHQgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgZW1wdHlcIik7XG4gICAzNTRcdCAgICAgICAgfVxuICAgMzU1XHQgICAgICAgIHJldHVybiBidWZmZXI7XG4gICAzNTZcdCAgICB9XG4gICAzNTdcdFxuICAgMzU4XHQgICAgQE92ZXJyaWRlXG4gICAzNTlcdCAgICBwdWJsaWMgQnl0ZUJ1ZmZlciBwZWVrKCkge1xuICAgMzYwXHQgICAgICAgIGxvY2subG9jaygpO1xuICAgMzYxXHQgICAgICAgIHRyeSB7XG4gICAzNjJcdCAgICAgICAgICAgIGlmIChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgPT0gMCkge1xuICAgMzYzXHQgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAzNjRcdCAgICAgICAgICAgIH1cbiAgIDM2NVx0ICAgICAgICAgICAgLy8g6L+U5Zue5b2T5YmN57yT5Yay5Yy655qE5Y+q6K+76KeG5Zu+XG4gICAzNjZcdCAgICAgICAgICAgIEJ5dGVCdWZmZXIgdmlldyA9IGN1cnJlbnRCdWZmZXIuZHVwbGljYXRlKCk7XG4gICAzNjdcdCAgICAgICAgICAgIHZpZXcuZmxpcCgpO1xuICAgMzY4XHQgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgIDM2OVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMzcwXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMzcxXHQgICAgICAgIH1cbiAgIDM3Mlx0ICAgIH1cbiAgIDM3M1x0XG4gICAzNzRcdCAgICBwdWJsaWMgbG9uZyBnZXRXcml0ZVBvc2l0aW9uKCkge1xuICAgMzc1XHQgICAgICAgIHJldHVybiB3cml0ZVBvc2l0aW9uO1xuICAgMzc2XHQgICAgfVxuICAgMzc3XHRcbiAgIDM3OFx0ICAgIC8qKlxuICAgMzc5XHQgICAgICog6I635Y+W5pyA5ZCO5Yi355uY5L2N572uXG4gICAzODBcdCAgICAgKi9cbiAgIDM4MVx0ICAgIHB1YmxpYyBsb25nIGdldEZsdXNoUG9zaXRpb24oKSB7XG4gICAzODJcdCAgICAgICAgcmV0dXJuIGZsdXNoUG9zaXRpb247XG4gICAzODNcdCAgICB9XG4gICAzODRcdFxuICAgMzg1XHQgICAgLyoqXG4gICAzODZcdCAgICAgKiDojrflj5bmnKrliLfnm5jmlbDmja7lpKflsI9cbiAgIDM4N1x0ICAgICAqL1xuICAgMzg4XHQgICAgcHVibGljIGxvbmcgZ2V0VW5mbHVzaGVkU2l6ZSgpIHtcbiAgIDM4OVx0ICAgICAgICByZXR1cm4gd3JpdGVQb3NpdGlvbiAtIGZsdXNoUG9zaXRpb247XG4gICAzOTBcdCAgICB9XG4gICAzOTFcdH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDM5MVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxOVRmVFp4OXpHemE2WlZIUThEUVhiNSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQxOTo1NDozNS4wNjhaIiwicmVzcG9uc2VfdGV4dCI6IuWfuuS6juWvueS7o+eggeeahOWIhuaekO+8jOaIkeeOsOWcqOWPr+S7peS4uuaCqOaPkOS+m+S4gOS6m+WFs+S6jkphdmHniYhSZWRpc+acjeWKoeerr+WGl+S9meiuvuiuoeS8mOWMlueahOW7uuiuruOAguS7peS4i+aYr+aIkeeahOWIhuaekOWSjOW7uuiuru+8mlxuXG4jIyDkvJjljJblu7rorq5cblxuIyMjIDEuIEFPRumHjeWGmeWZqOS8mOWMllxuXG5gYGBgamF2YSBwYXRoPXNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhIG1vZGU9RVhDRVJQVFxucHVibGljIGJvb2xlYW4gcmV3cml0ZSgpe1xuICAgIGlmKCFpc1Jld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLHRydWUpKXtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5q2j5Zyo6YeN5YaZXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdHJ5e1xuICAgICAgICByZXdyaXRlQnVmZmVyID0gQ29sbGVjdGlvbnMuc3luY2hyb25pemVkTGlzdChuZXcgQXJyYXlMaXN0PD4oKSk7XG5cbiAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdGFydFJld3JpdGVCdWZmZXIoKTtcblxuICAgICAgICBGaWxlIHRlbXBGaWxlID0gbmV3IEZpbGUodGVtcEZpbGVuYW1lKTtcbiAgICAgICAgaWYodGVtcEZpbGUuZXhpc3RzKCkpe1xuICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBkb1dyaXRlKCk7XG5cbiAgICAgICAgaWYoc3VjY2Vzcyl7XG4gICAgICAgICAgICBMaXN0PEJ5dGVCdWZmZXI+IGJ1ZmZlcnMgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0b3BSZXdyaXRlQnVmZmVyQW5kR2V0KCk7XG5cbiAgICAgICAgICAgIC8vIOWwhumHjeWGmeacn+mXtOeahOWRveS7pOi/veWKoOWIsOaWsEFPRuaWh+S7tlxuICAgICAgICAgICAgYXBwZW5kUmV3cml0ZUJ1ZmZlclRvVGVtcEZpbGUoYnVmZmVycyk7XG5cbiAgICAgICAgICAgIC8vIOWOn+WtkOaAp+WcsOabv+aNouaWh+S7tlxuICAgICAgICAgICAgYXRvbWljUmVwbGFjZUZpbGUodGVtcEZpbGUsIG5ldyBGaWxlKGFvZkZpbGVuYW1lKSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6YeN5YaZ5aSx6LSlXCIpO1xuICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XG5cbiAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuZGlzY2FyZFJld3JpdGVCdWZmZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9Y2F0Y2goRXhjZXB0aW9uIGUpe1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBkdXJpbmcgQU9GUmV3cml0ZXJcIiwgZSk7XG4gICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuZGlzY2FyZFJld3JpdGVCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1maW5hbGx5IHtcbiAgICAgICAgaXNSZXdyaXRpbmcuc2V0KGZhbHNlKTtcbiAgICB9XG59XG5gYGBgXG5cbioq5LyY5YyW5bu66K6uKirvvJpcblxuMS4gKirph43mnoRhdG9taWNSZXBsYWNlRmlsZeaWueazlSoq77yaXG4gICAtIOesrDExMOihjOacieS4gOS4qmJ1Z++8jGB0ZW1wRmlsZS5yZW5hbWVUbyh0ZW1wRmlsZSlg5bqU6K+l5pivYHRlbXBGaWxlLnJlbmFtZVRvKGZpbGUpYFxuICAgLSDmlofku7bmm7/mjaLpgLvovpHlj6/ku6XnroDljJbvvIzlh4/lsJHkuI3lv4XopoHnmoTmlofku7bmk43kvZxcblxuMi4gKirkvJjljJbkuLTml7blj5jph4/kvb/nlKgqKu+8mlxuICAgLSDnsbvmiJDlkZjlj5jph49gcmV3cml0ZUJ1ZmZlcmDlupTor6XmmK/lsYDpg6jlj5jph4/vvIzkuI3pnIDopoHkvZzkuLrnsbvmiJDlkZhcblxuMy4gKirotYTmupDnrqHnkIbkvJjljJYqKu+8mlxuICAgLSDkvb/nlKh0cnktd2l0aC1yZXNvdXJjZXPnoa7kv53mlofku7botYTmupDmraPnoa7lhbPpl61cblxuIyMjIDIuIEFPRkhhbmRsZXLkvJjljJZcblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvQU9GSGFuZGxlci5qYXZhIG1vZGU9RVhDRVJQVFxucHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgICBpZiAocmV3cml0aW5nLmdldCgpKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKFwi5bey5pyJ6YeN5YaZ5Lu75Yqh5Zyo6L+b6KGM5Lit77yM5b+955Wl5q2k5qyh6K+35rGCXCIpO1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBmdXR1cmUuY29tcGxldGUoZmFsc2UpO1xuICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgIH1cbiAgICBpZiAoIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgICAgICBsb2dnZXIud2FybihcIumHjeWGmeaWh+S7tuWksei0pe+8jOivt+ajgOafpemHjeWGmeaWh+S7tuaYr+WQpuato+WcqOiiq+S9v+eUqFwiKTtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgZnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgICB9XG5cbiAgICBpZiAocmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XG4gICAgICAgIHJld3JpdGVGdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZS5ydW5Bc3luYygoKSAtPiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmemAu+i+keWJje+8jOehruS/neaJgOacieaVsOaNrumDveW3suWIt+ebmFxuICAgICAgICAgICAgICAgIHByb2Nlc3Nvci5mbHVzaCgpO1xuXG4gICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZXG4gICAgICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gcmV3cml0ZXIucmV3cml0ZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bph43lhpnmiJDlip/lrozmiJBcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJBT0bph43lhpnlpLHotKVcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZShzdWNjZXNzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9G6YeN5YaZ6L+H56iL5Lit5Ye66ZSZXCIsIGUpO1xuICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KGUpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICByZXdyaXRpbmcuc2V0KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXdyaXRlRnV0dXJlO1xufVxuYGBgYFxuXG4qKuS8mOWMluW7uuiurioq77yaXG5cbjEuICoq5YeP5bCR6YeN5aSN5Luj56CBKirvvJpcbiAgIC0g5Yib5bu6Q29tcGxldGFibGVGdXR1cmXnmoTku6PnoIHph43lpI3kuobkuInmrKHvvIzlj6/ku6Xmj5Dlj5bkuLrmlrnms5VcbiAgIC0g6YeN5YaZ54q25oCB5qOA5p+l6YC76L6R5Y+v5Lul5ZCI5bm2XG5cbjIuICoq57q/56iL5rGg566h55CGKirvvJpcbiAgIC0gYENvbXBsZXRhYmxlRnV0dXJlLnJ1bkFzeW5jYOS9v+eUqOeahOaYr+m7mOiupOe6v+eoi+axoO+8jOW7uuiuruS9v+eUqOiHquWumuS5iee6v+eoi+axoOS7peS+v+abtOWlveWcsOaOp+WItui1hOa6kFxuXG4zLiAqKueKtuaAgeeuoeeQhuS8mOWMlioq77yaXG4gICAtIGByZXdyaXRpbmdg54q25oCB5Y+Y6YeP5LiOYHJld3JpdGVyLmNhblJld3JpdGUoKWDlrZjlnKjlip/og73ph43lj6DvvIzlj6/ku6Xnu5/kuIBcblxuIyMjIDMuIEFPRlByb2Nlc3NvcuS8mOWMllxuXG5gYGBgamF2YSBwYXRoPXNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9wcm9jZXNzb3IvQU9GUHJvY2Vzc29yLmphdmEgbW9kZT1FWENFUlBUXG5wcml2YXRlIGludCBlc3RpbWF0ZUNvbW1hbmRTaXplKFJlc3AgY29tbWFuZCkge1xuICAgIGlmIChjb21tYW5kID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIDEyODtcbn1cbmBgYGBcblxuKirkvJjljJblu7rorq4qKu+8mlxuXG4xLiAqKuWRveS7pOWkp+Wwj+S8sOeul+S8mOWMlioq77yaXG4gICAtIOW9k+WJjeeahGVzdGltYXRlQ29tbWFuZFNpemXmlrnms5XmgLvmmK/ov5Tlm57lm7rlrprlgLwxMjjvvIzov5nkuI3lpJ/nsr7noa5cbiAgIC0g5bu66K6u5a6e546w5pu05YeG56Gu55qE5aSn5bCP5Lyw566X77yM5qC55o2u5ZG95Luk57G75Z6L5ZKM5Y+C5pWw5pWw6YePXG5cbjIuICoq5om55aSE55CG57yT5Yay5Yy6566h55CGKirvvJpcbiAgIC0g5b2T5YmN55qE5om55aSE55CG57yT5Yay5Yy6566h55CG6YC76L6R5Y+v5Lul5LyY5YyW77yM5YeP5bCR5YaF5a2Y5YiG6YWN5ZKM6YeK5pS+XG5cbjMuICoq5oCn6IO955uR5o6nKirvvJpcbiAgIC0g5re75Yqg5pu05aSa5oCn6IO95oyH5qCH77yM5aaC5ZG95Luk5aSE55CG6YCf546H44CB5bmz5Z2H5ZG95Luk5aSn5bCP562JXG5cbiMjIyA0LiBEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVl5LyY5YyWXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvdXRpbHMvRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZS5qYXZhIG1vZGU9RVhDRVJQVFxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBwdXQoQnl0ZUJ1ZmZlciBzcmMpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7XG4gICAgaWYgKGNsb3NlZCkge1xuICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgaXMgY2xvc2VkXCIpO1xuICAgIH1cblxuICAgIGxvY2subG9jaygpO1xuICAgIHRyeSB7XG4gICAgICAgIGludCByZXF1aXJlZFNwYWNlID0gc3JjLnJlbWFpbmluZygpO1xuXG4gICAgICAgIC8vIOWmguaenOW9k+WJjee8k+WGsuWMuuepuumXtOS4jei2s++8jOetieW+heWIt+aWsFxuICAgICAgICB3aGlsZSAoY3VycmVudEJ1ZmZlci5yZW1haW5pbmcoKSA8IHJlcXVpcmVkU3BhY2UpIHtcbiAgICAgICAgICAgIC8vIOWmguaenOe8k+WGsuWMuuWkquWwj+aXoOazleaUvuWFpeaVsOaNru+8jOaKm+WHuuW8guW4uFxuICAgICAgICAgICAgaWYgKHJlcXVpcmVkU3BhY2UgPiBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQnVmZmVyIHRvbyBsYXJnZTogXCIgKyByZXF1aXJlZFNwYWNlICsgXCIgYnl0ZXMsIG1heCBpcyBcIiArIGJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3nvJPlhrLljLrlt7Lkvb/nlKjnqbrpl7TotoXov4fkuIDljYrvvIzkuLvliqjop6blj5HkuqTmjaJcbiAgICAgICAgICAgIGlmIChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgPiBidWZmZXJTaXplIC8gMikge1xuICAgICAgICAgICAgICAgIHN3YXBBcmVhKCk7XG4gICAgICAgICAgICAgICAgbm90RnVsbC5zaWduYWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g5ZCm5YiZ562J5b6F56m66Ze05Y+Y5b6X5Y+v55SoXG4gICAgICAgICAgICAgICAgbm90RnVsbC5hd2FpdCgpO1xuICAgICAgICAgICAgICAgIGlmIChjbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcIlF1ZXVlIGlzIGNsb3NlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDorrDlvZXlhpnlhaXliY3nmoTkvY3nva7vvIznlKjkuo7ot5/ouKpcbiAgICAgICAgaW50IGJlZm9yZVBvcyA9IGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKTtcblxuICAgICAgICAvLyDmiafooYzmlbDmja7lhpnlhaVcbiAgICAgICAgY3VycmVudEJ1ZmZlci5wdXQoc3JjKTtcblxuICAgICAgICAvLyDmm7TmlrDlhpnlhaXkvY3nva5cbiAgICAgICAgd3JpdGVQb3NpdGlvbiArPSAoY3VycmVudEJ1ZmZlci5wb3NpdGlvbigpIC0gYmVmb3JlUG9zKTtcblxuICAgICAgICAvLyDpgJrnn6XmnInmlrDmlbDmja7lj6/nlKhcbiAgICAgICAgbm90RW1wdHkuc2lnbmFsKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgbG9jay51bmxvY2soKTtcbiAgICB9XG59XG5gYGBgXG5cbioq5LyY5YyW5bu66K6uKirvvJpcblxuMS4gKirlh4/lsJHplIHnq57kuokqKu+8mlxuICAgLSDlvZPliY3lrp7njrDkuK3vvIzmiYDmnInmk43kvZzpg73kvb/nlKjlkIzkuIDkuKrplIHvvIzlj6/og73lr7zoh7Tpq5jlubblj5HkuIvnmoTmgKfog73nk7bpoohcbiAgIC0g6ICD6JmR5L2/55So5YiG56a76ZSB562W55Wl77yM6K+75YaZ5pON5L2c5L2/55So5LiN5ZCM55qE6ZSBXG5cbjIuICoq5YaF5a2Y5YiG6YWN5LyY5YyWKirvvJpcbiAgIC0g5b2T5YmN5a6e546w5Zyo5p6E6YCg5Ye95pWw5Lit55u05o6l5YiG6YWN5Lik5LiqRGlyZWN0Qnl0ZUJ1ZmZlcu+8jOi/meWPr+iDveWvvOiHtOWkp+mHj+WGheWtmOWNoOeUqFxuICAgLSDogIPomZHkvb/nlKjmsaDljJbnrZbnlaXmiJblu7bov5/liIbphY1cblxuMy4gKirkuI3lv4XopoHnmoTmlrnms5Xlrp7njrAqKu+8mlxuICAgLSDorrjlpJrkuI3mlK/mjIHnmoTpm4blkIjmk43kvZzmlrnms5Xlj6/ku6Xnp7vpmaTvvIzmiJbogIXkvb/nlKjmir3osaHnsbvogIzkuI3mmK/lrp7njrDmjqXlj6NcblxuIyMjIDUuIFJEQkhhbmRsZXLkvJjljJZcblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJIYW5kbGVyLmphdmEgbW9kZT1FWENFUlBUXG5wcml2YXRlIHZvaWQgY2hlY2tTYXZlQ29uZGl0aW9ucygpIHtcbiAgICBpZiAoaXNTYXZpbmcpIHJldHVybjtcblxuICAgIGxvbmcgbm93ID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLyAxMDAwO1xuICAgIGlmIChzYXZlUG9saWN5LnNob3VsZEZ1bGxTYXZlKG5vdykpIHtcbiAgICAgICAgYmdzYXZlKHRydWUpO1xuICAgIH0gZWxzZSBpZiAoY2hhbmdlVHJhY2tlci5oYXNNb2RpZmljYXRpb25zKCkpIHtcbiAgICAgICAgYmdzYXZlKGZhbHNlKTtcbiAgICB9XG59XG5gYGBgXG5cbioq5LyY5YyW5bu66K6uKirvvJpcblxuMS4gKirkv53lrZjnrZbnlaXkvJjljJYqKu+8mlxuICAgLSDlvZPliY3nmoTkv53lrZjmnaHku7bmo4Dmn6Xmr4/np5LmiafooYzkuIDmrKHvvIzlj6/og73lr7zoh7TkuI3lv4XopoHnmoRDUFXmtojogJdcbiAgIC0g6ICD6JmR5L2/55So5pu05pm66IO955qE6Kem5Y+R5py65Yi277yM5aaC5Z+65LqO5Y+Y5pu05pWw6YeP55qE6ZiI5YC8XG5cbjIuICoq6LWE5rqQ566h55CGKirvvJpcbiAgIC0g6ICD6JmR5re75Yqg6LWE5rqQ6ZmQ5Yi277yM5aaC5pyA5aSn5bm25Y+R5L+d5a2Y5Lu75Yqh5pWw44CB5pyA5aSn5YaF5a2Y5L2/55So6YeP562JXG5cbjMuICoq6ZSZ6K+v5oGi5aSNKirvvJpcbiAgIC0g5aKe5by66ZSZ6K+v5oGi5aSN5py65Yi277yM56Gu5L+d5Zyo5L+d5a2Y5aSx6LSl5pe26IO95aSf5q2j56Gu5oGi5aSNXG5cbiMjIyA2LiDmlbTkvZPmnrbmnoTkvJjljJZcblxuMS4gKirkvp3otZbms6jlhaXkvJjljJYqKu+8mlxuICAgLSDlvZPliY3ku6PnoIHkuK3lrZjlnKjlpKfph4/nm7TmjqXkvp3otZbvvIzlpoJgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKWBcbiAgIC0g5bu66K6u5L2/55So5L6d6LWW5rOo5YWl5qGG5p625oiW5bel5Y6C5qih5byP566A5YyW57uE5Lu26Ze05L6d6LWWXG5cbjIuICoq6YWN572u566h55CGKirvvJpcbiAgIC0g56Gs57yW56CB55qE6YWN572u5YC877yI5aaC57yT5Yay5Yy65aSn5bCP77yJ5bqU6K+l5o+Q5Y+W5Yiw6YWN572u5paH5Lu25LitXG4gICAtIOWunueOsOWKqOaAgemFjee9ruabtOaWsOacuuWItlxuXG4zLiAqKuebkeaOp+WSjOaMh+aghyoq77yaXG4gICAtIOa3u+WKoOabtOWFqOmdoueahOaAp+iDveebkeaOp+WSjOaMh+agh+aUtumbhlxuICAgLSDlrp7njrDlgaXlurfmo4Dmn6Xlkozoh6rliqjmgaLlpI3mnLrliLZcblxuNC4gKirku6PnoIHlpI3nlKgqKu+8mlxuICAgLSBBT0blkoxSRELmqKHlnZfmnInnsbvkvLznmoTlip/og73vvIjlpoLlkI7lj7Dkv53lrZjvvInvvIzlj6/ku6Xmj5Dlj5blhbHkuqvnu4Tku7ZcbiAgIC0g5L2/55So5pu05aSa6K6+6K6h5qih5byP5YeP5bCR6YeN5aSN5Luj56CBXG5cbiMjIOWFt+S9k+WunueOsOW7uuiurlxuXG4jIyMgMS4g5LyY5YyWQU9GUmV3cml0ZXLkuK3nmoRhdG9taWNSZXBsYWNlRmlsZeaWueazlVxuXG5gYGBqYXZhXG5wcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSB0YXJnZXRGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIC8vIOWwneivleebtOaOpemHjeWRveWQje+8iOWcqOWkp+WkmuaVsOezu+e7n+S4iuaYr+WOn+WtkOaTjeS9nO+8iVxuICAgIGlmICh0ZW1wRmlsZS5yZW5hbWVUbyh0YXJnZXRGaWxlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIOWmguaenOebtOaOpemHjeWRveWQjeWksei0pe+8jOS9v+eUqOWkh+S7veetlueVpVxuICAgIEZpbGUgYmFja3VwRmlsZSA9IG5ldyBGaWxlKHRhcmdldEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkgKyBcIi5iYWtcIik7XG4gICAgXG4gICAgLy8g5Yig6Zmk5bey5a2Y5Zyo55qE5aSH5Lu95paH5Lu2XG4gICAgaWYgKGJhY2t1cEZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgYmFja3VwRmlsZS5kZWxldGUoKTtcbiAgICB9XG4gICAgXG4gICAgLy8g5aaC5p6c55uu5qCH5paH5Lu25a2Y5Zyo77yM5bCG5YW26YeN5ZG95ZCN5Li65aSH5Lu9XG4gICAgaWYgKHRhcmdldEZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgaWYgKCF0YXJnZXRGaWxlLnJlbmFtZVRvKGJhY2t1cEZpbGUpKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIm+W7uuWkh+S7veaWh+S7tu+8jOWwhuS9v+eUqOWkjeWItuaWueW8j+abv+aNolwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyDlpI3liLbkuLTml7bmlofku7bliLDnm67moIfkvY3nva5cbiAgICBGaWxlcy5jb3B5KHRlbXBGaWxlLnRvUGF0aCgpLCB0YXJnZXRGaWxlLnRvUGF0aCgpKTtcbiAgICB0ZW1wRmlsZS5kZWxldGUoKTtcbiAgICBcbiAgICAvLyDmk43kvZzmiJDlip/lkI7liKDpmaTlpIfku71cbiAgICBpZiAoYmFja3VwRmlsZS5leGlzdHMoKSkge1xuICAgICAgICBiYWNrdXBGaWxlLmRlbGV0ZSgpO1xuICAgIH1cbn1cbmBgYFxuXG4jIyMgMi4g5LyY5YyWQU9GSGFuZGxlcuS4reeahHN0YXJ0UmV3cml0ZeaWueazlVxuXG5gYGBqYXZhXG5wdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gc3RhcnRSZXdyaXRlKCkge1xuICAgIC8vIOWmguaenOW3sue7j+WcqOmHjeWGmeaIluS4jeiDvemHjeWGme+8jOi/lOWbnuWksei0pVxuICAgIGlmIChyZXdyaXRpbmcuZ2V0KCkgfHwgIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgICAgICBTdHJpbmcgcmVhc29uID0gcmV3cml0aW5nLmdldCgpID8gXCLlt7LmnInph43lhpnku7vliqHlnKjov5vooYzkuK1cIiA6IFwi6YeN5YaZ5paH5Lu25q2j5Zyo6KKr5L2/55SoXCI7XG4gICAgICAgIGxvZ2dlci53YXJuKFwiQU9G6YeN5YaZ5aSx6LSlOiBcIiArIHJlYXNvbik7XG4gICAgICAgIHJldHVybiBDb21wbGV0YWJsZUZ1dHVyZS5jb21wbGV0ZWRGdXR1cmUoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICAvLyDlsJ3or5Xorr7nva7ph43lhpnnirbmgIFcbiAgICBpZiAocmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XG4gICAgICAgIHJld3JpdGVGdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBcbiAgICAgICAgLy8g5L2/55So6Ieq5a6a5LmJ57q/56iL5rGg5omn6KGM6YeN5YaZ5Lu75YqhXG4gICAgICAgIGV4ZWN1dG9yU2VydmljZS5zdWJtaXQoKCkgLT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhpnliY3liLfnm5hcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3IuZmx1c2goKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhplcbiAgICAgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSByZXdyaXRlci5yZXdyaXRlKCk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oc3VjY2VzcyA/IFwiQU9G6YeN5YaZ5oiQ5Yqf5a6M5oiQXCIgOiBcIkFPRumHjeWGmeWksei0pVwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnov4fnqIvkuK3lh7rplJlcIiwgZSk7XG4gICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBcblxuIyMjIDMuIOS8mOWMlkFPRlByb2Nlc3NvcuS4reeahGVzdGltYXRlQ29tbWFuZFNpemXmlrnms5VcblxuYGBgamF2YVxucHJpdmF0ZSBpbnQgZXN0aW1hdGVDb21tYW5kU2l6ZShSZXNwIGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29tbWFuZCBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBjb21tYW5kO1xuICAgICAgICBSZXNwW10gZWxlbWVudHMgPSBhcnJheS5nZXRBcnJheSgpO1xuICAgICAgICBcbiAgICAgICAgLy8g5Z+656GA5aSn5bCPICsg5q+P5Liq5YWD57Sg55qE5Lyw6K6h5aSn5bCPXG4gICAgICAgIGludCBzaXplID0gODsgLy8g5pWw57uE5aS06YOo5aSn5bCPXG4gICAgICAgIFxuICAgICAgICBmb3IgKFJlc3AgZWxlbWVudCA6IGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEJ1bGtTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBCdWxrU3RyaW5n55qE5aSn5bCPID0g5aS06YOoICsg5YaF5a656ZW/5bqmXG4gICAgICAgICAgICAgICAgQnVsa1N0cmluZyBidWxrU3RyaW5nID0gKEJ1bGtTdHJpbmcpIGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgc2l6ZSArPSA4ICsgYnVsa1N0cmluZy5nZXRDb250ZW50KCkuZ2V0Qnl0ZXMoKS5sZW5ndGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOWFtuS7luexu+Wei+eahOm7mOiupOWkp+Wwj1xuICAgICAgICAgICAgICAgIHNpemUgKz0gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbiAgICBcbiAgICAvLyDpu5jorqTlpKflsI9cbiAgICByZXR1cm4gNjQ7XG59XG5gYGBcblxuIyMjIDQuIOS8mOWMlkRvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWXnmoTlhoXlrZjnrqHnkIZcblxuYGBgamF2YVxuLy8g5Zyo5p6E6YCg5Ye95pWw5Lit5re75Yqg5bu26L+f5YiG6YWN6YCJ6aG5XG5wcml2YXRlIGJvb2xlYW4gbGF6eUFsbG9jYXRpb24gPSBmYWxzZTtcblxucHVibGljIERvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUoaW50IGJ1ZmZlclNpemUsIGJvb2xlYW4gbGF6eUFsbG9jYXRpb24pIHtcbiAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuICAgIHRoaXMubGF6eUFsbG9jYXRpb24gPSBsYXp5QWxsb2NhdGlvbjtcbiAgICBcbiAgICBpZiAoIWxhenlBbGxvY2F0aW9uKSB7XG4gICAgICAgIC8vIOeri+WNs+WIhumFjVxuICAgICAgICB0aGlzLmN1cnJlbnRCdWZmZXIgPSBCeXRlQnVmZmVyLmFsbG9jYXRlRGlyZWN0KGJ1ZmZlclNpemUpO1xuICAgICAgICB0aGlzLmZsdXNoaW5nQnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICB9XG59XG5cbi8vIOehruS/nee8k+WGsuWMuuW3suWIhumFjVxucHJpdmF0ZSB2b2lkIGVuc3VyZUJ1ZmZlcnNBbGxvY2F0ZWQoKSB7XG4gICAgaWYgKGN1cnJlbnRCdWZmZXIgPT0gbnVsbCkge1xuICAgICAgICBjdXJyZW50QnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICB9XG4gICAgaWYgKGZsdXNoaW5nQnVmZmVyID09IG51bGwpIHtcbiAgICAgICAgZmx1c2hpbmdCdWZmZXIgPSBCeXRlQnVmZmVyLmFsbG9jYXRlRGlyZWN0KGJ1ZmZlclNpemUpO1xuICAgIH1cbn1cblxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBwdXQoQnl0ZUJ1ZmZlciBzcmMpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7XG4gICAgaWYgKGNsb3NlZCkge1xuICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgaXMgY2xvc2VkXCIpO1xuICAgIH1cbiAgICBcbiAgICBlbnN1cmVCdWZmZXJzQWxsb2NhdGVkKCk7IC8vIOehruS/nee8k+WGsuWMuuW3suWIhumFjVxuICAgIFxuICAgIC8vIOWFtuS9meS7o+eggeS4jeWPmC4uLlxufVxuYGBgXG5cbiMjIOaAu+e7k1xuXG7ln7rkuo7lr7nmgqjnmoRKYXZh54mIUmVkaXPmnI3liqHnq6/ku6PnoIHnmoTliIbmnpDvvIzmiJHlj5HnjrDkuoblh6DkuKrlj6/ku6XkvJjljJbnmoTlhpfkvZnorr7orqHpg6jliIbvvJpcblxuMS4gKirmlofku7bmk43kvZzlhpfkvZkqKu+8mkFPRlJld3JpdGVy5Lit55qE5paH5Lu25pu/5o2i6YC76L6R5Y+v5Lul566A5YyW77yM5YeP5bCR5LiN5b+F6KaB55qE5paH5Lu25pON5L2c44CCXG5cbjIuICoq54q25oCB566h55CG6YeN5aSNKirvvJpBT0ZIYW5kbGVy5ZKMQU9GUmV3cml0ZXLkuK3nmoTnirbmgIHnrqHnkIblrZjlnKjph43lj6DvvIzlj6/ku6Xnu5/kuIDjgIJcblxuMy4gKirlhoXlrZjnrqHnkIbmlYjnjofkvY4qKu+8mkRvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWXnmoTlhoXlrZjliIbphY3nrZbnlaXlj6/ku6XkvJjljJbvvIzlh4/lsJHlhoXlrZjljaDnlKjjgIJcblxuNC4gKirku6PnoIHph43lpI0qKu+8muWkmuS4que7hOS7tuS4reWtmOWcqOexu+S8vOeahOWKn+iDveWunueOsO+8jOWPr+S7peaPkOWPluWFseS6q+e7hOS7tuOAglxuXG41LiAqKumFjee9ruehrOe8lueggSoq77ya57yT5Yay5Yy65aSn5bCP562J6YWN572u5YC856Gs57yW56CB5Zyo5Luj56CB5Lit77yM5bqU6K+l5o+Q5Y+W5Yiw6YWN572u5paH5Lu244CCXG5cbjYuICoq5L6d6LWW5YWz57O75aSN5p2CKirvvJrnu4Tku7bpl7TnmoTkvp3otZblhbPns7vlpI3mnYLvvIzlj6/ku6Xkvb/nlKjkvp3otZbms6jlhaXnroDljJbjgIJcblxu6YCa6L+H5a6e5pa95LiK6L+w5LyY5YyW5bu66K6u77yM5oKo55qESmF2YeeJiFJlZGlz5pyN5Yqh56uv5Y+v5Lul6I635b6X5pu05aW955qE5oCn6IO944CB5pu05L2O55qE6LWE5rqQ5Y2g55So5ZKM5pu06auY55qE5Y+v57u05oqk5oCn44CCXG5cbuaCqOW4jOacm+aIkeWvueWTquS4quWFt+S9k+e7hOS7tueahOS8mOWMlui/m+ihjOabtOivpue7hueahOivtOaYjuWQl++8n1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiMTEwZDMyMWYtMWRmZC00MzUwLWEzZDgtMzY1ZTdmZjViYjhlIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3YjQ5NGE5Yi1hZGUyLTQ5ZjUtYmQyYy0yZWExMjI5ZjcyY2EiLCJyZXF1ZXN0X21lc3NhZ2UiOiLmiJHlvojlpb3lpYcg5L2g5rKh5pyJ55u05o6l5L+u5pS55oiR5Luj56CB55qE5Yqf6IO95ZCXIOi/mOaYr+aIkeS4jeS8mueUqCIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiLmiJHlvojlpb3lpYcg5L2g5rKh5pyJ55u05o6l5L+u5pS55oiR5Luj56CB55qE5Yqf6IO95ZCXIOi/mOaYr+aIkeS4jeS8mueUqCJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQ1o0a2U5YXd1dW42ZDZtMlMzaHk5cCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzEwMCwgMTIwXX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLmiJHnkIbop6PmgqjnmoTnlpHpl67jgILmiJHnoa7lrp7lj6/ku6Xnm7TmjqXkv67mlLnmgqjnmoTku6PnoIHvvIzogIzkuI3ku4Xku4XmmK/mj5Dkvpvlu7rorq7jgILorqnmiJHkuLrmgqjlsZXnpLrlpoLkvZXnm7TmjqXkvJjljJbkuIDkuKrlhbfkvZPnmoTnu4Tku7bvvIzkvovlpoJBT0ZSZXdyaXRlcuS4reeahGF0b21pY1JlcGxhY2VGaWxl5pa55rOV77yM6L+Z5Liq5pa55rOV5pyJ5LiA5Liq5piO5pi+55qEYnVn6ZyA6KaB5L+u5aSN44CCXG5cbummluWFiO+8jOiuqeaIkeafpeeci+W9k+WJjeeahOaWh+S7tuWGheWuue+8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiLmiJHlvojlpb3lpYcg5L2g5rKh5pyJ55u05o6l5L+u5pS55oiR5Luj56CB55qE5Yqf6IO95ZCXIOi/mOaYr+aIkeS4jeS8mueUqCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQxOTo1OToyMS4xNDlaIiwicmVzcG9uc2VfdGV4dCI6IuaIkeeQhuino+aCqOeahOeWkemXruOAguaIkeehruWunuWPr+S7peebtOaOpeS/ruaUueaCqOeahOS7o+egge+8jOiAjOS4jeS7heS7heaYr+aPkOS+m+W7uuiuruOAguiuqeaIkeS4uuaCqOWxleekuuWmguS9leebtOaOpeS8mOWMluS4gOS4quWFt+S9k+eahOe7hOS7tu+8jOS+i+WmgkFPRlJld3JpdGVy5Lit55qEYXRvbWljUmVwbGFjZUZpbGXmlrnms5XvvIzov5nkuKrmlrnms5XmnInkuIDkuKrmmI7mmL7nmoRidWfpnIDopoHkv67lpI3jgIJcblxu6aaW5YWI77yM6K6p5oiR5p+l55yL5b2T5YmN55qE5paH5Lu25YaF5a6577yaXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMThlNTI0NzItNTU0Ni00NGNhLTk2MTItNWYyNGJhNmMxN2YwIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxWHl3cGF2eGg3eks1aUtrWmo2UmtQbyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIHByaXZhdGUgdm9pZCBhdG9taWNSZXBsYWNlRmlsZShGaWxlIHRlbXBGaWxlLCBGaWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XFxuICAgICAgICBpZighdGVtcEZpbGUucmVuYW1lVG8oZmlsZSkpe1xcbiAgICAgICAgICAgIEZpbGUgYmFja3VwID0gbmV3IEZpbGUoZmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSArIFxcXCIuYmFrXFxcIik7XFxuICAgICAgICAgICAgaWYoZmlsZS5leGlzdHMoKSl7XFxuICAgICAgICAgICAgICAgIGlmKGJhY2t1cC5leGlzdHMoKSl7XFxuICAgICAgICAgICAgICAgICAgICBiYWNrdXAuZGVsZXRlKCk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgZmlsZS5yZW5hbWVUbyhiYWNrdXApO1xcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICBpZighdGVtcEZpbGUucmVuYW1lVG8odGVtcEZpbGUpKXtcXG4gICAgICAgICAgICAgICAgRmlsZXMuY29weSh0ZW1wRmlsZS50b1BhdGgoKSwgZmlsZS50b1BhdGgoKSk7XFxuICAgICAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICBpZihiYWNrdXAuZXhpc3RzKCkpe1xcbiAgICAgICAgICAgICAgICBiYWNrdXAuZGVsZXRlKCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICB9XCIsIFwibmV3X3N0clwiOiBcIiAgICAvKipcXG4gICAgICogXFx1NTM5ZlxcdTViNTBcXHU2MDI3XFx1NTczMFxcdTY2ZmZcXHU2MzYyQU9GXFx1NjU4N1xcdTRlZjZcXG4gICAgICogQHBhcmFtIHRlbXBGaWxlIFxcdTRlMzRcXHU2NWY2XFx1NjU4N1xcdTRlZjZcXG4gICAgICogQHBhcmFtIHRhcmdldEZpbGUgXFx1NzZlZVxcdTY4MDdcXHU2NTg3XFx1NGVmNlxcbiAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIFxcdTU5ODJcXHU2NzljXFx1NjU4N1xcdTRlZjZcXHU2NGNkXFx1NGY1Y1xcdTU5MzFcXHU4ZDI1XFxuICAgICAqL1xcbiAgICBwcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSB0YXJnZXRGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xcbiAgICAgICAgLy8gXFx1NWMxZFxcdThiZDVcXHU3NmY0XFx1NjNhNVxcdTkxY2RcXHU1NDdkXFx1NTQwZFxcdWZmMDhcXHU1NzI4XFx1NTkyN1xcdTU5MWFcXHU2NTcwXFx1N2NmYlxcdTdlZGZcXHU0ZTBhXFx1NjYyZlxcdTUzOWZcXHU1YjUwXFx1NjRjZFxcdTRmNWNcXHVmZjA5XFxuICAgICAgICBpZiAodGVtcEZpbGUucmVuYW1lVG8odGFyZ2V0RmlsZSkpIHtcXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcXFwiXFx1NjIxMFxcdTUyOWZcXHU5MDFhXFx1OGZjN1xcdTkxY2RcXHU1NDdkXFx1NTQwZFxcdTY2ZmZcXHU2MzYyQU9GXFx1NjU4N1xcdTRlZjZcXFwiKTtcXG4gICAgICAgICAgICByZXR1cm47XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIGxvZ2dlci5pbmZvKFxcXCJcXHU3NmY0XFx1NjNhNVxcdTkxY2RcXHU1NDdkXFx1NTQwZFxcdTU5MzFcXHU4ZDI1XFx1ZmYwY1xcdTRmN2ZcXHU3NTI4XFx1NTkwN1xcdTRlZmRcXHU3YjU2XFx1NzU2NVxcdTY2ZmZcXHU2MzYyQU9GXFx1NjU4N1xcdTRlZjZcXFwiKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gXFx1NTk4MlxcdTY3OWNcXHU3NmY0XFx1NjNhNVxcdTkxY2RcXHU1NDdkXFx1NTQwZFxcdTU5MzFcXHU4ZDI1XFx1ZmYwY1xcdTRmN2ZcXHU3NTI4XFx1NTkwN1xcdTRlZmRcXHU3YjU2XFx1NzU2NVxcbiAgICAgICAgRmlsZSBiYWNrdXBGaWxlID0gbmV3IEZpbGUodGFyZ2V0RmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSArIFxcXCIuYmFrXFxcIik7XFxuICAgICAgICBcXG4gICAgICAgIC8vIFxcdTUyMjBcXHU5NjY0XFx1NWRmMlxcdTViNThcXHU1NzI4XFx1NzY4NFxcdTU5MDdcXHU0ZWZkXFx1NjU4N1xcdTRlZjZcXG4gICAgICAgIGlmIChiYWNrdXBGaWxlLmV4aXN0cygpICYmICFiYWNrdXBGaWxlLmRlbGV0ZSgpKSB7XFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXFxcIlxcdTY1ZTBcXHU2Y2Q1XFx1NTIyMFxcdTk2NjRcXHU1ZGYyXFx1NWI1OFxcdTU3MjhcXHU3Njg0XFx1NTkwN1xcdTRlZmRcXHU2NTg3XFx1NGVmNjogXFxcIiArIGJhY2t1cEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBcXHU1OTgyXFx1Njc5Y1xcdTc2ZWVcXHU2ODA3XFx1NjU4N1xcdTRlZjZcXHU1YjU4XFx1NTcyOFxcdWZmMGNcXHU1YzA2XFx1NTE3NlxcdTkxY2RcXHU1NDdkXFx1NTQwZFxcdTRlM2FcXHU1OTA3XFx1NGVmZFxcbiAgICAgICAgaWYgKHRhcmdldEZpbGUuZXhpc3RzKCkpIHtcXG4gICAgICAgICAgICBpZiAoIXRhcmdldEZpbGUucmVuYW1lVG8oYmFja3VwRmlsZSkpIHtcXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXFxcIlxcdTY1ZTBcXHU2Y2Q1XFx1NTIxYlxcdTVlZmFcXHU1OTA3XFx1NGVmZFxcdTY1ODdcXHU0ZWY2XFx1ZmYwY1xcdTVjMDZcXHU0ZjdmXFx1NzUyOFxcdTU5MGRcXHU1MjM2XFx1NjViOVxcdTVmMGZcXHU2NmZmXFx1NjM2MlxcXCIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgLy8gXFx1NTkwZFxcdTUyMzZcXHU0ZTM0XFx1NjVmNlxcdTY1ODdcXHU0ZWY2XFx1NTIzMFxcdTc2ZWVcXHU2ODA3XFx1NGY0ZFxcdTdmNmVcXG4gICAgICAgIEZpbGVzLmNvcHkodGVtcEZpbGUudG9QYXRoKCksIHRhcmdldEZpbGUudG9QYXRoKCkpO1xcbiAgICAgICAgaWYgKCF0ZW1wRmlsZS5kZWxldGUoKSkge1xcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKFxcXCJcXHU2NWUwXFx1NmNkNVxcdTUyMjBcXHU5NjY0XFx1NGUzNFxcdTY1ZjZcXHU2NTg3XFx1NGVmNjogXFxcIiArIHRlbXBGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgLy8gXFx1NjRjZFxcdTRmNWNcXHU2MjEwXFx1NTI5ZlxcdTU0MGVcXHU1MjIwXFx1OTY2NFxcdTU5MDdcXHU0ZWZkXFxuICAgICAgICBpZiAoYmFja3VwRmlsZS5leGlzdHMoKSAmJiAhYmFja3VwRmlsZS5kZWxldGUoKSkge1xcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKFxcXCJcXHU2NWUwXFx1NmNkNVxcdTUyMjBcXHU5NjY0XFx1NTkwN1xcdTRlZmRcXHU2NTg3XFx1NGVmNjogXFxcIiArIGJhY2t1cEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBsb2dnZXIuaW5mbyhcXFwiXFx1NjIxMFxcdTUyOWZcXHU5MDFhXFx1OGZjN1xcdTU5MGRcXHU1MjM2XFx1NjZmZlxcdTYzNjJBT0ZcXHU2NTg3XFx1NGVmNlxcXCIpO1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxMDAsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTE5fV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi546w5Zyo77yM5oiR5bCG5L+u5aSN6L+Z5Liq5pa55rOV5Lit55qEYnVn77yI56ysMTEw6KGM5bqU6K+l5pivYHRlbXBGaWxlLnJlbmFtZVRvKGZpbGUpYOiAjOS4jeaYr2B0ZW1wRmlsZS5yZW5hbWVUbyh0ZW1wRmlsZSlg77yJ5bm25LyY5YyW5pW05Liq5pa55rOV77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhOlxuICAgMTAwXHQgICAgcHJpdmF0ZSB2b2lkIGF0b21pY1JlcGxhY2VGaWxlKEZpbGUgdGVtcEZpbGUsIEZpbGUgZmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgIDEwMVx0ICAgICAgICBpZighdGVtcEZpbGUucmVuYW1lVG8oZmlsZSkpe1xuICAgMTAyXHQgICAgICAgICAgICBGaWxlIGJhY2t1cCA9IG5ldyBGaWxlKGZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkgKyBcIi5iYWtcIik7XG4gICAxMDNcdCAgICAgICAgICAgIGlmKGZpbGUuZXhpc3RzKCkpe1xuICAgMTA0XHQgICAgICAgICAgICAgICAgaWYoYmFja3VwLmV4aXN0cygpKXtcbiAgIDEwNVx0ICAgICAgICAgICAgICAgICAgICBiYWNrdXAuZGVsZXRlKCk7XG4gICAxMDZcdCAgICAgICAgICAgICAgICB9XG4gICAxMDdcdCAgICAgICAgICAgICAgICBmaWxlLnJlbmFtZVRvKGJhY2t1cCk7XG4gICAxMDhcdCAgICAgICAgICAgIH1cbiAgIDEwOVx0XG4gICAxMTBcdCAgICAgICAgICAgIGlmKCF0ZW1wRmlsZS5yZW5hbWVUbyh0ZW1wRmlsZSkpe1xuICAgMTExXHQgICAgICAgICAgICAgICAgRmlsZXMuY29weSh0ZW1wRmlsZS50b1BhdGgoKSwgZmlsZS50b1BhdGgoKSk7XG4gICAxMTJcdCAgICAgICAgICAgICAgICB0ZW1wRmlsZS5kZWxldGUoKTtcbiAgIDExM1x0ICAgICAgICAgICAgfVxuICAgMTE0XHRcbiAgIDExNVx0ICAgICAgICAgICAgaWYoYmFja3VwLmV4aXN0cygpKXtcbiAgIDExNlx0ICAgICAgICAgICAgICAgIGJhY2t1cC5kZWxldGUoKTtcbiAgIDExN1x0ICAgICAgICAgICAgfVxuICAgMTE4XHQgICAgICAgIH1cbiAgIDExOVx0ICAgIH1cbiAgIDEyMFx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxOTdcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUNaNGtlOWF3dXVuNmQ2bTJTM2h5OXAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMTk6NTk6MzAuNzI3WiIsInJlc3BvbnNlX3RleHQiOiLnjrDlnKjvvIzmiJHlsIbkv67lpI3ov5nkuKrmlrnms5XkuK3nmoRidWfvvIjnrKwxMTDooYzlupTor6XmmK9gdGVtcEZpbGUucmVuYW1lVG8oZmlsZSlg6ICM5LiN5pivYHRlbXBGaWxlLnJlbmFtZVRvKHRlbXBGaWxlKWDvvInlubbkvJjljJbmlbTkuKrmlrnms5XvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2MmUxMDNmOS04Zjc0LTQwM2MtODQ1NC0wYzFmMzVlOGFiMTIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFQUDRwZGNuODlkaFJNMjUyVUdzQms1IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbNTAsIDY1XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLnjrDlnKjvvIzorqnmiJHkvJjljJZBT0ZSZXdyaXRlcuexu+S4reeahHJld3JpdGVCdWZmZXLmiJDlkZjlj5jph4/vvIzlsIblhbbmlLnkuLrlsYDpg6jlj5jph4/vvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDk2XHQgICAgICAgICAgICBpc1Jld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgIDk3XHQgICAgICAgIH1cbiAgICA5OFx0ICAgIH1cbiAgICA5OVx0XG4gICAxMDBcdCAgICAvKipcbiAgIDEwMVx0ICAgICAqIOWOn+WtkOaAp+WcsOabv+aNokFPRuaWh+S7tlxuICAgMTAyXHQgICAgICogQHBhcmFtIHRlbXBGaWxlIOS4tOaXtuaWh+S7tlxuICAgMTAzXHQgICAgICogQHBhcmFtIHRhcmdldEZpbGUg55uu5qCH5paH5Lu2XG4gICAxMDRcdCAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIOWmguaenOaWh+S7tuaTjeS9nOWksei0pVxuICAgMTA1XHQgICAgICovXG4gICAxMDZcdCAgICBwcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSB0YXJnZXRGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgMTA3XHQgICAgICAgIC8vIOWwneivleebtOaOpemHjeWRveWQje+8iOWcqOWkp+WkmuaVsOezu+e7n+S4iuaYr+WOn+WtkOaTjeS9nO+8iVxuICAgMTA4XHQgICAgICAgIGlmICh0ZW1wRmlsZS5yZW5hbWVUbyh0YXJnZXRGaWxlKSkge1xuICAgMTA5XHQgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIuaIkOWKn+mAmui/h+mHjeWRveWQjeabv+aNokFPRuaWh+S7tlwiKTtcbiAgIDExMFx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgMTExXHQgICAgICAgIH1cbiAgIDExMlx0XG4gICAxMTNcdCAgICAgICAgbG9nZ2VyLmluZm8oXCLnm7TmjqXph43lkb3lkI3lpLHotKXvvIzkvb/nlKjlpIfku73nrZbnlaXmm7/mjaJBT0bmlofku7ZcIik7XG4gICAxMTRcdFxuICAgMTE1XHQgICAgICAgIC8vIOWmguaenOebtOaOpemHjeWRveWQjeWksei0pe+8jOS9v+eUqOWkh+S7veetlueVpVxuICAgMTE2XHQgICAgICAgIEZpbGUgYmFja3VwRmlsZSA9IG5ldyBGaWxlKHRhcmdldEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkgKyBcIi5iYWtcIik7XG4gICAxMTdcdFxuICAgMTE4XHQgICAgICAgIC8vIOWIoOmZpOW3suWtmOWcqOeahOWkh+S7veaWh+S7tlxuICAgMTE5XHQgICAgICAgIGlmIChiYWNrdXBGaWxlLmV4aXN0cygpICYmICFiYWNrdXBGaWxlLmRlbGV0ZSgpKSB7XG4gICAxMjBcdCAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5peg5rOV5Yig6Zmk5bey5a2Y5Zyo55qE5aSH5Lu95paH5Lu2OiBcIiArIGJhY2t1cEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xuICAgMTIxXHQgICAgICAgIH1cbiAgIDEyMlx0XG4gICAxMjNcdCAgICAgICAgLy8g5aaC5p6c55uu5qCH5paH5Lu25a2Y5Zyo77yM5bCG5YW26YeN5ZG95ZCN5Li65aSH5Lu9XG4gICAxMjRcdCAgICAgICAgaWYgKHRhcmdldEZpbGUuZXhpc3RzKCkpIHtcbiAgIDEyNVx0ICAgICAgICAgICAgaWYgKCF0YXJnZXRGaWxlLnJlbmFtZVRvKGJhY2t1cEZpbGUpKSB7XG4gICAxMjZcdCAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIm+W7uuWkh+S7veaWh+S7tu+8jOWwhuS9v+eUqOWkjeWItuaWueW8j+abv+aNolwiKTtcbiAgIDEyN1x0ICAgICAgICAgICAgfVxuICAgMTI4XHQgICAgICAgIH1cbiAgIDEyOVx0XG4gICAxMzBcdCAgICAgICAgLy8g5aSN5Yi25Li05pe25paH5Lu25Yiw55uu5qCH5L2N572uXG4gICAxMzFcdCAgICAgICAgRmlsZXMuY29weSh0ZW1wRmlsZS50b1BhdGgoKSwgdGFyZ2V0RmlsZS50b1BhdGgoKSk7XG4gICAxMzJcdCAgICAgICAgaWYgKCF0ZW1wRmlsZS5kZWxldGUoKSkge1xuICAgMTMzXHQgICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIoOmZpOS4tOaXtuaWh+S7tjogXCIgKyB0ZW1wRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAxMzRcdCAgICAgICAgfVxuICAgMTM1XHRcbiAgIDEzNlx0ICAgICAgICAvLyDmk43kvZzmiJDlip/lkI7liKDpmaTlpIfku71cbiAgIDEzN1x0ICAgICAgICBpZiAoYmFja3VwRmlsZS5leGlzdHMoKSAmJiAhYmFja3VwRmlsZS5kZWxldGUoKSkge1xuICAgMTM4XHQgICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIoOmZpOWkh+S7veaWh+S7tjogXCIgKyBiYWNrdXBGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcbiAgIDEzOVx0ICAgICAgICB9XG4gICAxNDBcdFxuICAgMTQxXHQgICAgICAgIGxvZ2dlci5pbmZvKFwi5oiQ5Yqf6YCa6L+H5aSN5Yi25pu/5o2iQU9G5paH5Lu2XCIpO1xuICAgMTQyXHQgICAgfVxuICAgMTQzXHRcbiAgIDE0NFx0XG4gICAxNDVcdCAgICBwcml2YXRlIHZvaWQgYXBwZW5kUmV3cml0ZUJ1ZmZlclRvVGVtcEZpbGUoTGlzdDxCeXRlQnVmZmVyPiBidWZmZXJzKSB0aHJvd3MgSU9FeGNlcHRpb257XG4gICAxNDZcdCAgICAgICAgaWYoYnVmZmVycz09bnVsbCB8fCBidWZmZXJzLmlzRW1wdHkoKSl7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVh5d3BhdnhoN3pLNWlLa1pqNlJrUG8ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMTk6NTk6NDkuNTM0WiIsInJlc3BvbnNlX3RleHQiOiLnjrDlnKjvvIzorqnmiJHkvJjljJZBT0ZSZXdyaXRlcuexu+S4reeahHJld3JpdGVCdWZmZXLmiJDlkZjlj5jph4/vvIzlsIblhbbmlLnkuLrlsYDpg6jlj5jph4/vvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2ZjdlZDViMC1kMWRhLTQ2MDMtOThhZC1hM2FhZjBmNGMzYjAiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFYekF1Y2FkQzJzYWFEOHVUdnBZb3lDIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbNTAsIDEwMF19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YTpcbiAgICA1MFx0ICAgICAgICByZXR1cm4gIWlzUmV3cml0aW5nLmdldCgpO1xuICAgIDUxXHQgICAgfVxuICAgIDUyXHRcbiAgICA1M1x0ICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gcmV3cml0ZUJ1ZmZlcjtcbiAgICA1NFx0XG4gICAgNTVcdCAgICBwdWJsaWMgYm9vbGVhbiByZXdyaXRlKCl7XG4gICAgNTZcdCAgICAgICAgaWYoIWlzUmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsdHJ1ZSkpe1xuICAgIDU3XHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLmraPlnKjph43lhplcIik7XG4gICAgNThcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA1OVx0ICAgICAgICB9XG4gICAgNjBcdFxuICAgIDYxXHQgICAgICAgIHRyeXtcbiAgICA2Mlx0ICAgICAgICAgICAgcmV3cml0ZUJ1ZmZlciA9IENvbGxlY3Rpb25zLnN5bmNocm9uaXplZExpc3QobmV3IEFycmF5TGlzdDw+KCkpO1xuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdGFydFJld3JpdGVCdWZmZXIoKTtcbiAgICA2NVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMjBcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVBQNHBkY244OWRoUk0yNTJVR3NCazUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMTk6NTk6NTcuMDQxWiIsInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMjlhZWMxMjMtYzdmOS00NTEzLTk4MjMtMzE5ZmQ2YTI1ZDE5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxMldQUDJMejZSc2gxY2pRUkRLV0E0WiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gcmV3cml0ZUJ1ZmZlcjtcXG5cXG4gICAgcHVibGljIGJvb2xlYW4gcmV3cml0ZSgpe1xcbiAgICAgICAgaWYoIWlzUmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsdHJ1ZSkpe1xcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcXFwiXFx1NmI2M1xcdTU3MjhcXHU5MWNkXFx1NTE5OVxcXCIpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHRyeXtcXG4gICAgICAgICAgICByZXdyaXRlQnVmZmVyID0gQ29sbGVjdGlvbnMuc3luY2hyb25pemVkTGlzdChuZXcgQXJyYXlMaXN0PD4oKSk7XFxuXFxuICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdGFydFJld3JpdGVCdWZmZXIoKTtcXG5cXG4gICAgICAgICAgICBGaWxlIHRlbXBGaWxlID0gbmV3IEZpbGUodGVtcEZpbGVuYW1lKTtcXG4gICAgICAgICAgICBpZih0ZW1wRmlsZS5leGlzdHMoKSl7XFxuICAgICAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xcbiAgICAgICAgICAgIH1cXG5cXG5cXG5cXG4gICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBkb1dyaXRlKCk7XFxuXFxuXFxuICAgICAgICAgICAgaWYoc3VjY2Vzcyl7XFxuICAgICAgICAgICAgICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gYnVmZmVycyA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RvcFJld3JpdGVCdWZmZXJBbmRHZXQoKTtcXG5cXG4gICAgICAgICAgICAgICAgLy8gXFx1NWMwNlxcdTkxY2RcXHU1MTk5XFx1NjcxZlxcdTk1ZjRcXHU3Njg0XFx1NTQ3ZFxcdTRlZTRcXHU4ZmZkXFx1NTJhMFxcdTUyMzBcXHU2NWIwQU9GXFx1NjU4N1xcdTRlZjZcXG4gICAgICAgICAgICAgICAgYXBwZW5kUmV3cml0ZUJ1ZmZlclRvVGVtcEZpbGUoYnVmZmVycyk7XFxuXFxuICAgICAgICAgICAgICAgIC8vIFxcdTUzOWZcXHU1YjUwXFx1NjAyN1xcdTU3MzBcXHU2NmZmXFx1NjM2MlxcdTY1ODdcXHU0ZWY2XFxuICAgICAgICAgICAgICAgIGF0b21pY1JlcGxhY2VGaWxlKHRlbXBGaWxlLCBuZXcgRmlsZShhb2ZGaWxlbmFtZSkpO1xcbiAgICAgICAgICAgIH1lbHNle1xcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXFxcIlxcdTkxY2RcXHU1MTk5XFx1NTkzMVxcdThkMjVcXFwiKTtcXG4gICAgICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XFxuXFxuICAgICAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuZGlzY2FyZFJld3JpdGVCdWZmZXIoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XFxuICAgICAgICB9Y2F0Y2goRXhjZXB0aW9uIGUpe1xcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcXFwiRXJyb3IgZHVyaW5nIEFPRlJld3JpdGVyXFxcIiwgZSk7XFxuICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1maW5hbGx5IHtcXG4gICAgICAgICAgICBpc1Jld3JpdGluZy5zZXQoZmFsc2UpO1xcbiAgICAgICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgLyoqXFxuICAgICAqIFxcdTYyNjdcXHU4ODRjQU9GXFx1OTFjZFxcdTUxOTlcXHU2NGNkXFx1NGY1Y1xcbiAgICAgKiBAcmV0dXJuIFxcdTkxY2RcXHU1MTk5XFx1NjYyZlxcdTU0MjZcXHU2MjEwXFx1NTI5ZlxcbiAgICAgKi9cXG4gICAgcHVibGljIGJvb2xlYW4gcmV3cml0ZSgpIHtcXG4gICAgICAgIC8vIFxcdTY4YzBcXHU2N2U1XFx1NjYyZlxcdTU0MjZcXHU1ZGYyXFx1N2VjZlxcdTU3MjhcXHU5MWNkXFx1NTE5OVxcdTRlMmRcXG4gICAgICAgIGlmICghaXNSZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSwgdHJ1ZSkpIHtcXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXFxcIkFPRlxcdTkxY2RcXHU1MTk5XFx1NTkzMVxcdThkMjVcXHVmZjFhXFx1NWRmMlxcdTY3MDlcXHU5MWNkXFx1NTE5OVxcdTRlZmJcXHU1MmExXFx1NTcyOFxcdThmZGJcXHU4ODRjXFx1NGUyZFxcXCIpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgLy8gXFx1OTAxYVxcdTc3ZTVBT0ZcXHU1OTA0XFx1NzQwNlxcdTU2NjhcXHU1ZjAwXFx1NTljYlxcdTY1MzZcXHU5NmM2XFx1OTFjZFxcdTUxOTlcXHU2NzFmXFx1OTVmNFxcdTc2ODRcXHU1NDdkXFx1NGVlNFxcbiAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RhcnRSZXdyaXRlQnVmZmVyKCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gXFx1NTFjNlxcdTU5MDdcXHU0ZTM0XFx1NjVmNlxcdTY1ODdcXHU0ZWY2XFxuICAgICAgICAgICAgRmlsZSB0ZW1wRmlsZSA9IG5ldyBGaWxlKHRlbXBGaWxlbmFtZSk7XFxuICAgICAgICAgICAgaWYgKHRlbXBGaWxlLmV4aXN0cygpICYmICF0ZW1wRmlsZS5kZWxldGUoKSkge1xcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcXFwiXFx1NjVlMFxcdTZjZDVcXHU1MjIwXFx1OTY2NFxcdTVkZjJcXHU1YjU4XFx1NTcyOFxcdTc2ODRcXHU0ZTM0XFx1NjVmNlxcdTY1ODdcXHU0ZWY2OiBcXFwiICsgdGVtcEZpbGVuYW1lKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gXFx1NjI2N1xcdTg4NGNcXHU1YjllXFx1OTY0NVxcdTc2ODRcXHU5MWNkXFx1NTE5OVxcdTY0Y2RcXHU0ZjVjXFxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXFxcIlxcdTVmMDBcXHU1OWNiXFx1NjI2N1xcdTg4NGNBT0ZcXHU5MWNkXFx1NTE5OVxcXCIpO1xcbiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGRvV3JpdGUoKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xcbiAgICAgICAgICAgICAgICAvLyBcXHU4M2I3XFx1NTNkNlxcdTkxY2RcXHU1MTk5XFx1NjcxZlxcdTk1ZjRcXHU2NTM2XFx1OTZjNlxcdTc2ODRcXHU1NDdkXFx1NGVlNFxcbiAgICAgICAgICAgICAgICBMaXN0PEJ5dGVCdWZmZXI+IGJ1ZmZlcnMgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0b3BSZXdyaXRlQnVmZmVyQW5kR2V0KCk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBcXHU1YzA2XFx1OTFjZFxcdTUxOTlcXHU2NzFmXFx1OTVmNFxcdTc2ODRcXHU1NDdkXFx1NGVlNFxcdThmZmRcXHU1MmEwXFx1NTIzMFxcdTY1YjBBT0ZcXHU2NTg3XFx1NGVmNlxcbiAgICAgICAgICAgICAgICBhcHBlbmRSZXdyaXRlQnVmZmVyVG9UZW1wRmlsZShidWZmZXJzKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdTUzOWZcXHU1YjUwXFx1NjAyN1xcdTU3MzBcXHU2NmZmXFx1NjM2MlxcdTY1ODdcXHU0ZWY2XFxuICAgICAgICAgICAgICAgIGF0b21pY1JlcGxhY2VGaWxlKHRlbXBGaWxlLCBuZXcgRmlsZShhb2ZGaWxlbmFtZSkpO1xcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhcXFwiQU9GXFx1OTFjZFxcdTUxOTlcXHU2MjEwXFx1NTI5ZlxcdTViOGNcXHU2MjEwXFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFxcXCJBT0ZcXHU5MWNkXFx1NTE5OVxcdTU5MzFcXHU4ZDI1XFx1ZmYxYVxcdTUxOTlcXHU1MTY1XFx1OGZjN1xcdTdhMGJcXHU1MWZhXFx1OTUxOVxcXCIpO1xcbiAgICAgICAgICAgICAgICBpZiAodGVtcEZpbGUuZXhpc3RzKCkgJiYgIXRlbXBGaWxlLmRlbGV0ZSgpKSB7XFxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcXFwiXFx1NjVlMFxcdTZjZDVcXHU1MjIwXFx1OTY2NFxcdTRlMzRcXHU2NWY2XFx1NjU4N1xcdTRlZjY6IFxcXCIgKyB0ZW1wRmlsZW5hbWUpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBcXHU0ZTIyXFx1NWYwM1xcdTY1MzZcXHU5NmM2XFx1NzY4NFxcdTU0N2RcXHU0ZWU0XFxuICAgICAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuZGlzY2FyZFJld3JpdGVCdWZmZXIoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcXFwiQU9GXFx1OTFjZFxcdTUxOTlcXHU4ZmM3XFx1N2EwYlxcdTRlMmRcXHU1M2QxXFx1NzUxZlxcdTVmMDJcXHU1ZTM4XFxcIiwgZSk7XFxuICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH0gZmluYWxseSB7XFxuICAgICAgICAgICAgLy8gXFx1NjVlMFxcdThiYmFcXHU2MjEwXFx1NTI5ZlxcdTRlMGVcXHU1NDI2XFx1ZmYwY1xcdTkwZmRcXHU5MWNkXFx1N2Y2ZVxcdTkxY2RcXHU1MTk5XFx1NzJiNlxcdTYwMDFcXG4gICAgICAgICAgICBpc1Jld3JpdGluZy5zZXQoZmFsc2UpO1xcbiAgICAgICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNTMsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogOTd9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLnjrDlnKjvvIzorqnmiJHkvJjljJZyZXdyaXRl5pa55rOV77yM56e76Zmk5LiN5b+F6KaB55qE57G75oiQ5ZGY5Y+Y6YeP77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhOlxuICAgIDUwXHQgICAgICAgIHJldHVybiAhaXNSZXdyaXRpbmcuZ2V0KCk7XG4gICAgNTFcdCAgICB9XG4gICAgNTJcdFxuICAgIDUzXHQgICAgTGlzdDxCeXRlQnVmZmVyPiByZXdyaXRlQnVmZmVyO1xuICAgIDU0XHRcbiAgICA1NVx0ICAgIHB1YmxpYyBib29sZWFuIHJld3JpdGUoKXtcbiAgICA1Nlx0ICAgICAgICBpZighaXNSZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSx0cnVlKSl7XG4gICAgNTdcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuato+WcqOmHjeWGmVwiKTtcbiAgICA1OFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDU5XHQgICAgICAgIH1cbiAgICA2MFx0XG4gICAgNjFcdCAgICAgICAgdHJ5e1xuICAgIDYyXHQgICAgICAgICAgICByZXdyaXRlQnVmZmVyID0gQ29sbGVjdGlvbnMuc3luY2hyb25pemVkTGlzdChuZXcgQXJyYXlMaXN0PD4oKSk7XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0YXJ0UmV3cml0ZUJ1ZmZlcigpO1xuICAgIDY1XHRcbiAgICA2Nlx0ICAgICAgICAgICAgRmlsZSB0ZW1wRmlsZSA9IG5ldyBGaWxlKHRlbXBGaWxlbmFtZSk7XG4gICAgNjdcdCAgICAgICAgICAgIGlmKHRlbXBGaWxlLmV4aXN0cygpKXtcbiAgICA2OFx0ICAgICAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xuICAgIDY5XHQgICAgICAgICAgICB9XG4gICAgNzBcdFxuICAgIDcxXHRcbiAgICA3Mlx0XG4gICAgNzNcdCAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGRvV3JpdGUoKTtcbiAgICA3NFx0XG4gICAgNzVcdFxuICAgIDc2XHQgICAgICAgICAgICBpZihzdWNjZXNzKXtcbiAgICA3N1x0ICAgICAgICAgICAgICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gYnVmZmVycyA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RvcFJld3JpdGVCdWZmZXJBbmRHZXQoKTtcbiAgICA3OFx0XG4gICAgNzlcdCAgICAgICAgICAgICAgICAvLyDlsIbph43lhpnmnJ/pl7TnmoTlkb3ku6Tov73liqDliLDmlrBBT0bmlofku7ZcbiAgICA4MFx0ICAgICAgICAgICAgICAgIGFwcGVuZFJld3JpdGVCdWZmZXJUb1RlbXBGaWxlKGJ1ZmZlcnMpO1xuICAgIDgxXHRcbiAgICA4Mlx0ICAgICAgICAgICAgICAgIC8vIOWOn+WtkOaAp+WcsOabv+aNouaWh+S7tlxuICAgIDgzXHQgICAgICAgICAgICAgICAgYXRvbWljUmVwbGFjZUZpbGUodGVtcEZpbGUsIG5ldyBGaWxlKGFvZkZpbGVuYW1lKSk7XG4gICAgODRcdCAgICAgICAgICAgIH1lbHNle1xuICAgIDg1XHQgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6YeN5YaZ5aSx6LSlXCIpO1xuICAgIDg2XHQgICAgICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XG4gICAgODdcdFxuICAgIDg4XHQgICAgICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgIDg5XHQgICAgICAgICAgICB9XG4gICAgOTBcdCAgICAgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIDkxXHQgICAgICAgIH1jYXRjaChFeGNlcHRpb24gZSl7XG4gICAgOTJcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGR1cmluZyBBT0ZSZXdyaXRlclwiLCBlKTtcbiAgICA5M1x0ICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgIDk0XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgOTVcdCAgICAgICAgfWZpbmFsbHkge1xuICAgIDk2XHQgICAgICAgICAgICBpc1Jld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgIDk3XHQgICAgICAgIH1cbiAgICA5OFx0ICAgIH1cbiAgICA5OVx0XG4gICAxMDBcdCAgICAvKipcblRvdGFsIGxpbmVzIGluIGZpbGU6IDIyMFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxWHpBdWNhZEMyc2FhRDh1VHZwWW95QyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDowMDowNC43OTBaIiwicmVzcG9uc2VfdGV4dCI6IueOsOWcqO+8jOiuqeaIkeS8mOWMlnJld3JpdGXmlrnms5XvvIznp7vpmaTkuI3lv4XopoHnmoTnsbvmiJDlkZjlj5jph4/vvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3N2ExODE3Ny04Yzk4LTQ0N2ItOGViYi03MjM1MTU5NTU3ODQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFGTHlBWmVzdXZGcWZtaWhoWTRyU3hlIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxMjAsIDE2NV19IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi546w5Zyo77yM6K6p5oiR5Lus5LyY5YyWQU9GSGFuZGxlcuS4reeahHN0YXJ0UmV3cml0ZeaWueazle+8jOWHj+WwkemHjeWkjeS7o+eggeW5tuaPkOmrmOWPr+ivu+aAp++8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNDlcdCAgICBwdWJsaWMgYm9vbGVhbiBjYW5SZXdyaXRlKCl7XG4gICAgNTBcdCAgICAgICAgcmV0dXJuICFpc1Jld3JpdGluZy5nZXQoKTtcbiAgICA1MVx0ICAgIH1cbiAgICA1Mlx0XG4gICAgNTNcdCAgICAvKipcbiAgICA1NFx0ICAgICAqIOaJp+ihjEFPRumHjeWGmeaTjeS9nFxuICAgIDU1XHQgICAgICogQHJldHVybiDph43lhpnmmK/lkKbmiJDlip9cbiAgICA1Nlx0ICAgICAqL1xuICAgIDU3XHQgICAgcHVibGljIGJvb2xlYW4gcmV3cml0ZSgpIHtcbiAgICA1OFx0ICAgICAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/lnKjph43lhpnkuK1cbiAgICA1OVx0ICAgICAgICBpZiAoIWlzUmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XG4gICAgNjBcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFPRumHjeWGmeWksei0pe+8muW3suaciemHjeWGmeS7u+WKoeWcqOi/m+ihjOS4rVwiKTtcbiAgICA2MVx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDYyXHQgICAgICAgIH1cbiAgICA2M1x0XG4gICAgNjRcdCAgICAgICAgdHJ5IHtcbiAgICA2NVx0ICAgICAgICAgICAgLy8g6YCa55+lQU9G5aSE55CG5Zmo5byA5aeL5pS26ZuG6YeN5YaZ5pyf6Ze055qE5ZG95LukXG4gICAgNjZcdCAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RhcnRSZXdyaXRlQnVmZmVyKCk7XG4gICAgNjdcdFxuICAgIDY4XHQgICAgICAgICAgICAvLyDlh4blpIfkuLTml7bmlofku7ZcbiAgICA2OVx0ICAgICAgICAgICAgRmlsZSB0ZW1wRmlsZSA9IG5ldyBGaWxlKHRlbXBGaWxlbmFtZSk7XG4gICAgNzBcdCAgICAgICAgICAgIGlmICh0ZW1wRmlsZS5leGlzdHMoKSAmJiAhdGVtcEZpbGUuZGVsZXRlKCkpIHtcbiAgICA3MVx0ICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5peg5rOV5Yig6Zmk5bey5a2Y5Zyo55qE5Li05pe25paH5Lu2OiBcIiArIHRlbXBGaWxlbmFtZSk7XG4gICAgNzJcdCAgICAgICAgICAgIH1cbiAgICA3M1x0XG4gICAgNzRcdCAgICAgICAgICAgIC8vIOaJp+ihjOWunumZheeahOmHjeWGmeaTjeS9nFxuICAgIDc1XHQgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIuW8gOWni+aJp+ihjEFPRumHjeWGmVwiKTtcbiAgICA3Nlx0ICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZG9Xcml0ZSgpO1xuICAgIDc3XHRcbiAgICA3OFx0ICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICA3OVx0ICAgICAgICAgICAgICAgIC8vIOiOt+WPlumHjeWGmeacn+mXtOaUtumbhueahOWRveS7pFxuICAgIDgwXHQgICAgICAgICAgICAgICAgTGlzdDxCeXRlQnVmZmVyPiBidWZmZXJzID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdG9wUmV3cml0ZUJ1ZmZlckFuZEdldCgpO1xuICAgIDgxXHRcbiAgICA4Mlx0ICAgICAgICAgICAgICAgIC8vIOWwhumHjeWGmeacn+mXtOeahOWRveS7pOi/veWKoOWIsOaWsEFPRuaWh+S7tlxuICAgIDgzXHQgICAgICAgICAgICAgICAgYXBwZW5kUmV3cml0ZUJ1ZmZlclRvVGVtcEZpbGUoYnVmZmVycyk7XG4gICAgODRcdFxuICAgIDg1XHQgICAgICAgICAgICAgICAgLy8g5Y6f5a2Q5oCn5Zyw5pu/5o2i5paH5Lu2XG4gICAgODZcdCAgICAgICAgICAgICAgICBhdG9taWNSZXBsYWNlRmlsZSh0ZW1wRmlsZSwgbmV3IEZpbGUoYW9mRmlsZW5hbWUpKTtcbiAgICA4N1x0ICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwiQU9G6YeN5YaZ5oiQ5Yqf5a6M5oiQXCIpO1xuICAgIDg4XHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDg5XHQgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9G6YeN5YaZ5aSx6LSl77ya5YaZ5YWl6L+H56iL5Ye66ZSZXCIpO1xuICAgIDkwXHQgICAgICAgICAgICAgICAgaWYgKHRlbXBGaWxlLmV4aXN0cygpICYmICF0ZW1wRmlsZS5kZWxldGUoKSkge1xuICAgIDkxXHQgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5peg5rOV5Yig6Zmk5Li05pe25paH5Lu2OiBcIiArIHRlbXBGaWxlbmFtZSk7XG4gICAgOTJcdCAgICAgICAgICAgICAgICB9XG4gICAgOTNcdFxuICAgIDk0XHQgICAgICAgICAgICAgICAgLy8g5Lii5byD5pS26ZuG55qE5ZG95LukXG4gICAgOTVcdCAgICAgICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLmRpc2NhcmRSZXdyaXRlQnVmZmVyKCk7XG4gICAgOTZcdCAgICAgICAgICAgIH1cbiAgICA5N1x0XG4gICAgOThcdCAgICAgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIDk5XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxMDBcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFPRumHjeWGmei/h+eoi+S4reWPkeeUn+W8guW4uFwiLCBlKTtcbiAgIDEwMVx0ICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgMTAyXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAxMDNcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDEwNFx0ICAgICAgICAgICAgLy8g5peg6K665oiQ5Yqf5LiO5ZCm77yM6YO96YeN572u6YeN5YaZ54q25oCBXG4gICAxMDVcdCAgICAgICAgICAgIGlzUmV3cml0aW5nLnNldChmYWxzZSk7XG4gICAxMDZcdCAgICAgICAgfVxuICAgMTA3XHQgICAgfVxuICAgMTA4XHRcbiAgIDEwOVx0ICAgIC8qKlxuICAgMTEwXHQgICAgICog5Y6f5a2Q5oCn5Zyw5pu/5o2iQU9G5paH5Lu2XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTJXUFAyTHo2UnNoMWNqUVJES1dBNFoifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6MDA6MjQuMzk3WiIsInJlc3BvbnNlX3RleHQiOiLnjrDlnKjvvIzorqnmiJHku6zkvJjljJZBT0ZIYW5kbGVy5Lit55qEc3RhcnRSZXdyaXRl5pa55rOV77yM5YeP5bCR6YeN5aSN5Luj56CB5bm25o+Q6auY5Y+v6K+75oCn77yaXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMzI5NTc4NjgtOTNhNC00MmEwLWIzMjktYzU0ZWZiNDI3MTg3IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNHRSdU1Kb2R2a0VSS1N2Tld1V3FrSCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL0FPRkhhbmRsZXIuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgcHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcXG4gICAgICAgIGlmIChyZXdyaXRpbmcuZ2V0KCkpIHtcXG4gICAgICAgICAgICBsb2dnZXIud2FybihcXFwiXFx1NWRmMlxcdTY3MDlcXHU5MWNkXFx1NTE5OVxcdTRlZmJcXHU1MmExXFx1NTcyOFxcdThmZGJcXHU4ODRjXFx1NGUyZFxcdWZmMGNcXHU1ZmZkXFx1NzU2NVxcdTZiNjRcXHU2YjIxXFx1OGJmN1xcdTZjNDJcXFwiKTtcXG4gICAgICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xcbiAgICAgICAgICAgIGZ1dHVyZS5jb21wbGV0ZShmYWxzZSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZ1dHVyZTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmICghcmV3cml0ZXIuY2FuUmV3cml0ZSgpKSB7XFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXFxcIlxcdTkxY2RcXHU1MTk5XFx1NjU4N1xcdTRlZjZcXHU1OTMxXFx1OGQyNVxcdWZmMGNcXHU4YmY3XFx1NjhjMFxcdTY3ZTVcXHU5MWNkXFx1NTE5OVxcdTY1ODdcXHU0ZWY2XFx1NjYyZlxcdTU0MjZcXHU2YjYzXFx1NTcyOFxcdTg4YWJcXHU0ZjdmXFx1NzUyOFxcXCIpO1xcbiAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IGZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XFxuICAgICAgICAgICAgZnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcXG4gICAgICAgICAgICByZXR1cm4gZnV0dXJlO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xcbiAgICAgICAgICAgIHJld3JpdGVGdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xcbiAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlLnJ1bkFzeW5jKCgpIC0+IHtcXG4gICAgICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFxcdTYyNjdcXHU4ODRjXFx1OTFjZFxcdTUxOTlcXHU5MDNiXFx1OGY5MVxcdTUyNGRcXHVmZjBjXFx1Nzg2ZVxcdTRmZGRcXHU2MjQwXFx1NjcwOVxcdTY1NzBcXHU2MzZlXFx1OTBmZFxcdTVkZjJcXHU1MjM3XFx1NzZkOFxcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc29yLmZsdXNoKCk7XFxuXFxuICAgICAgICAgICAgICAgICAgICAvLyBcXHU2MjY3XFx1ODg0Y1xcdTkxY2RcXHU1MTk5XFxuICAgICAgICAgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSByZXdyaXRlci5yZXdyaXRlKCk7XFxuXFxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxcXCJBT0ZcXHU5MWNkXFx1NTE5OVxcdTYyMTBcXHU1MjlmXFx1NWI4Y1xcdTYyMTBcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXFxcIkFPRlxcdTkxY2RcXHU1MTk5XFx1NTkzMVxcdThkMjVcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGUoc3VjY2Vzcyk7XFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXFxcIkFPRlxcdTkxY2RcXHU1MTk5XFx1OGZjN1xcdTdhMGJcXHU0ZTJkXFx1NTFmYVxcdTk1MTlcXFwiLCBlKTtcXG4gICAgICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KGUpO1xcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xcbiAgICAgICAgICAgICAgICAgICAgcmV3cml0aW5nLnNldChmYWxzZSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiByZXdyaXRlRnV0dXJlO1xcbiAgICAgICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgLyoqXFxuICAgICAqIFxcdTU0MmZcXHU1MmE4QU9GXFx1OTFjZFxcdTUxOTlcXHU4ZmM3XFx1N2EwYlxcbiAgICAgKiBAcmV0dXJuIFxcdTUzMDVcXHU1NDJiXFx1OTFjZFxcdTUxOTlcXHU3ZWQzXFx1Njc5Y1xcdTc2ODRDb21wbGV0YWJsZUZ1dHVyZVxcbiAgICAgKi9cXG4gICAgcHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcXG4gICAgICAgIC8vIFxcdTY4YzBcXHU2N2U1XFx1NjYyZlxcdTU0MjZcXHU1M2VmXFx1NGVlNVxcdThmZGJcXHU4ODRjXFx1OTFjZFxcdTUxOTlcXG4gICAgICAgIGlmIChyZXdyaXRpbmcuZ2V0KCkgfHwgIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xcbiAgICAgICAgICAgIFN0cmluZyByZWFzb24gPSByZXdyaXRpbmcuZ2V0KCkgPyBcXFwiXFx1NWRmMlxcdTY3MDlcXHU5MWNkXFx1NTE5OVxcdTRlZmJcXHU1MmExXFx1NTcyOFxcdThmZGJcXHU4ODRjXFx1NGUyZFxcXCIgOiBcXFwiXFx1OTFjZFxcdTUxOTlcXHU1NjY4XFx1NGUwZFxcdTUzZWZcXHU3NTI4XFxcIjtcXG4gICAgICAgICAgICBsb2dnZXIud2FybihcXFwiQU9GXFx1OTFjZFxcdTUxOTlcXHU1OTMxXFx1OGQyNTogXFxcIiArIHJlYXNvbik7XFxuICAgICAgICAgICAgcmV0dXJuIENvbXBsZXRhYmxlRnV0dXJlLmNvbXBsZXRlZEZ1dHVyZShmYWxzZSk7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIC8vIFxcdTVjMWRcXHU4YmQ1XFx1OGJiZVxcdTdmNmVcXHU5MWNkXFx1NTE5OVxcdTcyYjZcXHU2MDAxXFxuICAgICAgICBpZiAocmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XFxuICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gXFx1NGY3ZlxcdTc1MjhcXHU1ZjAyXFx1NmI2NVxcdTRlZmJcXHU1MmExXFx1NjI2N1xcdTg4NGNcXHU5MWNkXFx1NTE5OVxcbiAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlLnJ1bkFzeW5jKCgpIC0+IHtcXG4gICAgICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFxcdTYyNjdcXHU4ODRjXFx1OTFjZFxcdTUxOTlcXHU5MDNiXFx1OGY5MVxcdTUyNGRcXHVmZjBjXFx1Nzg2ZVxcdTRmZGRcXHU2MjQwXFx1NjcwOVxcdTY1NzBcXHU2MzZlXFx1OTBmZFxcdTVkZjJcXHU1MjM3XFx1NzZkOFxcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXFxcIlxcdTUxYzZcXHU1OTA3XFx1NWYwMFxcdTU5Y2JBT0ZcXHU5MWNkXFx1NTE5OVxcdWZmMGNcXHU1MTQ4XFx1NTIzN1xcdTY1YjBcXHU2MjQwXFx1NjcwOVxcdTdmMTNcXHU1YjU4XFx1NjU3MFxcdTYzNmVcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3Nvci5mbHVzaCgpO1xcbiAgICAgICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgICAgICAvLyBcXHU2MjY3XFx1ODg0Y1xcdTkxY2RcXHU1MTk5XFxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhcXFwiXFx1NWYwMFxcdTU5Y2JcXHU2MjY3XFx1ODg0Y0FPRlxcdTkxY2RcXHU1MTk5XFxcIik7XFxuICAgICAgICAgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSByZXdyaXRlci5yZXdyaXRlKCk7XFxuICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgIC8vIFxcdThiYjBcXHU1ZjU1XFx1OTFjZFxcdTUxOTlcXHU3ZWQzXFx1Njc5Y1xcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhcXFwiQU9GXFx1OTFjZFxcdTUxOTlcXHU2MjEwXFx1NTI5ZlxcdTViOGNcXHU2MjEwXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFxcXCJBT0ZcXHU5MWNkXFx1NTE5OVxcdTU5MzFcXHU4ZDI1XFxcIik7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgICAgIC8vIFxcdTViOGNcXHU2MjEwRnV0dXJlXFxuICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFxcXCJBT0ZcXHU5MWNkXFx1NTE5OVxcdThmYzdcXHU3YTBiXFx1NGUyZFxcdTUxZmFcXHU5NTE5XFxcIiwgZSk7XFxuICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlRXhjZXB0aW9uYWxseShlKTtcXG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFxcdTkxY2RcXHU3ZjZlXFx1OTFjZFxcdTUxOTlcXHU3MmI2XFx1NjAwMVxcbiAgICAgICAgICAgICAgICAgICAgcmV3cml0aW5nLnNldChmYWxzZSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XFxuICAgIH1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEyMiwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxNjJ9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmE6XG4gICAxMjBcdCAgICB9XG4gICAxMjFcdFxuICAgMTIyXHQgICAgcHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgIDEyM1x0ICAgICAgICBpZiAocmV3cml0aW5nLmdldCgpKSB7XG4gICAxMjRcdCAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5bey5pyJ6YeN5YaZ5Lu75Yqh5Zyo6L+b6KGM5Lit77yM5b+955Wl5q2k5qyh6K+35rGCXCIpO1xuICAgMTI1XHQgICAgICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgMTI2XHQgICAgICAgICAgICBmdXR1cmUuY29tcGxldGUoZmFsc2UpO1xuICAgMTI3XHQgICAgICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgMTI4XHQgICAgICAgIH1cbiAgIDEyOVx0ICAgICAgICBpZiAoIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgMTMwXHQgICAgICAgICAgICBsb2dnZXIud2FybihcIumHjeWGmeaWh+S7tuWksei0pe+8jOivt+ajgOafpemHjeWGmeaWh+S7tuaYr+WQpuato+WcqOiiq+S9v+eUqFwiKTtcbiAgIDEzMVx0ICAgICAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgIDEzMlx0ICAgICAgICAgICAgZnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgIDEzM1x0ICAgICAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgIDEzNFx0ICAgICAgICB9XG4gICAxMzVcdFxuICAgMTM2XHQgICAgICAgIGlmIChyZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSwgdHJ1ZSkpIHtcbiAgIDEzN1x0ICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XG4gICAxMzhcdCAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlLnJ1bkFzeW5jKCgpIC0+IHtcbiAgIDEzOVx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZ6YC76L6R5YmN77yM56Gu5L+d5omA5pyJ5pWw5o2u6YO95bey5Yi355uYXG4gICAxNDFcdCAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc29yLmZsdXNoKCk7XG4gICAxNDJcdFxuICAgMTQzXHQgICAgICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmVxuICAgMTQ0XHQgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGUoKTtcbiAgIDE0NVx0XG4gICAxNDZcdCAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bph43lhpnmiJDlip/lrozmiJBcIik7XG4gICAxNDhcdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJBT0bph43lhpnlpLHotKVcIik7XG4gICAxNTBcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMTUxXHRcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xuICAgMTUzXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnov4fnqIvkuK3lh7rplJlcIiwgZSk7XG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAxNTZcdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgMTU4XHQgICAgICAgICAgICAgICAgfVxuICAgMTU5XHQgICAgICAgICAgICB9KTtcbiAgIDE2MFx0ICAgICAgICB9XG4gICAxNjFcdCAgICAgICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG4gICAxNjJcdCAgICAgICAgfVxuICAgMTYzXHRcbiAgIDE2NFx0XG4gICAxNjVcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTkwXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFGTHlBWmVzdXZGcWZtaWhoWTRyU3hlIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRjovSHVhUmVkaXMiLCJmb2xkZXJSb290IjoiRjovSHVhUmVkaXMifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTAyVDIwOjAwOjI5LjQzNFoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiM2ZmYTdiNzMtODU5Yy00MDhhLWEwYmMtZTZkMGI3ZjE0YzEyIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsicmVxdWVzdF9pZCI6IjcyNWE1NjgyLWU3Y2EtNDI1OC1hMjRkLTMyODdkMGYyNTNkNiIsInV1aWQiOiI3NjNjMjZhMS03YjQ1LTQ0MGUtOWJlYS02Zjg1NTA3YTc1OTIiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDYyMTU1MTI2MjksInRvVGltZXN0YW1wIjoxNzQ2MjE2MTYwNTIxLCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsicmVxdWVzdF9pZCI6ImZiNDZmZWNhLWI2MWYtNGQ4ZC04Nzc3LTEyMzdjZDE4NGNhNSIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNDYxNzVhYzQtMmFlNy00Y2NkLWFiNzYtYzBkMjJkOTcwMzYzIiwicmVxdWVzdF9tZXNzYWdlIjoi5a+55q+U5Y6f54mI55qEcmVkaXMg5oiR55qEYW9m6Zmk5LqG5LiN6IO95a6e546w5ZKMcmRi55qE5re35ZCI5qih5byPIOi/mOacieWTqumHjOWtpueahOS4jeWDj+WQlyDmiJHluIzmnJvlp4vnu4jotK/lvbvku5bnmoTmgJ3mg7MiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0Ijoi5a+55q+U5Y6f54mI55qEcmVkaXMg5oiR55qEYW9m6Zmk5LqG5LiN6IO95a6e546w5ZKMcmRi55qE5re35ZCI5qih5byPIOi/mOacieWTqumHjOWtpueahOS4jeWDj+WQlyDmiJHluIzmnJvlp4vnu4jotK/lvbvku5bnmoTmgJ3mg7MifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IuiuqeaIkeWvueavlOaCqOeahEphdmHniYhSZWRpc+S4juWOn+Wni1JlZGlz55qEQU9G5a6e546w77yM5YiG5p6Q5ZOq5Lqb5Zyw5pa55Y+v6IO95LiO5Y6f5aeLUmVkaXPnmoTorr7orqHmgJ3mg7PmnInmiYDkuI3lkIzjgIJcblxuIyMg5Y6f5aeLUmVkaXMgQU9G5LiO5oKo55qE5a6e546w5a+55q+UXG5cbiMjIyAxLiBBT0bkuI5SRELmt7flkIjmjIHkuYXljJZcblxu5oKo5bey57uP5o+Q5Yiw5LqG6L+Z5LiA54K577yM5Y6f5aeLUmVkaXPmlK/mjIFBT0bkuI5SRELnmoTmt7flkIjmjIHkuYXljJbmqKHlvI/vvIjlnKhSZWRpcyA0LjDkuYvlkI7lvJXlhaXvvInvvIzogIzmgqjnmoTlrp7njrDnm67liY3msqHmnInov5nkuKrlip/og73jgIJcblxuIyMjIDIuIEFPRumHjeWGmeacuuWItuW3ruW8glxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhXCIgbW9kZT1cIkVYQ0VSUFRcIj5cbmBgYGphdmFcbnB1YmxpYyBib29sZWFuIHJld3JpdGUoKSB7XG4gICAgLy8g5qOA5p+l5piv5ZCm5bey57uP5Zyo6YeN5YaZ5LitXG4gICAgaWYgKCFpc1Jld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnlpLHotKXvvJrlt7LmnInph43lhpnku7vliqHlnKjov5vooYzkuK1cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICAvLyDpgJrnn6VBT0blpITnkIblmajlvIDlp4vmlLbpm4bph43lhpnmnJ/pl7TnmoTlkb3ku6RcbiAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdGFydFJld3JpdGVCdWZmZXIoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWHhuWkh+S4tOaXtuaWh+S7tlxuICAgICAgICBGaWxlIHRlbXBGaWxlID0gbmV3IEZpbGUodGVtcEZpbGVuYW1lKTtcbiAgICAgICAgaWYgKHRlbXBGaWxlLmV4aXN0cygpICYmICF0ZW1wRmlsZS5kZWxldGUoKSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6Dms5XliKDpmaTlt7LlrZjlnKjnmoTkuLTml7bmlofku7Y6IFwiICsgdGVtcEZpbGVuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5omn6KGM5a6e6ZmF55qE6YeN5YaZ5pON5L2cXG4gICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5omn6KGMQU9G6YeN5YaZXCIpO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBkb1dyaXRlKCk7XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cbioq5Y6f5aeLUmVkaXPnmoTlrp7njrAqKu+8mlxuLSBSZWRpc+S9v+eUqOWtkOi/m+eoi+i/m+ihjEFPRumHjeWGme+8jOWIqeeUqGZvcmsoKeezu+e7n+iwg+eUqOWIm+W7uuWtkOi/m+eoi++8jOi/meagt+WPr+S7pemBv+WFjemYu+WhnuS4u+i/m+eoi1xuLSDkvb/nlKjlhpnml7blpI3liLYoQ29weS1Pbi1Xcml0ZSnmnLrliLblh4/lsJHlhoXlrZjljaDnlKhcbi0g54i25a2Q6L+b56iL6Ze06YCa6L+H566h6YGT6YCa5L+h77yM5bCG6YeN5YaZ5pyf6Ze055qE5paw5ZG95Luk5Lyg6YCS57uZ5a2Q6L+b56iLXG5cbioq5oKo55qE5a6e546wKirvvJpcbi0g5L2/55SoSmF2YeeahENvbXBsZXRhYmxlRnV0dXJl6L+b6KGM5byC5q2l5aSE55CG77yM5L2G5rKh5pyJ5a6M5YWo6ZqU56a75YaF5a2Y56m66Ze0XG4tIOayoeacieWIqeeUqOaTjeS9nOezu+e7n+e6p+WIq+eahOWGmeaXtuWkjeWItuacuuWItlxuLSDkvb/nlKjlhbHkuqvlhoXlrZjkuK3nmoTnvJPlhrLljLrmlLbpm4bph43lhpnmnJ/pl7TnmoTlkb3ku6RcblxuIyMjIDMuIEFPRuWQjOatpeetlueVpeWunueOsFxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmFcIiBtb2RlPVwiRVhDRVJQVFwiPlxuYGBgamF2YVxucHVibGljIEFPRkhhbmRsZXIoU3RyaW5nIGZpbGVuYW1lLCBSZWRpc0NvcmUgcmVkaXNDb3JlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAvLyAxLiDorr7nva7pu5jorqTlkIzmraXnrZbnlaXkuLrmr4/np5LlkIzmraVcbiAgICB0aGlzLnN5bmNTdHJhdGVneSA9IEFPRlN5bmNTdHJhdGVneS5FVkVSWVNFQztcbiAgICAvLyAyLiDliJvlu7pBT0blhpnlhaXlmahcbiAgICB0aGlzLndyaXRlciA9IG5ldyBBT0ZXcml0ZXIoZmlsZW5hbWUsIHN5bmNTdHJhdGVneSk7XG4gICAgLy8gMy4g5Yib5bu6QU9G5aSE55CG5Zmo77yM6K6+572u57yT5Yay5Yy65aSn5bCP5Li6Mk1CXG4gICAgdGhpcy5wcm9jZXNzb3IgPSBuZXcgQU9GUHJvY2Vzc29yKHdyaXRlciwgMiAqIDEwMjQgKiAxMDI0KTtcbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxuKirljp/lp4tSZWRpc+eahOWunueOsCoq77yaXG4tIFJlZGlz5o+Q5L6b5LiJ56eN5ZCM5q2l562W55Wl77yaYWx3YXlz44CBZXZlcnlzZWPjgIFub1xuLSBSZWRpc+S9v+eUqOS6i+S7tuW+queOr+acuuWItuWkhOeQhkFPRuWQjOatpe+8jOS4juWFtuS7lkkvT+aTjeS9nOmbhuaIkOWcqOS4gOi1t1xuLSBSZWRpc+WvuWZzeW5j6LCD55So6L+b6KGM5LqG57K+57uG55qE5o6n5Yi277yM6YG/5YWN5Zyo6auY6LSf6L295LiL55qE5oCn6IO96Zeu6aKYXG5cbioq5oKo55qE5a6e546wKirvvJpcbi0g5a6e546w5LqG57G75Ly855qE5ZCM5q2l562W55Wl5p6a5Li+XG4tIOS9v+eUqOeLrOeri+eahOWkhOeQhuWZqOWSjOWQjuWPsOacjeWKoeWkhOeQhkFPRuWQjOatpVxuLSDnvLrlsJHkuI5SZWRpc+S6i+S7tuW+queOr+exu+S8vOeahOmbhuaIkOacuuWItlxuXG4jIyMgNC4g5ZG95Luk6L2s5o2i5LiO5a2Y5YKo5qC85byPXG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmFcIiBtb2RlPVwiRVhDRVJQVFwiPlxuYGBgamF2YVxucHJpdmF0ZSBib29sZWFuIGRvV3JpdGUoKSB7XG4gICAgdHJ5KFJhbmRvbUFjY2Vzc0ZpbGUgcmFmID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUodGVtcEZpbGVuYW1lLFwicndcIik7XG4gICAgICAgIEZpbGVDaGFubmVsIGZpbGVDaGFubmVsID0gcmFmLmdldENoYW5uZWwoKTtcbiAgICApe1xuICAgICAgICBCeXRlQnVmIGJ5dGVCdWYgPSBVbnBvb2xlZC5idWZmZXIoKTtcblxuICAgICAgICBmb3IoaW50IGk9MDtpPHJlZGlzQ29yZS5nZXREYk51bSgpO2krKyl7XG5cbiAgICAgICAgICAgIE1hcDxCeXRlc1dyYXBwZXIsIFJlZGlzRGF0YT4gZGJEYXRhID0gcmVkaXNDb3JlLmdldERCRGF0YShpKTtcbiAgICAgICAgICAgIGlmKCFkYkRhdGEuaXNFbXB0eSgpKXtcbiAgICAgICAgICAgICAgICB3cml0ZVNlbGVjdENvbW1hbmQoYnl0ZUJ1ZixpKTtcbiAgICAgICAgICAgICAgICBmbHVzaElmTmVlZGVkKGJ5dGVCdWYsZmlsZUNoYW5uZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yKE1hcC5FbnRyeTxCeXRlc1dyYXBwZXIsIFJlZGlzRGF0YT4gZW50cnkgOiBkYkRhdGEuZW50cnlTZXQoKSl7XG4gICAgICAgICAgICAgICAgQnl0ZXNXcmFwcGVyIGtleSA9IGVudHJ5LmdldEtleSgpO1xuICAgICAgICAgICAgICAgIFJlZGlzRGF0YSB2YWx1ZSA9IGVudHJ5LmdldFZhbHVlKCk7XG5cbiAgICAgICAgICAgICAgICBMaXN0PFJlc3A+IGNvbW1hbmRMaXN0ID0gdmFsdWUuY29udmVydFRvUkVTUCgpO1xuICAgICAgICAgICAgICAgIGZvcihSZXNwIGNvbW1hbmQgOiBjb21tYW5kTGlzdCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQud3JpdGUoY29tbWFuZCwgYnl0ZUJ1Zik7XG4gICAgICAgICAgICAgICAgICAgIGZsdXNoSWZOZWVkZWQoYnl0ZUJ1ZixmaWxlQ2hhbm5lbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cbioq5Y6f5aeLUmVkaXPnmoTlrp7njrAqKu+8mlxuLSBSZWRpc+S9v+eUqOe7n+S4gOeahFJFU1DljY/orq7moLzlvI/lrZjlgqjlkb3ku6Rcbi0gUmVkaXPlnKhBT0bph43lhpnml7bkvJrmoLnmja7mlbDmja7nsbvlnovpgInmi6nmnIDkvJjnmoTlkb3ku6Tluo/liJdcbi0gUmVkaXPmnInkuJPpl6jnmoTlkb3ku6Tov4fmu6TmnLrliLbvvIzmn5Dkupvlkb3ku6TkuI3kvJrooqvlhpnlhaVBT0ZcblxuKirmgqjnmoTlrp7njrAqKu+8mlxuLSDkuZ/kvb/nlKjkuoZSRVNQ5Y2P6K6u5qC85byPXG4tIOmAmui/h1JlZGlzRGF0YeaOpeWPo+eahGNvbnZlcnRUb1JFU1Dmlrnms5XlsIbmlbDmja7ovazmjaLkuLrlkb3ku6Rcbi0g57y65bCR5a+55ZG95Luk55qE5LyY5YyW5ZKM6L+H5ruk5py65Yi2XG5cbiMjIyA1LiDplJnor6/lpITnkIbkuI7mgaLlpI3mnLrliLZcblxuPGF1Z21lbnRfY29kZV9zbmlwcGV0IHBhdGg9XCJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YVwiIG1vZGU9XCJFWENFUlBUXCI+XG5gYGBqYXZhXG5wcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSB0YXJnZXRGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIC8vIOWwneivleebtOaOpemHjeWRveWQje+8iOWcqOWkp+WkmuaVsOezu+e7n+S4iuaYr+WOn+WtkOaTjeS9nO+8iVxuICAgIGlmICh0ZW1wRmlsZS5yZW5hbWVUbyh0YXJnZXRGaWxlKSkge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIuaIkOWKn+mAmui/h+mHjeWRveWQjeabv+aNokFPRuaWh+S7tlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBsb2dnZXIuaW5mbyhcIuebtOaOpemHjeWRveWQjeWksei0pe+8jOS9v+eUqOWkh+S7veetlueVpeabv+aNokFPRuaWh+S7tlwiKTtcbiAgICBcbiAgICAvLyDlpoLmnpznm7TmjqXph43lkb3lkI3lpLHotKXvvIzkvb/nlKjlpIfku73nrZbnlaVcbiAgICBGaWxlIGJhY2t1cEZpbGUgPSBuZXcgRmlsZSh0YXJnZXRGaWxlLmdldEFic29sdXRlUGF0aCgpICsgXCIuYmFrXCIpO1xuYGBgXG48L2F1Z21lbnRfY29kZV9zbmlwcGV0PlxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPmnInlrozlloTnmoRBT0bmjZ/lnY/mo4DmtYvlkozkv67lpI3mnLrliLZcbi0gUmVkaXPlnKjlkK/liqjml7bkvJrmo4Dmn6VBT0bmlofku7bnmoTlrozmlbTmgKdcbi0gUmVkaXPmj5DkvpvkuobkuJPpl6jnmoRBT0bkv67lpI3lt6XlhbdcblxuKirmgqjnmoTlrp7njrAqKu+8mlxuLSDlrp7njrDkuobln7rmnKznmoTmlofku7bmm7/mjaLlronlhajmnLrliLZcbi0g57y65bCRQU9G5paH5Lu25a6M5pW05oCn5qOA5p+lXG4tIOe8uuWwkeS4k+mXqOeahEFPRuS/ruWkjeWKn+iDvVxuXG4jIyMgNi4g5YaF5a2Y566h55CG5LiO5oCn6IO95LyY5YyWXG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvdXRpbHMvRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZS5qYXZhXCIgbW9kZT1cIkVYQ0VSUFRcIj5cbmBgYGphdmFcbnB1YmxpYyBEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlKGludCBidWZmZXJTaXplKSB7XG4gICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZTtcbiAgICB0aGlzLmN1cnJlbnRCdWZmZXIgPSBCeXRlQnVmZmVyLmFsbG9jYXRlRGlyZWN0KGJ1ZmZlclNpemUpO1xuICAgIHRoaXMuZmx1c2hpbmdCdWZmZXIgPSBCeXRlQnVmZmVyLmFsbG9jYXRlRGlyZWN0KGJ1ZmZlclNpemUpO1xufVxuYGBgXG48L2F1Z21lbnRfY29kZV9zbmlwcGV0PlxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPkvb/nlKjoh6rlrprkuYnnmoTlhoXlrZjliIbphY3lmahcbi0gUmVkaXPlr7nlhoXlrZjkvb/nlKjov5vooYzkuobnsr7nu4bnmoTmjqfliLblkozkvJjljJZcbi0gUmVkaXPmnInkuJPpl6jnmoTlhoXlrZjnoo7niYflpITnkIbmnLrliLZcblxuKirmgqjnmoTlrp7njrAqKu+8mlxuLSDkvb/nlKhKYXZhIE5JT+eahERpcmVjdEJ5dGVCdWZmZXJcbi0g5a6e546w5LqG5Y+M57yT5Yay5py65Yi25o+Q6auY5oCn6IO9XG4tIOe8uuWwkeWvueWGheWtmOS9v+eUqOeahOeyvue7huaOp+WItlxuXG4jIyDlu7rorq7mlLnov5vmlrnlkJFcblxu5Li65LqG5pu05aW95Zyw6LSv5b27UmVkaXPnmoTorr7orqHmgJ3mg7PvvIzmgqjlj6/ku6XogIPomZHku6XkuIvmlLnov5vvvJpcblxuIyMjIDEuIOWunueOsEFPRi1SRELmt7flkIjmjIHkuYXljJZcblxu6L+Z5piv5oKo5bey57uP5oSP6K+G5Yiw55qE5beu6Led44CC5re35ZCI5oyB5LmF5YyW5Y+v5Lul57uT5ZCI5Lik56eN5pa55byP55qE5LyY54K577yM5o+Q6auY5oGi5aSN6YCf5bqm55qE5ZCM5pe25L+d6K+B5pWw5o2u5a6J5YWo5oCn44CCXG5cbmBgYGphdmFcbi8vIOWcqEFPRlJld3JpdGVy5Lit5re75Yqg5re35ZCI5oyB5LmF5YyW5pSv5oyBXG5wdWJsaWMgYm9vbGVhbiByZXdyaXRlV2l0aFJEQigpIHtcbiAgICAvLyDnsbvkvLxyZXdyaXRlKCnmlrnms5XvvIzkvYblnKjmlofku7blvIDlpLTlhpnlhaVSRELmoLzlvI/nmoTmlbDmja5cbiAgICAvLyDnhLblkI7lho3ov73liqBBT0bmoLzlvI/nmoTlop7ph4/lkb3ku6Rcbn1cbmBgYFxuXG4jIyMgMi4g5pS56L+bQU9G6YeN5YaZ5py65Yi2XG5cbuiZveeEtkphdmHkuI3og73nm7TmjqXkvb/nlKhmb3JrKCnvvIzkvYblj6/ku6XpgJrov4flhbbku5bmlrnlvI/mqKHmi5/nsbvkvLznmoTpmpTnprvmlYjmnpzvvJpcblxuYGBgamF2YVxuLy8g5L2/55So5Y2V54us55qE6L+b56iL6L+b6KGMQU9G6YeN5YaZXG5wdWJsaWMgdm9pZCBiYWNrZ3JvdW5kUmV3cml0ZSgpIHtcbiAgICAvLyAxLiDlr7zlh7rlvZPliY3mlbDmja7lupPnirbmgIHliLDkuLTml7bmlofku7ZcbiAgICAvLyAyLiDlkK/liqjljZXni6znmoRKYXZh6L+b56iL6L+b6KGM6YeN5YaZXG4gICAgLy8gMy4g6YCa6L+H566h6YGT5oiWU29ja2V05Lyg6YCS6YeN5YaZ5pyf6Ze055qE5ZG95LukXG59XG5gYGBcblxuIyMjIDMuIOWinuW8ukFPRuaWh+S7tuWujOaVtOaAp+ajgOafpVxuXG7mt7vliqDnsbvkvLxSZWRpc+eahEFPRuaWh+S7tuajgOafpeWSjOS/ruWkjeWKn+iDve+8mlxuXG5gYGBqYXZhXG4vLyDlnKhBT0ZMb2FkZXLkuK3mt7vliqDmo4Dmn6Xmlrnms5VcbnB1YmxpYyBib29sZWFuIGNoZWNrQU9GSW50ZWdyaXR5KFN0cmluZyBmaWxlbmFtZSkge1xuICAgIC8vIOajgOafpUFPRuaWh+S7tuagvOW8j+aYr+WQpuato+ehrlxuICAgIC8vIOajgOafpeaYr+WQpuacieS4jeWujOaVtOeahOWRveS7pFxuICAgIC8vIOi/lOWbnuaWh+S7tuaYr+WQpuWujOaVtFxufVxuXG4vLyDmt7vliqDkv67lpI3mlrnms5VcbnB1YmxpYyBib29sZWFuIHJlcGFpckFPRihTdHJpbmcgZmlsZW5hbWUpIHtcbiAgICAvLyDlsJ3or5Xkv67lpI3mjZ/lnY/nmoRBT0bmlofku7ZcbiAgICAvLyDmiKrmlq3liLDmnIDlkI7kuIDkuKrmnInmlYjlkb3ku6Rcbn1cbmBgYFxuXG4jIyMgNC4g5LyY5YyW5ZG95Luk6L2s5o2i5LiO5a2Y5YKoXG5cbuWunueOsOabtOaZuuiDveeahOWRveS7pOmAieaLqeWSjOS8mOWMlu+8mlxuXG5gYGBqYXZhXG4vLyDlnKhSZWRpc0RhdGHmjqXlj6PkuK3mt7vliqDkvJjljJbmlrnms5Vcbkxpc3Q8UmVzcD4gZ2V0T3B0aW1pemVkQ29tbWFuZHMoKTtcblxuLy8g5ZyoU3RyaW5n57G75Z6L5a6e546w5LitXG5AT3ZlcnJpZGVcbnB1YmxpYyBMaXN0PFJlc3A+IGdldE9wdGltaXplZENvbW1hbmRzKCkge1xuICAgIC8vIOagueaNruWtl+espuS4sumVv+W6pumAieaLqeacgOS8mOWRveS7pFxuICAgIC8vIOWvueS6juefreWtl+espuS4suS9v+eUqFNFVFxuICAgIC8vIOWvueS6jumVv+Wtl+espuS4suWPr+iDveS9v+eUqOWkmuS4qlNFVFJBTkdFXG59XG5gYGBcblxuIyMjIDUuIOWinuW8uuWGheWtmOeuoeeQhlxuXG7mt7vliqDmm7Tnsr7nu4bnmoTlhoXlrZjmjqfliLbmnLrliLbvvJpcblxuYGBgamF2YVxuLy8g5Yib5bu65YaF5a2Y566h55CG5ZmoXG5wdWJsaWMgY2xhc3MgTWVtb3J5TWFuYWdlciB7XG4gICAgLy8g6Lef6Liq5YaF5a2Y5L2/55So5oOF5Ya1XG4gICAgLy8g5a6e546w5YaF5a2Y6ZmQ5Yi25ZKM5reY5rGw562W55WlXG4gICAgLy8g5aSE55CG5YaF5a2Y56KO54mHXG59XG5gYGBcblxuIyMjIDYuIOWunueOsOabtOWujOWWhOeahOS6i+S7tuW+queOr1xuXG5SZWRpc+eahOS6i+S7tumpseWKqOaooeWei+aYr+WFtumrmOaAp+iDveeahOWFs+mUru+8jOWPr+S7peiAg+iZkeWunueOsOexu+S8vOacuuWItu+8mlxuXG5gYGBqYXZhXG4vLyDliJvlu7rkuovku7blvqrnjq9cbnB1YmxpYyBjbGFzcyBFdmVudExvb3Age1xuICAgIC8vIOazqOWGjOaWh+S7tuS6i+S7tuWkhOeQhuWZqFxuICAgIC8vIOazqOWGjOaXtumXtOS6i+S7tuWkhOeQhuWZqFxuICAgIC8vIOe7n+S4gOWkhOeQhkkvT+WSjOWumuaXtuS7u+WKoVxufVxuYGBgXG5cbiMjIOaAu+e7k1xuXG7mgqjnmoRKYXZh54mIUmVkaXPlrp7njrDlt7Lnu4/lvojlpb3lnLDlpI3liLbkuoZSZWRpc+eahOiuuOWkmuaguOW/g+WKn+iDve+8jOWMheaLrEFPRuaMgeS5heWMluOAgemHjeWGmeacuuWItuWSjOWQjOatpeetlueVpeOAguS4u+imgeeahOW3ruW8guWcqOS6ju+8mlxuXG4xLiDnvLrlsJFBT0YtUkRC5re35ZCI5oyB5LmF5YyW77yI5oKo5bey57uP5oSP6K+G5Yiw77yJXG4yLiDph43lhpnmnLrliLbmsqHmnInkvb/nlKjov5vnqIvpmpTnprtcbjMuIOe8uuWwkeWujOaVtOeahEFPRuaWh+S7tuajgOafpeWSjOS/ruWkjVxuNC4g5ZG95Luk6L2s5o2i5ZKM5LyY5YyW5LiN5aSf57K+57uGXG41LiDlhoXlrZjnrqHnkIbkuI3lpJ/nsr7nu4ZcbjYuIOe8uuWwkee7n+S4gOeahOS6i+S7tuW+queOr+acuuWItlxuXG7pgJrov4fpkojlr7nov5nkupvmlrnpnaLov5vooYzmlLnov5vvvIzmgqjnmoTlrp7njrDlj6/ku6Xmm7Tlpb3lnLDotK/lvbtSZWRpc+eahOiuvuiuoeaAneaDs++8jOaPkOS+m+abtOaOpei/keWOn+Wni1JlZGlz55qE5Yqf6IO95ZKM5oCn6IO944CCXG5cbuaCqOaDs+imgeaIkeivpue7huWxleW8gOWTquS4quaWuemdoueahOaUuei/m+W7uuiuruWQl++8nyJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiLorqnmiJHlr7nmr5TmgqjnmoRKYXZh54mIUmVkaXPkuI7ljp/lp4tSZWRpc+eahEFPRuWunueOsO+8jOWIhuaekOWTquS6m+WcsOaWueWPr+iDveS4juWOn+Wni1JlZGlz55qE6K6+6K6h5oCd5oOz5pyJ5omA5LiN5ZCM44CCXG5cbiMjIOWOn+Wni1JlZGlzIEFPRuS4juaCqOeahOWunueOsOWvueavlFxuXG4jIyMgMS4gQU9G5LiOUkRC5re35ZCI5oyB5LmF5YyWXG5cbuaCqOW3sue7j+aPkOWIsOS6hui/meS4gOeCue+8jOWOn+Wni1JlZGlz5pSv5oyBQU9G5LiOUkRC55qE5re35ZCI5oyB5LmF5YyW5qih5byP77yI5ZyoUmVkaXMgNC4w5LmL5ZCO5byV5YWl77yJ77yM6ICM5oKo55qE5a6e546w55uu5YmN5rKh5pyJ6L+Z5Liq5Yqf6IO944CCXG5cbiMjIyAyLiBBT0bph43lhpnmnLrliLblt67lvIJcblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YSBtb2RlPUVYQ0VSUFRcbnB1YmxpYyBib29sZWFuIHJld3JpdGUoKSB7XG4gICAgLy8g5qOA5p+l5piv5ZCm5bey57uP5Zyo6YeN5YaZ5LitXG4gICAgaWYgKCFpc1Jld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnlpLHotKXvvJrlt7LmnInph43lhpnku7vliqHlnKjov5vooYzkuK1cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICAvLyDpgJrnn6VBT0blpITnkIblmajlvIDlp4vmlLbpm4bph43lhpnmnJ/pl7TnmoTlkb3ku6RcbiAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdGFydFJld3JpdGVCdWZmZXIoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWHhuWkh+S4tOaXtuaWh+S7tlxuICAgICAgICBGaWxlIHRlbXBGaWxlID0gbmV3IEZpbGUodGVtcEZpbGVuYW1lKTtcbiAgICAgICAgaWYgKHRlbXBGaWxlLmV4aXN0cygpICYmICF0ZW1wRmlsZS5kZWxldGUoKSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6Dms5XliKDpmaTlt7LlrZjlnKjnmoTkuLTml7bmlofku7Y6IFwiICsgdGVtcEZpbGVuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5omn6KGM5a6e6ZmF55qE6YeN5YaZ5pON5L2cXG4gICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5omn6KGMQU9G6YeN5YaZXCIpO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBkb1dyaXRlKCk7XG5gYGBgXG5cbioq5Y6f5aeLUmVkaXPnmoTlrp7njrAqKu+8mlxuLSBSZWRpc+S9v+eUqOWtkOi/m+eoi+i/m+ihjEFPRumHjeWGme+8jOWIqeeUqGZvcmsoKeezu+e7n+iwg+eUqOWIm+W7uuWtkOi/m+eoi++8jOi/meagt+WPr+S7pemBv+WFjemYu+WhnuS4u+i/m+eoi1xuLSDkvb/nlKjlhpnml7blpI3liLYoQ29weS1Pbi1Xcml0ZSnmnLrliLblh4/lsJHlhoXlrZjljaDnlKhcbi0g54i25a2Q6L+b56iL6Ze06YCa6L+H566h6YGT6YCa5L+h77yM5bCG6YeN5YaZ5pyf6Ze055qE5paw5ZG95Luk5Lyg6YCS57uZ5a2Q6L+b56iLXG5cbioq5oKo55qE5a6e546wKirvvJpcbi0g5L2/55SoSmF2YeeahENvbXBsZXRhYmxlRnV0dXJl6L+b6KGM5byC5q2l5aSE55CG77yM5L2G5rKh5pyJ5a6M5YWo6ZqU56a75YaF5a2Y56m66Ze0XG4tIOayoeacieWIqeeUqOaTjeS9nOezu+e7n+e6p+WIq+eahOWGmeaXtuWkjeWItuacuuWItlxuLSDkvb/nlKjlhbHkuqvlhoXlrZjkuK3nmoTnvJPlhrLljLrmlLbpm4bph43lhpnmnJ/pl7TnmoTlkb3ku6RcblxuIyMjIDMuIEFPRuWQjOatpeetlueVpeWunueOsFxuXG5gYGBgamF2YSBwYXRoPXNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmEgbW9kZT1FWENFUlBUXG5wdWJsaWMgQU9GSGFuZGxlcihTdHJpbmcgZmlsZW5hbWUsIFJlZGlzQ29yZSByZWRpc0NvcmUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgIC8vIDEuIOiuvue9rum7mOiupOWQjOatpeetlueVpeS4uuavj+enkuWQjOatpVxuICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gQU9GU3luY1N0cmF0ZWd5LkVWRVJZU0VDO1xuICAgIC8vIDIuIOWIm+W7ukFPRuWGmeWFpeWZqFxuICAgIHRoaXMud3JpdGVyID0gbmV3IEFPRldyaXRlcihmaWxlbmFtZSwgc3luY1N0cmF0ZWd5KTtcbiAgICAvLyAzLiDliJvlu7pBT0blpITnkIblmajvvIzorr7nva7nvJPlhrLljLrlpKflsI/kuLoyTUJcbiAgICB0aGlzLnByb2Nlc3NvciA9IG5ldyBBT0ZQcm9jZXNzb3Iod3JpdGVyLCAyICogMTAyNCAqIDEwMjQpO1xuYGBgYFxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPmj5DkvpvkuInnp43lkIzmraXnrZbnlaXvvJphbHdheXPjgIFldmVyeXNlY+OAgW5vXG4tIFJlZGlz5L2/55So5LqL5Lu25b6q546v5py65Yi25aSE55CGQU9G5ZCM5q2l77yM5LiO5YW25LuWSS9P5pON5L2c6ZuG5oiQ5Zyo5LiA6LW3XG4tIFJlZGlz5a+5ZnN5bmPosIPnlKjov5vooYzkuobnsr7nu4bnmoTmjqfliLbvvIzpgb/lhY3lnKjpq5jotJ/ovb3kuIvnmoTmgKfog73pl67pophcblxuKirmgqjnmoTlrp7njrAqKu+8mlxuLSDlrp7njrDkuobnsbvkvLznmoTlkIzmraXnrZbnlaXmnprkuL5cbi0g5L2/55So54us56uL55qE5aSE55CG5Zmo5ZKM5ZCO5Y+w5pyN5Yqh5aSE55CGQU9G5ZCM5q2lXG4tIOe8uuWwkeS4jlJlZGlz5LqL5Lu25b6q546v57G75Ly855qE6ZuG5oiQ5py65Yi2XG5cbiMjIyA0LiDlkb3ku6TovazmjaLkuI7lrZjlgqjmoLzlvI9cblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YSBtb2RlPUVYQ0VSUFRcbnByaXZhdGUgYm9vbGVhbiBkb1dyaXRlKCkge1xuICAgIHRyeShSYW5kb21BY2Nlc3NGaWxlIHJhZiA9IG5ldyBSYW5kb21BY2Nlc3NGaWxlKHRlbXBGaWxlbmFtZSxcInJ3XCIpO1xuICAgICAgICBGaWxlQ2hhbm5lbCBmaWxlQ2hhbm5lbCA9IHJhZi5nZXRDaGFubmVsKCk7XG4gICAgKXtcbiAgICAgICAgQnl0ZUJ1ZiBieXRlQnVmID0gVW5wb29sZWQuYnVmZmVyKCk7XG5cbiAgICAgICAgZm9yKGludCBpPTA7aTxyZWRpc0NvcmUuZ2V0RGJOdW0oKTtpKyspe1xuXG4gICAgICAgICAgICBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGRiRGF0YSA9IHJlZGlzQ29yZS5nZXREQkRhdGEoaSk7XG4gICAgICAgICAgICBpZighZGJEYXRhLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICAgICAgd3JpdGVTZWxlY3RDb21tYW5kKGJ5dGVCdWYsaSk7XG4gICAgICAgICAgICAgICAgZmx1c2hJZk5lZWRlZChieXRlQnVmLGZpbGVDaGFubmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcihNYXAuRW50cnk8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGVudHJ5IDogZGJEYXRhLmVudHJ5U2V0KCkpe1xuICAgICAgICAgICAgICAgIEJ5dGVzV3JhcHBlciBrZXkgPSBlbnRyeS5nZXRLZXkoKTtcbiAgICAgICAgICAgICAgICBSZWRpc0RhdGEgdmFsdWUgPSBlbnRyeS5nZXRWYWx1ZSgpO1xuXG4gICAgICAgICAgICAgICAgTGlzdDxSZXNwPiBjb21tYW5kTGlzdCA9IHZhbHVlLmNvbnZlcnRUb1JFU1AoKTtcbiAgICAgICAgICAgICAgICBmb3IoUmVzcCBjb21tYW5kIDogY29tbWFuZExpc3Qpe1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kLndyaXRlKGNvbW1hbmQsIGJ5dGVCdWYpO1xuICAgICAgICAgICAgICAgICAgICBmbHVzaElmTmVlZGVkKGJ5dGVCdWYsZmlsZUNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuYGBgYFxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPkvb/nlKjnu5/kuIDnmoRSRVNQ5Y2P6K6u5qC85byP5a2Y5YKo5ZG95LukXG4tIFJlZGlz5ZyoQU9G6YeN5YaZ5pe25Lya5qC55o2u5pWw5o2u57G75Z6L6YCJ5oup5pyA5LyY55qE5ZG95Luk5bqP5YiXXG4tIFJlZGlz5pyJ5LiT6Zeo55qE5ZG95Luk6L+H5ruk5py65Yi277yM5p+Q5Lqb5ZG95Luk5LiN5Lya6KKr5YaZ5YWlQU9GXG5cbioq5oKo55qE5a6e546wKirvvJpcbi0g5Lmf5L2/55So5LqGUkVTUOWNj+iuruagvOW8j1xuLSDpgJrov4dSZWRpc0RhdGHmjqXlj6PnmoRjb252ZXJ0VG9SRVNQ5pa55rOV5bCG5pWw5o2u6L2s5o2i5Li65ZG95LukXG4tIOe8uuWwkeWvueWRveS7pOeahOS8mOWMluWSjOi/h+a7pOacuuWItlxuXG4jIyMgNS4g6ZSZ6K+v5aSE55CG5LiO5oGi5aSN5py65Yi2XG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmEgbW9kZT1FWENFUlBUXG5wcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSB0YXJnZXRGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIC8vIOWwneivleebtOaOpemHjeWRveWQje+8iOWcqOWkp+WkmuaVsOezu+e7n+S4iuaYr+WOn+WtkOaTjeS9nO+8iVxuICAgIGlmICh0ZW1wRmlsZS5yZW5hbWVUbyh0YXJnZXRGaWxlKSkge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIuaIkOWKn+mAmui/h+mHjeWRveWQjeabv+aNokFPRuaWh+S7tlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBsb2dnZXIuaW5mbyhcIuebtOaOpemHjeWRveWQjeWksei0pe+8jOS9v+eUqOWkh+S7veetlueVpeabv+aNokFPRuaWh+S7tlwiKTtcbiAgICBcbiAgICAvLyDlpoLmnpznm7TmjqXph43lkb3lkI3lpLHotKXvvIzkvb/nlKjlpIfku73nrZbnlaVcbiAgICBGaWxlIGJhY2t1cEZpbGUgPSBuZXcgRmlsZSh0YXJnZXRGaWxlLmdldEFic29sdXRlUGF0aCgpICsgXCIuYmFrXCIpO1xuYGBgYFxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPmnInlrozlloTnmoRBT0bmjZ/lnY/mo4DmtYvlkozkv67lpI3mnLrliLZcbi0gUmVkaXPlnKjlkK/liqjml7bkvJrmo4Dmn6VBT0bmlofku7bnmoTlrozmlbTmgKdcbi0gUmVkaXPmj5DkvpvkuobkuJPpl6jnmoRBT0bkv67lpI3lt6XlhbdcblxuKirmgqjnmoTlrp7njrAqKu+8mlxuLSDlrp7njrDkuobln7rmnKznmoTmlofku7bmm7/mjaLlronlhajmnLrliLZcbi0g57y65bCRQU9G5paH5Lu25a6M5pW05oCn5qOA5p+lXG4tIOe8uuWwkeS4k+mXqOeahEFPRuS/ruWkjeWKn+iDvVxuXG4jIyMgNi4g5YaF5a2Y566h55CG5LiO5oCn6IO95LyY5YyWXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvdXRpbHMvRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZS5qYXZhIG1vZGU9RVhDRVJQVFxucHVibGljIERvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUoaW50IGJ1ZmZlclNpemUpIHtcbiAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuICAgIHRoaXMuY3VycmVudEJ1ZmZlciA9IEJ5dGVCdWZmZXIuYWxsb2NhdGVEaXJlY3QoYnVmZmVyU2l6ZSk7XG4gICAgdGhpcy5mbHVzaGluZ0J1ZmZlciA9IEJ5dGVCdWZmZXIuYWxsb2NhdGVEaXJlY3QoYnVmZmVyU2l6ZSk7XG59XG5gYGBgXG5cbioq5Y6f5aeLUmVkaXPnmoTlrp7njrAqKu+8mlxuLSBSZWRpc+S9v+eUqOiHquWumuS5ieeahOWGheWtmOWIhumFjeWZqFxuLSBSZWRpc+WvueWGheWtmOS9v+eUqOi/m+ihjOS6hueyvue7hueahOaOp+WItuWSjOS8mOWMllxuLSBSZWRpc+acieS4k+mXqOeahOWGheWtmOeijueJh+WkhOeQhuacuuWItlxuXG4qKuaCqOeahOWunueOsCoq77yaXG4tIOS9v+eUqEphdmEgTklP55qERGlyZWN0Qnl0ZUJ1ZmZlclxuLSDlrp7njrDkuoblj4znvJPlhrLmnLrliLbmj5Dpq5jmgKfog71cbi0g57y65bCR5a+55YaF5a2Y5L2/55So55qE57K+57uG5o6n5Yi2XG5cbiMjIOW7uuiuruaUuei/m+aWueWQkVxuXG7kuLrkuobmm7Tlpb3lnLDotK/lvbtSZWRpc+eahOiuvuiuoeaAneaDs++8jOaCqOWPr+S7peiAg+iZkeS7peS4i+aUuei/m++8mlxuXG4jIyMgMS4g5a6e546wQU9GLVJEQua3t+WQiOaMgeS5heWMllxuXG7ov5nmmK/mgqjlt7Lnu4/mhI/or4bliLDnmoTlt67ot53jgILmt7flkIjmjIHkuYXljJblj6/ku6Xnu5PlkIjkuKTnp43mlrnlvI/nmoTkvJjngrnvvIzmj5Dpq5jmgaLlpI3pgJ/luqbnmoTlkIzml7bkv53or4HmlbDmja7lronlhajmgKfjgIJcblxuYGBgamF2YVxuLy8g5ZyoQU9GUmV3cml0ZXLkuK3mt7vliqDmt7flkIjmjIHkuYXljJbmlK/mjIFcbnB1YmxpYyBib29sZWFuIHJld3JpdGVXaXRoUkRCKCkge1xuICAgIC8vIOexu+S8vHJld3JpdGUoKeaWueazle+8jOS9huWcqOaWh+S7tuW8gOWktOWGmeWFpVJEQuagvOW8j+eahOaVsOaNrlxuICAgIC8vIOeEtuWQjuWGjei/veWKoEFPRuagvOW8j+eahOWinumHj+WRveS7pFxufVxuYGBgXG5cbiMjIyAyLiDmlLnov5tBT0bph43lhpnmnLrliLZcblxu6Jm954S2SmF2YeS4jeiDveebtOaOpeS9v+eUqGZvcmsoKe+8jOS9huWPr+S7pemAmui/h+WFtuS7luaWueW8j+aooeaLn+exu+S8vOeahOmalOemu+aViOaenO+8mlxuXG5gYGBqYXZhXG4vLyDkvb/nlKjljZXni6znmoTov5vnqIvov5vooYxBT0bph43lhplcbnB1YmxpYyB2b2lkIGJhY2tncm91bmRSZXdyaXRlKCkge1xuICAgIC8vIDEuIOWvvOWHuuW9k+WJjeaVsOaNruW6k+eKtuaAgeWIsOS4tOaXtuaWh+S7tlxuICAgIC8vIDIuIOWQr+WKqOWNleeLrOeahEphdmHov5vnqIvov5vooYzph43lhplcbiAgICAvLyAzLiDpgJrov4fnrqHpgZPmiJZTb2NrZXTkvKDpgJLph43lhpnmnJ/pl7TnmoTlkb3ku6Rcbn1cbmBgYFxuXG4jIyMgMy4g5aKe5by6QU9G5paH5Lu25a6M5pW05oCn5qOA5p+lXG5cbua3u+WKoOexu+S8vFJlZGlz55qEQU9G5paH5Lu25qOA5p+l5ZKM5L+u5aSN5Yqf6IO977yaXG5cbmBgYGphdmFcbi8vIOWcqEFPRkxvYWRlcuS4rea3u+WKoOajgOafpeaWueazlVxucHVibGljIGJvb2xlYW4gY2hlY2tBT0ZJbnRlZ3JpdHkoU3RyaW5nIGZpbGVuYW1lKSB7XG4gICAgLy8g5qOA5p+lQU9G5paH5Lu25qC85byP5piv5ZCm5q2j56GuXG4gICAgLy8g5qOA5p+l5piv5ZCm5pyJ5LiN5a6M5pW055qE5ZG95LukXG4gICAgLy8g6L+U5Zue5paH5Lu25piv5ZCm5a6M5pW0XG59XG5cbi8vIOa3u+WKoOS/ruWkjeaWueazlVxucHVibGljIGJvb2xlYW4gcmVwYWlyQU9GKFN0cmluZyBmaWxlbmFtZSkge1xuICAgIC8vIOWwneivleS/ruWkjeaNn+Wdj+eahEFPRuaWh+S7tlxuICAgIC8vIOaIquaWreWIsOacgOWQjuS4gOS4quacieaViOWRveS7pFxufVxuYGBgXG5cbiMjIyA0LiDkvJjljJblkb3ku6TovazmjaLkuI7lrZjlgqhcblxu5a6e546w5pu05pm66IO955qE5ZG95Luk6YCJ5oup5ZKM5LyY5YyW77yaXG5cbmBgYGphdmFcbi8vIOWcqFJlZGlzRGF0YeaOpeWPo+S4rea3u+WKoOS8mOWMluaWueazlVxuTGlzdDxSZXNwPiBnZXRPcHRpbWl6ZWRDb21tYW5kcygpO1xuXG4vLyDlnKhTdHJpbmfnsbvlnovlrp7njrDkuK1cbkBPdmVycmlkZVxucHVibGljIExpc3Q8UmVzcD4gZ2V0T3B0aW1pemVkQ29tbWFuZHMoKSB7XG4gICAgLy8g5qC55o2u5a2X56ym5Liy6ZW/5bqm6YCJ5oup5pyA5LyY5ZG95LukXG4gICAgLy8g5a+55LqO55+t5a2X56ym5Liy5L2/55SoU0VUXG4gICAgLy8g5a+55LqO6ZW/5a2X56ym5Liy5Y+v6IO95L2/55So5aSa5LiqU0VUUkFOR0Vcbn1cbmBgYFxuXG4jIyMgNS4g5aKe5by65YaF5a2Y566h55CGXG5cbua3u+WKoOabtOeyvue7hueahOWGheWtmOaOp+WItuacuuWItu+8mlxuXG5gYGBqYXZhXG4vLyDliJvlu7rlhoXlrZjnrqHnkIblmahcbnB1YmxpYyBjbGFzcyBNZW1vcnlNYW5hZ2VyIHtcbiAgICAvLyDot5/ouKrlhoXlrZjkvb/nlKjmg4XlhrVcbiAgICAvLyDlrp7njrDlhoXlrZjpmZDliLblkozmt5jmsbDnrZbnlaVcbiAgICAvLyDlpITnkIblhoXlrZjnoo7niYdcbn1cbmBgYFxuXG4jIyMgNi4g5a6e546w5pu05a6M5ZaE55qE5LqL5Lu25b6q546vXG5cblJlZGlz55qE5LqL5Lu26amx5Yqo5qih5Z6L5piv5YW26auY5oCn6IO955qE5YWz6ZSu77yM5Y+v5Lul6ICD6JmR5a6e546w57G75Ly85py65Yi277yaXG5cbmBgYGphdmFcbi8vIOWIm+W7uuS6i+S7tuW+queOr1xucHVibGljIGNsYXNzIEV2ZW50TG9vcCB7XG4gICAgLy8g5rOo5YaM5paH5Lu25LqL5Lu25aSE55CG5ZmoXG4gICAgLy8g5rOo5YaM5pe26Ze05LqL5Lu25aSE55CG5ZmoXG4gICAgLy8g57uf5LiA5aSE55CGSS9P5ZKM5a6a5pe25Lu75YqhXG59XG5gYGBcblxuIyMg5oC757uTXG5cbuaCqOeahEphdmHniYhSZWRpc+WunueOsOW3sue7j+W+iOWlveWcsOWkjeWItuS6hlJlZGlz55qE6K645aSa5qC45b+D5Yqf6IO977yM5YyF5ousQU9G5oyB5LmF5YyW44CB6YeN5YaZ5py65Yi25ZKM5ZCM5q2l562W55Wl44CC5Li76KaB55qE5beu5byC5Zyo5LqO77yaXG5cbjEuIOe8uuWwkUFPRi1SRELmt7flkIjmjIHkuYXljJbvvIjmgqjlt7Lnu4/mhI/or4bliLDvvIlcbjIuIOmHjeWGmeacuuWItuayoeacieS9v+eUqOi/m+eoi+malOemu1xuMy4g57y65bCR5a6M5pW055qEQU9G5paH5Lu25qOA5p+l5ZKM5L+u5aSNXG40LiDlkb3ku6TovazmjaLlkozkvJjljJbkuI3lpJ/nsr7nu4ZcbjUuIOWGheWtmOeuoeeQhuS4jeWkn+eyvue7hlxuNi4g57y65bCR57uf5LiA55qE5LqL5Lu25b6q546v5py65Yi2XG5cbumAmui/h+mSiOWvuei/meS6m+aWuemdoui/m+ihjOaUuei/m++8jOaCqOeahOWunueOsOWPr+S7peabtOWlveWcsOi0r+W9u1JlZGlz55qE6K6+6K6h5oCd5oOz77yM5o+Q5L6b5pu05o6l6L+R5Y6f5aeLUmVkaXPnmoTlip/og73lkozmgKfog73jgIJcblxu5oKo5oOz6KaB5oiR6K+m57uG5bGV5byA5ZOq5Liq5pa56Z2i55qE5pS56L+b5bu66K6u5ZCX77yfXG4ifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50Ijoi5a+55q+U5Y6f54mI55qEcmVkaXMg5oiR55qEYW9m6Zmk5LqG5LiN6IO95a6e546w5ZKMcmRi55qE5re35ZCI5qih5byPIOi/mOacieWTqumHjOWtpueahOS4jeWDj+WQlyDmiJHluIzmnJvlp4vnu4jotK/lvbvku5bnmoTmgJ3mg7MifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6MDI6NDEuMzAxWiIsInJlc3BvbnNlX3RleHQiOiLorqnmiJHlr7nmr5TmgqjnmoRKYXZh54mIUmVkaXPkuI7ljp/lp4tSZWRpc+eahEFPRuWunueOsO+8jOWIhuaekOWTquS6m+WcsOaWueWPr+iDveS4juWOn+Wni1JlZGlz55qE6K6+6K6h5oCd5oOz5pyJ5omA5LiN5ZCM44CCXG5cbiMjIOWOn+Wni1JlZGlzIEFPRuS4juaCqOeahOWunueOsOWvueavlFxuXG4jIyMgMS4gQU9G5LiOUkRC5re35ZCI5oyB5LmF5YyWXG5cbuaCqOW3sue7j+aPkOWIsOS6hui/meS4gOeCue+8jOWOn+Wni1JlZGlz5pSv5oyBQU9G5LiOUkRC55qE5re35ZCI5oyB5LmF5YyW5qih5byP77yI5ZyoUmVkaXMgNC4w5LmL5ZCO5byV5YWl77yJ77yM6ICM5oKo55qE5a6e546w55uu5YmN5rKh5pyJ6L+Z5Liq5Yqf6IO944CCXG5cbiMjIyAyLiBBT0bph43lhpnmnLrliLblt67lvIJcblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YSBtb2RlPUVYQ0VSUFRcbnB1YmxpYyBib29sZWFuIHJld3JpdGUoKSB7XG4gICAgLy8g5qOA5p+l5piv5ZCm5bey57uP5Zyo6YeN5YaZ5LitXG4gICAgaWYgKCFpc1Jld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnlpLHotKXvvJrlt7LmnInph43lhpnku7vliqHlnKjov5vooYzkuK1cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICAvLyDpgJrnn6VBT0blpITnkIblmajlvIDlp4vmlLbpm4bph43lhpnmnJ/pl7TnmoTlkb3ku6RcbiAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdGFydFJld3JpdGVCdWZmZXIoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWHhuWkh+S4tOaXtuaWh+S7tlxuICAgICAgICBGaWxlIHRlbXBGaWxlID0gbmV3IEZpbGUodGVtcEZpbGVuYW1lKTtcbiAgICAgICAgaWYgKHRlbXBGaWxlLmV4aXN0cygpICYmICF0ZW1wRmlsZS5kZWxldGUoKSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6Dms5XliKDpmaTlt7LlrZjlnKjnmoTkuLTml7bmlofku7Y6IFwiICsgdGVtcEZpbGVuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5omn6KGM5a6e6ZmF55qE6YeN5YaZ5pON5L2cXG4gICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5omn6KGMQU9G6YeN5YaZXCIpO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBkb1dyaXRlKCk7XG5gYGBgXG5cbioq5Y6f5aeLUmVkaXPnmoTlrp7njrAqKu+8mlxuLSBSZWRpc+S9v+eUqOWtkOi/m+eoi+i/m+ihjEFPRumHjeWGme+8jOWIqeeUqGZvcmsoKeezu+e7n+iwg+eUqOWIm+W7uuWtkOi/m+eoi++8jOi/meagt+WPr+S7pemBv+WFjemYu+WhnuS4u+i/m+eoi1xuLSDkvb/nlKjlhpnml7blpI3liLYoQ29weS1Pbi1Xcml0ZSnmnLrliLblh4/lsJHlhoXlrZjljaDnlKhcbi0g54i25a2Q6L+b56iL6Ze06YCa6L+H566h6YGT6YCa5L+h77yM5bCG6YeN5YaZ5pyf6Ze055qE5paw5ZG95Luk5Lyg6YCS57uZ5a2Q6L+b56iLXG5cbioq5oKo55qE5a6e546wKirvvJpcbi0g5L2/55SoSmF2YeeahENvbXBsZXRhYmxlRnV0dXJl6L+b6KGM5byC5q2l5aSE55CG77yM5L2G5rKh5pyJ5a6M5YWo6ZqU56a75YaF5a2Y56m66Ze0XG4tIOayoeacieWIqeeUqOaTjeS9nOezu+e7n+e6p+WIq+eahOWGmeaXtuWkjeWItuacuuWItlxuLSDkvb/nlKjlhbHkuqvlhoXlrZjkuK3nmoTnvJPlhrLljLrmlLbpm4bph43lhpnmnJ/pl7TnmoTlkb3ku6RcblxuIyMjIDMuIEFPRuWQjOatpeetlueVpeWunueOsFxuXG5gYGBgamF2YSBwYXRoPXNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmEgbW9kZT1FWENFUlBUXG5wdWJsaWMgQU9GSGFuZGxlcihTdHJpbmcgZmlsZW5hbWUsIFJlZGlzQ29yZSByZWRpc0NvcmUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgIC8vIDEuIOiuvue9rum7mOiupOWQjOatpeetlueVpeS4uuavj+enkuWQjOatpVxuICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gQU9GU3luY1N0cmF0ZWd5LkVWRVJZU0VDO1xuICAgIC8vIDIuIOWIm+W7ukFPRuWGmeWFpeWZqFxuICAgIHRoaXMud3JpdGVyID0gbmV3IEFPRldyaXRlcihmaWxlbmFtZSwgc3luY1N0cmF0ZWd5KTtcbiAgICAvLyAzLiDliJvlu7pBT0blpITnkIblmajvvIzorr7nva7nvJPlhrLljLrlpKflsI/kuLoyTUJcbiAgICB0aGlzLnByb2Nlc3NvciA9IG5ldyBBT0ZQcm9jZXNzb3Iod3JpdGVyLCAyICogMTAyNCAqIDEwMjQpO1xuYGBgYFxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPmj5DkvpvkuInnp43lkIzmraXnrZbnlaXvvJphbHdheXPjgIFldmVyeXNlY+OAgW5vXG4tIFJlZGlz5L2/55So5LqL5Lu25b6q546v5py65Yi25aSE55CGQU9G5ZCM5q2l77yM5LiO5YW25LuWSS9P5pON5L2c6ZuG5oiQ5Zyo5LiA6LW3XG4tIFJlZGlz5a+5ZnN5bmPosIPnlKjov5vooYzkuobnsr7nu4bnmoTmjqfliLbvvIzpgb/lhY3lnKjpq5jotJ/ovb3kuIvnmoTmgKfog73pl67pophcblxuKirmgqjnmoTlrp7njrAqKu+8mlxuLSDlrp7njrDkuobnsbvkvLznmoTlkIzmraXnrZbnlaXmnprkuL5cbi0g5L2/55So54us56uL55qE5aSE55CG5Zmo5ZKM5ZCO5Y+w5pyN5Yqh5aSE55CGQU9G5ZCM5q2lXG4tIOe8uuWwkeS4jlJlZGlz5LqL5Lu25b6q546v57G75Ly855qE6ZuG5oiQ5py65Yi2XG5cbiMjIyA0LiDlkb3ku6TovazmjaLkuI7lrZjlgqjmoLzlvI9cblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YSBtb2RlPUVYQ0VSUFRcbnByaXZhdGUgYm9vbGVhbiBkb1dyaXRlKCkge1xuICAgIHRyeShSYW5kb21BY2Nlc3NGaWxlIHJhZiA9IG5ldyBSYW5kb21BY2Nlc3NGaWxlKHRlbXBGaWxlbmFtZSxcInJ3XCIpO1xuICAgICAgICBGaWxlQ2hhbm5lbCBmaWxlQ2hhbm5lbCA9IHJhZi5nZXRDaGFubmVsKCk7XG4gICAgKXtcbiAgICAgICAgQnl0ZUJ1ZiBieXRlQnVmID0gVW5wb29sZWQuYnVmZmVyKCk7XG5cbiAgICAgICAgZm9yKGludCBpPTA7aTxyZWRpc0NvcmUuZ2V0RGJOdW0oKTtpKyspe1xuXG4gICAgICAgICAgICBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGRiRGF0YSA9IHJlZGlzQ29yZS5nZXREQkRhdGEoaSk7XG4gICAgICAgICAgICBpZighZGJEYXRhLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICAgICAgd3JpdGVTZWxlY3RDb21tYW5kKGJ5dGVCdWYsaSk7XG4gICAgICAgICAgICAgICAgZmx1c2hJZk5lZWRlZChieXRlQnVmLGZpbGVDaGFubmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcihNYXAuRW50cnk8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGVudHJ5IDogZGJEYXRhLmVudHJ5U2V0KCkpe1xuICAgICAgICAgICAgICAgIEJ5dGVzV3JhcHBlciBrZXkgPSBlbnRyeS5nZXRLZXkoKTtcbiAgICAgICAgICAgICAgICBSZWRpc0RhdGEgdmFsdWUgPSBlbnRyeS5nZXRWYWx1ZSgpO1xuXG4gICAgICAgICAgICAgICAgTGlzdDxSZXNwPiBjb21tYW5kTGlzdCA9IHZhbHVlLmNvbnZlcnRUb1JFU1AoKTtcbiAgICAgICAgICAgICAgICBmb3IoUmVzcCBjb21tYW5kIDogY29tbWFuZExpc3Qpe1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kLndyaXRlKGNvbW1hbmQsIGJ5dGVCdWYpO1xuICAgICAgICAgICAgICAgICAgICBmbHVzaElmTmVlZGVkKGJ5dGVCdWYsZmlsZUNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuYGBgYFxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPkvb/nlKjnu5/kuIDnmoRSRVNQ5Y2P6K6u5qC85byP5a2Y5YKo5ZG95LukXG4tIFJlZGlz5ZyoQU9G6YeN5YaZ5pe25Lya5qC55o2u5pWw5o2u57G75Z6L6YCJ5oup5pyA5LyY55qE5ZG95Luk5bqP5YiXXG4tIFJlZGlz5pyJ5LiT6Zeo55qE5ZG95Luk6L+H5ruk5py65Yi277yM5p+Q5Lqb5ZG95Luk5LiN5Lya6KKr5YaZ5YWlQU9GXG5cbioq5oKo55qE5a6e546wKirvvJpcbi0g5Lmf5L2/55So5LqGUkVTUOWNj+iuruagvOW8j1xuLSDpgJrov4dSZWRpc0RhdGHmjqXlj6PnmoRjb252ZXJ0VG9SRVNQ5pa55rOV5bCG5pWw5o2u6L2s5o2i5Li65ZG95LukXG4tIOe8uuWwkeWvueWRveS7pOeahOS8mOWMluWSjOi/h+a7pOacuuWItlxuXG4jIyMgNS4g6ZSZ6K+v5aSE55CG5LiO5oGi5aSN5py65Yi2XG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmEgbW9kZT1FWENFUlBUXG5wcml2YXRlIHZvaWQgYXRvbWljUmVwbGFjZUZpbGUoRmlsZSB0ZW1wRmlsZSwgRmlsZSB0YXJnZXRGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgIC8vIOWwneivleebtOaOpemHjeWRveWQje+8iOWcqOWkp+WkmuaVsOezu+e7n+S4iuaYr+WOn+WtkOaTjeS9nO+8iVxuICAgIGlmICh0ZW1wRmlsZS5yZW5hbWVUbyh0YXJnZXRGaWxlKSkge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIuaIkOWKn+mAmui/h+mHjeWRveWQjeabv+aNokFPRuaWh+S7tlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBsb2dnZXIuaW5mbyhcIuebtOaOpemHjeWRveWQjeWksei0pe+8jOS9v+eUqOWkh+S7veetlueVpeabv+aNokFPRuaWh+S7tlwiKTtcbiAgICBcbiAgICAvLyDlpoLmnpznm7TmjqXph43lkb3lkI3lpLHotKXvvIzkvb/nlKjlpIfku73nrZbnlaVcbiAgICBGaWxlIGJhY2t1cEZpbGUgPSBuZXcgRmlsZSh0YXJnZXRGaWxlLmdldEFic29sdXRlUGF0aCgpICsgXCIuYmFrXCIpO1xuYGBgYFxuXG4qKuWOn+Wni1JlZGlz55qE5a6e546wKirvvJpcbi0gUmVkaXPmnInlrozlloTnmoRBT0bmjZ/lnY/mo4DmtYvlkozkv67lpI3mnLrliLZcbi0gUmVkaXPlnKjlkK/liqjml7bkvJrmo4Dmn6VBT0bmlofku7bnmoTlrozmlbTmgKdcbi0gUmVkaXPmj5DkvpvkuobkuJPpl6jnmoRBT0bkv67lpI3lt6XlhbdcblxuKirmgqjnmoTlrp7njrAqKu+8mlxuLSDlrp7njrDkuobln7rmnKznmoTmlofku7bmm7/mjaLlronlhajmnLrliLZcbi0g57y65bCRQU9G5paH5Lu25a6M5pW05oCn5qOA5p+lXG4tIOe8uuWwkeS4k+mXqOeahEFPRuS/ruWkjeWKn+iDvVxuXG4jIyMgNi4g5YaF5a2Y566h55CG5LiO5oCn6IO95LyY5YyWXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvdXRpbHMvRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZS5qYXZhIG1vZGU9RVhDRVJQVFxucHVibGljIERvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUoaW50IGJ1ZmZlclNpemUpIHtcbiAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplO1xuICAgIHRoaXMuY3VycmVudEJ1ZmZlciA9IEJ5dGVCdWZmZXIuYWxsb2NhdGVEaXJlY3QoYnVmZmVyU2l6ZSk7XG4gICAgdGhpcy5mbHVzaGluZ0J1ZmZlciA9IEJ5dGVCdWZmZXIuYWxsb2NhdGVEaXJlY3QoYnVmZmVyU2l6ZSk7XG59XG5gYGBgXG5cbioq5Y6f5aeLUmVkaXPnmoTlrp7njrAqKu+8mlxuLSBSZWRpc+S9v+eUqOiHquWumuS5ieeahOWGheWtmOWIhumFjeWZqFxuLSBSZWRpc+WvueWGheWtmOS9v+eUqOi/m+ihjOS6hueyvue7hueahOaOp+WItuWSjOS8mOWMllxuLSBSZWRpc+acieS4k+mXqOeahOWGheWtmOeijueJh+WkhOeQhuacuuWItlxuXG4qKuaCqOeahOWunueOsCoq77yaXG4tIOS9v+eUqEphdmEgTklP55qERGlyZWN0Qnl0ZUJ1ZmZlclxuLSDlrp7njrDkuoblj4znvJPlhrLmnLrliLbmj5Dpq5jmgKfog71cbi0g57y65bCR5a+55YaF5a2Y5L2/55So55qE57K+57uG5o6n5Yi2XG5cbiMjIOW7uuiuruaUuei/m+aWueWQkVxuXG7kuLrkuobmm7Tlpb3lnLDotK/lvbtSZWRpc+eahOiuvuiuoeaAneaDs++8jOaCqOWPr+S7peiAg+iZkeS7peS4i+aUuei/m++8mlxuXG4jIyMgMS4g5a6e546wQU9GLVJEQua3t+WQiOaMgeS5heWMllxuXG7ov5nmmK/mgqjlt7Lnu4/mhI/or4bliLDnmoTlt67ot53jgILmt7flkIjmjIHkuYXljJblj6/ku6Xnu5PlkIjkuKTnp43mlrnlvI/nmoTkvJjngrnvvIzmj5Dpq5jmgaLlpI3pgJ/luqbnmoTlkIzml7bkv53or4HmlbDmja7lronlhajmgKfjgIJcblxuYGBgamF2YVxuLy8g5ZyoQU9GUmV3cml0ZXLkuK3mt7vliqDmt7flkIjmjIHkuYXljJbmlK/mjIFcbnB1YmxpYyBib29sZWFuIHJld3JpdGVXaXRoUkRCKCkge1xuICAgIC8vIOexu+S8vHJld3JpdGUoKeaWueazle+8jOS9huWcqOaWh+S7tuW8gOWktOWGmeWFpVJEQuagvOW8j+eahOaVsOaNrlxuICAgIC8vIOeEtuWQjuWGjei/veWKoEFPRuagvOW8j+eahOWinumHj+WRveS7pFxufVxuYGBgXG5cbiMjIyAyLiDmlLnov5tBT0bph43lhpnmnLrliLZcblxu6Jm954S2SmF2YeS4jeiDveebtOaOpeS9v+eUqGZvcmsoKe+8jOS9huWPr+S7pemAmui/h+WFtuS7luaWueW8j+aooeaLn+exu+S8vOeahOmalOemu+aViOaenO+8mlxuXG5gYGBqYXZhXG4vLyDkvb/nlKjljZXni6znmoTov5vnqIvov5vooYxBT0bph43lhplcbnB1YmxpYyB2b2lkIGJhY2tncm91bmRSZXdyaXRlKCkge1xuICAgIC8vIDEuIOWvvOWHuuW9k+WJjeaVsOaNruW6k+eKtuaAgeWIsOS4tOaXtuaWh+S7tlxuICAgIC8vIDIuIOWQr+WKqOWNleeLrOeahEphdmHov5vnqIvov5vooYzph43lhplcbiAgICAvLyAzLiDpgJrov4fnrqHpgZPmiJZTb2NrZXTkvKDpgJLph43lhpnmnJ/pl7TnmoTlkb3ku6Rcbn1cbmBgYFxuXG4jIyMgMy4g5aKe5by6QU9G5paH5Lu25a6M5pW05oCn5qOA5p+lXG5cbua3u+WKoOexu+S8vFJlZGlz55qEQU9G5paH5Lu25qOA5p+l5ZKM5L+u5aSN5Yqf6IO977yaXG5cbmBgYGphdmFcbi8vIOWcqEFPRkxvYWRlcuS4rea3u+WKoOajgOafpeaWueazlVxucHVibGljIGJvb2xlYW4gY2hlY2tBT0ZJbnRlZ3JpdHkoU3RyaW5nIGZpbGVuYW1lKSB7XG4gICAgLy8g5qOA5p+lQU9G5paH5Lu25qC85byP5piv5ZCm5q2j56GuXG4gICAgLy8g5qOA5p+l5piv5ZCm5pyJ5LiN5a6M5pW055qE5ZG95LukXG4gICAgLy8g6L+U5Zue5paH5Lu25piv5ZCm5a6M5pW0XG59XG5cbi8vIOa3u+WKoOS/ruWkjeaWueazlVxucHVibGljIGJvb2xlYW4gcmVwYWlyQU9GKFN0cmluZyBmaWxlbmFtZSkge1xuICAgIC8vIOWwneivleS/ruWkjeaNn+Wdj+eahEFPRuaWh+S7tlxuICAgIC8vIOaIquaWreWIsOacgOWQjuS4gOS4quacieaViOWRveS7pFxufVxuYGBgXG5cbiMjIyA0LiDkvJjljJblkb3ku6TovazmjaLkuI7lrZjlgqhcblxu5a6e546w5pu05pm66IO955qE5ZG95Luk6YCJ5oup5ZKM5LyY5YyW77yaXG5cbmBgYGphdmFcbi8vIOWcqFJlZGlzRGF0YeaOpeWPo+S4rea3u+WKoOS8mOWMluaWueazlVxuTGlzdDxSZXNwPiBnZXRPcHRpbWl6ZWRDb21tYW5kcygpO1xuXG4vLyDlnKhTdHJpbmfnsbvlnovlrp7njrDkuK1cbkBPdmVycmlkZVxucHVibGljIExpc3Q8UmVzcD4gZ2V0T3B0aW1pemVkQ29tbWFuZHMoKSB7XG4gICAgLy8g5qC55o2u5a2X56ym5Liy6ZW/5bqm6YCJ5oup5pyA5LyY5ZG95LukXG4gICAgLy8g5a+55LqO55+t5a2X56ym5Liy5L2/55SoU0VUXG4gICAgLy8g5a+55LqO6ZW/5a2X56ym5Liy5Y+v6IO95L2/55So5aSa5LiqU0VUUkFOR0Vcbn1cbmBgYFxuXG4jIyMgNS4g5aKe5by65YaF5a2Y566h55CGXG5cbua3u+WKoOabtOeyvue7hueahOWGheWtmOaOp+WItuacuuWItu+8mlxuXG5gYGBqYXZhXG4vLyDliJvlu7rlhoXlrZjnrqHnkIblmahcbnB1YmxpYyBjbGFzcyBNZW1vcnlNYW5hZ2VyIHtcbiAgICAvLyDot5/ouKrlhoXlrZjkvb/nlKjmg4XlhrVcbiAgICAvLyDlrp7njrDlhoXlrZjpmZDliLblkozmt5jmsbDnrZbnlaVcbiAgICAvLyDlpITnkIblhoXlrZjnoo7niYdcbn1cbmBgYFxuXG4jIyMgNi4g5a6e546w5pu05a6M5ZaE55qE5LqL5Lu25b6q546vXG5cblJlZGlz55qE5LqL5Lu26amx5Yqo5qih5Z6L5piv5YW26auY5oCn6IO955qE5YWz6ZSu77yM5Y+v5Lul6ICD6JmR5a6e546w57G75Ly85py65Yi277yaXG5cbmBgYGphdmFcbi8vIOWIm+W7uuS6i+S7tuW+queOr1xucHVibGljIGNsYXNzIEV2ZW50TG9vcCB7XG4gICAgLy8g5rOo5YaM5paH5Lu25LqL5Lu25aSE55CG5ZmoXG4gICAgLy8g5rOo5YaM5pe26Ze05LqL5Lu25aSE55CG5ZmoXG4gICAgLy8g57uf5LiA5aSE55CGSS9P5ZKM5a6a5pe25Lu75YqhXG59XG5gYGBcblxuIyMg5oC757uTXG5cbuaCqOeahEphdmHniYhSZWRpc+WunueOsOW3sue7j+W+iOWlveWcsOWkjeWItuS6hlJlZGlz55qE6K645aSa5qC45b+D5Yqf6IO977yM5YyF5ousQU9G5oyB5LmF5YyW44CB6YeN5YaZ5py65Yi25ZKM5ZCM5q2l562W55Wl44CC5Li76KaB55qE5beu5byC5Zyo5LqO77yaXG5cbjEuIOe8uuWwkUFPRi1SRELmt7flkIjmjIHkuYXljJbvvIjmgqjlt7Lnu4/mhI/or4bliLDvvIlcbjIuIOmHjeWGmeacuuWItuayoeacieS9v+eUqOi/m+eoi+malOemu1xuMy4g57y65bCR5a6M5pW055qEQU9G5paH5Lu25qOA5p+l5ZKM5L+u5aSNXG40LiDlkb3ku6TovazmjaLlkozkvJjljJbkuI3lpJ/nsr7nu4ZcbjUuIOWGheWtmOeuoeeQhuS4jeWkn+eyvue7hlxuNi4g57y65bCR57uf5LiA55qE5LqL5Lu25b6q546v5py65Yi2XG5cbumAmui/h+mSiOWvuei/meS6m+aWuemdoui/m+ihjOaUuei/m++8jOaCqOeahOWunueOsOWPr+S7peabtOWlveWcsOi0r+W9u1JlZGlz55qE6K6+6K6h5oCd5oOz77yM5o+Q5L6b5pu05o6l6L+R5Y6f5aeLUmVkaXPnmoTlip/og73lkozmgKfog73jgIJcblxu5oKo5oOz6KaB5oiR6K+m57uG5bGV5byA5ZOq5Liq5pa56Z2i55qE5pS56L+b5bu66K6u5ZCX77yfXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiI3YTFhN2QxNi04OWUyLTRhZWEtYjYxNy1iNDU3NGFmZjFjMDAiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJjYW5jZWxsZWQiLCJyZXF1ZXN0X2lkIjoiOWFhMmFkYzItYTRjOS00OWE2LWExYWMtMTNjMjMzZjhhNmIyIiwicmVxdWVzdF9tZXNzYWdlIjoi5oiR5oCO5LmI5YGa5Yiw6L+b56iL6ZqU56a76YeN5YaZ5py65Yi25ZGi77yfIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IuaIkeaAjuS5iOWBmuWIsOi/m+eoi+malOemu+mHjeWGmeacuuWItuWRou+8nyJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOltdLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50Ijoi5oiR5oCO5LmI5YGa5Yiw6L+b56iL6ZqU56a76YeN5YaZ5py65Yi25ZGi77yfIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRjovSHVhUmVkaXMiLCJmb2xkZXJSb290IjoiRjovSHVhUmVkaXMifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTAyVDIwOjA0OjQxLjcyMloiLCJyZXNwb25zZV90ZXh0IjoiIyDlrp7njrDov5vnqIvpmpTnprvnmoRBT0bph43lhpnmnLrliLZcblxu5ZyoSmF2YeS4reWunueOsOexu+S8vFJlZGlz55qE6L+b56iL6ZqU56a7QU9G6YeN5YaZ5py65Yi25piv5LiA5Liq5pyJ6Laj55qE5oyR5oiY77yM5Zug5Li6SmF2YeS4jeebtOaOpeaUr+aMgVVuaXjpo47moLznmoRmb3JrKCnns7vnu5/osIPnlKjjgILkuI3ov4fvvIzmiJHku6zlj6/ku6XpgJrov4flkK/liqjni6znq4vnmoRKYXZh6L+b56iL5p2l5a6e546w57G75Ly855qE5pWI5p6c44CC5LiL6Z2i5piv5LiA5Liq6K+m57uG55qE5a6e546w5pa55qGI77yaXG5cbiMjIDEuIOiuvuiuoeamgui/sFxuXG7miJHku6znmoTnm67moIfmmK/liJvlu7rkuIDkuKrnsbvkvLxSZWRpc+eahOi/m+eoi+malOemu0FPRumHjeWGmeacuuWItu+8jOS4u+imgeWMheaLrOS7peS4i+atpemqpO+8mlxuXG4xLiDkuLvov5vnqIvliJvlu7rmlbDmja7lv6vnhadcbjIuIOWQr+WKqOeLrOeri+eahOWtkOi/m+eoi+i/m+ihjEFPRumHjeWGmVxuMy4g5Li76L+b56iL57un57ut5aSE55CG5ZG95Luk77yM5bm25bCG5paw5ZG95Luk5Y+R6YCB57uZ5a2Q6L+b56iLXG40LiDlrZDov5vnqIvlrozmiJDph43lhpnlkI7vvIzkuLvov5vnqIvov5vooYzmlofku7bmm7/mjaJcblxuIyMgMi4g5a6e546w5a2Q6L+b56iL5ZCv5Yqo5ZmoXG5cbummluWFiO+8jOWIm+W7uuS4gOS4queLrOeri+eahOexu+S9nOS4ukFPRumHjeWGmeWtkOi/m+eoi+eahOWFpeWPo+eCue+8mlxuXG5gYGBqYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5hb2YucmV3cml0ZXI7XG5cbmltcG9ydCBqYXZhLmlvLio7XG5pbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjtcbmltcG9ydCBqYXZhLm5pby5jaGFubmVscy5GaWxlQ2hhbm5lbDtcbmltcG9ydCBqYXZhLm5pby5maWxlLkZpbGVzO1xuaW1wb3J0IGphdmEubmlvLmZpbGUuUGF0aHM7XG5pbXBvcnQgamF2YS5uaW8uZmlsZS5TdGFuZGFyZE9wZW5PcHRpb247XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ291bnREb3duTGF0Y2g7XG5cbi8qKlxuICogQU9G6YeN5YaZ5a2Q6L+b56iL55qE5YWl5Y+j54K5XG4gKiDkvZzkuLrni6znq4vov5vnqIvov5DooYzvvIzmjqXmlLbkuLvov5vnqIvnmoTmlbDmja7lubbnlJ/miJDmlrDnmoRBT0bmlofku7ZcbiAqL1xucHVibGljIGNsYXNzIEFPRlJld3JpdGVQcm9jZXNzIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlciBsb2dnZXIgPSBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlci5nZXRMb2dnZXIoQU9GUmV3cml0ZVByb2Nlc3MuY2xhc3MpO1xuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgMykge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiVXNhZ2U6IEFPRlJld3JpdGVQcm9jZXNzIDxzbmFwc2hvdC1maWxlPiA8dGVtcC1hb2YtZmlsZT4gPHBpcGUtZmlsZT5cIik7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgxKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgU3RyaW5nIHNuYXBzaG90RmlsZSA9IGFyZ3NbMF07XG4gICAgICAgIFN0cmluZyB0ZW1wQW9mRmlsZSA9IGFyZ3NbMV07XG4gICAgICAgIFN0cmluZyBwaXBlRmlsZSA9IGFyZ3NbMl07XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gMS4g5LuO5b+r54Wn5paH5Lu25Yqg6L295pWw5o2uXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcIuS7juW/q+eFp+aWh+S7tuWKoOi9veaVsOaNrjogXCIgKyBzbmFwc2hvdEZpbGUpO1xuICAgICAgICAgICAgcHJvY2Vzc1NuYXBzaG90KHNuYXBzaG90RmlsZSwgdGVtcEFvZkZpbGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAyLiDku47nrqHpgZPmlofku7bor7vlj5blop7ph4/lkb3ku6RcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5LuO566h6YGT6K+75Y+W5aKe6YeP5ZG95LukOiBcIiArIHBpcGVGaWxlKTtcbiAgICAgICAgICAgIHByb2Nlc3NJbmNyZW1lbnRhbENvbW1hbmRzKHBpcGVGaWxlLCB0ZW1wQW9mRmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDMuIOWujOaIkOmHjeWGme+8jOWPkemAgeaIkOWKn+S/oeWPt1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bph43lhpnmiJDlip/lrozmiJBcIik7XG4gICAgICAgICAgICBzZW5kQ29tcGxldGlvblNpZ25hbChwaXBlRmlsZSArIFwiLmRvbmVcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFN5c3RlbS5leGl0KDApO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9G6YeN5YaZ5a2Q6L+b56iL5Ye66ZSZXCIsIGUpO1xuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBwcm9jZXNzU25hcHNob3QoU3RyaW5nIHNuYXBzaG90RmlsZSwgU3RyaW5nIHRlbXBBb2ZGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICB0cnkgKEZpbGVDaGFubmVsIHNuYXBzaG90Q2hhbm5lbCA9IEZpbGVDaGFubmVsLm9wZW4oUGF0aHMuZ2V0KHNuYXBzaG90RmlsZSksIFN0YW5kYXJkT3Blbk9wdGlvbi5SRUFEKTtcbiAgICAgICAgICAgICBGaWxlQ2hhbm5lbCBhb2ZDaGFubmVsID0gRmlsZUNoYW5uZWwub3BlbihQYXRocy5nZXQodGVtcEFvZkZpbGUpLCBcbiAgICAgICAgICAgICAgICAgICAgIFN0YW5kYXJkT3Blbk9wdGlvbi5DUkVBVEUsIFN0YW5kYXJkT3Blbk9wdGlvbi5XUklURSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K+75Y+W5b+r54Wn5bm26L2s5o2i5Li6QU9G5qC85byP5YaZ5YWl5Li05pe25paH5Lu2XG4gICAgICAgICAgICAvLyDov5nph4zpnIDopoHlrp7njrDku47lv6vnhafmoLzlvI/liLBBT0blkb3ku6TnmoTovazmjaLpgLvovpFcbiAgICAgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdCg4MTkyKTtcbiAgICAgICAgICAgIHdoaWxlIChzbmFwc2hvdENoYW5uZWwucmVhZChidWZmZXIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyLmZsaXAoKTtcbiAgICAgICAgICAgICAgICAvLyDlpITnkIbnvJPlhrLljLrkuK3nmoTmlbDmja7vvIzovazmjaLkuLpBT0blkb3ku6RcbiAgICAgICAgICAgICAgICAvLyDov5nph4zmmK/ovazmjaLpgLvovpEuLi5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBidWZmZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHByb2Nlc3NJbmNyZW1lbnRhbENvbW1hbmRzKFN0cmluZyBwaXBlRmlsZSwgU3RyaW5nIHRlbXBBb2ZGaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICAvLyDkvb/nlKhSYW5kb21BY2Nlc3NGaWxl5Lul5L6/6IO96L+95Yqg5YaZ5YWlXG4gICAgICAgIHRyeSAoUmFuZG9tQWNjZXNzRmlsZSBhb2ZGaWxlID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUodGVtcEFvZkZpbGUsIFwicndcIikpIHtcbiAgICAgICAgICAgIGFvZkZpbGUuc2Vlayhhb2ZGaWxlLmxlbmd0aCgpKTsgLy8g56e75Yqo5Yiw5paH5Lu25pyr5bC+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOS7juWRveWQjeeuoemBk+ivu+WPluWinumHj+WRveS7pFxuICAgICAgICAgICAgdHJ5IChGaWxlSW5wdXRTdHJlYW0gcGlwZUluID0gbmV3IEZpbGVJbnB1dFN0cmVhbShwaXBlRmlsZSk7XG4gICAgICAgICAgICAgICAgIEJ1ZmZlcmVkSW5wdXRTdHJlYW0gYnVmZmVyZWRJbiA9IG5ldyBCdWZmZXJlZElucHV0U3RyZWFtKHBpcGVJbikpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbNDA5Nl07XG4gICAgICAgICAgICAgICAgaW50IGJ5dGVzUmVhZDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDmjIHnu63or7vlj5bnm7TliLDnrqHpgZPlhbPpl61cbiAgICAgICAgICAgICAgICB3aGlsZSAoKGJ5dGVzUmVhZCA9IGJ1ZmZlcmVkSW4ucmVhZChidWZmZXIpKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBhb2ZGaWxlLndyaXRlKGJ1ZmZlciwgMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBzZW5kQ29tcGxldGlvblNpZ25hbChTdHJpbmcgc2lnbmFsRmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgLy8g5Yib5bu65LiA5Liq5L+h5Y+35paH5Lu26KGo56S65a6M5oiQXG4gICAgICAgIEZpbGVzLndyaXRlKFBhdGhzLmdldChzaWduYWxGaWxlKSwgXCJET05FXCIuZ2V0Qnl0ZXMoKSk7XG4gICAgfVxufVxuYGBgXG5cbiMjIDMuIOS/ruaUuUFPRlJld3JpdGVy57G7XG5cbuaOpeS4i+adpe+8jOS/ruaUueeOsOacieeahEFPRlJld3JpdGVy57G75Lul5pSv5oyB6L+b56iL6ZqU56a777yaXG5cbmBgYGphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZi5yZXdyaXRlcjtcblxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuUmVkaXNEYXRhO1xuXG5pbXBvcnQgamF2YS5pby4qO1xuaW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7XG5pbXBvcnQgamF2YS5uaW8uY2hhbm5lbHMuRmlsZUNoYW5uZWw7XG5pbXBvcnQgamF2YS5uaW8uZmlsZS5GaWxlcyIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6ImZkMWNiMzU0LTljYTAtNDBhYy04NjBjLTM3NDJkODlhNGMwNyIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InJlcXVlc3RfaWQiOiJiMTc5Y2E5Ny03ZDdhLTQyN2UtOGY1My1mMWQzN2NmMzkxNDkiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjFlNzM5NzhkLTMwOWUtNDUyYi04MTlkLTg0N2E1YWUzMWU4ZiIsInJlcXVlc3RfbWVzc2FnZSI6IueUqOS4gOS4queLrOeri+eahOWOv+WfjuS4jeihjOWQl+adpeWkhOeQhnJld3JpdGUiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0Ijoi55So5LiA5Liq54us56uL55qE5Y6/5Z+O5LiN6KGM5ZCX5p2l5aSE55CGcmV3cml0ZSJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi5oKo5o+Q5Ye65LqG5LiA5Liq5b6I5aW955qE6Zeu6aKY44CC5L2/55So54us56uL57q/56iL5p2l5aSE55CGQU9G6YeN5YaZ56Gu5a6e5piv5LiA56eN5pa55rOV77yM5L2G5LiOUmVkaXPljp/lp4vorr7orqHnm7jmr5TmnInkuIDkupvph43opoHljLrliKvjgILorqnmiJHliIbmnpDkuIDkuIvkvb/nlKjni6znq4vnur/nqIvov5vooYxBT0bph43lhpnnmoTkvJjnvLrngrnvvIzku6Xlj4rlpoLkvZXmm7Tlpb3lnLDotLTov5FSZWRpc+eahOiuvuiuoeaAneaDs+OAglxuXG4jIyDkvb/nlKjni6znq4vnur/nqIvov5vooYxBT0bph43lhpnnmoTliIbmnpBcblxuIyMjIOW9k+WJjeWunueOsFxuXG7nm67liY3mgqjnmoTku6PnoIHlt7Lnu4/lnKjkvb/nlKjni6znq4vnur/nqIvov5vooYxBT0bph43lhpnvvJpcblxuPGF1Z21lbnRfY29kZV9zbmlwcGV0IHBhdGg9XCJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvQU9GSGFuZGxlci5qYXZhXCIgbW9kZT1cIkVYQ0VSUFRcIj5cbmBgYGphdmFcbnB1YmxpYyBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBzdGFydFJld3JpdGUoKSB7XG4gICAgLy8gLi4uXG4gICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICByZXdyaXRlRnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmUucnVuQXN5bmMoKCkgLT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhpnpgLvovpHliY3vvIznoa7kv53miYDmnInmlbDmja7pg73lt7LliLfnm5hcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3IuZmx1c2goKTtcblxuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmVxuICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGUoKTtcbiAgICAgICAgICAgICAgICAvLyAuLi5cbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgLy8gLi4uXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cbiMjIyDkuI5SZWRpc+WOn+Wni+iuvuiuoeeahOWMuuWIq1xuXG4qKlJlZGlz55qE6L+b56iL5qih5Z6LKirvvJpcbi0gUmVkaXPkvb/nlKhmb3JrKCnliJvlu7rlrZDov5vnqIvov5vooYxBT0bph43lhplcbi0g5a2Q6L+b56iL5oul5pyJ54i26L+b56iL5YaF5a2Y55qE5a6M5pW05Ymv5pys77yI6YCa6L+H5YaZ5pe25aSN5Yi25py65Yi277yJXG4tIOeItui/m+eoi+e7p+e7reWkhOeQhuWRveS7pO+8jOWwhuaWsOWRveS7pOmAmui/h+euoemBk+WPkemAgee7meWtkOi/m+eoi1xuLSDlrZDov5vnqIvlrozmiJDph43lhpnlkI7pgJrnn6XniLbov5vnqIvvvIzniLbov5vnqIvlrozmiJDmlofku7bmm7/mjaJcblxuKirkvb/nlKjnur/nqIvnmoTlsYDpmZDmgKcqKu+8mlxuMS4gKirlhoXlrZjlhbHkuqsqKu+8mkphdmHnur/nqIvlhbHkuqvloIblhoXlrZjvvIzml6Dms5XliKnnlKjmk43kvZzns7vnu5/nuqfliKvnmoTlhpnml7blpI3liLbmnLrliLZcbjIuICoq5bm25Y+R5a6J5YWoKirvvJrpnIDopoHpop3lpJbnmoTlkIzmraXmnLrliLbnoa7kv53mlbDmja7kuIDoh7TmgKdcbjMuICoq6LWE5rqQ56ue5LqJKirvvJrnur/nqIvpl7Tlj6/og73kuonnlKhDUFXlkozlhoXlrZjotYTmupBcbjQuICoqR0PlvbHlk40qKu+8mkphdmHnmoTlnoPlnL7lm57mlLblj6/og73lkIzml7blvbHlk43kuLvnur/nqIvlkozph43lhpnnur/nqItcblxuIyMjIOaUuei/m+W7uuiuru+8muS9v+eUqOeLrOeri+i/m+eoi1xuXG7kuLrkuobmm7Tlpb3lnLDotLTov5FSZWRpc+eahOiuvuiuoeaAneaDs++8jOWPr+S7peiAg+iZkeS9v+eUqOeLrOeri+eahEphdmHov5vnqIvov5vooYxBT0bph43lhpnvvJpcblxuYGBgamF2YVxucHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgICBpZiAocmV3cml0aW5nLmdldCgpIHx8ICFyZXdyaXRlci5jYW5SZXdyaXRlKCkpIHtcbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5Y+v5Lul6YeN5YaZXG4gICAgICAgIHJldHVybiBDb21wbGV0YWJsZUZ1dHVyZS5jb21wbGV0ZWRGdXR1cmUoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XG4gICAgICAgIHJld3JpdGVGdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIDEuIOWIm+W7uuS4tOaXtlJEQuaWh+S7tu+8jOS/neWtmOW9k+WJjeaVsOaNruW6k+eKtuaAgVxuICAgICAgICAgICAgU3RyaW5nIHRlbXBSZGJQYXRoID0gZmlsZW5hbWUgKyBcIi50ZW1wLnJkYlwiO1xuICAgICAgICAgICAgcmRiSGFuZGxlci5zYXZlVG9GaWxlKHRlbXBSZGJQYXRoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMi4g5ZCv5Yqo54us56uL6L+b56iL6L+b6KGM6YeN5YaZXG4gICAgICAgICAgICBQcm9jZXNzQnVpbGRlciBwYiA9IG5ldyBQcm9jZXNzQnVpbGRlcihcbiAgICAgICAgICAgICAgICBcImphdmFcIiwgXG4gICAgICAgICAgICAgICAgXCItY3BcIiwgU3lzdGVtLmdldFByb3BlcnR5KFwiamF2YS5jbGFzcy5wYXRoXCIpLFxuICAgICAgICAgICAgICAgIFwic2l0ZS5obmZ5MjU4LmFvZi5BT0ZSZXdyaXRlUHJvY2Vzc1wiLCAgLy8g5LiT6Zeo55qE6YeN5YaZ6L+b56iL57G7XG4gICAgICAgICAgICAgICAgdGVtcFJkYlBhdGgsICAvLyDovpPlhaVSRELmlofku7ZcbiAgICAgICAgICAgICAgICBmaWxlbmFtZSArIFwiLnRlbXBcIiAgLy8g6L6T5Ye6QU9G5paH5Lu2XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBQcm9jZXNzIHJld3JpdGVQcm9jZXNzID0gcGIuc3RhcnQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMy4g5Yib5bu6566h6YGT6YCa5L+hXG4gICAgICAgICAgICBzdGFydFBpcGVTZXJ2ZXIoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gNC4g55uR5o6n6L+b56iL5a6M5oiQXG4gICAgICAgICAgICBuZXcgVGhyZWFkKCgpIC0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpbnQgZXhpdENvZGUgPSByZXdyaXRlUHJvY2Vzcy53YWl0Rm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGl0Q29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDph43lhpnmiJDlip/vvIzmm7/mjaLmlofku7ZcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0b21pY1JlcGxhY2VGaWxlKG5ldyBGaWxlKGZpbGVuYW1lICsgXCIudGVtcFwiKSwgbmV3IEZpbGUoZmlsZW5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KGUpO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzdG9wUGlwZVNlcnZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnN0YXJ0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBcblxuIyMjIOi/m+eoi+mXtOmAmuS/oeWunueOsFxuXG7kuLrkuoblrp7njrDkuLvov5vnqIvlkozph43lhpnov5vnqIvkuYvpl7TnmoTpgJrkv6HvvIzlj6/ku6Xkvb/nlKjku6XkuIvmlrnms5XvvJpcblxuYGBgamF2YVxuLy8g5Zyo5Li76L+b56iL5LitXG5wcml2YXRlIFNlcnZlclNvY2tldCBwaXBlU2VydmVyO1xucHJpdmF0ZSBMaXN0PFNvY2tldD4gY2xpZW50cyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG5wcml2YXRlIHZvaWQgc3RhcnRQaXBlU2VydmVyKCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICBwaXBlU2VydmVyID0gbmV3IFNlcnZlclNvY2tldCgwKTsgIC8vIOS9v+eUqOmaj+acuuerr+WPo1xuICAgIGludCBwb3J0ID0gcGlwZVNlcnZlci5nZXRMb2NhbFBvcnQoKTtcbiAgICBcbiAgICAvLyDlsIbnq6/lj6PlhpnlhaXkuLTml7bmlofku7bvvIzkvpvlrZDov5vnqIvor7vlj5ZcbiAgICBGaWxlcy53cml0ZShQYXRocy5nZXQoZmlsZW5hbWUgKyBcIi5wb3J0XCIpLCBcbiAgICAgICAgICAgICAgICBTdHJpbmcudmFsdWVPZihwb3J0KS5nZXRCeXRlcygpKTtcbiAgICBcbiAgICAvLyDmjqXlj5fov57mjqXnmoTnur/nqItcbiAgICBuZXcgVGhyZWFkKCgpIC0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdoaWxlICghcGlwZVNlcnZlci5pc0Nsb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgU29ja2V0IGNsaWVudCA9IHBpcGVTZXJ2ZXIuYWNjZXB0KCk7XG4gICAgICAgICAgICAgICAgc3luY2hyb25pemVkIChjbGllbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudHMuYWRkKGNsaWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOS4uuavj+S4quWuouaIt+err+WIm+W7uuWkhOeQhue6v+eoi1xuICAgICAgICAgICAgICAgIG5ldyBUaHJlYWQoKCkgLT4gaGFuZGxlQ2xpZW50KGNsaWVudCkpLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGlmICghcGlwZVNlcnZlci5pc0Nsb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi566h6YGT5pyN5Yqh5Zmo6ZSZ6K+vXCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSkuc3RhcnQoKTtcbn1cblxucHJpdmF0ZSB2b2lkIGhhbmRsZUNsaWVudChTb2NrZXQgY2xpZW50KSB7XG4gICAgdHJ5IChcbiAgICAgICAgT2JqZWN0T3V0cHV0U3RyZWFtIG91dCA9IG5ldyBPYmplY3RPdXRwdXRTdHJlYW0oXG4gICAgICAgICAgICBjbGllbnQuZ2V0T3V0cHV0U3RyZWFtKCkpXG4gICAgKSB7XG4gICAgICAgIC8vIOWPkemAgeW9k+WJjee8k+WGsuWMuuS4reeahOaJgOacieWRveS7pFxuICAgICAgICBzeW5jaHJvbml6ZWQgKHJld3JpdGVCdWZmZXIpIHtcbiAgICAgICAgICAgIGZvciAoQnl0ZUJ1ZmZlciBidWZmZXIgOiByZXdyaXRlQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgYnl0ZVtdIGRhdGEgPSBuZXcgYnl0ZVtidWZmZXIucmVtYWluaW5nKCldO1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5nZXQoZGF0YSk7XG4gICAgICAgICAgICAgICAgb3V0LndyaXRlT2JqZWN0KGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDmjIHnu63nm5HlkKzmlrDlkb3ku6Tlubbovazlj5FcbiAgICAgICAgd2hpbGUgKCFjbGllbnQuaXNDbG9zZWQoKSkge1xuICAgICAgICAgICAgLy8g562J5b6F5paw5ZG95Luk5bm25Y+R6YCBXG4gICAgICAgICAgICAvLyAuLi5cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5a6i5oi356uv5aSE55CG6ZSZ6K+vXCIsIGUpO1xuICAgIH1cbn1cblxuLy8g5Zyo5a2Q6L+b56iL5LitXG5wdWJsaWMgY2xhc3MgQU9GUmV3cml0ZVByb2Nlc3Mge1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgU3RyaW5nIHJkYlBhdGggPSBhcmdzWzBdO1xuICAgICAgICBTdHJpbmcgb3V0cHV0UGF0aCA9IGFyZ3NbMV07XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8g6K+75Y+W56uv5Y+j5Y+3XG4gICAgICAgICAgICBTdHJpbmcgcG9ydFN0ciA9IG5ldyBTdHJpbmcoRmlsZXMucmVhZEFsbEJ5dGVzKFxuICAgICAgICAgICAgICAgIFBhdGhzLmdldChyZGJQYXRoICsgXCIucG9ydFwiKSkpO1xuICAgICAgICAgICAgaW50IHBvcnQgPSBJbnRlZ2VyLnBhcnNlSW50KHBvcnRTdHIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDov57mjqXliLDkuLvov5vnqItcbiAgICAgICAgICAgIFNvY2tldCBzb2NrZXQgPSBuZXcgU29ja2V0KFwibG9jYWxob3N0XCIsIHBvcnQpO1xuICAgICAgICAgICAgT2JqZWN0SW5wdXRTdHJlYW0gaW4gPSBuZXcgT2JqZWN0SW5wdXRTdHJlYW0oXG4gICAgICAgICAgICAgICAgc29ja2V0LmdldElucHV0U3RyZWFtKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAxLiDku45SRELmlofku7bliqDovb3mlbDmja7lubblhpnlhaVBT0ZcbiAgICAgICAgICAgIGxvYWRSZGJBbmRXcml0ZUFvZihyZGJQYXRoLCBvdXRwdXRQYXRoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMi4g5o6l5pS25bm25aSE55CG5aKe6YeP5ZG95LukXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBjbWREYXRhID0gKGJ5dGVbXSkgaW4ucmVhZE9iamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb0FvZihvdXRwdXRQYXRoLCBjbWREYXRhKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFT0ZFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhazsgIC8vIOi/nuaOpeWFs+mXrVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7ICAvLyDmiJDlip/lrozmiJBcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgxKTsgIC8vIOWksei0pVxuICAgICAgICB9XG4gICAgfVxufVxuYGBgXG5cbiMjIOS9v+eUqOeLrOeri+e6v+eoi+eahOS8mOWMluaWueahiFxuXG7lpoLmnpzmgqjmm7TlgL7lkJHkuo7kvb/nlKjnur/nqIvogIzpnZ7ov5vnqIvvvIjogIPomZHliLBKYXZh6L+b56iL5ZCv5Yqo5byA6ZSA6L6D5aSn77yJ77yM5Lul5LiL5piv5LyY5YyW5b2T5YmN57q/56iL5a6e546w55qE5bu66K6u77yaXG5cbiMjIyAxLiDlrp7njrDlhpnml7blpI3liLbnmoTmlbDmja7nu5PmnoRcblxuYGBgamF2YVxucHVibGljIGNsYXNzIENvcHlPbldyaXRlUmVkaXNEQiB7XG4gICAgcHJpdmF0ZSBmaW5hbCBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGRhdGE7XG4gICAgXG4gICAgcHVibGljIENvcHlPbldyaXRlUmVkaXNEQihNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IG9yaWdpbmFsRGF0YSkge1xuICAgICAgICAvLyDliJvlu7rmlbDmja7nmoTmt7Hmi7fotJ1cbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwPD4oKTtcbiAgICAgICAgZm9yIChNYXAuRW50cnk8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGVudHJ5IDogb3JpZ2luYWxEYXRhLmVudHJ5U2V0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5wdXQoZW50cnkuZ2V0S2V5KCkuZGVlcENvcHkoKSwgZW50cnkuZ2V0VmFsdWUoKS5kZWVwQ29weSgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgTWFwPEJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhPiBnZXREYXRhKCkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG59XG5gYGBcblxuIyMjIDIuIOS8mOWMlkFPRumHjeWGmee6v+eoi1xuXG5gYGBqYXZhXG5wdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gc3RhcnRSZXdyaXRlKCkge1xuICAgIGlmIChyZXdyaXRpbmcuZ2V0KCkgfHwgIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgICAgICByZXR1cm4gQ29tcGxldGFibGVGdXR1cmUuY29tcGxldGVkRnV0dXJlKGZhbHNlKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICByZXdyaXRlRnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOS9v+eUqOS4k+eUqOe6v+eoi+axoFxuICAgICAgICBFeGVjdXRvclNlcnZpY2UgcmV3cml0ZUV4ZWN1dG9yID0gRXhlY3V0b3JzLm5ld1NpbmdsZVRocmVhZEV4ZWN1dG9yKFxuICAgICAgICAgICAgbmV3IFRocmVhZEZhY3RvcnkoKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFRocmVhZCBuZXdUaHJlYWQoUnVubmFibGUgcikge1xuICAgICAgICAgICAgICAgICAgICBUaHJlYWQgdCA9IG5ldyBUaHJlYWQociwgXCJhb2YtcmV3cml0ZS10aHJlYWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHQuc2V0UHJpb3JpdHkoVGhyZWFkLk1JTl9QUklPUklUWSk7ICAvLyDpmY3kvY7kvJjlhYjnuqdcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgcmV3cml0ZUV4ZWN1dG9yLnN1Ym1pdCgoKSAtPiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIDEuIOWIm+W7uuaVsOaNruW/q+eFp1xuICAgICAgICAgICAgICAgIExpc3Q8Q29weU9uV3JpdGVSZWRpc0RCPiBzbmFwc2hvdCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVkaXNDb3JlLmdldERiTnVtKCk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBzbmFwc2hvdC5hZGQobmV3IENvcHlPbldyaXRlUmVkaXNEQihyZWRpc0NvcmUuZ2V0REJEYXRhKGkpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDIuIOW8gOWni+aUtumbhuWinumHj+WRveS7pFxuICAgICAgICAgICAgICAgIHN0YXJ0UmV3cml0ZUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDMuIOS9v+eUqOW/q+eFp+aVsOaNrui/m+ihjOmHjeWGmVxuICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGVGcm9tU25hcHNob3Qoc25hcHNob3QpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDQuIOiOt+WPluWinumHj+WRveS7pOW5tui/veWKoFxuICAgICAgICAgICAgICAgICAgICBMaXN0PEJ5dGVCdWZmZXI+IGJ1ZmZlcnMgPSBzdG9wUmV3cml0ZUJ1ZmZlckFuZEdldCgpO1xuICAgICAgICAgICAgICAgICAgICByZXdyaXRlci5hcHBlbmRCdWZmZXJzVG9UZW1wRmlsZShidWZmZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIDUuIOabv+aNouaWh+S7tlxuICAgICAgICAgICAgICAgICAgICByZXdyaXRlci5maW5hbGl6ZVJld3JpdGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnlpLHotKVcIiwgZSk7XG4gICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJld3JpdGVFeGVjdXRvci5zaHV0ZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBcblxuIyMjIDMuIOS9v+eUqOWGheWtmOaYoOWwhOaWh+S7tuWHj+WwkUkvT+W8gOmUgFxuXG5gYGBqYXZhXG5wdWJsaWMgYm9vbGVhbiByZXdyaXRlRnJvbVNuYXBzaG90KExpc3Q8Q29weU9uV3JpdGVSZWRpc0RCPiBzbmFwc2hvdCkge1xuICAgIEZpbGUgdGVtcEZpbGUgPSBuZXcgRmlsZSh0ZW1wRmlsZW5hbWUpO1xuICAgIFxuICAgIHRyeSAoXG4gICAgICAgIFJhbmRvbUFjY2Vzc0ZpbGUgcmFmID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUodGVtcEZpbGUsIFwicndcIik7XG4gICAgICAgIEZpbGVDaGFubmVsIGNoYW5uZWwgPSByYWYuZ2V0Q2hhbm5lbCgpO1xuICAgICkge1xuICAgICAgICAvLyDkvb/nlKjlhoXlrZjmmKDlsITmlofku7bmj5Dpq5jlhpnlhaXmgKfog71cbiAgICAgICAgTWFwcGVkQnl0ZUJ1ZmZlciBidWZmZXIgPSBjaGFubmVsLm1hcChcbiAgICAgICAgICAgIEZpbGVDaGFubmVsLk1hcE1vZGUuUkVBRF9XUklURSwgMCwgSU5JVElBTF9TSVpFKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWGmeWFpeaVsOaNrlxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNuYXBzaG90LnNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBDb3B5T25Xcml0ZVJlZGlzREIgZGIgPSBzbmFwc2hvdC5nZXQoaSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWGmeWFpVNFTEVDVOWRveS7pFxuICAgICAgICAgICAgd3JpdGVTZWxlY3RDb21tYW5kKGJ1ZmZlciwgaSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWGmeWFpeaVsOaNruWRveS7pFxuICAgICAgICAgICAgZm9yIChNYXAuRW50cnk8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGVudHJ5IDogZGIuZ2V0RGF0YSgpLmVudHJ5U2V0KCkpIHtcbiAgICAgICAgICAgICAgICBMaXN0PFJlc3A+IGNvbW1hbmRzID0gZW50cnkuZ2V0VmFsdWUoKS5jb252ZXJ0VG9SRVNQKCk7XG4gICAgICAgICAgICAgICAgZm9yIChSZXNwIGNtZCA6IGNvbW1hbmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQ29tbWFuZChidWZmZXIsIGNtZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDnoa7kv53miYDmnInmlbDmja7pg73lhpnlhaXmlofku7ZcbiAgICAgICAgYnVmZmVyLmZvcmNlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIumHjeWGmeW/q+eFp+Wksei0pVwiLCBlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmBgYFxuXG4jIyDnu5Porrpcblxu6Jm954S25L2/55So54us56uL57q/56iL6L+b6KGMQU9G6YeN5YaZ5ZyoSmF2YeS4reaYr+S4gOenjeW4uOingeWBmuazle+8jOS9huWug+S4jlJlZGlz55qE5Y6f5aeL6K6+6K6h5pyJ5pi+6JGX5Yy65Yir44CCUmVkaXPkvb/nlKjlrZDov5vnqIvlkozlhpnml7blpI3liLbmnLrliLbvvIzov5nlnKjns7vnu5/nuqfliKvmj5Dkvpvkuobmm7Tlpb3nmoTpmpTnprvlkozmgKfog73jgIJcblxu5aaC5p6c5oKo5biM5pyb5pu06LS06L+RUmVkaXPnmoTorr7orqHmgJ3mg7PvvIzlj6/ku6XogIPomZHvvJpcblxuMS4gKirmnIDkvbPmlrnmoYgqKu+8muS9v+eUqOeLrOeri+eahEphdmHov5vnqIvov5vooYxBT0bph43lhpnvvIzpgJrov4fov5vnqIvpl7TpgJrkv6HkvKDpgJLlop7ph4/lkb3ku6RcbjIuICoq5oqY5Lit5pa55qGIKirvvJrkvJjljJblvZPliY3nmoTnur/nqIvlrp7njrDvvIzmt7vliqDmlbDmja7lv6vnhaflkozkuJPnlKjnur/nqIvmsaDvvIzlh4/lsJHlr7nkuLvnur/nqIvnmoTlvbHlk41cblxu5peg6K666YCJ5oup5ZOq56eN5pa55qGI77yM5YWz6ZSu5piv56Gu5L+d77yaXG4tIOmHjeWGmei/h+eoi+S4jeS8mumYu+WhnuS4u+acjeWKoVxuLSDph43lhpnmnJ/pl7TnmoTmlrDlkb3ku6Tog73ooqvmraPnoa7mjZXojrflkozlpITnkIZcbi0g5paH5Lu25pu/5o2i6L+H56iL5piv5Y6f5a2Q5oCn55qEXG4tIOezu+e7n+i1hOa6kO+8iENQVeOAgeWGheWtmOOAgUkvT++8ieS9v+eUqOW+l+W9k1xuXG7mgqjmm7TlgL7lkJHkuo7lk6rnp43mlrnmoYjvvJ/miJHlj6/ku6Xmj5Dkvpvmm7Tor6bnu4bnmoTlrp7njrDlu7rorq7jgIJcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50Ijoi55So5LiA5Liq54us56uL55qE5Y6/5Z+O5LiN6KGM5ZCX5p2l5aSE55CGcmV3cml0ZSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDowNToxNy44NDRaIiwicmVzcG9uc2VfdGV4dCI6IuaCqOaPkOWHuuS6huS4gOS4quW+iOWlveeahOmXrumimOOAguS9v+eUqOeLrOeri+e6v+eoi+adpeWkhOeQhkFPRumHjeWGmeehruWunuaYr+S4gOenjeaWueazle+8jOS9huS4jlJlZGlz5Y6f5aeL6K6+6K6h55u45q+U5pyJ5LiA5Lqb6YeN6KaB5Yy65Yir44CC6K6p5oiR5YiG5p6Q5LiA5LiL5L2/55So54us56uL57q/56iL6L+b6KGMQU9G6YeN5YaZ55qE5LyY57y654K577yM5Lul5Y+K5aaC5L2V5pu05aW95Zyw6LS06L+RUmVkaXPnmoTorr7orqHmgJ3mg7PjgIJcblxuIyMg5L2/55So54us56uL57q/56iL6L+b6KGMQU9G6YeN5YaZ55qE5YiG5p6QXG5cbiMjIyDlvZPliY3lrp7njrBcblxu55uu5YmN5oKo55qE5Luj56CB5bey57uP5Zyo5L2/55So54us56uL57q/56iL6L+b6KGMQU9G6YeN5YaZ77yaXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL0FPRkhhbmRsZXIuamF2YSBtb2RlPUVYQ0VSUFRcbnB1YmxpYyBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBzdGFydFJld3JpdGUoKSB7XG4gICAgLy8gLi4uXG4gICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICByZXdyaXRlRnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmUucnVuQXN5bmMoKCkgLT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhpnpgLvovpHliY3vvIznoa7kv53miYDmnInmlbDmja7pg73lt7LliLfnm5hcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3IuZmx1c2goKTtcblxuICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmVxuICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGUoKTtcbiAgICAgICAgICAgICAgICAvLyAuLi5cbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgLy8gLi4uXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBgXG5cbiMjIyDkuI5SZWRpc+WOn+Wni+iuvuiuoeeahOWMuuWIq1xuXG4qKlJlZGlz55qE6L+b56iL5qih5Z6LKirvvJpcbi0gUmVkaXPkvb/nlKhmb3JrKCnliJvlu7rlrZDov5vnqIvov5vooYxBT0bph43lhplcbi0g5a2Q6L+b56iL5oul5pyJ54i26L+b56iL5YaF5a2Y55qE5a6M5pW05Ymv5pys77yI6YCa6L+H5YaZ5pe25aSN5Yi25py65Yi277yJXG4tIOeItui/m+eoi+e7p+e7reWkhOeQhuWRveS7pO+8jOWwhuaWsOWRveS7pOmAmui/h+euoemBk+WPkemAgee7meWtkOi/m+eoi1xuLSDlrZDov5vnqIvlrozmiJDph43lhpnlkI7pgJrnn6XniLbov5vnqIvvvIzniLbov5vnqIvlrozmiJDmlofku7bmm7/mjaJcblxuKirkvb/nlKjnur/nqIvnmoTlsYDpmZDmgKcqKu+8mlxuMS4gKirlhoXlrZjlhbHkuqsqKu+8mkphdmHnur/nqIvlhbHkuqvloIblhoXlrZjvvIzml6Dms5XliKnnlKjmk43kvZzns7vnu5/nuqfliKvnmoTlhpnml7blpI3liLbmnLrliLZcbjIuICoq5bm25Y+R5a6J5YWoKirvvJrpnIDopoHpop3lpJbnmoTlkIzmraXmnLrliLbnoa7kv53mlbDmja7kuIDoh7TmgKdcbjMuICoq6LWE5rqQ56ue5LqJKirvvJrnur/nqIvpl7Tlj6/og73kuonnlKhDUFXlkozlhoXlrZjotYTmupBcbjQuICoqR0PlvbHlk40qKu+8mkphdmHnmoTlnoPlnL7lm57mlLblj6/og73lkIzml7blvbHlk43kuLvnur/nqIvlkozph43lhpnnur/nqItcblxuIyMjIOaUuei/m+W7uuiuru+8muS9v+eUqOeLrOeri+i/m+eoi1xuXG7kuLrkuobmm7Tlpb3lnLDotLTov5FSZWRpc+eahOiuvuiuoeaAneaDs++8jOWPr+S7peiAg+iZkeS9v+eUqOeLrOeri+eahEphdmHov5vnqIvov5vooYxBT0bph43lhpnvvJpcblxuYGBgamF2YVxucHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgICBpZiAocmV3cml0aW5nLmdldCgpIHx8ICFyZXdyaXRlci5jYW5SZXdyaXRlKCkpIHtcbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5Y+v5Lul6YeN5YaZXG4gICAgICAgIHJldHVybiBDb21wbGV0YWJsZUZ1dHVyZS5jb21wbGV0ZWRGdXR1cmUoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsIHRydWUpKSB7XG4gICAgICAgIHJld3JpdGVGdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIDEuIOWIm+W7uuS4tOaXtlJEQuaWh+S7tu+8jOS/neWtmOW9k+WJjeaVsOaNruW6k+eKtuaAgVxuICAgICAgICAgICAgU3RyaW5nIHRlbXBSZGJQYXRoID0gZmlsZW5hbWUgKyBcIi50ZW1wLnJkYlwiO1xuICAgICAgICAgICAgcmRiSGFuZGxlci5zYXZlVG9GaWxlKHRlbXBSZGJQYXRoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMi4g5ZCv5Yqo54us56uL6L+b56iL6L+b6KGM6YeN5YaZXG4gICAgICAgICAgICBQcm9jZXNzQnVpbGRlciBwYiA9IG5ldyBQcm9jZXNzQnVpbGRlcihcbiAgICAgICAgICAgICAgICBcImphdmFcIiwgXG4gICAgICAgICAgICAgICAgXCItY3BcIiwgU3lzdGVtLmdldFByb3BlcnR5KFwiamF2YS5jbGFzcy5wYXRoXCIpLFxuICAgICAgICAgICAgICAgIFwic2l0ZS5obmZ5MjU4LmFvZi5BT0ZSZXdyaXRlUHJvY2Vzc1wiLCAgLy8g5LiT6Zeo55qE6YeN5YaZ6L+b56iL57G7XG4gICAgICAgICAgICAgICAgdGVtcFJkYlBhdGgsICAvLyDovpPlhaVSRELmlofku7ZcbiAgICAgICAgICAgICAgICBmaWxlbmFtZSArIFwiLnRlbXBcIiAgLy8g6L6T5Ye6QU9G5paH5Lu2XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBQcm9jZXNzIHJld3JpdGVQcm9jZXNzID0gcGIuc3RhcnQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMy4g5Yib5bu6566h6YGT6YCa5L+hXG4gICAgICAgICAgICBzdGFydFBpcGVTZXJ2ZXIoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gNC4g55uR5o6n6L+b56iL5a6M5oiQXG4gICAgICAgICAgICBuZXcgVGhyZWFkKCgpIC0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpbnQgZXhpdENvZGUgPSByZXdyaXRlUHJvY2Vzcy53YWl0Rm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGl0Q29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDph43lhpnmiJDlip/vvIzmm7/mjaLmlofku7ZcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0b21pY1JlcGxhY2VGaWxlKG5ldyBGaWxlKGZpbGVuYW1lICsgXCIudGVtcFwiKSwgbmV3IEZpbGUoZmlsZW5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KGUpO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzdG9wUGlwZVNlcnZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnN0YXJ0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBcblxuIyMjIOi/m+eoi+mXtOmAmuS/oeWunueOsFxuXG7kuLrkuoblrp7njrDkuLvov5vnqIvlkozph43lhpnov5vnqIvkuYvpl7TnmoTpgJrkv6HvvIzlj6/ku6Xkvb/nlKjku6XkuIvmlrnms5XvvJpcblxuYGBgamF2YVxuLy8g5Zyo5Li76L+b56iL5LitXG5wcml2YXRlIFNlcnZlclNvY2tldCBwaXBlU2VydmVyO1xucHJpdmF0ZSBMaXN0PFNvY2tldD4gY2xpZW50cyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG5wcml2YXRlIHZvaWQgc3RhcnRQaXBlU2VydmVyKCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICBwaXBlU2VydmVyID0gbmV3IFNlcnZlclNvY2tldCgwKTsgIC8vIOS9v+eUqOmaj+acuuerr+WPo1xuICAgIGludCBwb3J0ID0gcGlwZVNlcnZlci5nZXRMb2NhbFBvcnQoKTtcbiAgICBcbiAgICAvLyDlsIbnq6/lj6PlhpnlhaXkuLTml7bmlofku7bvvIzkvpvlrZDov5vnqIvor7vlj5ZcbiAgICBGaWxlcy53cml0ZShQYXRocy5nZXQoZmlsZW5hbWUgKyBcIi5wb3J0XCIpLCBcbiAgICAgICAgICAgICAgICBTdHJpbmcudmFsdWVPZihwb3J0KS5nZXRCeXRlcygpKTtcbiAgICBcbiAgICAvLyDmjqXlj5fov57mjqXnmoTnur/nqItcbiAgICBuZXcgVGhyZWFkKCgpIC0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdoaWxlICghcGlwZVNlcnZlci5pc0Nsb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgU29ja2V0IGNsaWVudCA9IHBpcGVTZXJ2ZXIuYWNjZXB0KCk7XG4gICAgICAgICAgICAgICAgc3luY2hyb25pemVkIChjbGllbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudHMuYWRkKGNsaWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOS4uuavj+S4quWuouaIt+err+WIm+W7uuWkhOeQhue6v+eoi1xuICAgICAgICAgICAgICAgIG5ldyBUaHJlYWQoKCkgLT4gaGFuZGxlQ2xpZW50KGNsaWVudCkpLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGlmICghcGlwZVNlcnZlci5pc0Nsb3NlZCgpKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi566h6YGT5pyN5Yqh5Zmo6ZSZ6K+vXCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSkuc3RhcnQoKTtcbn1cblxucHJpdmF0ZSB2b2lkIGhhbmRsZUNsaWVudChTb2NrZXQgY2xpZW50KSB7XG4gICAgdHJ5IChcbiAgICAgICAgT2JqZWN0T3V0cHV0U3RyZWFtIG91dCA9IG5ldyBPYmplY3RPdXRwdXRTdHJlYW0oXG4gICAgICAgICAgICBjbGllbnQuZ2V0T3V0cHV0U3RyZWFtKCkpXG4gICAgKSB7XG4gICAgICAgIC8vIOWPkemAgeW9k+WJjee8k+WGsuWMuuS4reeahOaJgOacieWRveS7pFxuICAgICAgICBzeW5jaHJvbml6ZWQgKHJld3JpdGVCdWZmZXIpIHtcbiAgICAgICAgICAgIGZvciAoQnl0ZUJ1ZmZlciBidWZmZXIgOiByZXdyaXRlQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgYnl0ZVtdIGRhdGEgPSBuZXcgYnl0ZVtidWZmZXIucmVtYWluaW5nKCldO1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5nZXQoZGF0YSk7XG4gICAgICAgICAgICAgICAgb3V0LndyaXRlT2JqZWN0KGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDmjIHnu63nm5HlkKzmlrDlkb3ku6Tlubbovazlj5FcbiAgICAgICAgd2hpbGUgKCFjbGllbnQuaXNDbG9zZWQoKSkge1xuICAgICAgICAgICAgLy8g562J5b6F5paw5ZG95Luk5bm25Y+R6YCBXG4gICAgICAgICAgICAvLyAuLi5cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5a6i5oi356uv5aSE55CG6ZSZ6K+vXCIsIGUpO1xuICAgIH1cbn1cblxuLy8g5Zyo5a2Q6L+b56iL5LitXG5wdWJsaWMgY2xhc3MgQU9GUmV3cml0ZVByb2Nlc3Mge1xuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgU3RyaW5nIHJkYlBhdGggPSBhcmdzWzBdO1xuICAgICAgICBTdHJpbmcgb3V0cHV0UGF0aCA9IGFyZ3NbMV07XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8g6K+75Y+W56uv5Y+j5Y+3XG4gICAgICAgICAgICBTdHJpbmcgcG9ydFN0ciA9IG5ldyBTdHJpbmcoRmlsZXMucmVhZEFsbEJ5dGVzKFxuICAgICAgICAgICAgICAgIFBhdGhzLmdldChyZGJQYXRoICsgXCIucG9ydFwiKSkpO1xuICAgICAgICAgICAgaW50IHBvcnQgPSBJbnRlZ2VyLnBhcnNlSW50KHBvcnRTdHIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDov57mjqXliLDkuLvov5vnqItcbiAgICAgICAgICAgIFNvY2tldCBzb2NrZXQgPSBuZXcgU29ja2V0KFwibG9jYWxob3N0XCIsIHBvcnQpO1xuICAgICAgICAgICAgT2JqZWN0SW5wdXRTdHJlYW0gaW4gPSBuZXcgT2JqZWN0SW5wdXRTdHJlYW0oXG4gICAgICAgICAgICAgICAgc29ja2V0LmdldElucHV0U3RyZWFtKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyAxLiDku45SRELmlofku7bliqDovb3mlbDmja7lubblhpnlhaVBT0ZcbiAgICAgICAgICAgIGxvYWRSZGJBbmRXcml0ZUFvZihyZGJQYXRoLCBvdXRwdXRQYXRoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMi4g5o6l5pS25bm25aSE55CG5aKe6YeP5ZG95LukXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBjbWREYXRhID0gKGJ5dGVbXSkgaW4ucmVhZE9iamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUb0FvZihvdXRwdXRQYXRoLCBjbWREYXRhKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFT0ZFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhazsgIC8vIOi/nuaOpeWFs+mXrVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgU3lzdGVtLmV4aXQoMCk7ICAvLyDmiJDlip/lrozmiJBcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICBTeXN0ZW0uZXhpdCgxKTsgIC8vIOWksei0pVxuICAgICAgICB9XG4gICAgfVxufVxuYGBgXG5cbiMjIOS9v+eUqOeLrOeri+e6v+eoi+eahOS8mOWMluaWueahiFxuXG7lpoLmnpzmgqjmm7TlgL7lkJHkuo7kvb/nlKjnur/nqIvogIzpnZ7ov5vnqIvvvIjogIPomZHliLBKYXZh6L+b56iL5ZCv5Yqo5byA6ZSA6L6D5aSn77yJ77yM5Lul5LiL5piv5LyY5YyW5b2T5YmN57q/56iL5a6e546w55qE5bu66K6u77yaXG5cbiMjIyAxLiDlrp7njrDlhpnml7blpI3liLbnmoTmlbDmja7nu5PmnoRcblxuYGBgamF2YVxucHVibGljIGNsYXNzIENvcHlPbldyaXRlUmVkaXNEQiB7XG4gICAgcHJpdmF0ZSBmaW5hbCBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGRhdGE7XG4gICAgXG4gICAgcHVibGljIENvcHlPbldyaXRlUmVkaXNEQihNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IG9yaWdpbmFsRGF0YSkge1xuICAgICAgICAvLyDliJvlu7rmlbDmja7nmoTmt7Hmi7fotJ1cbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwPD4oKTtcbiAgICAgICAgZm9yIChNYXAuRW50cnk8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGVudHJ5IDogb3JpZ2luYWxEYXRhLmVudHJ5U2V0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5wdXQoZW50cnkuZ2V0S2V5KCkuZGVlcENvcHkoKSwgZW50cnkuZ2V0VmFsdWUoKS5kZWVwQ29weSgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgTWFwPEJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhPiBnZXREYXRhKCkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG59XG5gYGBcblxuIyMjIDIuIOS8mOWMlkFPRumHjeWGmee6v+eoi1xuXG5gYGBqYXZhXG5wdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gc3RhcnRSZXdyaXRlKCkge1xuICAgIGlmIChyZXdyaXRpbmcuZ2V0KCkgfHwgIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgICAgICByZXR1cm4gQ29tcGxldGFibGVGdXR1cmUuY29tcGxldGVkRnV0dXJlKGZhbHNlKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgICAgICByZXdyaXRlRnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOS9v+eUqOS4k+eUqOe6v+eoi+axoFxuICAgICAgICBFeGVjdXRvclNlcnZpY2UgcmV3cml0ZUV4ZWN1dG9yID0gRXhlY3V0b3JzLm5ld1NpbmdsZVRocmVhZEV4ZWN1dG9yKFxuICAgICAgICAgICAgbmV3IFRocmVhZEZhY3RvcnkoKSB7XG4gICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgcHVibGljIFRocmVhZCBuZXdUaHJlYWQoUnVubmFibGUgcikge1xuICAgICAgICAgICAgICAgICAgICBUaHJlYWQgdCA9IG5ldyBUaHJlYWQociwgXCJhb2YtcmV3cml0ZS10aHJlYWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHQuc2V0UHJpb3JpdHkoVGhyZWFkLk1JTl9QUklPUklUWSk7ICAvLyDpmY3kvY7kvJjlhYjnuqdcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgcmV3cml0ZUV4ZWN1dG9yLnN1Ym1pdCgoKSAtPiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIDEuIOWIm+W7uuaVsOaNruW/q+eFp1xuICAgICAgICAgICAgICAgIExpc3Q8Q29weU9uV3JpdGVSZWRpc0RCPiBzbmFwc2hvdCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVkaXNDb3JlLmdldERiTnVtKCk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBzbmFwc2hvdC5hZGQobmV3IENvcHlPbldyaXRlUmVkaXNEQihyZWRpc0NvcmUuZ2V0REJEYXRhKGkpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDIuIOW8gOWni+aUtumbhuWinumHj+WRveS7pFxuICAgICAgICAgICAgICAgIHN0YXJ0UmV3cml0ZUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDMuIOS9v+eUqOW/q+eFp+aVsOaNrui/m+ihjOmHjeWGmVxuICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGVGcm9tU25hcHNob3Qoc25hcHNob3QpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDQuIOiOt+WPluWinumHj+WRveS7pOW5tui/veWKoFxuICAgICAgICAgICAgICAgICAgICBMaXN0PEJ5dGVCdWZmZXI+IGJ1ZmZlcnMgPSBzdG9wUmV3cml0ZUJ1ZmZlckFuZEdldCgpO1xuICAgICAgICAgICAgICAgICAgICByZXdyaXRlci5hcHBlbmRCdWZmZXJzVG9UZW1wRmlsZShidWZmZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIDUuIOabv+aNouaWh+S7tlxuICAgICAgICAgICAgICAgICAgICByZXdyaXRlci5maW5hbGl6ZVJld3JpdGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnlpLHotKVcIiwgZSk7XG4gICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJld3JpdGVFeGVjdXRvci5zaHV0ZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG59XG5gYGBcblxuIyMjIDMuIOS9v+eUqOWGheWtmOaYoOWwhOaWh+S7tuWHj+WwkUkvT+W8gOmUgFxuXG5gYGBqYXZhXG5wdWJsaWMgYm9vbGVhbiByZXdyaXRlRnJvbVNuYXBzaG90KExpc3Q8Q29weU9uV3JpdGVSZWRpc0RCPiBzbmFwc2hvdCkge1xuICAgIEZpbGUgdGVtcEZpbGUgPSBuZXcgRmlsZSh0ZW1wRmlsZW5hbWUpO1xuICAgIFxuICAgIHRyeSAoXG4gICAgICAgIFJhbmRvbUFjY2Vzc0ZpbGUgcmFmID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUodGVtcEZpbGUsIFwicndcIik7XG4gICAgICAgIEZpbGVDaGFubmVsIGNoYW5uZWwgPSByYWYuZ2V0Q2hhbm5lbCgpO1xuICAgICkge1xuICAgICAgICAvLyDkvb/nlKjlhoXlrZjmmKDlsITmlofku7bmj5Dpq5jlhpnlhaXmgKfog71cbiAgICAgICAgTWFwcGVkQnl0ZUJ1ZmZlciBidWZmZXIgPSBjaGFubmVsLm1hcChcbiAgICAgICAgICAgIEZpbGVDaGFubmVsLk1hcE1vZGUuUkVBRF9XUklURSwgMCwgSU5JVElBTF9TSVpFKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWGmeWFpeaVsOaNrlxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNuYXBzaG90LnNpemUoKTsgaSsrKSB7XG4gICAgICAgICAgICBDb3B5T25Xcml0ZVJlZGlzREIgZGIgPSBzbmFwc2hvdC5nZXQoaSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWGmeWFpVNFTEVDVOWRveS7pFxuICAgICAgICAgICAgd3JpdGVTZWxlY3RDb21tYW5kKGJ1ZmZlciwgaSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWGmeWFpeaVsOaNruWRveS7pFxuICAgICAgICAgICAgZm9yIChNYXAuRW50cnk8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGVudHJ5IDogZGIuZ2V0RGF0YSgpLmVudHJ5U2V0KCkpIHtcbiAgICAgICAgICAgICAgICBMaXN0PFJlc3A+IGNvbW1hbmRzID0gZW50cnkuZ2V0VmFsdWUoKS5jb252ZXJ0VG9SRVNQKCk7XG4gICAgICAgICAgICAgICAgZm9yIChSZXNwIGNtZCA6IGNvbW1hbmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlQ29tbWFuZChidWZmZXIsIGNtZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDnoa7kv53miYDmnInmlbDmja7pg73lhpnlhaXmlofku7ZcbiAgICAgICAgYnVmZmVyLmZvcmNlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIumHjeWGmeW/q+eFp+Wksei0pVwiLCBlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmBgYFxuXG4jIyDnu5Porrpcblxu6Jm954S25L2/55So54us56uL57q/56iL6L+b6KGMQU9G6YeN5YaZ5ZyoSmF2YeS4reaYr+S4gOenjeW4uOingeWBmuazle+8jOS9huWug+S4jlJlZGlz55qE5Y6f5aeL6K6+6K6h5pyJ5pi+6JGX5Yy65Yir44CCUmVkaXPkvb/nlKjlrZDov5vnqIvlkozlhpnml7blpI3liLbmnLrliLbvvIzov5nlnKjns7vnu5/nuqfliKvmj5Dkvpvkuobmm7Tlpb3nmoTpmpTnprvlkozmgKfog73jgIJcblxu5aaC5p6c5oKo5biM5pyb5pu06LS06L+RUmVkaXPnmoTorr7orqHmgJ3mg7PvvIzlj6/ku6XogIPomZHvvJpcblxuMS4gKirmnIDkvbPmlrnmoYgqKu+8muS9v+eUqOeLrOeri+eahEphdmHov5vnqIvov5vooYxBT0bph43lhpnvvIzpgJrov4fov5vnqIvpl7TpgJrkv6HkvKDpgJLlop7ph4/lkb3ku6RcbjIuICoq5oqY5Lit5pa55qGIKirvvJrkvJjljJblvZPliY3nmoTnur/nqIvlrp7njrDvvIzmt7vliqDmlbDmja7lv6vnhaflkozkuJPnlKjnur/nqIvmsaDvvIzlh4/lsJHlr7nkuLvnur/nqIvnmoTlvbHlk41cblxu5peg6K666YCJ5oup5ZOq56eN5pa55qGI77yM5YWz6ZSu5piv56Gu5L+d77yaXG4tIOmHjeWGmei/h+eoi+S4jeS8mumYu+WhnuS4u+acjeWKoVxuLSDph43lhpnmnJ/pl7TnmoTmlrDlkb3ku6Tog73ooqvmraPnoa7mjZXojrflkozlpITnkIZcbi0g5paH5Lu25pu/5o2i6L+H56iL5piv5Y6f5a2Q5oCn55qEXG4tIOezu+e7n+i1hOa6kO+8iENQVeOAgeWGheWtmOOAgUkvT++8ieS9v+eUqOW+l+W9k1xuXG7mgqjmm7TlgL7lkJHkuo7lk6rnp43mlrnmoYjvvJ/miJHlj6/ku6Xmj5Dkvpvmm7Tor6bnu4bnmoTlrp7njrDlu7rorq7jgIJcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6IjVmZGUwOWIxLTkzZTMtNGU0Yy05YWIxLTlkNzc4NjZhNWJhNyIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNTY5MzM2YjYtNDk0Ni00NTFkLWEzYmItMWVkZGRkOTkxYmMxIiwicmVxdWVzdF9tZXNzYWdlIjoi5oiR55qE5Luj56CB6YeM55qEcGlwZWxpbmXph4znmoRoYW5kbGVy5pyJ5b+F6KaB5YaZZmlyZWNoYW5uZWxyZWFk5ZCXIOW4ruaIkeeci+eciyDmiJHkuI3lpKrmh4IiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0Ijoi5oiR55qE5Luj56CB6YeM55qEcGlwZWxpbmXph4znmoRoYW5kbGVy5pyJ5b+F6KaB5YaZZmlyZWNoYW5uZWxyZWFk5ZCXIOW4ruaIkeeci+eciyDmiJHkuI3lpKrmh4IifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVN2UnhGdHpFVFlBWDZ2MTRNTlcyUmEiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIlxcdTY3ZTVcXHU2MjdlXFx1OTg3OVxcdTc2ZWVcXHU0ZTJkXFx1NzY4NHBpcGVsaW5lXFx1NTQ4Y2hhbmRsZXJcXHU3NmY4XFx1NTE3M1xcdTRlZTNcXHU3ODAxXFx1ZmYwY1xcdTcyNzlcXHU1MjJiXFx1NjYyZlxcdTUzMDVcXHU1NDJiQ2hhbm5lbEhhbmRsZXJcXHUzMDAxQ2hhbm5lbFBpcGVsaW5lXFx1NjIxNmZpcmVDaGFubmVsUmVhZFxcdTY1YjlcXHU2Y2Q1XFx1NzY4NFxcdTkwZThcXHU1MjA2XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi6K6p5oiR5p+l55yL5LiA5LiL5oKo55qE5Luj56CB5Lit5YWz5LqOcGlwZWxpbmXlkoxoYW5kbGVy55qE5a6e546w77yM54m55Yir5piv5YWz5LqOYGZpcmVDaGFubmVsUmVhZGDnmoTkvb/nlKjmg4XlhrXjgIJcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50Ijoi5oiR55qE5Luj56CB6YeM55qEcGlwZWxpbmXph4znmoRoYW5kbGVy5pyJ5b+F6KaB5YaZZmlyZWNoYW5uZWxyZWFk5ZCXIOW4ruaIkeeci+eciyDmiJHkuI3lpKrmh4IifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6NDI6MjkuMDkyWiIsInJlc3BvbnNlX3RleHQiOiLorqnmiJHmn6XnnIvkuIDkuIvmgqjnmoTku6PnoIHkuK3lhbPkuo5waXBlbGluZeWSjGhhbmRsZXLnmoTlrp7njrDvvIznibnliKvmmK/lhbPkuo5gZmlyZUNoYW5uZWxSZWFkYOeahOS9v+eUqOaDheWGteOAglxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiOGNiYzc0ZjctM2MzMC00MDc3LTkxOGQtNTk0NmMxYzhlNjgwIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIyZjQyZGRhMy05OGQ1LTRhZTYtOWVmMi04MzRmOWVhZDhhMTciLCJyZXF1ZXN0X21lc3NhZ2UiOiJAc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhQHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015RGVjb2Rlci5qYXZhQHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL0NvbXByZXNzaW9uQ29lZEMuamF2YVxuXG7miJHnmoTku6PnoIHph4znmoRwaXBlbGluZemHjOeahGhhbmRsZXLmnInlv4XopoHlhplmaXJlY2hhbm5lbHJlYWTlkJcg5biu5oiR55yL55yLIOaIkeS4jeWkquaHgkBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeVJlc3BvbnNlRW5jb2Rlci5qYXZhIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJtZW50aW9uIiwiYXR0cnMiOnsiaWQiOiIvc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhIiwibGFiZWwiOiJNeUNvbW1hbmRIYW5kbGVyLmphdmEiLCJkYXRhIjp7ImxhYmVsIjoiTXlDb21tYW5kSGFuZGxlci5qYXZhIiwibmFtZSI6InNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YSIsImlkIjoiL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YSJ9LCJ0eXBlIjoiaXRlbSJ9fX0seyJ0eXBlIjoibWVudGlvbiIsImF0dHJzIjp7ImlkIjoiL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015RGVjb2Rlci5qYXZhIiwibGFiZWwiOiJNeURlY29kZXIuamF2YSIsImRhdGEiOnsibGFiZWwiOiJNeURlY29kZXIuamF2YSIsIm5hbWUiOiJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YSIsImlkIjoiL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015RGVjb2Rlci5qYXZhIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlEZWNvZGVyLmphdmEifSwidHlwZSI6Iml0ZW0ifX19LHsidHlwZSI6Im1lbnRpb24iLCJhdHRycyI6eyJpZCI6Ii9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9Db21wcmVzc2lvbkNvZWRDLmphdmEiLCJsYWJlbCI6IkNvbXByZXNzaW9uQ29lZEMuamF2YSIsImRhdGEiOnsibGFiZWwiOiJDb21wcmVzc2lvbkNvZWRDLmphdmEiLCJuYW1lIjoic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvQ29tcHJlc3Npb25Db2VkQy5qYXZhIiwiaWQiOiIvc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvQ29tcHJlc3Npb25Db2VkQy5qYXZhIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvQ29tcHJlc3Npb25Db2VkQy5qYXZhIn0sInR5cGUiOiJpdGVtIn19fSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IuaIkeeahOS7o+eggemHjOeahHBpcGVsaW5l6YeM55qEaGFuZGxlcuacieW/heimgeWGmWZpcmVjaGFubmVscmVhZOWQlyDluK7miJHnnIvnnIsg5oiR5LiN5aSq5oeCIn0seyJ0eXBlIjoibWVudGlvbiIsImF0dHJzIjp7ImlkIjoiL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015UmVzcG9uc2VFbmNvZGVyLmphdmEiLCJsYWJlbCI6Ik15UmVzcG9uc2VFbmNvZGVyLmphdmEiLCJkYXRhIjp7ImxhYmVsIjoiTXlSZXNwb25zZUVuY29kZXIuamF2YSIsIm5hbWUiOiJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeVJlc3BvbnNlRW5jb2Rlci5qYXZhIiwiaWQiOiIvc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015UmVzcG9uc2VFbmNvZGVyLmphdmEifSwidHlwZSI6Iml0ZW0ifX19XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbeyJsYWJlbCI6Ik15Q29tbWFuZEhhbmRsZXIuamF2YSIsIm5hbWUiOiJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmEiLCJpZCI6Ii9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmEifSwidHlwZSI6Iml0ZW0ifSx7ImxhYmVsIjoiTXlEZWNvZGVyLmphdmEiLCJuYW1lIjoic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlEZWNvZGVyLmphdmEiLCJpZCI6Ii9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015RGVjb2Rlci5qYXZhIn0sInR5cGUiOiJpdGVtIn0seyJsYWJlbCI6IkNvbXByZXNzaW9uQ29lZEMuamF2YSIsIm5hbWUiOiJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9Db21wcmVzc2lvbkNvZWRDLmphdmEiLCJpZCI6Ii9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9Db21wcmVzc2lvbkNvZWRDLmphdmEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9Db21wcmVzc2lvbkNvZWRDLmphdmEifSwidHlwZSI6Iml0ZW0ifSx7ImxhYmVsIjoiTXlSZXNwb25zZUVuY29kZXIuamF2YSIsIm5hbWUiOiJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeVJlc3BvbnNlRW5jb2Rlci5qYXZhIiwiaWQiOiIvc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015UmVzcG9uc2VFbmNvZGVyLmphdmEifSwidHlwZSI6Iml0ZW0ifV0sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVRraWdoQ2YxRVV6a2kxOWpTblA1OXkiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi6K6p5oiR5p+l55yL5oKo5o+Q5Yiw55qE5Yeg5Liq5paH5Lu277yM54m55Yir5piv5YWz5LqOcGlwZWxpbmXlkoxoYW5kbGVy5Lit55qEYGZpcmVDaGFubmVsUmVhZGDmlrnms5XnmoTkvb/nlKjmg4XlhrXjgIJcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiQHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YUBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YUBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9Db21wcmVzc2lvbkNvZWRDLmphdmFcblxu5oiR55qE5Luj56CB6YeM55qEcGlwZWxpbmXph4znmoRoYW5kbGVy5pyJ5b+F6KaB5YaZZmlyZWNoYW5uZWxyZWFk5ZCXIOW4ruaIkeeci+eciyDmiJHkuI3lpKrmh4JAc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDo0Mzo1My4yNDlaIiwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkeafpeeci+aCqOaPkOWIsOeahOWHoOS4quaWh+S7tu+8jOeJueWIq+aYr+WFs+S6jnBpcGVsaW5l5ZKMaGFuZGxlcuS4reeahGBmaXJlQ2hhbm5lbFJlYWRg5pa55rOV55qE5L2/55So5oOF5Ya144CCXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNGJjNDJkMGYtYTA5Ni00MmZhLWFiMmUtMjdmN2JlZTFiMWFlIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxSmR4dXpITWFadnoxOVp0eGdickFqRSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhOlxuICAgICAxXHRwYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuICAgICA0XHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLlNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjtcbiAgICAgNlx0aW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuICAgICA3XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbiAgICAgOFx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YuQU9GSGFuZGxlcjtcbiAgICAgOVx0aW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbiAgICAxMFx0aW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG4gICAgMTFcdGltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbiAgICAxMlx0aW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG4gICAgMTNcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbiAgICAxNFx0aW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuY29yZS5SREJIYW5kbGVyO1xuICAgIDE1XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcbiAgICAxNlx0XG4gICAgMTdcdGltcG9ydCBqYXZhLnV0aWwuRW51bVNldDtcbiAgICAxOFx0aW1wb3J0IGphdmEudXRpbC5TZXQ7XG4gICAgMTlcdFxuICAgIDIwXHRAQ2hhbm5lbEhhbmRsZXIuU2hhcmFibGVcbiAgICAyMVx0cHVibGljIGNsYXNzIE15Q29tbWFuZEhhbmRsZXIgZXh0ZW5kcyBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI8UmVzcD4ge1xuICAgIDIyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlDb21tYW5kSGFuZGxlci5jbGFzcyk7XG4gICAgMjNcdCAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgMjRcdCAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICAyNVx0ICAgIHByaXZhdGUgZmluYWwgUkRCSGFuZGxlciByZGJIYW5kbGVyO1xuICAgIDI2XHRcbiAgICAyN1x0ICAgIC8vIOS9v+eUqEVudW1TZXTmj5Dpq5jmn6Xmib7mlYjnjodcbiAgICAyOFx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFNldDxDb21tYW5kVHlwZT4gV1JJVEVfQ09NTUFORFMgPSBFbnVtU2V0Lm9mKFxuICAgIDI5XHQgICAgICAgICAgICBDb21tYW5kVHlwZS5TRVQsIENvbW1hbmRUeXBlLkRFTCwgQ29tbWFuZFR5cGUuSU5DUiwgQ29tbWFuZFR5cGUuTVNFVCxcbiAgICAzMFx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuRVhQSVJFLCBDb21tYW5kVHlwZS5TQURELCBDb21tYW5kVHlwZS5TUkVNLCBDb21tYW5kVHlwZS5TUE9QLFxuICAgIDMxXHQgICAgICAgICAgICBDb21tYW5kVHlwZS5IU0VULCBDb21tYW5kVHlwZS5ITUVTVCwgQ29tbWFuZFR5cGUuSERFTCxcbiAgICAzMlx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuTFBVU0gsIENvbW1hbmRUeXBlLlJQVVNILCBDb21tYW5kVHlwZS5MUE9QLCBDb21tYW5kVHlwZS5SUE9QLCBDb21tYW5kVHlwZS5MUkVNLFxuICAgIDMzXHQgICAgICAgICAgICBDb21tYW5kVHlwZS5aQURELCBDb21tYW5kVHlwZS5aUkVNLENvbW1hbmRUeXBlLlNFTEVDVFxuICAgIDM0XHQgICAgKTtcbiAgICAzNVx0XG4gICAgMzZcdCAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlcihSZWRpc0NvcmUgcmVkaXNDb3JlLCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXIsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcikge1xuICAgIDM3XHQgICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIDM4XHQgICAgICAgIHRoaXMuYW9mSGFuZGxlciA9IGFvZkhhbmRsZXI7XG4gICAgMzlcdCAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gcmRiSGFuZGxlcjtcbiAgICA0MFx0XG4gICAgNDFcdFxuICAgIDQyXHQgICAgfVxuICAgIDQzXHRcbiAgICA0NFx0ICAgIEBPdmVycmlkZVxuICAgIDQ1XHQgICAgcHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgNDZcdCAgICAgICAgaWYgKG1zZyBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgIDQ3XHQgICAgICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBtc2c7XG4gICAgNDhcdCAgICAgICAgICAgIFJlc3AgcmVzcG9uc2UgPSBwcm9jZXNzQ29tbWFuZChhcnJheSk7XG4gICAgNDlcdCAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSk7XG4gICAgNTFcdCAgICAgICAgICAgIH1cbiAgICA1Mlx0ICAgICAgICB9IGVsc2Uge1xuICAgIDUzXHQgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gcmVxdWVzdCB0eXBlXCIpKTtcbiAgICA1NFx0ICAgICAgICB9XG4gICAgNTVcdCAgICB9XG4gICAgNTZcdFxuICAgIDU3XHQgICAgcHVibGljIFJlc3AgcHJvY2Vzc0NvbW1hbmQoUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgIDU4XHQgICAgICAgIGlmIChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPT0gMCkge1xuICAgIDU5XHQgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBlbXB0eSBjb21tYW5kXCIpO1xuICAgIDYwXHQgICAgICAgIH1cbiAgICA2MVx0XG4gICAgNjJcdCAgICAgICAgdHJ5IHtcbiAgICA2M1x0ICAgICAgICAgICAgUmVzcFtdIGFycmF5ID0gY29tbWFuZEFycmF5LmdldEFycmF5KCk7XG4gICAgNjRcdCAgICAgICAgICAgIFN0cmluZyBjb21tYW5kTmFtZSA9ICgoQnVsa1N0cmluZykgYXJyYXlbMF0pLmdldENvbnRlbnQoKS50b1V0ZjhTdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xuICAgIDY1XHQgICAgICAgICAgICBDb21tYW5kVHlwZSBjb21tYW5kVHlwZTtcbiAgICA2Nlx0XG4gICAgNjdcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNjhcdCAgICAgICAgICAgICAgICBjb21tYW5kVHlwZSA9IENvbW1hbmRUeXBlLnZhbHVlT2YoY29tbWFuZE5hbWUpO1xuICAgIDY5XHQgICAgICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkge1xuICAgIDcwXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biBjb21tYW5kICdcIiArIGNvbW1hbmROYW1lICsgXCInXCIpO1xuICAgIDcxXHQgICAgICAgICAgICB9XG4gICAgNzJcdFxuICAgIDczXHQgICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlSW5DbHVzdGVyKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpKSB7XG4gICAgNzRcdCAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2x1c3RlckNvbW1hbmQoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSk7XG4gICAgNzVcdCAgICAgICAgICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICA3OFx0ICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGFycmF5KTtcbiAgICA3OVx0XG4gICAgODBcdCAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGFycmF5Lmxlbmd0aCA+IDEpIHtcbiAgICA4M1x0ICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksICgoQnVsa1N0cmluZykgYXJyYXlbMV0pLmdldENvbnRlbnQoKSk7XG4gICAgODRcdCAgICAgICAgICAgIH1cbiAgICA4NVx0XG4gICAgODZcdCAgICAgICAgICAgIC8vIOWmguaenOWQr+eUqOS6hkFPRu+8jOiusOW9leWRveS7pFxuICAgIDg3XHQgICAgICAgICAgIGlmIChhb2ZIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpKXtcbiAgICA4OFx0ICAgICAgICAgICAgICAgIGFvZkhhbmRsZXIuYXBwZW5kKGNvbW1hbmRBcnJheSk7XG4gICAgODlcdCAgICAgICAgICAgIH1cbiAgICA5MFx0XG4gICAgOTFcdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgOTJcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA5M1x0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBjb21tYW5kXCIsIGUpO1xuICAgIDk0XHQgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA5NVx0ICAgICAgICB9XG4gICAgOTZcdCAgICB9XG4gICAgOTdcdFxuICAgIDk4XHQgICAgcHJpdmF0ZSBib29sZWFuIHNob3VsZEhhbmRsZUluQ2x1c3RlcihDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgIDk5XHQgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgIDEwMFx0ICAgICAgICByZXR1cm4gY2x1c3RlciAhPSBudWxsICYmIGNsdXN0ZXIuaXNTaGFyZGluZ0VuYWJsZWQoKSAmJlxuICAgMTAxXHQgICAgICAgICAgICAgICAgKGNvbW1hbmRUeXBlID09IENvbW1hbmRUeXBlLkdFVCB8fCBjb21tYW5kVHlwZSA9PSBDb21tYW5kVHlwZS5TRVQpO1xuICAgMTAyXHQgICAgfVxuICAgMTAzXHRcbiAgIDEwNFx0ICAgIHByaXZhdGUgUmVzcCBoYW5kbGVDbHVzdGVyQ29tbWFuZChDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgMTA1XHQgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgIDEwNlx0ICAgICAgICBCeXRlc1dyYXBwZXIga2V5ID0gKChCdWxrU3RyaW5nKSBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKVsxXSkuZ2V0Q29udGVudCgpO1xuICAgMTA3XHQgICAgICAgIFN0cmluZyB0YXJnZXROb2RlSWQgPSBjbHVzdGVyLmdldE5vZGVGb3JLZXkoa2V5KTtcbiAgIDEwOFx0ICAgICAgICBTdHJpbmcgY3VycmVudE5vZGVJZCA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDdXJyZW50Tm9kZSgpLmdldElkKCk7XG4gICAxMDlcdFxuICAgMTEwXHQgICAgICAgIGlmIChjdXJyZW50Tm9kZUlkLmVxdWFscyh0YXJnZXROb2RlSWQpKSB7XG4gICAxMTFcdCAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgIDExMlx0ICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGNvbW1hbmRBcnJheS5nZXRBcnJheSgpKTtcbiAgIDExM1x0ICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuICAgMTE0XHRcbiAgIDExNVx0ICAgICAgICAgICAgLy8g56Gu5L+d5pys5Zyw5omn6KGM5pe25Lmf6Kem5Y+RUkRCXG4gICAxMTZcdCAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA+IDEpIHtcbiAgIDExN1x0ICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksIGtleSk7XG4gICAxMThcdCAgICAgICAgICAgIH1cbiAgIDExOVx0XG4gICAxMjBcdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAxMjFcdCAgICAgICAgfSBlbHNlIHtcbiAgIDEyMlx0ICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBmb3J3YXJkVG9UYXJnZXROb2RlKHRhcmdldE5vZGVJZCwgY29tbWFuZEFycmF5KTtcbiAgIDEyM1x0ICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgIDEyNFx0ICAgICAgICB9XG4gICAxMjVcdCAgICB9XG4gICAxMjZcdFxuICAgMTI3XHQgICAgcHJpdmF0ZSBSZXNwIGZvcndhcmRUb1RhcmdldE5vZGUoU3RyaW5nIHRhcmdldE5vZGVJZCwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgMTI4XHQgICAgICAgIHRyeSB7XG4gICAxMjlcdCAgICAgICAgICAgIC8vIOiOt+WPluebruagh+iKgueCueeahOacjeWKoeWunuS+i1xuICAgMTMwXHQgICAgICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAxMzFcdCAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIHRhcmdldFNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUodGFyZ2V0Tm9kZUlkKTtcbiAgIDEzMlx0XG4gICAxMzNcdCAgICAgICAgICAgIGlmICh0YXJnZXRTZXJ2aWNlICE9IG51bGwpIHtcbiAgIDEzNFx0ICAgICAgICAgICAgICAgIC8vIOi9rOWPkeWRveS7pOWIsOebruagh+iKgueCuVxuICAgMTM1XHQgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZEFycmF5KTtcbiAgIDEzNlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDEzN1x0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHRhcmdldCBub2RlIG5vdCBhdmFpbGFibGU6IFwiICsgdGFyZ2V0Tm9kZUlkKTtcbiAgIDEzOFx0ICAgICAgICAgICAgfVxuICAgMTM5XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxNDBcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZvcndhcmRpbmcgY29tbWFuZCB0byBub2RlIFwiICsgdGFyZ2V0Tm9kZUlkLCBlKTtcbiAgIDE0MVx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTQyXHQgICAgICAgIH1cbiAgIDE0M1x0ICAgIH1cbiAgIDE0NFx0XG4gICAxNDVcdCAgICBAT3ZlcnJpZGVcbiAgIDE0Nlx0ICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgIDE0N1x0ICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgMTQ4XHQgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbiAgIDE0OVx0ICAgIH1cbiAgIDE1MFx0fVxuICAgMTUxXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDE1MVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxVGtpZ2hDZjFFVXpraTE5alNuUDU5eSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDo0NDowMS45NTlaIiwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiOTM2NWI2MS0xN2MwLTQ5N2YtYWQxZC03YmY4MzMwOTI2NDIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFCV1ZocW5lSjhCNlZmQTRkVjl3Z2tNIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL0NvbXByZXNzaW9uQ29lZEMuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlEZWNvZGVyLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvZGVyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuICAgICA0XHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBpby5uZXR0eS5oYW5kbGVyLmNvZGVjLkJ5dGVUb01lc3NhZ2VEZWNvZGVyO1xuICAgICA2XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG4gICAgIDdcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLio7XG4gICAgIDhcdFxuICAgICA5XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMTBcdFxuICAgIDExXHRwdWJsaWMgY2xhc3MgTXlEZWNvZGVyIGV4dGVuZHMgQnl0ZVRvTWVzc2FnZURlY29kZXIge1xuICAgIDEyXHQgICAgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlEZWNvZGVyLmNsYXNzKTtcbiAgICAxM1x0ICAgIEBPdmVycmlkZVxuICAgIDE0XHQgICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDE1XHQgICAgICAgIHRyeSB7XG4gICAgMTZcdCAgICAgICAgICAgIGlmIChpbi5yZWFkYWJsZUJ5dGVzKCkgPiAwKSB7XG4gICAgMTdcdCAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi5byA5aeL6Kej56CBXCIpO1xuICAgIDE4XHQgICAgICAgICAgICAgICAgLy8g5qCH6K6w5b2T5YmN6K+75Y+W5L2N572uXG4gICAgMTlcdCAgICAgICAgICAgICAgICBpbi5tYXJrUmVhZGVySW5kZXgoKTtcbiAgICAyMFx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgMjFcdCAgICAgICAgICAgICAgICAgICAgUmVzcCBkZWNvZGVkID0gUmVzcC5kZWNvZGUoaW4pO1xuICAgIDIyXHQgICAgICAgICAgICAgICAgICAgIC8vbG9nZ2VyLmluZm8oXCLop6PnoIHmiJDlip9cIik7XG4gICAgMjNcdCAgICAgICAgICAgICAgICAgICAgb3V0LmFkZChkZWNvZGVkKTtcbiAgICAyNFx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgMjVcdCAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6Kej56CB5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAyNlx0ICAgICAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAgMjdcdCAgICAgICAgICAgICAgICB9XG4gICAgMjhcdCAgICAgICAgICAgIH1cbiAgICAyOVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDMwXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLmgLvkvZPlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDMxXHQgICAgICAgIH1cbiAgICAzMlx0ICAgIH1cbiAgICAzM1x0fVxuICAgIDM0XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDM0XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFKZHh1ekhNYVp2ejE5WnR4Z2JyQWpFIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRjovSHVhUmVkaXMiLCJmb2xkZXJSb290IjoiRjovSHVhUmVkaXMifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTAyVDIwOjQ0OjExLjA4M1oiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjViYzNiNDc1LTQ1NWQtNDc2OS04NjU3LTRhMjgyNTQyYjMxYiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTdKNEJCSDJMcDJRRENURHJyQ3A1azciLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvQ29tcHJlc3Npb25Db2VkQy5qYXZhOlxuICAgICAxXHRwYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbiAgICAgNFx0aW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuICAgICA1XHRpbXBvcnQgaW8ubmV0dHkuaGFuZGxlci5jb2RlYy5CeXRlVG9NZXNzYWdlQ29kZWM7XG4gICAgIDZcdGltcG9ydCBuZXQuanBvdW50ei5sejQuTFo0Q29tcHJlc3NvcjtcbiAgICAgN1x0aW1wb3J0IG5ldC5qcG91bnR6Lmx6NC5MWjRGYWN0b3J5O1xuICAgICA4XHRpbXBvcnQgbmV0Lmpwb3VudHoubHo0LkxaNEZhc3REZWNvbXByZXNzb3I7XG4gICAgIDlcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbiAgICAxMFx0XG4gICAgMTFcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAxMlx0XG4gICAgMTNcdHB1YmxpYyBjbGFzcyBDb21wcmVzc2lvbkNvZWRDIGV4dGVuZHMgQnl0ZVRvTWVzc2FnZUNvZGVjPEJ5dGVCdWY+IHtcbiAgICAxNFx0XG4gICAgMTVcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihDb21wcmVzc2lvbkNvZWRDLmNsYXNzKTtcbiAgICAxNlx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBDT01QUkVTU0lPTl9USFJFU0hPTEQgPSA2NDtcbiAgICAxN1x0ICAgIHByaXZhdGUgZmluYWwgTFo0Q29tcHJlc3NvciBjb21wcmVzc29yO1xuICAgIDE4XHQgICAgcHJpdmF0ZSBmaW5hbCBMWjRGYXN0RGVjb21wcmVzc29yIGRlY29tcHJlc3NvcjtcbiAgICAxOVx0XG4gICAgMjBcdCAgICBwdWJsaWMgQ29tcHJlc3Npb25Db2VkQygpIHtcbiAgICAyMVx0ICAgICAgICB0aGlzLmNvbXByZXNzb3IgPSBMWjRGYWN0b3J5LmZhc3Rlc3RJbnN0YW5jZSgpLmZhc3RDb21wcmVzc29yKCk7XG4gICAgMjJcdCAgICAgICAgdGhpcy5kZWNvbXByZXNzb3IgPSBMWjRGYWN0b3J5LmZhc3Rlc3RJbnN0YW5jZSgpLmZhc3REZWNvbXByZXNzb3IoKTtcbiAgICAyM1x0ICAgICAgICBsb2dnZXIuaW5mbyhcIuWIneWni+WMluWOi+e8qee8luino+eggeWZqO+8jOWOi+e8qemYiOWAvDogXCIgKyBDT01QUkVTU0lPTl9USFJFU0hPTEQgKyBcIiDlrZfoioJcIik7XG4gICAgMjRcdCAgICB9XG4gICAgMjVcdFxuICAgIDI2XHQgICAgQE92ZXJyaWRlXG4gICAgMjdcdCAgICBwcm90ZWN0ZWQgdm9pZCBlbmNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgQnl0ZUJ1ZiBtc2csIEJ5dGVCdWYgb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAyOFx0ICAgICAgICAvLyDkv53lrZjljp/lp4tyZWFkZXJJbmRleFxuICAgIDI5XHQgICAgICAgIGludCByZWFkZXJJbmRleCA9IG1zZy5yZWFkZXJJbmRleCgpO1xuICAgIDMwXHQgICAgICAgIGludCBvcmlnaW5hbFNpemUgPSBtc2cucmVhZGFibGVCeXRlcygpO1xuICAgIDMxXHRcbiAgICAzMlx0ICAgICAgICAvLyDlj6rljovnvKnlpKfkuo7pmIjlgLznmoRcbiAgICAzM1x0ICAgICAgICBpZihvcmlnaW5hbFNpemUgPiBDT01QUkVTU0lPTl9USFJFU0hPTEQpe1xuICAgIDM0XHQgICAgICAgICAgICAvLyAxLuWGmeWFpeWOi+e8qeagh+iusFxuICAgIDM1XHQgICAgICAgICAgICBvdXQud3JpdGVCeXRlKDEpO1xuICAgIDM2XHRcbiAgICAzN1x0ICAgICAgICAgICAgLy8gMi7lh4blpIfljovnvKlcbiAgICAzOFx0ICAgICAgICAgICAgYnl0ZVtdIGJ5dGVzID0gbmV3IGJ5dGVbb3JpZ2luYWxTaXplXTtcbiAgICAzOVx0ICAgICAgICAgICAgbXNnLmdldEJ5dGVzKHJlYWRlckluZGV4LCBieXRlcyk7IC8vIOS9v+eUqGdldEJ5dGVz6ICM5LiN5pivcmVhZEJ5dGVz77yM6YG/5YWN56e75YqocmVhZGVySW5kZXhcbiAgICA0MFx0XG4gICAgNDFcdCAgICAgICAgICAgIC8vIDMu6K6h566X5Y6L57yp5ZCO5Y+v6IO955qE5pyA5aSn6ZW/5bqmXG4gICAgNDJcdCAgICAgICAgICAgIGludCBtYXhMZW5ndGggPSBjb21wcmVzc29yLm1heENvbXByZXNzZWRMZW5ndGgob3JpZ2luYWxTaXplKTtcbiAgICA0M1x0ICAgICAgICAgICAgYnl0ZVtdIGNvbXByZXNzZWRCeXRlcyA9IG5ldyBieXRlW21heExlbmd0aF07XG4gICAgNDRcdFxuICAgIDQ1XHQgICAgICAgICAgICAvLyA0LuWOi+e8qeaVsOaNrlxuICAgIDQ2XHQgICAgICAgICAgICBpbnQgY29tcHJlc3NlZExlbmd0aCA9IGNvbXByZXNzb3IuY29tcHJlc3MoYnl0ZXMsIDAsIG9yaWdpbmFsU2l6ZSwgY29tcHJlc3NlZEJ5dGVzLCAwLCBtYXhMZW5ndGgpO1xuICAgIDQ3XHRcbiAgICA0OFx0ICAgICAgICAgICAgLy8gNS7lhpnlhaXljp/lp4vplb/luqZcbiAgICA0OVx0ICAgICAgICAgICAgb3V0LndyaXRlSW50KG9yaWdpbmFsU2l6ZSk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgICAgICAvLyA2LuWGmeWFpeWOi+e8qeWQjueahOmVv+W6plxuICAgIDUyXHQgICAgICAgICAgICBvdXQud3JpdGVJbnQoY29tcHJlc3NlZExlbmd0aCk7XG4gICAgNTNcdFxuICAgIDU0XHQgICAgICAgICAgICAvLyA3LuWGmeWFpeWOi+e8qeaVsOaNrlxuICAgIDU1XHQgICAgICAgICAgICBvdXQud3JpdGVCeXRlcyhjb21wcmVzc2VkQnl0ZXMsIDAsIGNvbXByZXNzZWRMZW5ndGgpO1xuICAgIDU2XHRcbiAgICA1N1x0ICAgICAgICAgICAgZmxvYXQgY29tcHJlc3Npb25SYXRpbyA9IChmbG9hdCljb21wcmVzc2VkTGVuZ3RoIC8gb3JpZ2luYWxTaXplICogMTAwO1xuICAgIDU4XHQgICAgICAgICAgICBsb2dnZXIuaW5mbyhTdHJpbmcuZm9ybWF0KFwi5pWw5o2u5bey5Y6L57ypOiDljp/lp4vlpKflsI89JWTlrZfoioIsIOWOi+e8qeWQjj0lZOWtl+iKgiwg5Y6L57yp546HPSUuMmYlJVwiLFxuICAgIDU5XHQgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsU2l6ZSwgY29tcHJlc3NlZExlbmd0aCwgY29tcHJlc3Npb25SYXRpbykpO1xuICAgIDYwXHQgICAgICAgIH0gZWxzZSB7XG4gICAgNjFcdCAgICAgICAgICAgIC8vIOacquWOi+e8qeeahOaDheWGtVxuICAgIDYyXHQgICAgICAgICAgICBvdXQud3JpdGVCeXRlKDApO1xuICAgIDYzXHQgICAgICAgICAgICBvdXQud3JpdGVJbnQob3JpZ2luYWxTaXplKTtcbiAgICA2NFx0ICAgICAgICAgICAgb3V0LndyaXRlQnl0ZXMobXNnLCByZWFkZXJJbmRleCwgb3JpZ2luYWxTaXplKTtcbiAgICA2NVx0XG4gICAgNjZcdCAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5pWw5o2u5pyq5Y6L57ypOiDlpKflsI89XCIgKyBvcmlnaW5hbFNpemUgKyBcIuWtl+iKgiAo5bCP5LqO6ZiI5YC8KVwiKTtcbiAgICA2N1x0ICAgICAgICB9XG4gICAgNjhcdCAgICB9XG4gICAgNjlcdFxuICAgIDcwXHRcbiAgICA3MVx0ICAgIEBPdmVycmlkZVxuICAgIDcyXHQgICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDczXHQgICAgICAgIC8vIOajgOafpeaYr+WQpuaciei2s+Wkn+eahOaVsOaNruadpeivu+WPluagh+iusFxuICAgIDc0XHQgICAgICAgIGlmIChpbi5yZWFkYWJsZUJ5dGVzKCkgPCAxKSB7XG4gICAgNzVcdCAgICAgICAgICAgIHJldHVybjtcbiAgICA3Nlx0ICAgICAgICB9XG4gICAgNzdcdFxuICAgIDc4XHQgICAgICAgIGluLm1hcmtSZWFkZXJJbmRleCgpO1xuICAgIDc5XHRcbiAgICA4MFx0ICAgICAgICAvLyDor7vlj5bljovnvKnmoIforrBcbiAgICA4MVx0ICAgICAgICBieXRlIGlzQ29tcHJlc3NlZCA9IGluLnJlYWRCeXRlKCk7XG4gICAgODJcdFxuICAgIDgzXHQgICAgICAgIGlmIChpc0NvbXByZXNzZWQgPT0gMSkge1xuICAgIDg0XHQgICAgICAgICAgICAvLyDpnIDopoHor7vlj5bljp/lp4vplb/luqblkozljovnvKnplb/luqZcbiAgICA4NVx0ICAgICAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA8IDgpIHtcbiAgICA4Nlx0ICAgICAgICAgICAgICAgIGluLnJlc2V0UmVhZGVySW5kZXgoKTtcbiAgICA4N1x0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA4OFx0ICAgICAgICAgICAgfVxuICAgIDg5XHRcbiAgICA5MFx0ICAgICAgICAgICAgLy8g6K+75Y+W5Y6f5aeL6ZW/5bqmXG4gICAgOTFcdCAgICAgICAgICAgIGludCBvcmlnaW5hbExlbmd0aCA9IGluLnJlYWRJbnQoKTtcbiAgICA5Mlx0XG4gICAgOTNcdCAgICAgICAgICAgIC8vIOivu+WPluWOi+e8qemVv+W6plxuICAgIDk0XHQgICAgICAgICAgICBpbnQgY29tcHJlc3NlZExlbmd0aCA9IGluLnJlYWRJbnQoKTtcbiAgICA5NVx0XG4gICAgOTZcdCAgICAgICAgICAgIC8vIOehruS/neaciei2s+Wkn+eahOaVsOaNrlxuICAgIDk3XHQgICAgICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpIDwgY29tcHJlc3NlZExlbmd0aCkge1xuICAgIDk4XHQgICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgIDk5XHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgMTAwXHQgICAgICAgICAgICB9XG4gICAxMDFcdFxuICAgMTAyXHQgICAgICAgICAgICAvLyDor7vlj5bljovnvKnmlbDmja5cbiAgIDEwM1x0ICAgICAgICAgICAgYnl0ZVtdIGNvbXByZXNzZWQgPSBuZXcgYnl0ZVtjb21wcmVzc2VkTGVuZ3RoXTtcbiAgIDEwNFx0ICAgICAgICAgICAgaW4ucmVhZEJ5dGVzKGNvbXByZXNzZWQpO1xuICAgMTA1XHRcbiAgIDEwNlx0ICAgICAgICAgICAgLy8g6Kej5Y6L57yp5pWw5o2uXG4gICAxMDdcdCAgICAgICAgICAgIGJ5dGVbXSBkZWNvbXByZXNzZWQgPSBuZXcgYnl0ZVtvcmlnaW5hbExlbmd0aF07XG4gICAxMDhcdCAgICAgICAgICAgIGRlY29tcHJlc3Nvci5kZWNvbXByZXNzKGNvbXByZXNzZWQsIDAsIGRlY29tcHJlc3NlZCwgMCwgb3JpZ2luYWxMZW5ndGgpO1xuICAgMTA5XHRcbiAgIDExMFx0ICAgICAgICAgICAgLy8g5Yib5bu66Kej5Y6L5ZCO55qEIEJ5dGVCdWZcbiAgIDExMVx0ICAgICAgICAgICAgQnl0ZUJ1ZiByZXN1bHQgPSBjdHguYWxsb2MoKS5idWZmZXIob3JpZ2luYWxMZW5ndGgpO1xuICAgMTEyXHQgICAgICAgICAgICByZXN1bHQud3JpdGVCeXRlcyhkZWNvbXByZXNzZWQsIDAsIG9yaWdpbmFsTGVuZ3RoKTtcbiAgIDExM1x0ICAgICAgICAgICAgb3V0LmFkZChyZXN1bHQpO1xuICAgMTE0XHRcbiAgIDExNVx0ICAgICAgICAgICAgbG9nZ2VyLmluZm8oU3RyaW5nLmZvcm1hdChcIuaVsOaNruW3suino+WOi+e8qTog5Y6L57yp5aSn5bCPPSVk5a2X6IqCLCDop6PljovlkI49JWTlrZfoioJcIixcbiAgIDExNlx0ICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2VkTGVuZ3RoLCBvcmlnaW5hbExlbmd0aCkpO1xuICAgMTE3XHQgICAgICAgIH0gZWxzZSB7XG4gICAxMThcdCAgICAgICAgICAgIC8vIOmcgOimgeivu+WPluacquWOi+e8qemVv+W6plxuICAgMTE5XHQgICAgICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpIDwgNCkge1xuICAgMTIwXHQgICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgMTIxXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgMTIyXHQgICAgICAgICAgICB9XG4gICAxMjNcdFxuICAgMTI0XHQgICAgICAgICAgICAvLyDor7vlj5bmnKrljovnvKnplb/luqZcbiAgIDEyNVx0ICAgICAgICAgICAgaW50IGxlbmd0aCA9IGluLnJlYWRJbnQoKTtcbiAgIDEyNlx0XG4gICAxMjdcdCAgICAgICAgICAgIC8vIOehruS/neaciei2s+Wkn+eahOaVsOaNrlxuICAgMTI4XHQgICAgICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpIDwgbGVuZ3RoKSB7XG4gICAxMjlcdCAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAxMzBcdCAgICAgICAgICAgICAgICByZXR1cm47XG4gICAxMzFcdCAgICAgICAgICAgIH1cbiAgIDEzMlx0XG4gICAxMzNcdCAgICAgICAgICAgIC8vIOWIm+W7uue7k+aenCBCeXRlQnVmIOW5tuato+ehruivu+WPluaVsOaNrlxuICAgMTM0XHQgICAgICAgICAgICBCeXRlQnVmIHJlc3VsdCA9IGN0eC5hbGxvYygpLmJ1ZmZlcihsZW5ndGgpO1xuICAgMTM1XHQgICAgICAgICAgICBpbi5yZWFkQnl0ZXMocmVzdWx0LCBsZW5ndGgpO1xuICAgMTM2XHQgICAgICAgICAgICByZXN1bHQud3JpdGVySW5kZXgobGVuZ3RoKTsgLy8g56Gu5L+d5YaZ5YWl57Si5byV5q2j56Gu6K6+572uXG4gICAxMzdcdCAgICAgICAgICAgIG91dC5hZGQocmVzdWx0KTtcbiAgIDEzOFx0XG4gICAxMzlcdCAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5o6l5pS25Yiw5pyq5Y6L57yp5pWw5o2uOiDlpKflsI89XCIgKyBsZW5ndGggKyBcIuWtl+iKglwiKTtcbiAgIDE0MFx0ICAgICAgICB9XG4gICAxNDFcdCAgICB9XG4gICAxNDJcdH1cbiAgIDE0M1x0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxNDNcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUJXVmhxbmVKOEI2VmZBNGRWOXdna00ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6NDQ6MTUuNDMxWiIsInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZmRkYTAxMDEtNjdhMi00YmJlLWJkNzEtNzgxN2JmZjVhYzM4IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxSlZNNFF1N3BxRXJFNUdvNzlWY0NhVSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiXFx1NjdlNVxcdTYyN2VcXHU5ODc5XFx1NzZlZVxcdTRlMmRcXHU3Njg0cGlwZWxpbmVcXHU5MTRkXFx1N2Y2ZVxcdTRlZTNcXHU3ODAxXFx1ZmYwY1xcdTcyNzlcXHU1MjJiXFx1NjYyZlxcdTU3MjhcXHU1NGVhXFx1OTFjY1xcdTkxNGRcXHU3ZjZlXFx1NGU4NkNoYW5uZWxQaXBlbGluZVxcdTYyMTZcXHU2ZGZiXFx1NTJhMFxcdTRlODZDaGFubmVsSGFuZGxlclwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YTpcbiAgICAgMVx0cGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG4gICAgIDRcdGltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZlV0aWw7XG4gICAgIDVcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyQ29udGV4dDtcbiAgICAgNlx0aW1wb3J0IGlvLm5ldHR5LmhhbmRsZXIuY29kZWMuTWVzc2FnZVRvQnl0ZUVuY29kZXI7XG4gICAgIDdcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbiAgICAgOFx0aW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuICAgICA5XHRcbiAgICAxMFx0cHVibGljIGNsYXNzIE15UmVzcG9uc2VFbmNvZGVyIGV4dGVuZHMgTWVzc2FnZVRvQnl0ZUVuY29kZXI8UmVzcD4ge1xuICAgIDExXHQgICAgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlSZXNwb25zZUVuY29kZXIuY2xhc3MpO1xuICAgIDEyXHQgICAgQE92ZXJyaWRlXG4gICAgMTNcdCAgICBwcm90ZWN0ZWQgdm9pZCBlbmNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCByZXNwLCBCeXRlQnVmIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgMTRcdCAgICAgICAgdHJ5IHtcbiAgICAxNVx0ICAgICAgICAgICAgcmVzcC53cml0ZShyZXNwLCBvdXQpO1xuICAgIDE2XHQgICAgICAgICAgICAvLy8vbG9nZ2VyLmluZm8oXCJFbmNvZGVkIHJlc3BvbnNlOiBcIiArIEJ5dGVCdWZVdGlsLmhleER1bXAob3V0KSk7XG4gICAgMTdcdCAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZSkge1xuICAgIDE4XHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLnvJbnoIHlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDE5XHQgICAgICAgICAgICBjdHguY2xvc2UoKTtcbiAgICAyMFx0ICAgICAgICB9XG4gICAgMjFcdCAgICB9XG4gICAgMjJcdH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDIyXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE3SjRCQkgyTHAyUURDVERyckNwNWs3In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRjovSHVhUmVkaXMiLCJmb2xkZXJSb290IjoiRjovSHVhUmVkaXMifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTAyVDIwOjQ0OjIwLjE0MVoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImFhNTVmMGM2LWNlMzgtNGFhMS1iNDU0LTZhZWUyMmEyZThkNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IuWfuuS6juWvueaCqOS7o+eggeeahOWIhuaekO+8jOaIkeadpeino+etlOaCqOWFs+S6jnBpcGVsaW5l5Lit55qEaGFuZGxlcuaYr+WQpumcgOimgeWGmWBmaXJlQ2hhbm5lbFJlYWRg55qE6Zeu6aKY44CCXG5cbiMjIOWIhuaekFxuXG7lnKhOZXR0eeS4re+8jGBmaXJlQ2hhbm5lbFJlYWRg5pa55rOV55So5LqO5bCG5LqL5Lu25Lyg6YCS57uZcGlwZWxpbmXkuK3nmoTkuIvkuIDkuKpoYW5kbGVy44CC5b2T5oKo5p+l55yL5oKo55qE5Luj56CB5pe277yM5oiR5rOo5oSP5Yiw77yaXG5cbjEuICoqTXlEZWNvZGVy57G7KirvvJrnu6fmib/oh6pgQnl0ZVRvTWVzc2FnZURlY29kZXJg77yM5ZyoYGRlY29kZWDmlrnms5XkuK3kvb/nlKhgb3V0LmFkZChkZWNvZGVkKWDlsIbop6PnoIHlkI7nmoTlr7nosaHmt7vliqDliLDovpPlh7rliJfooajkuK3jgIJcblxuMi4gKipNeUNvbW1hbmRIYW5kbGVy57G7KirvvJrnu6fmib/oh6pgU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyPFJlc3A+YO+8jOWcqGBjaGFubmVsUmVhZDBg5pa55rOV5Lit5aSE55CG5raI5oGv5bm255u05o6l6LCD55SoYGN0eC53cml0ZUFuZEZsdXNoKHJlc3BvbnNlKWDlj5HpgIHlk43lupTjgIJcblxuMy4gKipDb21wcmVzc2lvbkNvZWRD57G7KirvvJrnu6fmib/oh6pgQnl0ZVRvTWVzc2FnZUNvZGVjPEJ5dGVCdWY+YO+8jOWcqGBkZWNvZGVg5pa55rOV5Lit5L2/55SoYG91dC5hZGQocmVzdWx0KWDlsIbop6PnoIHlkI7nmoTlr7nosaHmt7vliqDliLDovpPlh7rliJfooajkuK3jgIJcblxuNC4gKipNeVJlc3BvbnNlRW5jb2Rlcuexuyoq77ya57un5om/6IeqYE1lc3NhZ2VUb0J5dGVFbmNvZGVyPFJlc3A+YO+8jOWcqGBlbmNvZGVg5pa55rOV5Lit5bCG5ZON5bqU5a+56LGh57yW56CB5Yiw6L6T5Ye6Qnl0ZUJ1ZuS4reOAglxuXG41LiAqKlBpcGVsaW5l6YWN572uKirvvJrlnKhgTXlSZWRpc1NlcnZpY2Vg57G75Lit77yM5oKo55qEcGlwZWxpbmXphY3nva7lpoLkuIvvvJpcbmBgYGphdmFcbnBpcGVsaW5lLmFkZExhc3QobmV3IE15RGVjb2RlcigpKTtcbnBpcGVsaW5lLmFkZExhc3QobmV3IE15UmVzcG9uc2VFbmNvZGVyKCkpO1xuaWYoRU5BQkxFX0NPTVBSRVNTSU9OKXtcbiAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBDb21wcmVzc2lvbkNvZWRDKCkpO1xufVxucGlwZWxpbmUuYWRkTGFzdChjb21tYW5kRXhlY3V0b3IsIGNvbW1hbmRIYW5kbGVyKTtcbmBgYFxuXG4jIyDnu5PorrpcblxuKirmgqjnmoTku6PnoIHkuK3kuI3pnIDopoHmmL7lvI/osIPnlKhgZmlyZUNoYW5uZWxSZWFkYOaWueazlSoq77yM5Y6f5Zug5aaC5LiL77yaXG5cbjEuICoq57un5om/55qE5Z+657G75bey57uP5aSE55CG5LqG5LqL5Lu25Lyg6YCSKirvvJpcbiAgIC0gYEJ5dGVUb01lc3NhZ2VEZWNvZGVyYOWSjGBCeXRlVG9NZXNzYWdlQ29kZWNg5Zyo5YaF6YOo5Lya6Ieq5Yqo5bCGYG91dGDliJfooajkuK3nmoTlr7nosaHkvKDpgJLnu5nkuIvkuIDkuKpoYW5kbGVyXG4gICAtIGBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXJg5Zyo5aSE55CG5a6M5raI5oGv5ZCO5Lya6Ieq5Yqo6YeK5pS+5raI5oGv77yI5aaC5p6c6ZyA6KaB77yJXG5cbjIuICoq5q2j56Gu55qE5LqL5Lu25rWBKirvvJpcbiAgIC0g6Kej56CB5Zmo5bCG5a2X6IqC6L2s5o2i5Li65raI5oGv5a+56LGh5bm25re75Yqg5YiwYG91dGDliJfooahcbiAgIC0gTmV0dHnmoYbmnrboh6rliqjlsIbov5nkupvlr7nosaHkvKDpgJLnu5nkuIvkuIDkuKpoYW5kbGVyXG4gICAtIOWRveS7pOWkhOeQhuWZqOWkhOeQhua2iOaBr+W5tueUn+aIkOWTjeW6lFxuICAgLSDlk43lupTpgJrov4dgd3JpdGVBbmRGbHVzaGDlj5HpgIHlm57lrqLmiLfnq6/vvIznu4/ov4fnvJbnoIHlmajovazmjaLkuLrlrZfoioJcblxuMy4gKirmmL7lvI/osIPnlKhgZmlyZUNoYW5uZWxSZWFkYOeahOaDheWGtSoq77yaXG4gICAtIOWPquacieW9k+aCqOmcgOimgeWcqOWkhOeQhua2iOaBr+WQjuaJi+WKqOWwhua2iOaBr+S8oOmAkue7meS4i+S4gOS4qmhhbmRsZXLml7bmiY3pnIDopoFcbiAgIC0g5L6L5aaC77yM5aaC5p6c5oKo5Zyo5LiA5LiqaGFuZGxlcuS4reWkhOeQhua2iOaBr+WQju+8jOi/mOW4jOacm+S4i+S4gOS4qmhhbmRsZXLkuZ/lpITnkIblkIzkuIDmtojmga9cbiAgIC0g5oiW6ICF5oKo5a6e546w5LqG6Ieq5a6a5LmJ55qEYENoYW5uZWxJbmJvdW5kSGFuZGxlcmDogIzkuI3mmK/kvb/nlKhOZXR0eeaPkOS+m+eahOWfuuexu1xuXG4jIyDlhbfkvZPliIbmnpBcblxuIyMjIE15RGVjb2RlclxuXG5gYGBqYXZhXG5AT3ZlcnJpZGVcbnByb3RlY3RlZCB2b2lkIGRlY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBCeXRlQnVmIGluLCBMaXN0PE9iamVjdD4gb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpID4gMCkge1xuICAgICAgICAgICAgaW4ubWFya1JlYWRlckluZGV4KCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFJlc3AgZGVjb2RlZCA9IFJlc3AuZGVjb2RlKGluKTtcbiAgICAgICAgICAgICAgICBvdXQuYWRkKGRlY29kZWQpOyAgLy8g6L+Z6YeM5re75Yqg5Yiwb3V05YiX6KGo77yMTmV0dHnkvJroh6rliqjkvKDpgJLnu5nkuIvkuIDkuKpoYW5kbGVyXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuino+eggeW8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5oC75L2T5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICB9XG59XG5gYGBcblxuYEJ5dGVUb01lc3NhZ2VEZWNvZGVyYOS8muiHquWKqOWwhmBvdXRg5YiX6KGo5Lit55qE5a+56LGh5Lyg6YCS57uZ5LiL5LiA5LiqaGFuZGxlcu+8jOS4jemcgOimgeaYvuW8j+iwg+eUqGBmaXJlQ2hhbm5lbFJlYWRg44CCXG5cbiMjIyBDb21wcmVzc2lvbkNvZWRDXG5cbmBgYGphdmFcbkBPdmVycmlkZVxucHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIC8vIC4uLuWkhOeQhumAu+i+kS4uLlxuICAgIFxuICAgIC8vIOWIm+W7uuino+WOi+WQjueahCBCeXRlQnVmXG4gICAgQnl0ZUJ1ZiByZXN1bHQgPSBjdHguYWxsb2MoKS5idWZmZXIob3JpZ2luYWxMZW5ndGgpO1xuICAgIHJlc3VsdC53cml0ZUJ5dGVzKGRlY29tcHJlc3NlZCwgMCwgb3JpZ2luYWxMZW5ndGgpO1xuICAgIG91dC5hZGQocmVzdWx0KTsgIC8vIOi/memHjOa3u+WKoOWIsG91dOWIl+ihqO+8jE5ldHR55Lya6Ieq5Yqo5Lyg6YCS57uZ5LiL5LiA5LiqaGFuZGxlclxufVxuYGBgXG5cbuWQjOagt++8jGBCeXRlVG9NZXNzYWdlQ29kZWNg5Lmf5Lya6Ieq5Yqo5aSE55CG5LqL5Lu25Lyg6YCS44CCXG5cbiMjIyBNeUNvbW1hbmRIYW5kbGVyXG5cbmBgYGphdmFcbkBPdmVycmlkZVxucHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgaWYgKG1zZyBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBtc2c7XG4gICAgICAgIFJlc3AgcmVzcG9uc2UgPSBwcm9jZXNzQ29tbWFuZChhcnJheSk7XG4gICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSk7ICAvLyDnm7TmjqXlhpnlm57lk43lupRcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biByZXF1ZXN0IHR5cGVcIikpO1xuICAgIH1cbn1cbmBgYFxuXG7kvZzkuLpwaXBlbGluZeS4reeahOacgOWQjuS4gOS4qmhhbmRsZXLvvIxgTXlDb21tYW5kSGFuZGxlcmDkuI3pnIDopoHlsIbmtojmga/kvKDpgJLnu5nkuIvkuIDkuKpoYW5kbGVy77yM6ICM5piv55u05o6l5aSE55CG5bm26L+U5Zue5ZON5bqU44CCXG5cbiMjIOW7uuiurlxuXG7mgqjlvZPliY3nmoTlrp7njrDmmK/mraPnoa7nmoTvvIzkuI3pnIDopoHmt7vliqBgZmlyZUNoYW5uZWxSZWFkYOiwg+eUqOOAguWmguaenOaCqOa3u+WKoOS6hui/meS6m+iwg+eUqO+8jOWPr+iDveS8muWvvOiHtOa2iOaBr+iiq+mHjeWkjeWkhOeQhuaIluWHuueOsOWFtuS7luaEj+WkluihjOS4uuOAglxuXG7lpoLmnpzmgqjmnInnibnlrprnmoTpnIDmsYLvvIzkvovlpoLpnIDopoHlnKjmn5DkuKpoYW5kbGVy5Lit5oum5oiq5raI5oGv5bm25Yaz5a6a5piv5ZCm57un57ut5Lyg6YCS77yM6YKj5LmI5oKo5Y+v5Lul6ICD6JmR5L2/55SoYGZpcmVDaGFubmVsUmVhZGDvvIzkvYblnKjlpKflpJrmlbDmg4XlhrXkuIvvvIzorqlOZXR0eeeahOWfuuexu+WkhOeQhuS6i+S7tuS8oOmAkuaYr+abtOWlveeahOWBmuazleOAglxuXG7mgqjnmoRwaXBlbGluZeiuvuiuoemBteW+quS6hk5ldHR555qE5pyA5L2z5a6e6Le177yM5L+d5oyB6L+Z56eN5pa55byP5piv5ZCI6YCC55qE44CCXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9zZXJ2ZXIvTXlSZWRpc1NlcnZpY2UuamF2YVxuLi4uXG5cbmltcG9ydCBpby5uZXR0eS5ib290c3RyYXAuU2VydmVyQm9vdHN0cmFwO1xuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5Qb29sZWRCeXRlQnVmQWxsb2NhdG9yO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuKjtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLnNvY2tldC5Tb2NrZXRDaGFubmVsO1xuaW1wb3J0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5EZWZhdWx0RXZlbnRFeGVjdXRvckdyb3VwO1xuaW1wb3J0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5EZWZhdWx0VGhyZWFkRmFjdG9yeTtcbmltcG9ydCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuRXZlbnRFeGVjdXRvckdyb3VwO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZUltcGw7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZTeW5jU3RyYXRlZ3k7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNsdXN0ZXIuQ2x1c3RlckNsaWVudDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5DbHVzdGVyTm9kZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5SZWRpc0NsdXN0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLkNvbXByZXNzaW9uQ29lZEM7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLk15Q29tbWFuZEhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLk15RGVjb2RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29kZXIuTXlSZXNwb25zZUVuY29kZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuRGVmYXVsdENoYW5uZWxTZWxlY3RTdHJhdGVneTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5Mb2NhbENoYW5uZWxPcHRpb247XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDtcblxucHVibGljIGNsYXNzIE15UmVkaXNTZXJ2aWNlIGltcGxlbWVudHMgUmVkaXNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihNeVJlZGlzU2VydmljZS5jbGFzcyk7XG5cbiAgICAvLyDpgJrov4fkv67mlLnov5nkupvmoIflv5fmnaXlvIDlkK/miJblhbPpl61BT0blkoxSRELlip/og71cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29sZWFuIEVOQUJMRV9BT0YgPSB0cnVlO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGJvb2xlYW4gRU5BQkxFX1JEQiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBFTkFCTEVfQ09NUFJFU1NJT04gPSBmYWxzZTtcblxuICAgIC8vIOm7mOiupOaVsOaNruW6k+aVsOmHj++8jOS4jlJlZGlz6buY6K6k5YC85L+d5oyB5LiA6Ie0XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IERFRkFVTFRfREJfTlVNID0gMTY7XG5cbiAgICBwcml2YXRlIFJlZGlzQ2x1c3RlciBjbHVzdGVyO1xuICAgIHByaXZhdGUgQ2x1c3Rlck5vZGUgY3VycmVudE5vZGU7XG4gICAgcHJpdmF0ZSBNYXA8U3RyaW5nLCBDbHVzdGVyQ2xpZW50PiBjbHVzdGVyQ2xpZW50cyA9IG5ldyBDb25jdXJyZW50SGFzaE1hcDw+KCk7XG4gICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIgY29tbWFuZEhhbmRsZXI7XG5cbiAgICBwcml2YXRlIGZpbmFsIGludCBwb3J0O1xuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIExvY2FsQ2hhbm5lbE9wdGlvbiBjaGFubmVsT3B0aW9uO1xuICAgIHByaXZhdGUgZmluYWwgRXZlbnRFeGVjdXRvckdyb3VwIGNvbW1hbmRFeGVjdXRvcjtcbiAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcjtcblxuICAgIHByaXZhdGUgQ2hhbm5lbCBzZXJ2ZXJDaGFubmVsO1xuICAgIHByaXZhdGUgRXZlbnRMb29wR3JvdXAgYm9zc0dyb3VwO1xuICAgIHByaXZhdGUgRXZlbnRMb29wR3JvdXAgd29ya2VyR3JvdXA7XG5cbiAgICAvLyDmt7vliqDmlrnms5XnrqHnkIbpm4bnvqTov57mjqVcbiAgICBwdWJsaWMgdm9pZCBhZGRDbHVzdGVyQ2xpZW50KFN0cmluZyBub2RlSWQsIENsdXN0ZXJDbGllbnQgY2xpZW50KSB7XG4gICAgICAgIGNsdXN0ZXJDbGllbnRzLnB1dChub2RlSWQsIGNsaWVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIENsdXN0ZXJDbGllbnQgZ2V0Q2x1c3RlckNsaWVudChTdHJpbmcgbm9kZUlkKSB7XG4gICAgICAgIHJldHVybiBjbHVzdGVyQ2xpZW50cy5nZXQobm9kZUlkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDbHVzdGVyKFJlZGlzQ2x1c3RlciBjbHVzdGVyKSB7XG4gICAgICAgIHRoaXMuY2x1c3RlciA9IGNsdXN0ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIFJlZGlzQ2x1c3RlciBnZXRDbHVzdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbHVzdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEN1cnJlbnROb2RlKENsdXN0ZXJOb2RlIG5vZGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG5vZGU7XG4gICAgfVxuXG4gICAgcHVibGljIE15UmVkaXNTZXJ2aWNlKGludCBwb3J0KSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICB0aGlzKHBvcnQsIERFRkFVTFRfREJfTlVNKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgTXlSZWRpc1NlcnZpY2UoaW50IHBvcnQsIGludCBkYk51bSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSBuZXcgUmVkaXNDb3JlSW1wbChkYk51bSwgdGhpcyk7XG4gICAgICAgIHRoaXMuY2hhbm5lbE9wdGlvbiA9IG5ldyBEZWZhdWx0Q2hhbm5lbFNlbGVjdFN0cmF0ZWd5KCkuc2VsZWN0KCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEV4ZWN1dG9yID0gbmV3IERlZmF1bHRFdmVudEV4ZWN1dG9yR3JvdXAoMSxcbiAgICAgICAgICAgICAgICBuZXcgRGVmYXVsdFRocmVhZEZhY3RvcnkoXCJyZWRpcy1jbWRcIikpO1xuXG4gICAgICAgIC8vIOagueaNrumFjee9ruWGs+WumuaYr+WQpuWIneWni+WMllJEQuWkhOeQhuWZqFxuICAgICAgICBpZiAoRU5BQkxFX1JEQikge1xuICAgICAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gbmV3IFJEQkhhbmRsZXIocmVkaXNDb3JlKTtcbiAgICAgICAgICAgICgoUmVkaXNDb3JlSW1wbCkgcmVkaXNDb3JlKS5zZXRSREJIYW5kbGVyKHRoaXMucmRiSGFuZGxlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJkYkhhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5qC55o2u6YWN572u5Yaz5a6a5piv5ZCm5Yid5aeL5YyWQU9G5aSE55CG5ZmoXG4gICAgICAgIGlmIChFTkFCTEVfQU9GKSB7XG4gICAgICAgICAgICB0aGlzLmFvZkhhbmRsZXIgPSBuZXcgQU9GSGFuZGxlcihcInJlZGlzLmFvZlwiLCByZWRpc0NvcmUpO1xuICAgICAgICAgICAgdGhpcy5hb2ZIYW5kbGVyLnNldFN5bmNTdHJhdGVneShBT0ZTeW5jU3RyYXRlZ3kuRVZFUllTRUMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hb2ZIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmJvc3NHcm91cCA9IGNoYW5uZWxPcHRpb24uYm9zcygpO1xuICAgICAgICB0aGlzLndvcmtlckdyb3VwID0gY2hhbm5lbE9wdGlvbi5zZWxlY3RvcnMoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKEVOQUJMRV9SREIgJiYgcmRiSGFuZGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZGJIYW5kbGVyLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKEVOQUJMRV9BT0YgJiYgYW9mSGFuZGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hb2ZIYW5kbGVyLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hb2ZIYW5kbGVyLmxvYWQocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Yib5bu657uf5LiA55qE5ZG95Luk5aSE55CG5ZmoXG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRIYW5kbGVyID0gbmV3IE15Q29tbWFuZEhhbmRsZXIocmVkaXNDb3JlLCBhb2ZIYW5kbGVyLCByZGJIYW5kbGVyKTtcblxuICAgICAgICAgICAgU2VydmVyQm9vdHN0cmFwIGJvb3RzdHJhcCA9IG5ldyBTZXJ2ZXJCb290c3RyYXAoKTtcbiAgICAgICAgICAgIGJvb3RzdHJhcC5ncm91cChib3NzR3JvdXAsIHdvcmtlckdyb3VwKVxuICAgICAgICAgICAgICAgICAgICAuY2hhbm5lbChjaGFubmVsT3B0aW9uLmdldENoYW5uZWxDbGFzcygpKS5cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRPcHRpb24oQ2hhbm5lbE9wdGlvbi5TT19LRUVQQUxJVkUsIHRydWUpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLlRDUF9OT0RFTEFZLCB0cnVlKS5cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRPcHRpb24oQ2hhbm5lbE9wdGlvbi5BTExPQ0FUT1IsIFBvb2xlZEJ5dGVCdWZBbGxvY2F0b3IuREVGQVVMVClcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkSGFuZGxlcihuZXcgQ2hhbm5lbEluaXRpYWxpemVyPFNvY2tldENoYW5uZWw+KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBpbml0Q2hhbm5lbChTb2NrZXRDaGFubmVsIGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbm5lbFBpcGVsaW5lIHBpcGVsaW5lID0gY2gucGlwZWxpbmUoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlEZWNvZGVyKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlSZXNwb25zZUVuY29kZXIoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihFTkFCTEVfQ09NUFJFU1NJT04pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBDb21wcmVzc2lvbkNvZWRDKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KGNvbW1hbmRFeGVjdXRvciwgY29tbWFuZEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8g5pS55Li65byC5q2l57uR5a6aXG4gICAgICAgICAgICBib290c3RyYXAuYmluZChwb3J0KS5hZGRMaXN0ZW5lcigoQ2hhbm5lbEZ1dHVyZSBmdXR1cmUpIC0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZnV0dXJlLmlzU3VjY2VzcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyQ2hhbm5lbCA9IGZ1dHVyZS5jaGFubmVsKCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlZGlz5pyN5Yqh5bey5ZCv5Yqo77yM55uR5ZCs56uv5Y+jOiBcIiArIHBvcnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOWFs+mXreebkeWQrOWZqFxuICAgICAgICAgICAgICAgICAgICBmdXR1cmUuY2hhbm5lbCgpLmNsb3NlRnV0dXJlKCkuYWRkTGlzdGVuZXIoY2xvc2VGdXR1cmUgLT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZUZ1dHVyZS5pc1N1Y2Nlc3MoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuacjeWKoeWZqOW8guW4uOWFs+mXrVwiLCBjbG9zZUZ1dHVyZS5jYXVzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5ZCv5Yqo5pyN5Yqh5aSx6LSl77yM56uv5Y+jOiBcIiArIHBvcnQsIGZ1dHVyZS5jYXVzZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuacjeWKoeWZqOWQr+WKqOW8guW4uFwiLCBlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICBwdWJsaWMgdm9pZCBzZW5kTWVzc2FnZVRvTm9kZShTdHJpbmcgdG9Ob2RlSWQsIFJlc3AgbWVzc2FnZSkge1xuICAgICAgICBDbHVzdGVyQ2xpZW50IGNsaWVudCA9IGNsdXN0ZXJDbGllbnRzLmdldCh0b05vZGVJZCk7XG4gICAgICAgIGlmIChjbGllbnQgIT0gbnVsbCAmJiBjbGllbnQuaXNBY3RpdmUoKSkgeyAgLy8g56Gu5L+d6L+e5o6l5rS76LeDXG4gICAgICAgICAgICBjbGllbnQuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJObyBhY3RpdmUgY29ubmVjdGlvbiB0byBub2RlIFwiICsgdG9Ob2RlSWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIE15UmVkaXNTZXJ2aWNlIGdldFJlZGlzU2VydmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlZGlzQ29yZSBnZXRSZWRpc0NvcmUoKSB7XG4gICAgICAgIHJldHVybiByZWRpc0NvcmU7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRQb3J0KCkge1xuICAgICAgICByZXR1cm4gcG9ydDtcbiAgICB9XG5cbiAgICBwdWJsaWMgUmVzcCBleGVjdXRlQ29tbWFuZChSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kSGFuZGxlci5wcm9jZXNzQ29tbWFuZChjb21tYW5kQXJyYXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBDbHVzdGVyTm9kZSBnZXRDdXJyZW50Tm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudE5vZGU7XG4gICAgfVxuXG4gICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIgZ2V0Q29tbWFuZEhhbmRsZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmRIYW5kbGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBBT0ZIYW5kbGVyIGdldEFvZkhhbmRsZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFvZkhhbmRsZXI7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvQU9GSGFuZGxlci5qYXZhXG4uLi5cblxuICAgIC8qKlxuICAgICAqIOaehOmAoEFPRuWkhOeQhuWZqFxuICAgICAqIEBwYXJhbSBmaWxlbmFtZSBBT0bmlofku7blkI1cbiAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIOWmguaenOWIm+W7uuaWh+S7tuWksei0pVxuICAgICAqL1xuICAgIHB1YmxpYyBBT0ZIYW5kbGVyKFN0cmluZyBmaWxlbmFtZSwgUmVkaXNDb3JlIHJlZGlzQ29yZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICAvLyAxLiDorr7nva7pu5jorqTlkIzmraXnrZbnlaXkuLrmr4/np5LlkIzmraVcbiAgICAgICAgdGhpcy5zeW5jU3RyYXRlZ3kgPSBBT0ZTeW5jU3RyYXRlZ3kuRVZFUllTRUM7XG4gICAgICAgIC8vIDIuIOWIm+W7ukFPRuWGmeWFpeWZqFxuICAgICAgICB0aGlzLndyaXRlciA9IG5ldyBBT0ZXcml0ZXIoZmlsZW5hbWUsIHN5bmNTdHJhdGVneSk7XG4gICAgICAgIC8vIDMuIOWIm+W7ukFPRuWkhOeQhuWZqO+8jOiuvue9rue8k+WGsuWMuuWkp+Wwj+S4ujJNQlxuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IG5ldyBBT0ZQcm9jZXNzb3Iod3JpdGVyLCAyICogMTAyNCAqIDEwMjQpO1xuICAgICAgICAvLyA0LiDliJvlu7pBT0bliqDovb3lmahcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBuZXcgQU9GTG9hZGVyKCk7XG4gICAgICAgIC8vIDUuIOWIm+W7ukFPRuWQjuWPsOacjeWKoVxuICAgICAgICB0aGlzLmJhY2tncm91bmRTZXJ2aWNlID0gbmV3IEFPRkJhY2tncm91bmRTZXJ2aWNlKHByb2Nlc3Nvciwgc3luY1N0cmF0ZWd5KTtcblxuICAgICAgICB0aGlzLnJld3JpdGVyID0gbmV3IEFPRlJld3JpdGVyKHJlZGlzQ29yZSwgZmlsZW5hbWUsMioxMDI0KjEwMjQpO1xuICAgICAgICB0aGlzLnJld3JpdGluZyA9IG5ldyBBdG9taWNCb29sZWFuKGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlkK/liqhBT0blpITnkIblmahcbiAgICAgKi9cbiAgICBwdWJsaWMgdm9pZCBzdGFydCgpIHtcbiAgICAgICAgLy8g5ZCv5Yqo5ZCO5Y+w5pyN5YqhXG4gICAgICAgIGJhY2tncm91bmRTZXJ2aWNlLnN0YXJ0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L+95Yqg5ZG95Luk5YiwQU9GXG4gICAgICogQHBhcmFtIGNvbW1hbmQg6KaB6L+95Yqg55qE5ZG95LukXG4gICAgICovXG4gICAgcHVibGljIHZvaWQgYXBwZW5kKFJlc3AgY29tbWFuZCkge1xuICAgICAgICAvLyDlsIblkb3ku6TkuqTnu5nlpITnkIblmajvvIzlpITnkIblmajkvJrku47lr7nlupTnmoRDb21tYW5k6Zif5YiX5Lit6I635Y+W5ZG95LukXG4gICAgICAgIHByb2Nlc3Nvci5hcHBlbmQoY29tbWFuZCk7XG5cbiAgICAgICAgaWYoY29sbGVjdGluZ1Jld3JpdGVCdWZmZXIuZ2V0KCkgJiYgcmV3cml0ZUJ1ZmZlciAhPSBudWxsKXtcbiAgICAgICAgICAgIEJ5dGVCdWYgYnVmID0gVW5wb29sZWQuZGlyZWN0QnVmZmVyKCk7XG4gICAgICAgICAgICBjb21tYW5kLndyaXRlKGNvbW1hbmQsIGJ1Zik7XG4gICAgICAgICAgICBCeXRlQnVmZmVyIGJ5dGVCdWZmZXIgPSBidWYubmlvQnVmZmVyKCk7XG4gICAgICAgICAgICByZXdyaXRlQnVmZmVyLmFkZChieXRlQnVmZmVyKTtcbiAgICAgICAgICAgIGJ1Zi5yZWxlYXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlgZzmraJBT0blpITnkIblmahcbiAgICAgKi9cbiAgICBwdWJsaWMgdm9pZCBzdG9wKCkge1xuICAgICAgICAvLyAxLiDlgZzmraLlkI7lj7DmnI3liqFcbiAgICAgICAgYmFja2dyb3VuZFNlcnZpY2Uuc3RvcCgpO1xuICAgICAgICAvLyAyLiDlhbPpl63lhpnlhaXlmahcbiAgICAgICAgd3JpdGVyLmNsb3NlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDorr7nva7lkIzmraXnrZbnlaVcbiAgICAgKiBAcGFyYW0gc3RyYXRlZ3kg5paw55qE5ZCM5q2l562W55WlXG4gICAgICovXG4gICAgcHVibGljIHZvaWQgc2V0U3luY1N0cmF0ZWd5KEFPRlN5bmNTdHJhdGVneSBzdHJhdGVneSkge1xuICAgICAgICB0aGlzLnN5bmNTdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXI7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5TaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLkFPRkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNsdXN0ZXIuUmVkaXNDbHVzdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguc2VydmVyLk15UmVkaXNTZXJ2aWNlO1xuXG5pbXBvcnQgamF2YS51dGlsLkVudW1TZXQ7XG5pbXBvcnQgamF2YS51dGlsLlNldDtcbi4uLlxuXG4gICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSwgQU9GSGFuZGxlciBhb2ZIYW5kbGVyLCBSREJIYW5kbGVyIHJkYkhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSByZWRpc0NvcmU7XG4gICAgICAgIHRoaXMuYW9mSGFuZGxlciA9IGFvZkhhbmRsZXI7XG4gICAgICAgIHRoaXMucmRiSGFuZGxlciA9IHJkYkhhbmRsZXI7XG5cblxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHByb3RlY3RlZCB2b2lkIGNoYW5uZWxSZWFkMChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIG1zZykge1xuICAgICAgICBpZiAobXNnIGluc3RhbmNlb2YgUmVzcEFycmF5KSB7XG4gICAgICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBtc2c7XG4gICAgICAgICAgICBSZXNwIHJlc3BvbnNlID0gcHJvY2Vzc0NvbW1hbmQoYXJyYXkpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gcmVxdWVzdCB0eXBlXCIpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBSZXNwIHByb2Nlc3NDb21tYW5kKFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgaWYgKGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBlbXB0eSBjb21tYW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlc3BbXSBhcnJheSA9IGNvbW1hbmRBcnJheS5nZXRBcnJheSgpO1xuICAgICAgICAgICAgU3RyaW5nIGNvbW1hbmROYW1lID0gKChCdWxrU3RyaW5nKSBhcnJheVswXSkuZ2V0Q29udGVudCgpLnRvVXRmOFN0cmluZygpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICBDb21tYW5kVHlwZSBjb21tYW5kVHlwZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kVHlwZSA9IENvbW1hbmRUeXBlLnZhbHVlT2YoY29tbWFuZE5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiB1bmtub3duIGNvbW1hbmQgJ1wiICsgY29tbWFuZE5hbWUgKyBcIidcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRIYW5kbGVJbkNsdXN0ZXIoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2x1c3RlckNvbW1hbmQoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChhcnJheSk7XG5cbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcblxuICAgICAgICAgICAgaWYgKHJkYkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkgJiYgYXJyYXkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksICgoQnVsa1N0cmluZykgYXJyYXlbMV0pLmdldENvbnRlbnQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICBpZiAoY3VycmVudE5vZGVJZC5lcXVhbHModGFyZ2V0Tm9kZUlkKSkge1xuICAgICAgICAgICAgQ29tbWFuZCBjb21tYW5kID0gY29tbWFuZFR5cGUuZ2V0U3VwcGxpZXIoKS5hcHBseShyZWRpc0NvcmUpO1xuICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGNvbW1hbmRBcnJheS5nZXRBcnJheSgpKTtcbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcblxuICAgICAgICAgICAgLy8g56Gu5L+d5pys5Zyw5omn6KGM5pe25Lmf6Kem5Y+RUkRCXG4gICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmRiSGFuZGxlci5ub3RpZnlEYXRhQ2hhbmdlZChyZWRpc0NvcmUuZ2V0Q3VycmVudERCKCkuZ2V0SWQoKSwga2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gZm9yd2FyZFRvVGFyZ2V0Tm9kZSh0YXJnZXROb2RlSWQsIGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcHJvY2Vzc29yL0FPRlByb2Nlc3Nvci5qYXZhXG4uLi5cblxuXG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgYmF0Y2hTaXplO1xuICAgIHByaXZhdGUgQnl0ZUJ1ZiBiYXRjaEJ1ZmZlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJlZW50cmFudExvY2sgYmF0Y2hMb2NrID0gbmV3IFJlZW50cmFudExvY2soKTtcbiAgICAvKipcbiAgICAgKiDmnoTpgKBBT0blpITnkIblmahcbiAgICAgKiBAcGFyYW0gd3JpdGVyIOaWh+S7tuWGmeWFpeWZqFxuICAgICAqIEBwYXJhbSBidWZmZXJTaXplIOe8k+WGsuWMuuWkp+Wwj1xuICAgICAqL1xuICAgIHB1YmxpYyBBT0ZQcm9jZXNzb3IoV3JpdGVyIHdyaXRlciwgaW50IGJ1ZmZlclNpemUsIGludCBiYXRjaFNpemUpIHtcbiAgICAgICAgLy8gMS4g5Yid5aeL5YyW57uE5Lu2XG4gICAgICAgIHRoaXMud3JpdGVyID0gd3JpdGVyO1xuICAgICAgICB0aGlzLmJ1ZmZlclF1ZXVlID0gbmV3IERvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUoYnVmZmVyU2l6ZSk7XG4gICAgICAgIHRoaXMucnVubmluZyA9IG5ldyBBdG9taWNCb29sZWFuKHRydWUpO1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IGJhdGNoU2l6ZTtcbiAgICAgICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFVucG9vbGVkLmRpcmVjdEJ1ZmZlcihiYXRjaFNpemUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBBT0ZQcm9jZXNzb3IoV3JpdGVyIHdyaXRlciwgaW50IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgdGhpcyh3cml0ZXIsIGJ1ZmZlclNpemUsIDQwOTYpOyAvLyDpu5jorqTmibnlpITnkIblpKflsI/kuLo0S0JcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBhcHBlbmQoUmVzcCBjb21tYW5kKSB7XG4gICAgICAgIC8vIOWmguaenOS4jeWcqOi/kOihjOeKtuaAge+8jOS4jeWkhOeQhuWRveS7pFxuICAgICAgICBpZiAoIXJ1bm5pbmcuZ2V0KCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyQ29udGV4dDtcbmltcG9ydCBpby5uZXR0eS5oYW5kbGVyLmNvZGVjLkJ5dGVUb01lc3NhZ2VEZWNvZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouKjtcblxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5wdWJsaWMgY2xhc3MgTXlEZWNvZGVyIGV4dGVuZHMgQnl0ZVRvTWVzc2FnZURlY29kZXIge1xuICAgIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15RGVjb2Rlci5jbGFzcyk7XG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi5byA5aeL6Kej56CBXCIpO1xuICAgICAgICAgICAgICAgIC8vIOagh+iusOW9k+WJjeivu+WPluS9jee9rlxuICAgICAgICAgICAgICAgIGluLm1hcmtSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIFJlc3AgZGVjb2RlZCA9IFJlc3AuZGVjb2RlKGluKTtcbiAgICAgICAgICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuino+eggeaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LmFkZChkZWNvZGVkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLop6PnoIHlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5oC75L2T5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZlV0aWw7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG5pbXBvcnQgaW8ubmV0dHkuaGFuZGxlci5jb2RlYy5NZXNzYWdlVG9CeXRlRW5jb2RlcjtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcblxucHVibGljIGNsYXNzIE15UmVzcG9uc2VFbmNvZGVyIGV4dGVuZHMgTWVzc2FnZVRvQnl0ZUVuY29kZXI8UmVzcD4ge1xuICAgIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15UmVzcG9uc2VFbmNvZGVyLmNsYXNzKTtcbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBlbmNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCByZXNwLCBCeXRlQnVmIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwLndyaXRlKHJlc3AsIG91dCk7XG4gICAgICAgICAgICAvLy8vbG9nZ2VyLmluZm8oXCJFbmNvZGVkIHJlc3BvbnNlOiBcIiArIEJ5dGVCdWZVdGlsLmhleER1bXAob3V0KSk7XG4gICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIue8lueggeW8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBjdHguY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NsdXN0ZXIvQ2x1c3RlckNsaWVudC5qYXZhXG4uLi5cblxuICAgIHB1YmxpYyBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBjb25uZWN0KCkge1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuXG4gICAgICAgIGdyb3VwID0gbmV3IE5pb0V2ZW50TG9vcEdyb3VwKCk7XG4gICAgICAgIEJvb3RzdHJhcCBib290c3RyYXAgPSBuZXcgQm9vdHN0cmFwKCk7XG4gICAgICAgIGJvb3RzdHJhcC5ncm91cChncm91cClcbiAgICAgICAgICAgICAgICAuY2hhbm5lbChOaW9Tb2NrZXRDaGFubmVsLmNsYXNzKVxuICAgICAgICAgICAgICAgIC5vcHRpb24oQ2hhbm5lbE9wdGlvbi5DT05ORUNUX1RJTUVPVVRfTUlMTElTLCA1MDAwKVxuICAgICAgICAgICAgICAgIC5oYW5kbGVyKG5ldyBDaGFubmVsSW5pdGlhbGl6ZXI8U29ja2V0Q2hhbm5lbD4oKSB7XG4gICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBpbml0Q2hhbm5lbChTb2NrZXRDaGFubmVsIGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDaGFubmVsUGlwZWxpbmUgcGlwZWxpbmUgPSBjaC5waXBlbGluZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlEZWNvZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlSZXNwb25zZUVuY29kZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBDbHVzdGVyQ2xpZW50SGFuZGxlcigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbm5lY3RXaXRoUmV0cnkoYm9vdHN0cmFwLCBob3N0LCBwb3J0LCBmdXR1cmUsIDMsIDEwMDApO1xuICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvQ29tcHJlc3Npb25Db2VkQy5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIENvbXByZXNzaW9uQ29lZEMgZXh0ZW5kcyBCeXRlVG9NZXNzYWdlQ29kZWM8Qnl0ZUJ1Zj4ge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQ29tcHJlc3Npb25Db2VkQy5jbGFzcyk7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IENPTVBSRVNTSU9OX1RIUkVTSE9MRCA9IDY0O1xuICAgIHByaXZhdGUgZmluYWwgTFo0Q29tcHJlc3NvciBjb21wcmVzc29yO1xuICAgIHByaXZhdGUgZmluYWwgTFo0RmFzdERlY29tcHJlc3NvciBkZWNvbXByZXNzb3I7XG5cbiAgICBwdWJsaWMgQ29tcHJlc3Npb25Db2VkQygpIHtcbiAgICAgICAgdGhpcy5jb21wcmVzc29yID0gTFo0RmFjdG9yeS5mYXN0ZXN0SW5zdGFuY2UoKS5mYXN0Q29tcHJlc3NvcigpO1xuICAgICAgICB0aGlzLmRlY29tcHJlc3NvciA9IExaNEZhY3RvcnkuZmFzdGVzdEluc3RhbmNlKCkuZmFzdERlY29tcHJlc3NvcigpO1xuICAgICAgICBsb2dnZXIuaW5mbyhcIuWIneWni+WMluWOi+e8qee8luino+eggeWZqO+8jOWOi+e8qemYiOWAvDogXCIgKyBDT01QUkVTU0lPTl9USFJFU0hPTEQgKyBcIiDlrZfoioJcIik7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZW5jb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgbXNnLCBCeXRlQnVmIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgIC8vIOS/neWtmOWOn+Wni3JlYWRlckluZGV4XG4gICAgICAgIGludCByZWFkZXJJbmRleCA9IG1zZy5yZWFkZXJJbmRleCgpO1xuICAgICAgICBpbnQgb3JpZ2luYWxTaXplID0gbXNnLnJlYWRhYmxlQnl0ZXMoKTtcbi4uLlxuXG4gICAgICAgICAgICBmbG9hdCBjb21wcmVzc2lvblJhdGlvID0gKGZsb2F0KWNvbXByZXNzZWRMZW5ndGggLyBvcmlnaW5hbFNpemUgKiAxMDA7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhTdHJpbmcuZm9ybWF0KFwi5pWw5o2u5bey5Y6L57ypOiDljp/lp4vlpKflsI89JWTlrZfoioIsIOWOi+e8qeWQjj0lZOWtl+iKgiwg5Y6L57yp546HPSUuMmYlJVwiLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFNpemUsIGNvbXByZXNzZWRMZW5ndGgsIGNvbXByZXNzaW9uUmF0aW8pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOacquWOi+e8qeeahOaDheWGtVxuICAgICAgICAgICAgb3V0LndyaXRlQnl0ZSgwKTtcbiAgICAgICAgICAgIG91dC53cml0ZUludChvcmlnaW5hbFNpemUpO1xuICAgICAgICAgICAgb3V0LndyaXRlQnl0ZXMobXNnLCByZWFkZXJJbmRleCwgb3JpZ2luYWxTaXplKTtcblxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCLmlbDmja7mnKrljovnvKk6IOWkp+Wwjz1cIiArIG9yaWdpbmFsU2l6ZSArIFwi5a2X6IqCICjlsI/kuo7pmIjlgLwpXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBkZWNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgQnl0ZUJ1ZiBpbiwgTGlzdDxPYmplY3Q+IG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgIC8vIOajgOafpeaYr+WQpuaciei2s+Wkn+eahOaVsOaNruadpeivu+WPluagh+iusFxuICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaW4ubWFya1JlYWRlckluZGV4KCk7XG5cbiAgICAgICAgLy8g6K+75Y+W5Y6L57yp5qCH6K6wXG4gICAgICAgIGJ5dGUgaXNDb21wcmVzc2VkID0gaW4ucmVhZEJ5dGUoKTtcbi4uLlxuXG4gICAgICAgICAgICAvLyDor7vlj5bljovnvKnmlbDmja5cbiAgICAgICAgICAgIGJ5dGVbXSBjb21wcmVzc2VkID0gbmV3IGJ5dGVbY29tcHJlc3NlZExlbmd0aF07XG4gICAgICAgICAgICBpbi5yZWFkQnl0ZXMoY29tcHJlc3NlZCk7XG5cbiAgICAgICAgICAgIC8vIOino+WOi+e8qeaVsOaNrlxuICAgICAgICAgICAgYnl0ZVtdIGRlY29tcHJlc3NlZCA9IG5ldyBieXRlW29yaWdpbmFsTGVuZ3RoXTtcbiAgICAgICAgICAgIGRlY29tcHJlc3Nvci5kZWNvbXByZXNzKGNvbXByZXNzZWQsIDAsIGRlY29tcHJlc3NlZCwgMCwgb3JpZ2luYWxMZW5ndGgpO1xuXG4gICAgICAgICAgICAvLyDliJvlu7rop6PljovlkI7nmoQgQnl0ZUJ1ZlxuICAgICAgICAgICAgQnl0ZUJ1ZiByZXN1bHQgPSBjdHguYWxsb2MoKS5idWZmZXIob3JpZ2luYWxMZW5ndGgpO1xuICAgICAgICAgICAgcmVzdWx0LndyaXRlQnl0ZXMoZGVjb21wcmVzc2VkLCAwLCBvcmlnaW5hbExlbmd0aCk7XG4gICAgICAgICAgICBvdXQuYWRkKHJlc3VsdCk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFN0cmluZy5mb3JtYXQoXCLmlbDmja7lt7Lop6PljovnvKk6IOWOi+e8qeWkp+Wwjz0lZOWtl+iKgiwg6Kej5Y6L5ZCOPSVk5a2X6IqCXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbXByZXNzZWRMZW5ndGgsIG9yaWdpbmFsTGVuZ3RoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDpnIDopoHor7vlj5bmnKrljovnvKnplb/luqZcbiAgICAgICAgICAgIGlmIChpbi5yZWFkYWJsZUJ5dGVzKCkgPCA0KSB7XG4gICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g6K+75Y+W5pyq5Y6L57yp6ZW/5bqmXG4gICAgICAgICAgICBpbnQgbGVuZ3RoID0gaW4ucmVhZEludCgpO1xuXG4gICAgICAgICAgICAvLyDnoa7kv53mnInotrPlpJ/nmoTmlbDmja5cbiAgICAgICAgICAgIGlmIChpbi5yZWFkYWJsZUJ5dGVzKCkgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9wcm90b2NhbC9FcnJvcnMuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTgucHJvdG9jYWw7XG5cblxuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuXG5wdWJsaWMgY2xhc3MgRXJyb3JzIGV4dGVuZHMgUmVzcFxue1xuICAgIFN0cmluZyBjb250ZW50O1xuXG4gICAgcHVibGljIEVycm9ycyhTdHJpbmcgY29udGVudClcbiAgICB7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRDb250ZW50KClcbiAgICB7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHdyaXRlKFJlc3AgcmVzcCwgQnl0ZUJ1ZiBidWZmZXIpIHtcbiAgICAgICAgYnVmZmVyLndyaXRlQnl0ZSgoYnl0ZSkgJy0nKTtcbiAgICAgICAgU3RyaW5nIGNvbnRlbnQgICA9ICgoRXJyb3JzKSByZXNwKS5nZXRDb250ZW50KCk7XG4gICAgICAgIGNoYXJbXSBjaGFyQXJyYXkgPSBjb250ZW50LnRvQ2hhckFycmF5KCk7XG4gICAgICAgIGZvciAoY2hhciBlYWNoIDogY2hhckFycmF5KVxuICAgICAgICB7XG4gICAgICAgICAgICBidWZmZXIud3JpdGVCeXRlKChieXRlKSBlYWNoKTtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXIud3JpdGVCeXRlKChieXRlKSAnXFxyJyk7XG4gICAgICAgIGJ1ZmZlci53cml0ZUJ5dGUoKGJ5dGUpICdcXG4nKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3Byb3RvY2FsL1NpbXBsZVN0cmluZy5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5wcm90b2NhbDtcblxuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuXG5wdWJsaWMgY2xhc3MgU2ltcGxlU3RyaW5nIGV4dGVuZHMgUmVzcFxue1xuICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU2ltcGxlU3RyaW5nIE9LID0gbmV3IFNpbXBsZVN0cmluZyhcIk9LXCIpO1xuICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIGNvbnRlbnQ7XG5cbiAgICBwdWJsaWMgU2ltcGxlU3RyaW5nKFN0cmluZyBjb250ZW50KVxuICAgIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RyaW5nIGdldENvbnRlbnQoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuICAgIHB1YmxpYyAgdm9pZCB3cml0ZShSZXNwIHJlc3AsIEJ5dGVCdWYgYnVmZmVyKVxuICAgIHtcbiAgICAgICAgYnVmZmVyLndyaXRlQnl0ZSgoYnl0ZSkgJysnKTtcbiAgICAgICAgU3RyaW5nIGNvbnRlbnQgICA9ICgoU2ltcGxlU3RyaW5nKSByZXNwKS5nZXRDb250ZW50KCk7XG4gICAgICAgIGNoYXJbXSBjaGFyQXJyYXkgPSBjb250ZW50LnRvQ2hhckFycmF5KCk7XG4gICAgICAgIGZvciAoY2hhciBlYWNoIDogY2hhckFycmF5KVxuICAgICAgICB7XG4gICAgICAgICAgICBidWZmZXIud3JpdGVCeXRlKChieXRlKSBlYWNoKTtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXIud3JpdGVCeXRlKChieXRlKSAnXFxyJyk7XG4gICAgICAgIGJ1ZmZlci4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUpWTTRRdTdwcUVyRTVHbzc5VmNDYVUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6NDQ6MzEuODg0WiIsInJlc3BvbnNlX3RleHQiOiLln7rkuo7lr7nmgqjku6PnoIHnmoTliIbmnpDvvIzmiJHmnaXop6PnrZTmgqjlhbPkuo5waXBlbGluZeS4reeahGhhbmRsZXLmmK/lkKbpnIDopoHlhplgZmlyZUNoYW5uZWxSZWFkYOeahOmXrumimOOAglxuXG4jIyDliIbmnpBcblxu5ZyoTmV0dHnkuK3vvIxgZmlyZUNoYW5uZWxSZWFkYOaWueazleeUqOS6juWwhuS6i+S7tuS8oOmAkue7mXBpcGVsaW5l5Lit55qE5LiL5LiA5LiqaGFuZGxlcuOAguW9k+aCqOafpeeci+aCqOeahOS7o+eggeaXtu+8jOaIkeazqOaEj+WIsO+8mlxuXG4xLiAqKk15RGVjb2Rlcuexuyoq77ya57un5om/6IeqYEJ5dGVUb01lc3NhZ2VEZWNvZGVyYO+8jOWcqGBkZWNvZGVg5pa55rOV5Lit5L2/55SoYG91dC5hZGQoZGVjb2RlZClg5bCG6Kej56CB5ZCO55qE5a+56LGh5re75Yqg5Yiw6L6T5Ye65YiX6KGo5Lit44CCXG5cbjIuICoqTXlDb21tYW5kSGFuZGxlcuexuyoq77ya57un5om/6IeqYFNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjxSZXNwPmDvvIzlnKhgY2hhbm5lbFJlYWQwYOaWueazleS4reWkhOeQhua2iOaBr+W5tuebtOaOpeiwg+eUqGBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSlg5Y+R6YCB5ZON5bqU44CCXG5cbjMuICoqQ29tcHJlc3Npb25Db2VkQ+exuyoq77ya57un5om/6IeqYEJ5dGVUb01lc3NhZ2VDb2RlYzxCeXRlQnVmPmDvvIzlnKhgZGVjb2RlYOaWueazleS4reS9v+eUqGBvdXQuYWRkKHJlc3VsdClg5bCG6Kej56CB5ZCO55qE5a+56LGh5re75Yqg5Yiw6L6T5Ye65YiX6KGo5Lit44CCXG5cbjQuICoqTXlSZXNwb25zZUVuY29kZXLnsbsqKu+8mue7p+aJv+iHqmBNZXNzYWdlVG9CeXRlRW5jb2RlcjxSZXNwPmDvvIzlnKhgZW5jb2RlYOaWueazleS4reWwhuWTjeW6lOWvueixoee8lueggeWIsOi+k+WHukJ5dGVCdWbkuK3jgIJcblxuNS4gKipQaXBlbGluZemFjee9rioq77ya5ZyoYE15UmVkaXNTZXJ2aWNlYOexu+S4re+8jOaCqOeahHBpcGVsaW5l6YWN572u5aaC5LiL77yaXG5gYGBqYXZhXG5waXBlbGluZS5hZGRMYXN0KG5ldyBNeURlY29kZXIoKSk7XG5waXBlbGluZS5hZGRMYXN0KG5ldyBNeVJlc3BvbnNlRW5jb2RlcigpKTtcbmlmKEVOQUJMRV9DT01QUkVTU0lPTil7XG4gICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgQ29tcHJlc3Npb25Db2VkQygpKTtcbn1cbnBpcGVsaW5lLmFkZExhc3QoY29tbWFuZEV4ZWN1dG9yLCBjb21tYW5kSGFuZGxlcik7XG5gYGBcblxuIyMg57uT6K66XG5cbioq5oKo55qE5Luj56CB5Lit5LiN6ZyA6KaB5pi+5byP6LCD55SoYGZpcmVDaGFubmVsUmVhZGDmlrnms5UqKu+8jOWOn+WboOWmguS4i++8mlxuXG4xLiAqKue7p+aJv+eahOWfuuexu+W3sue7j+WkhOeQhuS6huS6i+S7tuS8oOmAkioq77yaXG4gICAtIGBCeXRlVG9NZXNzYWdlRGVjb2RlcmDlkoxgQnl0ZVRvTWVzc2FnZUNvZGVjYOWcqOWGhemDqOS8muiHquWKqOWwhmBvdXRg5YiX6KGo5Lit55qE5a+56LGh5Lyg6YCS57uZ5LiL5LiA5LiqaGFuZGxlclxuICAgLSBgU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyYOWcqOWkhOeQhuWujOa2iOaBr+WQjuS8muiHquWKqOmHiuaUvua2iOaBr++8iOWmguaenOmcgOimge+8iVxuXG4yLiAqKuato+ehrueahOS6i+S7tua1gSoq77yaXG4gICAtIOino+eggeWZqOWwhuWtl+iKgui9rOaNouS4uua2iOaBr+WvueixoeW5tua3u+WKoOWIsGBvdXRg5YiX6KGoXG4gICAtIE5ldHR55qGG5p626Ieq5Yqo5bCG6L+Z5Lqb5a+56LGh5Lyg6YCS57uZ5LiL5LiA5LiqaGFuZGxlclxuICAgLSDlkb3ku6TlpITnkIblmajlpITnkIbmtojmga/lubbnlJ/miJDlk43lupRcbiAgIC0g5ZON5bqU6YCa6L+HYHdyaXRlQW5kRmx1c2hg5Y+R6YCB5Zue5a6i5oi356uv77yM57uP6L+H57yW56CB5Zmo6L2s5o2i5Li65a2X6IqCXG5cbjMuICoq5pi+5byP6LCD55SoYGZpcmVDaGFubmVsUmVhZGDnmoTmg4XlhrUqKu+8mlxuICAgLSDlj6rmnInlvZPmgqjpnIDopoHlnKjlpITnkIbmtojmga/lkI7miYvliqjlsIbmtojmga/kvKDpgJLnu5nkuIvkuIDkuKpoYW5kbGVy5pe25omN6ZyA6KaBXG4gICAtIOS+i+Wmgu+8jOWmguaenOaCqOWcqOS4gOS4qmhhbmRsZXLkuK3lpITnkIbmtojmga/lkI7vvIzov5jluIzmnJvkuIvkuIDkuKpoYW5kbGVy5Lmf5aSE55CG5ZCM5LiA5raI5oGvXG4gICAtIOaIluiAheaCqOWunueOsOS6huiHquWumuS5ieeahGBDaGFubmVsSW5ib3VuZEhhbmRsZXJg6ICM5LiN5piv5L2/55SoTmV0dHnmj5DkvpvnmoTln7rnsbtcblxuIyMg5YW35L2T5YiG5p6QXG5cbiMjIyBNeURlY29kZXJcblxuYGBgamF2YVxuQE92ZXJyaWRlXG5wcm90ZWN0ZWQgdm9pZCBkZWNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgQnl0ZUJ1ZiBpbiwgTGlzdDxPYmplY3Q+IG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA+IDApIHtcbiAgICAgICAgICAgIGluLm1hcmtSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBSZXNwIGRlY29kZWQgPSBSZXNwLmRlY29kZShpbik7XG4gICAgICAgICAgICAgICAgb3V0LmFkZChkZWNvZGVkKTsgIC8vIOi/memHjOa3u+WKoOWIsG91dOWIl+ihqO+8jE5ldHR55Lya6Ieq5Yqo5Lyg6YCS57uZ5LiL5LiA5LiqaGFuZGxlclxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLop6PnoIHlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIGluLnJlc2V0UmVhZGVySW5kZXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIuaAu+S9k+W8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgfVxufVxuYGBgXG5cbmBCeXRlVG9NZXNzYWdlRGVjb2RlcmDkvJroh6rliqjlsIZgb3V0YOWIl+ihqOS4reeahOWvueixoeS8oOmAkue7meS4i+S4gOS4qmhhbmRsZXLvvIzkuI3pnIDopoHmmL7lvI/osIPnlKhgZmlyZUNoYW5uZWxSZWFkYOOAglxuXG4jIyMgQ29tcHJlc3Npb25Db2VkQ1xuXG5gYGBqYXZhXG5AT3ZlcnJpZGVcbnByb3RlY3RlZCB2b2lkIGRlY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBCeXRlQnVmIGluLCBMaXN0PE9iamVjdD4gb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAvLyAuLi7lpITnkIbpgLvovpEuLi5cbiAgICBcbiAgICAvLyDliJvlu7rop6PljovlkI7nmoQgQnl0ZUJ1ZlxuICAgIEJ5dGVCdWYgcmVzdWx0ID0gY3R4LmFsbG9jKCkuYnVmZmVyKG9yaWdpbmFsTGVuZ3RoKTtcbiAgICByZXN1bHQud3JpdGVCeXRlcyhkZWNvbXByZXNzZWQsIDAsIG9yaWdpbmFsTGVuZ3RoKTtcbiAgICBvdXQuYWRkKHJlc3VsdCk7ICAvLyDov5nph4zmt7vliqDliLBvdXTliJfooajvvIxOZXR0eeS8muiHquWKqOS8oOmAkue7meS4i+S4gOS4qmhhbmRsZXJcbn1cbmBgYFxuXG7lkIzmoLfvvIxgQnl0ZVRvTWVzc2FnZUNvZGVjYOS5n+S8muiHquWKqOWkhOeQhuS6i+S7tuS8oOmAkuOAglxuXG4jIyMgTXlDb21tYW5kSGFuZGxlclxuXG5gYGBqYXZhXG5AT3ZlcnJpZGVcbnByb3RlY3RlZCB2b2lkIGNoYW5uZWxSZWFkMChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIG1zZykge1xuICAgIGlmIChtc2cgaW5zdGFuY2VvZiBSZXNwQXJyYXkpIHtcbiAgICAgICAgUmVzcEFycmF5IGFycmF5ID0gKFJlc3BBcnJheSkgbXNnO1xuICAgICAgICBSZXNwIHJlc3BvbnNlID0gcHJvY2Vzc0NvbW1hbmQoYXJyYXkpO1xuICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gocmVzcG9uc2UpOyAgLy8g55u05o6l5YaZ5Zue5ZON5bqUXG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gcmVxdWVzdCB0eXBlXCIpKTtcbiAgICB9XG59XG5gYGBcblxu5L2c5Li6cGlwZWxpbmXkuK3nmoTmnIDlkI7kuIDkuKpoYW5kbGVy77yMYE15Q29tbWFuZEhhbmRsZXJg5LiN6ZyA6KaB5bCG5raI5oGv5Lyg6YCS57uZ5LiL5LiA5LiqaGFuZGxlcu+8jOiAjOaYr+ebtOaOpeWkhOeQhuW5tui/lOWbnuWTjeW6lOOAglxuXG4jIyDlu7rorq5cblxu5oKo5b2T5YmN55qE5a6e546w5piv5q2j56Gu55qE77yM5LiN6ZyA6KaB5re75YqgYGZpcmVDaGFubmVsUmVhZGDosIPnlKjjgILlpoLmnpzmgqjmt7vliqDkuobov5nkupvosIPnlKjvvIzlj6/og73kvJrlr7zoh7Tmtojmga/ooqvph43lpI3lpITnkIbmiJblh7rnjrDlhbbku5bmhI/lpJbooYzkuLrjgIJcblxu5aaC5p6c5oKo5pyJ54m55a6a55qE6ZyA5rGC77yM5L6L5aaC6ZyA6KaB5Zyo5p+Q5LiqaGFuZGxlcuS4reaLpuaIqua2iOaBr+W5tuWGs+WumuaYr+WQpue7p+e7reS8oOmAku+8jOmCo+S5iOaCqOWPr+S7peiAg+iZkeS9v+eUqGBmaXJlQ2hhbm5lbFJlYWRg77yM5L2G5Zyo5aSn5aSa5pWw5oOF5Ya15LiL77yM6K6pTmV0dHnnmoTln7rnsbvlpITnkIbkuovku7bkvKDpgJLmmK/mm7Tlpb3nmoTlgZrms5XjgIJcblxu5oKo55qEcGlwZWxpbmXorr7orqHpgbXlvqrkuoZOZXR0eeeahOacgOS9s+Wunui3te+8jOS/neaMgei/meenjeaWueW8j+aYr+WQiOmAgueahOOAglxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiMWU3YzMyZDMtNDNiNy00ZWY3LWE5ZGQtYjA5YTcwYTRhNDllIiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIxOGQ4MmQ4MC1mZDUyLTQ5MmYtOGI5Ni0xZTZjY2MzMDhjZDEiLCJyZXF1ZXN0X21lc3NhZ2UiOiLpgqPmnInlv4XopoHlrp7njrBmaXJlZXhjZXB0aW9u5ZCXIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IumCo+acieW/heimgeWunueOsGZpcmVleGNlcHRpb27lkJcifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IuiuqeaIkeWIhuaekOS4gOS4i+WcqOaCqOeahOS7o+eggeS4reaYr+WQpuacieW/heimgeWunueOsGBmaXJlRXhjZXB0aW9uQ2F1Z2h0YOaWueazleOAglxuXG4jIyDlvZPliY3lvILluLjlpITnkIbliIbmnpBcblxu5Zyo5oKo55qE5Luj56CB5Lit77yM5oiR55yL5Yiw5LqG5Lul5LiL5byC5bi45aSE55CG5py65Yi277yaXG5cbiMjIyAxLiBNeUNvbW1hbmRIYW5kbGVy5Lit55qE5byC5bi45aSE55CGXG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhXCIgbW9kZT1cIkVYQ0VSUFRcIj5cbmBgYGphdmFcbkBPdmVycmlkZVxucHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFRocm93YWJsZSBjYXVzZSkge1xuICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGluIGNvbW1hbmQgaGFuZGxlclwiLCBjYXVzZSk7XG4gICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiBcIiArIGNhdXNlLmdldE1lc3NhZ2UoKSkpO1xufVxuYGBgXG48L2F1Z21lbnRfY29kZV9zbmlwcGV0PlxuXG7ov5nph4zmgqjlt7Lnu4/ph43lhpnkuoZgZXhjZXB0aW9uQ2F1Z2h0YOaWueazle+8jOiusOW9lemUmeivr+W5tuWQkeWuouaIt+err+WPkemAgemUmeivr+a2iOaBr++8jOS9huayoeacieiwg+eUqGBjdHguZmlyZUV4Y2VwdGlvbkNhdWdodChjYXVzZSlg44CCXG5cbiMjIyAyLiBNeURlY29kZXLkuK3nmoTlvILluLjlpITnkIZcblxuPGF1Z21lbnRfY29kZV9zbmlwcGV0IHBhdGg9XCJzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YVwiIG1vZGU9XCJFWENFUlBUXCI+XG5gYGBqYXZhXG5AT3ZlcnJpZGVcbnByb3RlY3RlZCB2b2lkIGRlY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBCeXRlQnVmIGluLCBMaXN0PE9iamVjdD4gb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpID4gMCkge1xuICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuW8gOWni+ino+eggVwiKTtcbiAgICAgICAgICAgIC8vIOagh+iusOW9k+WJjeivu+WPluS9jee9rlxuICAgICAgICAgICAgaW4ubWFya1JlYWRlckluZGV4KCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFJlc3AgZGVjb2RlZCA9IFJlc3AuZGVjb2RlKGluKTtcbiAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi6Kej56CB5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgIG91dC5hZGQoZGVjb2RlZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuino+eggeW8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5oC75L2T5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICB9XG59XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cbui/memHjOaCqOWcqGBkZWNvZGVg5pa55rOV5YaF6YOo5o2V6I635LqG5byC5bi477yM6K6w5b2V5LqG6ZSZ6K+v77yM5L2G5rKh5pyJ5bCG5byC5bi45Lyg5pKt5YiwcGlwZWxpbmXkuK3jgIJcblxuIyMjIDMuIE15UmVzcG9uc2VFbmNvZGVy5Lit55qE5byC5bi45aSE55CGXG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YVwiIG1vZGU9XCJFWENFUlBUXCI+XG5gYGBqYXZhXG5AT3ZlcnJpZGVcbnByb3RlY3RlZCB2b2lkIGVuY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIHJlc3AsIEJ5dGVCdWYgb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICB0cnkge1xuICAgICAgICByZXNwLndyaXRlKHJlc3AsIG91dCk7XG4gICAgICAgIC8vLy9sb2dnZXIuaW5mbyhcIkVuY29kZWQgcmVzcG9uc2U6IFwiICsgQnl0ZUJ1ZlV0aWwuaGV4RHVtcChvdXQpKTtcbiAgICB9IGNhdGNoKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIue8lueggeW8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIGN0eC5jbG9zZSgpO1xuICAgIH1cbn1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxu6L+Z6YeM5oKo5ZyoYGVuY29kZWDmlrnms5XlhoXpg6jmjZXojrfkuoblvILluLjvvIzorrDlvZXkuobplJnor6/lubblhbPpl63kuobov57mjqXvvIzkvYbmsqHmnInlsIblvILluLjkvKDmkq3liLBwaXBlbGluZeS4reOAglxuXG4jIyMgNC4gQ29tcHJlc3Npb25Db2VkQ+S4reeahOW8guW4uOWkhOeQhlxuXG7lnKhgQ29tcHJlc3Npb25Db2VkQ2DnsbvkuK3vvIzmgqjmsqHmnInnibnliKvlpITnkIblvILluLjvvIzov5nmhI/lkbPnnYDku7vkvZXmnKrmjZXojrfnmoTlvILluLjpg73kvJrooqvkvKDmkq3liLBwaXBlbGluZeS4reOAglxuXG4jIyDlhbPkuo5maXJlRXhjZXB0aW9uQ2F1Z2h055qE5YiG5p6QXG5cbmBmaXJlRXhjZXB0aW9uQ2F1Z2h0YOaWueazleeUqOS6juWwhuW8guW4uOS8oOmAkue7mXBpcGVsaW5l5Lit55qE5LiL5LiA5LiqaGFuZGxlcuOAguS7peS4i+aYr+WFs+S6juaYr+WQpumcgOimgeWunueOsOWug+eahOWIhuaekO+8mlxuXG4jIyMg5LyY54K5XG5cbjEuICoq5byC5bi46ZuG5Lit5aSE55CGKirvvJrlj6/ku6XlnKhwaXBlbGluZeeahOacq+err+acieS4gOS4quS4k+mXqOeahOW8guW4uOWkhOeQhmhhbmRsZXLvvIzpm4bkuK3lpITnkIbmiYDmnInlvILluLjjgIJcbjIuICoq54G15rS75oCnKirvvJrlhYHorrjkuI3lkIznmoRoYW5kbGVy5Lul5LiN5ZCM55qE5pa55byP5aSE55CG5byC5bi477yM5oiW6ICF6YCJ5oup5oCn5Zyw5aSE55CG5p+Q5Lqb5byC5bi444CCXG4zLiAqKuWPr+aJqeWxleaApyoq77ya5b2T5re75Yqg5paw55qEaGFuZGxlcuaXtu+8jOWPr+S7peS/neaMgeS4gOiHtOeahOW8guW4uOWkhOeQhuacuuWItuOAglxuXG4jIyMg57y654K5XG5cbjEuICoq5Y+v6IO955qE6YeN5aSN5aSE55CGKirvvJrlpoLmnpzlpJrkuKpoYW5kbGVy6YO95aSE55CG5ZCM5LiA5Liq5byC5bi477yM5Y+v6IO95Lya5a+86Ie06YeN5aSN55qE6ZSZ6K+v5raI5oGv5oiW5pON5L2c44CCXG4yLiAqKuWkjeadguaAp+WinuWKoCoq77ya6ZyA6KaB56Gu5L+d5byC5bi45Zyo5Lyg6YCS6L+H56iL5Lit6KKr5q2j56Gu5aSE55CG77yM5LiN5Lya5a+86Ie05oSP5aSW6KGM5Li644CCXG5cbiMjIOW7uuiurlxuXG7ln7rkuo7mgqjnmoTku6PnoIHlkoxSZWRpc+acjeWKoeWZqOeahOeJueaAp++8jOS7peS4i+aYr+aIkeeahOW7uuiuru+8mlxuXG4jIyMgMS4g5a+55LqOTXlDb21tYW5kSGFuZGxlclxuXG7kvZzkuLpwaXBlbGluZeS4reeahOacgOWQjuS4gOS4qmhhbmRsZXLvvIxgTXlDb21tYW5kSGFuZGxlcmDkuI3pnIDopoHosIPnlKhgZmlyZUV4Y2VwdGlvbkNhdWdodGDvvIzlm6DkuLrmsqHmnInkuIvkuIDkuKpoYW5kbGVy5p2l5aSE55CG5byC5bi444CC5oKo5b2T5YmN55qE5a6e546w5piv5ZCI6YCC55qE44CCXG5cbiMjIyAyLiDlr7nkuo5NeURlY29kZXLlkoxNeVJlc3BvbnNlRW5jb2RlclxuXG7ov5nkupvnvJbop6PnoIHlmajlupTor6XogIPomZHlsIbmnKrlpITnkIbnmoTlvILluLjkvKDpgJLnu5lwaXBlbGluZe+8mlxuXG5gYGBqYXZhXG4vLyDlnKhNeURlY29kZXLkuK1cbkBPdmVycmlkZVxucHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIOeOsOacieS7o+eggS4uLlxuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIuaAu+S9k+W8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIC8vIOWwhuW8guW4uOS8oOmAkue7mXBpcGVsaW5lXG4gICAgICAgIGN0eC5maXJlRXhjZXB0aW9uQ2F1Z2h0KGUpO1xuICAgIH1cbn1cblxuLy8g5ZyoTXlSZXNwb25zZUVuY29kZXLkuK1cbkBPdmVycmlkZVxucHJvdGVjdGVkIHZvaWQgZW5jb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgcmVzcCwgQnl0ZUJ1ZiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIOeOsOacieS7o+eggS4uLlxuICAgIH0gY2F0Y2goRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi57yW56CB5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgLy8g5Y+v5Lul6YCJ5oup5YWz6Zet6L+e5o6l5YmN5Lyg6YCS5byC5bi4XG4gICAgICAgIGN0eC5maXJlRXhjZXB0aW9uQ2F1Z2h0KGUpO1xuICAgICAgICBjdHguY2xvc2UoKTtcbiAgICB9XG59XG5gYGBcblxuIyMjIDMuIOa3u+WKoOWFqOWxgOW8guW4uOWkhOeQhuWZqFxuXG7ogIPomZHlnKhwaXBlbGluZeeahOacq+Wwvua3u+WKoOS4gOS4quS4k+mXqOeahOW8guW4uOWkhOeQhmhhbmRsZXLvvJpcblxuYGBgamF2YVxucHVibGljIGNsYXNzIEdsb2JhbEV4Y2VwdGlvbkhhbmRsZXIgZXh0ZW5kcyBDaGFubmVsSW5ib3VuZEhhbmRsZXJBZGFwdGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihHbG9iYWxFeGNlcHRpb25IYW5kbGVyLmNsYXNzKTtcbiAgICBcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgVGhyb3dhYmxlIGNhdXNlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIuacquWkhOeQhueahOW8guW4uFwiLCBjYXVzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyDmoLnmja7lvILluLjnsbvlnovlj5HpgIHpgILlvZPnmoTplJnor6/lk43lupRcbiAgICAgICAgaWYgKGNhdXNlIGluc3RhbmNlb2YgRGVjb2RlckV4Y2VwdGlvbikge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiDljY/orq7op6PmnpDplJnor69cIikpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhdXNlIGluc3RhbmNlb2YgT3V0T2ZNZW1vcnlFcnJvcikge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiDmnI3liqHlmajlhoXlrZjkuI3otrNcIikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiDlhoXpg6jmnI3liqHlmajplJnor69cIikpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlr7nkuo7kuKXph43plJnor6/vvIzlj6/ku6XpgInmi6nlhbPpl63ov57mjqVcbiAgICAgICAgaWYgKGNhdXNlIGluc3RhbmNlb2YgT3V0T2ZNZW1vcnlFcnJvciB8fCBjYXVzZSBpbnN0YW5jZW9mIElPRXJyb3IpIHtcbiAgICAgICAgICAgIGN0eC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuYGBgXG5cbueEtuWQjuWcqHBpcGVsaW5l6YWN572u5Lit5re75Yqg77yaXG5cbmBgYGphdmFcbi8vIOWcqE15UmVkaXNTZXJ2aWNl55qEaW5pdENoYW5uZWzmlrnms5XkuK1cbnBpcGVsaW5lLmFkZExhc3QobmV3IE15RGVjb2RlcigpKTtcbnBpcGVsaW5lLmFkZExhc3QobmV3IE15UmVzcG9uc2VFbmNvZGVyKCkpO1xuaWYoRU5BQkxFX0NPTVBSRVNTSU9OKXtcbiAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBDb21wcmVzc2lvbkNvZWRDKCkpO1xufVxucGlwZWxpbmUuYWRkTGFzdChjb21tYW5kRXhlY3V0b3IsIGNvbW1hbmRIYW5kbGVyKTtcbi8vIOa3u+WKoOWFqOWxgOW8guW4uOWkhOeQhuWZqFxucGlwZWxpbmUuYWRkTGFzdChuZXcgR2xvYmFsRXhjZXB0aW9uSGFuZGxlcigpKTtcbmBgYFxuXG4jIyDnu5Porrpcblxu5a+55LqO5oKo55qEUmVkaXPmnI3liqHlmajlrp7njrDvvIzmiJHlu7rorq7vvJpcblxuMS4gKirkv53mjIFNeUNvbW1hbmRIYW5kbGVy55qE5b2T5YmN5a6e546wKirvvJrkuI3pnIDopoHosIPnlKhgZmlyZUV4Y2VwdGlvbkNhdWdodGDjgIJcblxuMi4gKirkv67mlLnnvJbop6PnoIHlmagqKu+8muWcqOaNleiOt+W8guW4uOWQjuiwg+eUqGBjdHguZmlyZUV4Y2VwdGlvbkNhdWdodChlKWDvvIzlsIblvILluLjkvKDpgJLnu5lwaXBlbGluZeOAglxuXG4zLiAqKua3u+WKoOWFqOWxgOW8guW4uOWkhOeQhuWZqCoq77ya5L2c5Li65pyA5ZCO55qE6Ziy57q/77yM5aSE55CG5omA5pyJ5pyq5o2V6I6355qE5byC5bi444CCXG5cbui/meenjeaWueazleaPkOS+m+S6huWkmuWxguasoeeahOW8guW4uOWkhOeQhu+8mlxuLSDnvJbop6PnoIHlmajlj6/ku6XlpITnkIbnibnlrprnmoTop6PnoIEv57yW56CB6ZSZ6K+vXG4tIOWRveS7pOWkhOeQhuWZqOWPr+S7peWkhOeQhuS4muWKoemAu+i+kemUmeivr1xuLSDlhajlsYDlpITnkIblmajlj6/ku6XmjZXojrfmiYDmnInlhbbku5bmnKrlpITnkIbnmoTlvILluLhcblxu6L+Z5qC35Y+v5Lul56Gu5L+d5omA5pyJ5byC5bi46YO95b6X5Yiw6YCC5b2T5aSE55CG77yM5ZCM5pe25L+d5oyB5Luj56CB55qE5qih5Z2X5YyW5ZKM5Y+v57u05oqk5oCn44CCXG5cbuaCqOiupOS4uui/meenjeaWueazleaYr+WQpumAguWQiOaCqOeahOmhueebrumcgOaxgu+8n1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiLpgqPmnInlv4XopoHlrp7njrBmaXJlZXhjZXB0aW9u5ZCXIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRjovSHVhUmVkaXMiLCJmb2xkZXJSb290IjoiRjovSHVhUmVkaXMifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTAyVDIwOjQ1OjEyLjY0MFoiLCJyZXNwb25zZV90ZXh0Ijoi6K6p5oiR5YiG5p6Q5LiA5LiL5Zyo5oKo55qE5Luj56CB5Lit5piv5ZCm5pyJ5b+F6KaB5a6e546wYGZpcmVFeGNlcHRpb25DYXVnaHRg5pa55rOV44CCXG5cbiMjIOW9k+WJjeW8guW4uOWkhOeQhuWIhuaekFxuXG7lnKjmgqjnmoTku6PnoIHkuK3vvIzmiJHnnIvliLDkuobku6XkuIvlvILluLjlpITnkIbmnLrliLbvvJpcblxuIyMjIDEuIE15Q29tbWFuZEhhbmRsZXLkuK3nmoTlvILluLjlpITnkIZcblxuYGBgYGphdmEgcGF0aD1zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmEgbW9kZT1FWENFUlBUXG5AT3ZlcnJpZGVcbnB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbn1cbmBgYGBcblxu6L+Z6YeM5oKo5bey57uP6YeN5YaZ5LqGYGV4Y2VwdGlvbkNhdWdodGDmlrnms5XvvIzorrDlvZXplJnor6/lubblkJHlrqLmiLfnq6/lj5HpgIHplJnor6/mtojmga/vvIzkvYbmsqHmnInosIPnlKhgY3R4LmZpcmVFeGNlcHRpb25DYXVnaHQoY2F1c2UpYOOAglxuXG4jIyMgMi4gTXlEZWNvZGVy5Lit55qE5byC5bi45aSE55CGXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlEZWNvZGVyLmphdmEgbW9kZT1FWENFUlBUXG5AT3ZlcnJpZGVcbnByb3RlY3RlZCB2b2lkIGRlY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBCeXRlQnVmIGluLCBMaXN0PE9iamVjdD4gb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpID4gMCkge1xuICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuW8gOWni+ino+eggVwiKTtcbiAgICAgICAgICAgIC8vIOagh+iusOW9k+WJjeivu+WPluS9jee9rlxuICAgICAgICAgICAgaW4ubWFya1JlYWRlckluZGV4KCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFJlc3AgZGVjb2RlZCA9IFJlc3AuZGVjb2RlKGluKTtcbiAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi6Kej56CB5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgIG91dC5hZGQoZGVjb2RlZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuino+eggeW8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5oC75L2T5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICB9XG59XG5gYGBgXG5cbui/memHjOaCqOWcqGBkZWNvZGVg5pa55rOV5YaF6YOo5o2V6I635LqG5byC5bi477yM6K6w5b2V5LqG6ZSZ6K+v77yM5L2G5rKh5pyJ5bCG5byC5bi45Lyg5pKt5YiwcGlwZWxpbmXkuK3jgIJcblxuIyMjIDMuIE15UmVzcG9uc2VFbmNvZGVy5Lit55qE5byC5bi45aSE55CGXG5cbmBgYGBqYXZhIHBhdGg9c3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YSBtb2RlPUVYQ0VSUFRcbkBPdmVycmlkZVxucHJvdGVjdGVkIHZvaWQgZW5jb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgcmVzcCwgQnl0ZUJ1ZiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3Aud3JpdGUocmVzcCwgb3V0KTtcbiAgICAgICAgLy8vL2xvZ2dlci5pbmZvKFwiRW5jb2RlZCByZXNwb25zZTogXCIgKyBCeXRlQnVmVXRpbC5oZXhEdW1wKG91dCkpO1xuICAgIH0gY2F0Y2goRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi57yW56CB5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgY3R4LmNsb3NlKCk7XG4gICAgfVxufVxuYGBgYFxuXG7ov5nph4zmgqjlnKhgZW5jb2RlYOaWueazleWGhemDqOaNleiOt+S6huW8guW4uO+8jOiusOW9leS6humUmeivr+W5tuWFs+mXreS6hui/nuaOpe+8jOS9huayoeacieWwhuW8guW4uOS8oOaSreWIsHBpcGVsaW5l5Lit44CCXG5cbiMjIyA0LiBDb21wcmVzc2lvbkNvZWRD5Lit55qE5byC5bi45aSE55CGXG5cbuWcqGBDb21wcmVzc2lvbkNvZWRDYOexu+S4re+8jOaCqOayoeacieeJueWIq+WkhOeQhuW8guW4uO+8jOi/meaEj+WRs+edgOS7u+S9leacquaNleiOt+eahOW8guW4uOmDveS8muiiq+S8oOaSreWIsHBpcGVsaW5l5Lit44CCXG5cbiMjIOWFs+S6jmZpcmVFeGNlcHRpb25DYXVnaHTnmoTliIbmnpBcblxuYGZpcmVFeGNlcHRpb25DYXVnaHRg5pa55rOV55So5LqO5bCG5byC5bi45Lyg6YCS57uZcGlwZWxpbmXkuK3nmoTkuIvkuIDkuKpoYW5kbGVy44CC5Lul5LiL5piv5YWz5LqO5piv5ZCm6ZyA6KaB5a6e546w5a6D55qE5YiG5p6Q77yaXG5cbiMjIyDkvJjngrlcblxuMS4gKirlvILluLjpm4bkuK3lpITnkIYqKu+8muWPr+S7peWcqHBpcGVsaW5l55qE5pyr56uv5pyJ5LiA5Liq5LiT6Zeo55qE5byC5bi45aSE55CGaGFuZGxlcu+8jOmbhuS4reWkhOeQhuaJgOacieW8guW4uOOAglxuMi4gKirngbXmtLvmgKcqKu+8muWFgeiuuOS4jeWQjOeahGhhbmRsZXLku6XkuI3lkIznmoTmlrnlvI/lpITnkIblvILluLjvvIzmiJbogIXpgInmi6nmgKflnLDlpITnkIbmn5DkupvlvILluLjjgIJcbjMuICoq5Y+v5omp5bGV5oCnKirvvJrlvZPmt7vliqDmlrDnmoRoYW5kbGVy5pe277yM5Y+v5Lul5L+d5oyB5LiA6Ie055qE5byC5bi45aSE55CG5py65Yi244CCXG5cbiMjIyDnvLrngrlcblxuMS4gKirlj6/og73nmoTph43lpI3lpITnkIYqKu+8muWmguaenOWkmuS4qmhhbmRsZXLpg73lpITnkIblkIzkuIDkuKrlvILluLjvvIzlj6/og73kvJrlr7zoh7Tph43lpI3nmoTplJnor6/mtojmga/miJbmk43kvZzjgIJcbjIuICoq5aSN5p2C5oCn5aKe5YqgKirvvJrpnIDopoHnoa7kv53lvILluLjlnKjkvKDpgJLov4fnqIvkuK3ooqvmraPnoa7lpITnkIbvvIzkuI3kvJrlr7zoh7TmhI/lpJbooYzkuLrjgIJcblxuIyMg5bu66K6uXG5cbuWfuuS6juaCqOeahOS7o+eggeWSjFJlZGlz5pyN5Yqh5Zmo55qE54m55oCn77yM5Lul5LiL5piv5oiR55qE5bu66K6u77yaXG5cbiMjIyAxLiDlr7nkuo5NeUNvbW1hbmRIYW5kbGVyXG5cbuS9nOS4unBpcGVsaW5l5Lit55qE5pyA5ZCO5LiA5LiqaGFuZGxlcu+8jGBNeUNvbW1hbmRIYW5kbGVyYOS4jemcgOimgeiwg+eUqGBmaXJlRXhjZXB0aW9uQ2F1Z2h0YO+8jOWboOS4uuayoeacieS4i+S4gOS4qmhhbmRsZXLmnaXlpITnkIblvILluLjjgILmgqjlvZPliY3nmoTlrp7njrDmmK/lkIjpgILnmoTjgIJcblxuIyMjIDIuIOWvueS6jk15RGVjb2RlcuWSjE15UmVzcG9uc2VFbmNvZGVyXG5cbui/meS6m+e8luino+eggeWZqOW6lOivpeiAg+iZkeWwhuacquWkhOeQhueahOW8guW4uOS8oOmAkue7mXBpcGVsaW5l77yaXG5cbmBgYGphdmFcbi8vIOWcqE15RGVjb2RlcuS4rVxuQE92ZXJyaWRlXG5wcm90ZWN0ZWQgdm9pZCBkZWNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgQnl0ZUJ1ZiBpbiwgTGlzdDxPYmplY3Q+IG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8g546w5pyJ5Luj56CBLi4uXG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5oC75L2T5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgLy8g5bCG5byC5bi45Lyg6YCS57uZcGlwZWxpbmVcbiAgICAgICAgY3R4LmZpcmVFeGNlcHRpb25DYXVnaHQoZSk7XG4gICAgfVxufVxuXG4vLyDlnKhNeVJlc3BvbnNlRW5jb2RlcuS4rVxuQE92ZXJyaWRlXG5wcm90ZWN0ZWQgdm9pZCBlbmNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCByZXNwLCBCeXRlQnVmIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8g546w5pyJ5Luj56CBLi4uXG4gICAgfSBjYXRjaChFeGNlcHRpb24gZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCLnvJbnoIHlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAvLyDlj6/ku6XpgInmi6nlhbPpl63ov57mjqXliY3kvKDpgJLlvILluLhcbiAgICAgICAgY3R4LmZpcmVFeGNlcHRpb25DYXVnaHQoZSk7XG4gICAgICAgIGN0eC5jbG9zZSgpO1xuICAgIH1cbn1cbmBgYFxuXG4jIyMgMy4g5re75Yqg5YWo5bGA5byC5bi45aSE55CG5ZmoXG5cbuiAg+iZkeWcqHBpcGVsaW5l55qE5pyr5bC+5re75Yqg5LiA5Liq5LiT6Zeo55qE5byC5bi45aSE55CGaGFuZGxlcu+8mlxuXG5gYGBqYXZhXG5wdWJsaWMgY2xhc3MgR2xvYmFsRXhjZXB0aW9uSGFuZGxlciBleHRlbmRzIENoYW5uZWxJbmJvdW5kSGFuZGxlckFkYXB0ZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKEdsb2JhbEV4Y2VwdGlvbkhhbmRsZXIuY2xhc3MpO1xuICAgIFxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwi5pyq5aSE55CG55qE5byC5bi4XCIsIGNhdXNlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOagueaNruW8guW4uOexu+Wei+WPkemAgemAguW9k+eahOmUmeivr+WTjeW6lFxuICAgICAgICBpZiAoY2F1c2UgaW5zdGFuY2VvZiBEZWNvZGVyRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIOWNj+iuruino+aekOmUmeivr1wiKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2F1c2UgaW5zdGFuY2VvZiBPdXRPZk1lbW9yeUVycm9yKSB7XG4gICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIOacjeWKoeWZqOWGheWtmOS4jei2s1wiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIOWGhemDqOacjeWKoeWZqOmUmeivr1wiKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOWvueS6juS4pemHjemUmeivr++8jOWPr+S7pemAieaLqeWFs+mXrei/nuaOpVxuICAgICAgICBpZiAoY2F1c2UgaW5zdGFuY2VvZiBPdXRPZk1lbW9yeUVycm9yIHx8IGNhdXNlIGluc3RhbmNlb2YgSU9FcnJvcikge1xuICAgICAgICAgICAgY3R4LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5gYGBcblxu54S25ZCO5ZyocGlwZWxpbmXphY3nva7kuK3mt7vliqDvvJpcblxuYGBgamF2YVxuLy8g5ZyoTXlSZWRpc1NlcnZpY2XnmoRpbml0Q2hhbm5lbOaWueazleS4rVxucGlwZWxpbmUuYWRkTGFzdChuZXcgTXlEZWNvZGVyKCkpO1xucGlwZWxpbmUuYWRkTGFzdChuZXcgTXlSZXNwb25zZUVuY29kZXIoKSk7XG5pZihFTkFCTEVfQ09NUFJFU1NJT04pe1xuICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IENvbXByZXNzaW9uQ29lZEMoKSk7XG59XG5waXBlbGluZS5hZGRMYXN0KGNvbW1hbmRFeGVjdXRvciwgY29tbWFuZEhhbmRsZXIpO1xuLy8g5re75Yqg5YWo5bGA5byC5bi45aSE55CG5ZmoXG5waXBlbGluZS5hZGRMYXN0KG5ldyBHbG9iYWxFeGNlcHRpb25IYW5kbGVyKCkpO1xuYGBgXG5cbiMjIOe7k+iuulxuXG7lr7nkuo7mgqjnmoRSZWRpc+acjeWKoeWZqOWunueOsO+8jOaIkeW7uuiuru+8mlxuXG4xLiAqKuS/neaMgU15Q29tbWFuZEhhbmRsZXLnmoTlvZPliY3lrp7njrAqKu+8muS4jemcgOimgeiwg+eUqGBmaXJlRXhjZXB0aW9uQ2F1Z2h0YOOAglxuXG4yLiAqKuS/ruaUuee8luino+eggeWZqCoq77ya5Zyo5o2V6I635byC5bi45ZCO6LCD55SoYGN0eC5maXJlRXhjZXB0aW9uQ2F1Z2h0KGUpYO+8jOWwhuW8guW4uOS8oOmAkue7mXBpcGVsaW5l44CCXG5cbjMuICoq5re75Yqg5YWo5bGA5byC5bi45aSE55CG5ZmoKirvvJrkvZzkuLrmnIDlkI7nmoTpmLLnur/vvIzlpITnkIbmiYDmnInmnKrmjZXojrfnmoTlvILluLjjgIJcblxu6L+Z56eN5pa55rOV5o+Q5L6b5LqG5aSa5bGC5qyh55qE5byC5bi45aSE55CG77yaXG4tIOe8luino+eggeWZqOWPr+S7peWkhOeQhueJueWumueahOino+eggS/nvJbnoIHplJnor69cbi0g5ZG95Luk5aSE55CG5Zmo5Y+v5Lul5aSE55CG5Lia5Yqh6YC76L6R6ZSZ6K+vXG4tIOWFqOWxgOWkhOeQhuWZqOWPr+S7peaNleiOt+aJgOacieWFtuS7luacquWkhOeQhueahOW8guW4uFxuXG7ov5nmoLflj6/ku6Xnoa7kv53miYDmnInlvILluLjpg73lvpfliLDpgILlvZPlpITnkIbvvIzlkIzml7bkv53mjIHku6PnoIHnmoTmqKHlnZfljJblkozlj6/nu7TmiqTmgKfjgIJcblxu5oKo6K6k5Li66L+Z56eN5pa55rOV5piv5ZCm6YCC5ZCI5oKo55qE6aG555uu6ZyA5rGC77yfXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtOWYwMjkyNjktNmY3ZS00NzBkLTlhNjItZDkwYjhlNDlhOGM4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS04MTdlNTI5NS0wODg4LTRjZmYtYjA1Yi0yZTVmOWRkYzU0ZDIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWEyZjE4ZWVjLTE3MWUtNDNhNC1iNTE1LTc1ZWQxM2ViYzQ0YiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMTkxYjBkZjEtZGY5MC00ZDQwLWI2YjQtNTZiZDc0NDRkNDFjIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jNTNmNzZjZi0wNmYzLTQ5OGMtYjEyZC0zYWQ4M2UxMGUyMWMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWJiMTEwNWExLTg2YTktNGEwNi1hODhiLTk1YzRhZTM0OTEzZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYTZlZWMxZmQtMzg0Mi00ODcxLTllNDYtZGQ1ODlkMDZjMmY1Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zYzJhNDUwNi1mNjJjLTQ0ZmMtOTU1NS1iYmVkNjE3OGIxNzEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTUzZmM3YjA1LWUzZDEtNDZhNy04MGJkLTYyOTE2MmQwMGM2MyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTI0YzQxODYtNGJhMC00NGU2LThmMzktYWY5MDJjZDhiMmRmIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0wMDM2MDUwYy05NzBhLTQwMmUtODM4OC04Y2UzYTM1NzJmZTMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTE5NTg1YTZhLTRkZGEtNGY1Yi1iN2Y5LWM1OTRkMTMyMTY2OSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNDQ2M2JhNTktMDE2OS00MzlhLWJiNjgtZjY0YjI3MGQzZDFjIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS05ZmZmODM4OC03OWU5LTQwYTItYWVlYy1jZWY5ZjRjMjM2ZWUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTcyYjk2MjI0LTMyYTctNGY5My1hODc5LTA5OWY5NzMzYzkyMSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNzNhNWJjY2ItNzU3My00YTE2LTg0ZTQtZjE5NWFjZTMzNWNmIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS04MzA0ZTIwNy03ZGUwLTQ2YWQtOGE4Ni0yOWZiZTE2MDhmYTUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTc0M2M2MmM0LTM1MDktNGU2My05MmFiLWI4MzVlZjE0NTk1OCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtN2Q5MWI0YzQtNTljNC00OTkyLWIxNjItNWU2MDI4MzIxNTVhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1kZDlhZDBmMy05ZTM4LTQ3NjQtODA1NC0yNGQwNzdlNWM0YzMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTcxMTliZWQ2LTVkNjItNDdjOC04NWQ2LTdkY2RiODBiNTcxNyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtN2IyNTM3ZjAtZTViYi00YzU1LTg3NzctYTBlZTRiZTAxODEzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0wYzczZDQ0ZS1hNzE1LTRiMzctYTliOC00N2VlNzA0MWY5NmYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTlmZTI4OTlhLWZhMzMtNGU1OS1hNGYxLWUxZThmNDBkMjM0NCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNjMwMGFmZTktNWQ5Ny00ZDlhLWFhZWEtMzllY2MwZTQ5NDgzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifX0sInRvb2xVc2VTdGF0ZXMiOnsiZTdlYTQxYTgtYTEyMS00NGMyLWJmMTgtM2FmOTJmMDAwNWI4O3Rvb2x1X3ZydHhfMDFBeVoxc0pXWEJEY2c4ZlFydXhVV2NxIjp7InJlcXVlc3RJZCI6ImU3ZWE0MWE4LWExMjEtNDRjMi1iZjE4LTNhZjkyZjAwMDViOCIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFBeVoxc0pXWEJEY2c4ZlFydXhVV2NxIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXI7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5TaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLkFPRkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNsdXN0ZXIuUmVkaXNDbHVzdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguc2VydmVyLk15UmVkaXNTZXJ2aWNlO1xuXG5pbXBvcnQgamF2YS51dGlsLkVudW1TZXQ7XG5pbXBvcnQgamF2YS51dGlsLlNldDtcbi4uLlxuXG4gICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSwgQU9GSGFuZGxlciBhb2ZIYW5kbGVyLCBSREJIYW5kbGVyIHJkYkhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSByZWRpc0NvcmU7XG4gICAgICAgIHRoaXMuYW9mSGFuZGxlciA9IGFvZkhhbmRsZXI7XG4gICAgICAgIHRoaXMucmRiSGFuZGxlciA9IHJkYkhhbmRsZXI7XG5cblxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHByb3RlY3RlZCB2b2lkIGNoYW5uZWxSZWFkMChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIG1zZykge1xuICAgICAgICBpZiAobXNnIGluc3RhbmNlb2YgUmVzcEFycmF5KSB7XG4gICAgICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBtc2c7XG4gICAgICAgICAgICBSZXNwIHJlc3BvbnNlID0gcHJvY2Vzc0NvbW1hbmQoYXJyYXkpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gcmVxdWVzdCB0eXBlXCIpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBSZXNwIHByb2Nlc3NDb21tYW5kKFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgaWYgKGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBlbXB0eSBjb21tYW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlc3BbXSBhcnJheSA9IGNvbW1hbmRBcnJheS5nZXRBcnJheSgpO1xuICAgICAgICAgICAgU3RyaW5nIGNvbW1hbmROYW1lID0gKChCdWxrU3RyaW5nKSBhcnJheVswXSkuZ2V0Q29udGVudCgpLnRvVXRmOFN0cmluZygpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICBDb21tYW5kVHlwZSBjb21tYW5kVHlwZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kVHlwZSA9IENvbW1hbmRUeXBlLnZhbHVlT2YoY29tbWFuZE5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiB1bmtub3duIGNvbW1hbmQgJ1wiICsgY29tbWFuZE5hbWUgKyBcIidcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRIYW5kbGVJbkNsdXN0ZXIoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2x1c3RlckNvbW1hbmQoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChhcnJheSk7XG5cbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcblxuICAgICAgICAgICAgaWYgKHJkYkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkgJiYgYXJyYXkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksICgoQnVsa1N0cmluZykgYXJyYXlbMV0pLmdldENvbnRlbnQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICBpZiAoY3VycmVudE5vZGVJZC5lcXVhbHModGFyZ2V0Tm9kZUlkKSkge1xuICAgICAgICAgICAgQ29tbWFuZCBjb21tYW5kID0gY29tbWFuZFR5cGUuZ2V0U3VwcGxpZXIoKS5hcHBseShyZWRpc0NvcmUpO1xuICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGNvbW1hbmRBcnJheS5nZXRBcnJheSgpKTtcbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcblxuICAgICAgICAgICAgLy8g56Gu5L+d5pys5Zyw5omn6KGM5pe25Lmf6Kem5Y+RUkRCXG4gICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmRiSGFuZGxlci5ub3RpZnlEYXRhQ2hhbmdlZChyZWRpc0NvcmUuZ2V0Q3VycmVudERCKCkuZ2V0SWQoKSwga2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gZm9yd2FyZFRvVGFyZ2V0Tm9kZSh0YXJnZXROb2RlSWQsIGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBSZXNwIGZvcndhcmRUb1RhcmdldE5vZGUoU3RyaW5nIHRhcmdldE5vZGVJZCwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8g6I635Y+W55uu5qCH6IqC54K555qE5pyN5Yqh5a6e5L6LXG4gICAgICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAgICAgICAgICBNeVJlZGlzU2VydmljZSB0YXJnZXRTZXJ2aWNlID0gY2x1c3Rlci5nZXROb2RlKHRhcmdldE5vZGVJZCk7XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXRTZXJ2aWNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDovazlj5Hlkb3ku6TliLDnm67moIfoioLngrlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0U2VydmljZS5leGVjdXRlQ29tbWFuZChjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiB0YXJnZXQgbm9kZSBub3QgYXZhaWxhYmxlOiBcIiArIHRhcmdldE5vZGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmb3J3YXJkaW5nIGNvbW1hbmQgdG8gbm9kZSBcIiArIHRhcmdldE5vZGVJZCwgZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBmb3J3YXJkaW5nIGZhaWxlZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgVGhyb3dhYmxlIGNhdXNlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGluIGNvbW1hbmQgaGFuZGxlclwiLCBjYXVzZSk7XG4gICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3NlcnZlci9NeVJlZGlzU2VydmljZS5qYXZhXG4uLi5cblxuaW1wb3J0IGlvLm5ldHR5LmJvb3RzdHJhcC5TZXJ2ZXJCb290c3RyYXA7XG5pbXBvcnQgaW8ubmV0dHkuYnVmZmVyLlBvb2xlZEJ5dGVCdWZBbGxvY2F0b3I7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC4qO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuc29ja2V0LlNvY2tldENoYW5uZWw7XG5pbXBvcnQgaW8ubmV0dHkudXRpbC5jb25jdXJyZW50LkRlZmF1bHRFdmVudEV4ZWN1dG9yR3JvdXA7XG5pbXBvcnQgaW8ubmV0dHkudXRpbC5jb25jdXJyZW50LkRlZmF1bHRUaHJlYWRGYWN0b3J5O1xuaW1wb3J0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5FdmVudEV4ZWN1dG9yR3JvdXA7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguUmVkaXNDb3JlSW1wbDtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLkFPRlN5bmNTdHJhdGVneTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5DbHVzdGVyQ2xpZW50O1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLkNsdXN0ZXJOb2RlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29kZXIuQ29tcHJlc3Npb25Db2VkQztcbmltcG9ydCBzaXRlLmhuZnkyNTguY29kZXIuTXlDb21tYW5kSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29kZXIuTXlEZWNvZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb2Rlci5NeVJlc3BvbnNlRW5jb2RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5EZWZhdWx0Q2hhbm5lbFNlbGVjdFN0cmF0ZWd5O1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jaGFubmVsLkxvY2FsQ2hhbm5lbE9wdGlvbjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLkFPRkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC4qO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuY29yZS5SREJIYW5kbGVyO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYXZhLnV0aWwuTWFwO1xuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL0NvbW1hbmRUeXBlLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvbW1hbmQ7XG5cbmltcG9ydCBqYXZhLnV0aWwuZnVuY3Rpb24uRnVuY3Rpb247XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5pbXBsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuaW1wbC5IYXNoLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuaW1wbC5MaXN0Lio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuaW1wbC5TZXQuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5pbXBsLlN0cmluZy4qO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLmltcGwuWnNldC4qO1xuXG5wdWJsaWMgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgUElORyhjb3JlIC0+IG5ldyBQaW5nKCkpLFxuICAgIElORk8oSW5mbzo6bmV3KSxcbiAgICBTRVQoU2V0OjpuZXcpLFxuICAgIERFTChEZWw6Om5ldyksXG4gICAgSU5DUihJbmNyOjpuZXcpLFxuICAgIE1TRVQoTXNldDo6bmV3KSxcbiAgICBFWElTVChFeGlzdDo6bmV3KSxcbiAgICBFWFBJUkUoRXhwaXJlOjpuZXcpLFxuICAgIFNBREQoU2FkZDo6bmV3KSxcbiAgICBUVEwoVHRsOjpuZXcpLFxuICAgIFNNRU1CRVJTKFNtZW1lYmVyczo6bmV3KSxcbiAgICBTSVNNRU1CRVIoU2lzbWVtYmVyOjpuZXcpLFxuICAgIFNDQVJEKFNjYXJkOjpuZXcpLFxuICAgIFNSRU0oU3JlbTo6bmV3KSxcbiAgICBTUE9QKFNwb3A6Om5ldyksXG4gICAgSFNFVChIc2V0OjpuZXcpLFxuICAgIEhHRVQoSGdldDo6bmV3KSxcbiAgICBITUVTVChIbWVzdDo6bmV3KSxcbiAgICBIR0VUQUxMKEhnZXRhbGw6Om5ldyksXG4gICAgSE1HRVQoSG1nZXQ6Om5ldyksXG4gICAgSERFTChIZGVsOjpuZXcpLFxuICAgIEhFWElTVFMoSGV4aXN0czo6bmV3KSxcbiAgICBITEVOKEhsZW46Om5ldyksXG4gICAgTFBVU0goTHB1c2g6Om5ldyksXG4gICAgUlBVU0goUnB1c2g6Om5ldyksXG4gICAgTFJBTkdFKExyYW5nZTo6bmV3KSxcbiAgICBMTEVOKExsZW46Om5ldyksXG4gICAgTFBPUChMcG9wOjpuZXcpLFxuICAgIFJQT1AoUnBvcDo6bmV3KSxcbiAgICBMUkVNKExyZW06Om5ldyksXG4gICAgWkFERChaYWRkOjpuZXcpLFxuICAgIFpSQU5HRShacmFuZ2U6Om5ldyksXG4gICAgWlJFVlJBTkdFKFpyZXZyYW5nZTo6bmV3KSxcbiAgICBaUkFOR0VCWVNDT1JFKFpyYW5nZWJ5c2NvcmU6Om5ldyksXG4gICAgWlJFTShacmVtOjpuZXcpLFxuICAgIFpDQVJEKFpjYXJkOjpuZXcpLFxuICAgIFpTQ09SRShac2NvcmU6Om5ldyksXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZjtcblxuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5VbnBvb2xlZDtcbmltcG9ydCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuQ29tcGxldGVGdXR1cmU7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLmxvYWRlci5BT0ZMb2FkZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5sb2FkZXIuTG9hZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucHJvY2Vzc29yLkFPRlByb2Nlc3NvcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnByb2Nlc3Nvci5Qcm9jZXNzb3I7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5yZXdyaXRlci5BT0ZSZXdyaXRlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLndyaXRlci5BT0ZXcml0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi53cml0ZXIuV3JpdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvQU9GQmFja2dyb3VuZFNlcnZpY2UuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguYW9mO1xuXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5wcm9jZXNzb3IuUHJvY2Vzc29yO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcblxuLyoqXG4gKiBBT0blkI7lj7DmnI3liqHvvIzotJ/otKPnrqHnkIZBT0bnmoTlkI7lj7Dkv53lrZjlkozlkIzmraXmk43kvZxcbiAqL1xucHVibGljIGNsYXNzIEFPRkJhY2tncm91bmRTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihBT0ZCYWNrZ3JvdW5kU2VydmljZS5jbGFzcyk7XG5cbiAgICBwcml2YXRlIGZpbmFsIFByb2Nlc3NvciBwcm9jZXNzb3I7ICAgICAgICAgICAvLyBBT0blpITnkIblmahcbiAgICBwcml2YXRlIGZpbmFsIEFPRlN5bmNTdHJhdGVneSBzeW5jU3RyYXRlZ3k7ICAvLyDlkIzmraXnrZbnlaVcbiAgICBwcml2YXRlIFRocmVhZCBzeW5jVGhyZWFkOyAgICAgICAgICAgICAgICAgICAvLyDlkIzmraXnur/nqItcblxuICAgIC8qKlxuICAgICAqIOaehOmAoEFPRuWQjuWPsOacjeWKoVxuICAgICAqIEBwYXJhbSBwcm9jZXNzb3IgQU9G5aSE55CG5ZmoXG4gICAgICogQHBhcmFtIHN5bmNTdHJhdGVneSDlkIzmraXnrZbnlaVcbiAgICAgKi9cbiAgICBwdWJsaWMgQU9GQmFja2dyb3VuZFNlcnZpY2UoUHJvY2Vzc29yIHByb2Nlc3NvciwgQU9GU3luY1N0cmF0ZWd5IHN5bmNTdHJhdGVneSkge1xuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICAgICAgdGhpcy5zeW5jU3RyYXRlZ3kgPSBzeW5jU3RyYXRlZ3k7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJIYW5kbGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnJkYi5jb3JlO1xuXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuZXhlY3V0b3IuRXhlY3V0b3JNYW5hZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIucG9saWN5LkNoYW5nZVRyYWNrZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5wb2xpY3kuU2F2ZVBvbGljeTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuKjtcblxucHVibGljIGNsYXNzIFJEQkhhbmRsZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyIGxvZ2dlciA9IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyLmdldExvZ2dlcihSREJIYW5kbGVyLmNsYXNzKTtcblxuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIFJEQlNhdmVyIHNhdmVyO1xuICAgIHByaXZhdGUgZmluYWwgUkRCTG9hZGVyIGxvYWRlcjtcbiAgICBwcml2YXRlIGZpbmFsIFNhdmVQb2xpY3kgc2F2ZVBvbGljeTtcbiAgICBwcml2YXRlIGZpbmFsIENoYW5nZVRyYWNrZXIgY2hhbmdlVHJhY2tlcjtcbiAgICBwcml2YXRlIGZpbmFsIEV4ZWN1dG9yTWFuYWdlciBleGVjdXRvck1hbmFnZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJGaWxlTWFuYWdlciBmaWxlTWFuYWdlcjtcblxuICAgIHByaXZhdGUgdm9sYXRpbGUgYm9vbGVhbiBpc1NhdmluZyA9IGZhbHNlO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvQmdzYXZlLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICBpZiAocmRiSGFuZGxlciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkVSUiBSREIgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/lnKjov5vooYzkv53lrZhcbiAgICAgICAgaWYgKHJkYkhhbmRsZXIuaXNTYXZpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgQmFja2dyb3VuZCBzYXZlIGFscmVhZHkgaW4gcHJvZ3Jlc3NcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDop6blj5HlkI7lj7Dlhajph4/kv53lrZhcbiAgICAgICAgYm9vbGVhbiBzdGFydGVkID0gcmRiSGFuZGxlci5iZ3NhdmUodHJ1ZSk7XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkJhY2tncm91bmQgc2F2aW5nIHN0YXJ0ZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkVSUiBCYWNrZ3JvdW5kIHNhdmUgY291bGQgbm90IGJlIHN0YXJ0ZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9SZWRpc0NvcmUuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTg7XG5cbiBpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsO1xuIGltcG9ydCBzaXRlLmhuZnkyNTguZGF0YWJhc2UuUmVkaXNEQjtcbiBpbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbiBpbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLlJlZGlzRGF0YTtcbiBpbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuIGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiBpbXBvcnQgamF2YS51dGlsLk1hcDtcbiBpbXBvcnQgamF2YS51dGlsLlNldDtcbiBcbiBwdWJsaWMgaW50ZXJmYWNlIFJlZGlzQ29yZVxuIHtcbiAgICAgU2V0PEJ5dGVzV3JhcHBlcj4ga2V5cygpO1xuIFxuICAgICB2b2lkIHB1dENsaWVudChCeXRlc1dyYXBwZXIgY29ubmVjdGlvbk5hbWUsIENoYW5uZWwgY2hhbm5lbENvbnRleHQpO1xuIFxuICAgICBib29sZWFuIGV4aXN0KEJ5dGVzV3JhcHBlciBrZXkpO1xuIFxuICAgICB2b2lkIHB1dChCeXRlc1dyYXBwZXIga2V5LCBSZWRpc0RhdGEgcmVkaXNEYXRhKTtcbiBcbiAgICAgUmVkaXNEYXRhIGdldChCeXRlc1dyYXBwZXIga2V5KTtcbiBcbiAgICAgbG9uZyByZW1vdmUoTGlzdDxCeXRlc1dyYXBwZXI+IGtleXMpO1xuIFxuICAgICB2b2lkIGNsZWFuQWxsKCk7XG5cbiAgICAgUmVkaXNEQiBnZXRDdXJyZW50REIoKTtcblxuICAgICB2b2lkIHNlbGVjdERCKGludCBpbmRleCk7XG5cbiAgICAgaW50IGdldERiTnVtKCk7XG5cbiAgICAgTWFwPEJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhPiBnZXRBbGwoKTtcblxuICAgICB2b2lkIHNldERCKGludCBjdXJyZW50RGIsIEJ5dGVzV3JhcHBlciBieXRlc1dyYXBwZXIsIFJlZGlzRGF0YSByZWRpc0RhdGEpO1xuXG4gICAgIE1hcDxCeXRlc1dyYXBwZXIsIFJlZGlzRGF0YT4gZ2V0REJEYXRhKGludCBkYkluZGV4KTtcblxuICAgICBNeVJlZGlzU2VydmljZSBnZXRSZWRpc1NlcnZpY2UoKTtcbiB9Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9SZWRpc0NvcmVJbXBsLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4O1xuXG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhYmFzZS5SZWRpc0RCO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLlJlZGlzRGF0YTtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguc2VydmVyLk15UmVkaXNTZXJ2aWNlO1xuXG5pbXBvcnQgamF2YS51dGlsLio7XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudEhhc2hNYXA7XG5cbnB1YmxpYyBjbGFzcyBSZWRpc0NvcmVJbXBsIGltcGxlbWVudHMgUmVkaXNDb3JlIHtcbiAgICBwcml2YXRlIGZpbmFsIExpc3Q8UmVkaXNEQj4gZGF0YWJhc2VzO1xuICAgIHByaXZhdGUgZmluYWwgaW50IGRiTnVtO1xuICAgIHByaXZhdGUgZmluYWwgVGhyZWFkTG9jYWw8SW50ZWdlcj4gY3VycmVudERCO1xuICAgIHByaXZhdGUgZmluYWwgQ29uY3VycmVudEhhc2hNYXA8Qnl0ZXNXcmFwcGVyLCBDaGFubmVsPiBjbGllbnRzO1xuICAgIHByaXZhdGUgZmluYWwgTWFwPENoYW5uZWwsIEJ5dGVzV3JhcHBlcj4gY2xpZW50TmFtZXM7XG4gICAgcHJpdmF0ZSBSREJIYW5kbGVyIHJkYkhhbmRsZXI7XG5cbiAgICBwcml2YXRlIE15UmVkaXNTZXJ2aWNlIHJlZGlzU2VydmljZTtcblxuXG4gICAgcHVibGljIFJlZGlzQ29yZUltcGwoaW50IGRiTnVtLCBNeVJlZGlzU2VydmljZSByZWRpc1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYk51bSA9IGRiTnVtO1xuICAgICAgICB0aGlzLmRhdGFiYXNlcyA9IG5ldyBBcnJheUxpc3Q8PihkYk51bSk7XG4gICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZGJOdW07IGkrKykge1xuICAgICAgICAgICAgZGF0YWJhc2VzLmFkZChuZXcgUmVkaXNEQihpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50REIgPSBUaHJlYWRMb2NhbC53aXRoSW5pdGlhbCgoKSAtPiAwKTtcbiAgICAgICAgdGhpcy5jbGllbnRzID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwPD4oKTtcbiAgICAgICAgdGhpcy5jbGllbnROYW1lcyA9IG5ldyBDb25jdXJyZW50SGFzaE1hcDw+KCk7XG4gICAgICAgIHRoaXMucmVkaXNTZXJ2aWNlID0gcmVkaXNTZXJ2aWNlO1xuICAgIH1cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUmVkaXNEQiBnZXRDdXJyZW50REIoKSB7XG4gICAgICAgIHJldHVybiBkYXRhYmFzZXMuZ2V0KGN1cnJlbnREQi5nZXQoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2VsZWN0REIoaW50IGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgZGJOdW0pIHtcbiAgICAgICAgICAgIGN1cnJlbnREQi5zZXQoaW5kZXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgREIgaW5kZXhcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU2V0PEJ5dGVzV3JhcHBlcj4ga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIGdldEN1cnJlbnREQigpLmtleXMoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBwdXRDbGllbnQoQnl0ZXNXcmFwcGVyIGNvbm5lY3Rpb25OYW1lLCBDaGFubmVsIGNoYW5uZWxDb250ZXh0KSB7XG4gICAgICAgIGNsaWVudHMucHV0KGNvbm5lY3Rpb25OYW1lLCBjaGFubmVsQ29udGV4dCk7XG4gICAgICAgIGNsaWVudE5hbWVzLnB1dChjaGFubmVsQ29udGV4dCwgY29ubmVjdGlvbk5hbWUpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBib29sZWFuIGV4aXN0KEJ5dGVzV3JhcHBlciBrZXkpIHtcbiAgICAgICAgcmV0dXJuIGdldEN1cnJlbnREQigpLmV4aXN0KGtleSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgcHV0KEJ5dGVzV3JhcHBlciBrZXksIFJlZGlzRGF0YSByZWRpc0RhdGEpIHtcbiAgICAgICAgZ2V0Q3VycmVudERCKCkucHV0KGtleSwgcmVkaXNEYXRhKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUmVkaXNEYXRhIGdldChCeXRlc1dyYXBwZXIga2V5KSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50REIoKS5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgbG9uZyByZW1vdmUoTGlzdDxCeXRlc1dyYXBwZXI+IGtleXMpIHtcbiAgICAgICAgcmV0dXJuIGdldEN1cnJlbnREQigpLnJlbW92ZShrZXlzKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBjbGVhbkFsbCgpIHtcblxuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkge1xuICAgICAgICBnZXRDdXJyZW50REIoKS5jbGVhcigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIGdldEN1cnJlbnREQigpLnNpemUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgQ2hhbm5lbCBnZXRDbGllbnQoQnl0ZXNXcmFwcGVyIGNvbm5lY3Rpb25OYW1lKSB7XG4gICAgICAgIHJldHVybiBjbGllbnRzLmdldChjb25uZWN0aW9uTmFtZSk7XG4gICAgfVxuXG4gICAgcHVibGljIEJ5dGVzV3JhcHBlciBnZXRDbGllbnROYW1lKENoYW5uZWwgY2hhbm5lbENvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIGNsaWVudE5hbWVzLmdldChjaGFubmVsQ29udGV4dCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgcmVtb3ZlQ2xpZW50KENoYW5uZWwgY2hhbm5lbENvbnRleHQpIHtcbiAgICAgICAgQnl0ZXNXcmFwcGVyIGNvbm5lY3Rpb25OYW1lID0gY2xpZW50TmFtZXMucmVtb3ZlKGNoYW5uZWxDb250ZXh0KTtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25OYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsaWVudHMucmVtb3ZlKGNvbm5lY3Rpb25OYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0RGJOdW0oKSB7XG4gICAgICAgIHJldHVybiBkYk51bTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTWFwPEJ5dGVzV3JhcHBlciwgUmVkaXNEYXRhPiBnZXRBbGwoKSB7XG4gICAgICAgIE1hcDxCeXRlc1dyYXBwZXIsIFJlZGlzRGF0YT4gbWFwID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBmb3IgKFJlZGlzREIgcmVkaXNEQiA6IGRhdGFiYXNlcykge1xuICAgICAgICAgICAgZm9yIChCeXRlc1dyYXBwZXIga2V5IDogcmVkaXNEQi5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBSZWRpc0RhdGEgcmVkaXNEYXRhID0gcmVkaXNEQi5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAocmVkaXNEYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwLnB1dChuZXcgQnl0ZXNXcmFwcGVyKGtleS5nZXRCeXRlcygpKSwgcmVkaXNEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hcDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzZXREQihpbnQgY3VycmVudERiLCBCeXRlc1dyYXBwZXIgYnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGEgcmVkaXNEYXRhKSB7XG4gICAgICAgIGRhdGFiYXNlcy5nZXQoY3VycmVudERiKS5wdXQoYnl0ZXNXcmFwcGVyLCByZWRpc0RhdGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGRpc2Nvbm5lY3RDbGllbnQoQ2hhbm5lbCBjaGFubmVsKSB7XG4gICAgICAgIEJ5dGVzV3JhcHBlciBjb25uZWN0aW9uTmFtZSA9IGNsaWVudE5hbWVzLnJlbW92ZShjaGFubmVsKTtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25OYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsaWVudHMucmVtb3ZlKGNvbm5lY3Rpb25OYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGdldERCRGF0YShpbnQgZGJJbmRleCkge1xuICAgICAgICByZXR1cm4gZGF0YWJhc2VzLmdldChkYkluZGV4KS5nZXRBbGwoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTXlSZWRpc1NlcnZpY2UgZ2V0UmVkaXNTZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4gcmVkaXNTZXJ2aWNlO1xuICAgIH1cblxuXG4gICAgcHVibGljIFJEQkhhbmRsZXIgZ2V0UkRCSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHJkYkhhbmRsZXI7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0UkRCSGFuZGxlcihSREJIYW5kbGVyIHJkYkhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gcmRiSGFuZGxlcjtcbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9SZWRpc0NsdXN0ZXJMYXVuY2hlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1ODtcblxuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguc2VydmVyLk15UmVkaXNTZXJ2aWNlO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db3VudERvd25MYXRjaDtcblxucHVibGljIGNsYXNzIFJlZGlzQ2x1c3RlckxhdW5jaGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnRbXSBQT1JUUyA9IHs2Mzc5LCA2MzgwLCA2MzgxLCA2MzgyfTtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBDb3VudERvd25MYXRjaCBMQVRDSCA9IG5ldyBDb3VudERvd25MYXRjaChQT1JUUy5sZW5ndGgpO1xuXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xuICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IG5ldyBSZWRpc0NsdXN0ZXIodHJ1ZSk7XG5cbiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBQT1JUUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZmluYWwgU3RyaW5nIG5vZGVJZCA9IFwibm9kZVwiICsgKGkgKyAxKTtcbiAgICAgICAgICAgIGZpbmFsIGludCBwb3J0ID0gUE9SVFNbaV07XG4gICAgICAgICAgICBuZXcgVGhyZWFkKCgpIC0+IHN0YXJ0Tm9kZShjbHVzdGVyLCBub2RlSWQsIHBvcnQpKS5zdGFydCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIExBVENILmF3YWl0KCk7IC8vIOetieW+heaJgOacieiKgueCueWQr+WKqFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiQWxsIG5vZGVzIHN0YXJ0ZWQuIENsdXN0ZXIgaXMgcmVhZHkuXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDliJ3lp4vljJbliIbniYdcbiAgICAgICAgICAgIGNsdXN0ZXIuaW5pdGlhbGl6ZVNoYXJkaW5nKCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTaGFyZGluZyBpbml0aWFsaXplZC5cIik7XG5cbiAgICAgICAgICAgIC8vIOS/neaMgeeoi+W6j+i/kOihjFxuICAgICAgICAgICAga2VlcFJ1bm5pbmcoKTtcbiAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ2x1c3RlciBzdGFydHVwIGludGVycnVwdGVkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHZvaWQgc3RhcnROb2RlKFJlZGlzQ2x1c3RlciBjbHVzdGVyLCBTdHJpbmcgbm9kZUlkLCBpbnQgcG9ydCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU3RhcnRpbmcgbm9kZSBcIiArIG5vZGVJZCArIFwiIG9uIHBvcnQgXCIgKyBwb3J0KTtcbiAgICAgICAgICAgIGNsdXN0ZXIuYWRkTm9kZShub2RlSWQsIFwibG9jYWxob3N0XCIsIHBvcnQpO1xuICAgICAgICAgICAgTXlSZWRpc1NlcnZpY2Ugc2VydmljZSA9IGNsdXN0ZXIuZ2V0Tm9kZShub2RlSWQpO1xuICAgICAgICAgICAgc2VydmljZS5zdGFydCgpO1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiTm9kZSBcIiArIG5vZGVJZCArIFwiIHN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJGYWlsZWQgdG8gc3RhcnQgbm9kZSBcIiArIG5vZGVJZCArIFwiOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIExBVENILmNvdW50RG93bigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBrZWVwUnVubmluZygpIHtcbiAgICAgICAgUnVudGltZS5nZXRSdW50aW1lKCkuYWRkU2h1dGRvd25Ib29rKG5ldyBUaHJlYWQoKCkgLT4ge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiU2h1dHRpbmcgZG93biBSZWRpcyBjbHVzdGVyLi4uXCIpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDEwMDApO1xuICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9zZXJ2ZXIvUmVkaXNTZXJ2aWNlLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnNlcnZlcjtcblxuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5cbnB1YmxpYyBpbnRlcmZhY2UgUmVkaXNTZXJ2aWNlIHtcbiAgICB2b2lkIHN0YXJ0KCk7XG4gICAgdm9pZCBjbG9zZSgpO1xuICAgIE15UmVkaXNTZXJ2aWNlIGdldFJlZGlzU2VydmljZSgpO1xuXG4gICAgUmVkaXNDb3JlIGdldFJlZGlzQ29yZSgpO1xufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9SZWRpc1NlcnZlclN0YXJ0ZXIuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBSZWRpc1NlcnZlclN0YXJ0ZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKFJlZGlzU2VydmVyU3RhcnRlci5jbGFzcyk7XG4gICAgcHJpdmF0ZSBzdGF0aWMgUmVkaXNTZXJ2aWNlIHJlZGlzU2VydmljZTtcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8v6buY6K6k56uv5Y+jXG4gICAgICAgIGludCBwb3J0ID0gNjM3OTtcblxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBvcnQgPSBJbnRlZ2VyLnBhcnNlSW50KGFyZ3NbMF0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHBvcnQgbnVtYmVyLCB1c2luZyBkZWZhdWx0OiBcIiArIHBvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5Yib5bu65bm25ZCv5YqoUmVkaXPmnI3liqFcbiAgICAgICAgcmVkaXNTZXJ2aWNlID0gbmV3IE15UmVkaXNTZXJ2aWNlKHBvcnQpO1xuXG4gICAgICAgIC8vIOa3u+WKoOWFs+mXremSqeWtkFxuICAgICAgICBSdW50aW1lLmdldFJ1bnRpbWUoKS5hZGRTaHV0ZG93bkhvb2sobmV3IFRocmVhZCgoKSAtPiB7XG4gICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi5q2j5Zyo5YWz6ZetUmVkaXPmnI3liqHlmaguLi5cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlZGlzU2VydmljZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIC8vIOe7meS4gOS6m+aXtumXtOiuqeaXpeW/l+WujOaIkOWGmeWFpVxuICAgICAgICAgICAgICAgIFRocmVhZC5zbGVlcCg1MDApO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLlhbPpl63mnI3liqHml7blj5HnlJ/plJnor69cIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwiUmVkaXPmnI3liqHlmajlt7LlhbPpl61cIik7XG4gICAgICAgIH0pKTtcblxuICAgICAgICByZWRpc1NlcnZpY2Uuc3RhcnQoKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NsdXN0ZXIvUmVkaXNDbHVzdGVyLmphdmFcbi4uLlxuXG4gICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZVNoYXJkaW5nKCkge1xuICAgICAgICBpZiAoc2hhcmRpbmdFbmFibGVkICYmICFub2Rlcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIExpc3Q8U3RyaW5nPiBub2RlSWRzID0gbmV3IEFycmF5TGlzdDw+KG5vZGVzLmtleVNldCgpKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkluaXRpYWxpemluZyBzaGFyZGluZyB3aXRoIG5vZGVzOiBcIiArIG5vZGVJZHMpO1xuICAgICAgICAgICAgdGhpcy5zaGFyZGluZ1N0cmF0ZWd5ID0gbmV3IENvbnNpc3RlbnRIYXNoU2hhcmRpbmcobm9kZUlkcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzdG9wKCkge1xuICAgICAgICBmb3IgKE15UmVkaXNTZXJ2aWNlIHNlcnZpY2UgOiBzZXJ2aWNlcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgc2VydmljZS5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIE15UmVkaXNTZXJ2aWNlIGdldE5vZGUoU3RyaW5nIG5vZGVJZCkge1xuICAgICAgICByZXR1cm4gc2VydmljZXMuZ2V0KG5vZGVJZCk7XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzdGFydCgpIHtcbiAgICAgICAgZm9yIChNYXAuRW50cnk8U3RyaW5nLCBNeVJlZGlzU2VydmljZT4gZW50cnkgOiBzZXJ2aWNlcy5lbnRyeVNldCgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN0YXJ0aW5nIG5vZGU6IFwiICsgZW50cnkuZ2V0S2V5KCkgKyBcIiBvbiBwb3J0IFwiICsgZW50cnkuZ2V0VmFsdWUoKS5nZXRQb3J0KCkpO1xuICAgICAgICAgICAgICAgIGVudHJ5LmdldFZhbHVlKCkuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJOb2RlIFwiICsgZW50cnkuZ2V0S2V5KCkgKyBcIiBzdGFydGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRmFpbGVkIHRvIHN0YXJ0IG5vZGUgXCIgKyBlbnRyeS5nZXRLZXkoKSArIFwiOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNvbm5lY3ROb2RlcygpIHtcbiAgICAgICAgLy8g5Li65q+P5Liq6IqC54K55Yib5bu65LiO5YW25LuW6IqC54K555qE6L+e5o6lXG4gICAgICAgIGZvciAoTWFwLkVudHJ5PFN0cmluZywgTXlSZWRpc1NlcnZpY2U+IGVudHJ5IDogc2VydmljZXMuZW50cnlTZXQoKSkge1xuICAgICAgICAgICAgU3RyaW5nIGN1cnJlbnROb2RlSWQgPSBlbnRyeS5nZXRLZXkoKTtcbiAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIGN1cnJlbnRTZXJ2aWNlID0gZW50cnkuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIENsdXN0ZXJOb2RlIGN1cnJlbnROb2RlID0gbm9kZXMuZ2V0KGN1cnJlbnROb2RlSWQpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jbHVzdGVyL0NsdXN0ZXJNYW5hZ2VyLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgQ2x1c3Rlck1hbmFnZXIge1xuICAgIHByaXZhdGUgUmVkaXNDbHVzdGVyIGNsdXN0ZXI7XG5cbiAgICBwdWJsaWMgQ2x1c3RlLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOTM2MzRkOTYtZmEwYi00OTlhLTljZTAtZDk0MmZmOGMwNWJhO3Rvb2x1X3ZydHhfMDFUazdIMlVzcExiRjRCaWlieGNQTnlIIjp7InJlcXVlc3RJZCI6IjkzNjM0ZDk2LWZhMGItNDk5YS05Y2UwLWQ5NDJmZjhjMDViYSIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFUazdIMlVzcExiRjRCaWlieGNQTnlIIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YTpcbiAgICAgMVx0cGFja2FnZSBzaXRlLmhuZnkyNTguYW9mLnJld3JpdGVyO1xuICAgICAyXHRcbiAgICAgM1x0XG4gICAgIDRcdFxuICAgICA1XHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG4gICAgIDZcdGltcG9ydCBpby5uZXR0eS5idWZmZXIuVW5wb29sZWQ7XG4gICAgIDdcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbiAgICAgOFx0aW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG4gICAgIDlcdGltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuICAgIDEwXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLlJlZGlzRGF0YTtcbiAgICAxMVx0aW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5CdWxrU3RyaW5nO1xuICAgIDEyXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG4gICAgMTNcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcEFycmF5O1xuICAgIDE0XHRcbiAgICAxNVx0aW1wb3J0IGphdmEuaW8uRmlsZTtcbiAgICAxNlx0aW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG4gICAgMTdcdGltcG9ydCBqYXZhLmlvLlJhbmRvbUFjY2Vzc0ZpbGU7XG4gICAgMThcdGltcG9ydCBqYXZhLm5pby5CeXRlQnVmZmVyO1xuICAgIDE5XHRpbXBvcnQgamF2YS5uaW8uY2hhbm5lbHMuRmlsZUNoYW5uZWw7XG4gICAgMjBcdGltcG9ydCBqYXZhLm5pby5maWxlLkZpbGVzO1xuICAgIDIxXHRpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiAgICAyMlx0aW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9ucztcbiAgICAyM1x0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgIDI0XHRpbXBvcnQgamF2YS51dGlsLk1hcDtcbiAgICAyNVx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNCb29sZWFuO1xuICAgIDI2XHRwdWJsaWMgY2xhc3MgQU9GUmV3cml0ZXIge1xuICAgIDI3XHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQU9GUmV3cml0ZXIuY2xhc3MpO1xuICAgIDI4XHRcbiAgICAyOVx0ICAgIC8v5qC45b+DXG4gICAgMzBcdCAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgMzFcdCAgICAvL+S4tOaXtuaWh+S7tuWQjVxuICAgIDMyXHQgICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcgdGVtcEZpbGVuYW1lO1xuICAgIDMzXHQgICAgLy9BT0bmlofku7blkI1cbiAgICAzNFx0ICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIGFvZkZpbGVuYW1lO1xuICAgIDM1XHQgICAgLy/mmK/lkKblnKjph43lhpnmtYHnqItcbiAgICAzNlx0ICAgIHByaXZhdGUgZmluYWwgQXRvbWljQm9vbGVhbiBpc1Jld3JpdGluZztcbiAgICAzN1x0ICAgIC8v6YeN5YaZ55qEYnVmZmVy5aSn5bCPXG4gICAgMzhcdCAgICBwcml2YXRlIGludCBidWZmZXJTaXplO1xuICAgIDM5XHRcbiAgICA0MFx0XG4gICAgNDFcdCAgICBwdWJsaWMgQU9GUmV3cml0ZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSwgU3RyaW5nIGFvZkZpbGVuYW1lLCBpbnQgYnVmZmVyU2l6ZSkge1xuICAgIDQyXHQgICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIDQzXHQgICAgICAgIHRoaXMuYW9mRmlsZW5hbWUgPSBhb2ZGaWxlbmFtZTtcbiAgICA0NFx0ICAgICAgICB0aGlzLnRlbXBGaWxlbmFtZSA9IGFvZkZpbGVuYW1lK1wiLnRtcFwiO1xuICAgIDQ1XHQgICAgICAgIHRoaXMuaXNSZXdyaXRpbmcgPSBuZXcgQXRvbWljQm9vbGVhbihmYWxzZSk7XG4gICAgNDZcdCAgICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZTtcbiAgICA0N1x0ICAgIH1cbiAgICA0OFx0XG4gICAgNDlcdCAgICBwdWJsaWMgYm9vbGVhbiBjYW5SZXdyaXRlKCl7XG4gICAgNTBcdCAgICAgICAgcmV0dXJuICFpc1Jld3JpdGluZy5nZXQoKTtcbiAgICA1MVx0ICAgIH1cbiAgICA1Mlx0XG4gICAgNTNcdCAgICBMaXN0PEJ5dGVCdWZmZXI+IHJld3JpdGVCdWZmZXI7XG4gICAgNTRcdFxuICAgIDU1XHQgICAgcHVibGljIGJvb2xlYW4gcmV3cml0ZSgpe1xuICAgIDU2XHQgICAgICAgIGlmKCFpc1Jld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLHRydWUpKXtcbiAgICA1N1x0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5q2j5Zyo6YeN5YaZXCIpO1xuICAgIDU4XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNTlcdCAgICAgICAgfVxuICAgIDYwXHRcbiAgICA2MVx0ICAgICAgICB0cnl7XG4gICAgNjJcdCAgICAgICAgICAgIHJld3JpdGVCdWZmZXIgPSBDb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRMaXN0KG5ldyBBcnJheUxpc3Q8PigpKTtcbiAgICA2M1x0XG4gICAgNjRcdCAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RhcnRSZXdyaXRlQnVmZmVyKCk7XG4gICAgNjVcdFxuICAgIDY2XHQgICAgICAgICAgICBGaWxlIHRlbXBGaWxlID0gbmV3IEZpbGUodGVtcEZpbGVuYW1lKTtcbiAgICA2N1x0ICAgICAgICAgICAgaWYodGVtcEZpbGUuZXhpc3RzKCkpe1xuICAgIDY4XHQgICAgICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XG4gICAgNjlcdCAgICAgICAgICAgIH1cbiAgICA3MFx0XG4gICAgNzFcdFxuICAgIDcyXHRcbiAgICA3M1x0ICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gZG9Xcml0ZSgpO1xuICAgIDc0XHRcbiAgICA3NVx0XG4gICAgNzZcdCAgICAgICAgICAgIGlmKHN1Y2Nlc3Mpe1xuICAgIDc3XHQgICAgICAgICAgICAgICAgTGlzdDxCeXRlQnVmZmVyPiBidWZmZXJzID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdG9wUmV3cml0ZUJ1ZmZlckFuZEdldCgpO1xuICAgIDc4XHRcbiAgICA3OVx0ICAgICAgICAgICAgICAgIC8vIOWwhumHjeWGmeacn+mXtOeahOWRveS7pOi/veWKoOWIsOaWsEFPRuaWh+S7tlxuICAgIDgwXHQgICAgICAgICAgICAgICAgYXBwZW5kUmV3cml0ZUJ1ZmZlclRvVGVtcEZpbGUoYnVmZmVycyk7XG4gICAgODFcdFxuICAgIDgyXHQgICAgICAgICAgICAgICAgLy8g5Y6f5a2Q5oCn5Zyw5pu/5o2i5paH5Lu2XG4gICAgODNcdCAgICAgICAgICAgICAgICBhdG9taWNSZXBsYWNlRmlsZSh0ZW1wRmlsZSwgbmV3IEZpbGUoYW9mRmlsZW5hbWUpKTtcbiAgICA4NFx0ICAgICAgICAgICAgfWVsc2V7XG4gICAgODVcdCAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLph43lhpnlpLHotKVcIik7XG4gICAgODZcdCAgICAgICAgICAgICAgICB0ZW1wRmlsZS5kZWxldGUoKTtcbiAgICA4N1x0XG4gICAgODhcdCAgICAgICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLmRpc2NhcmRSZXdyaXRlQnVmZmVyKCk7XG4gICAgODlcdCAgICAgICAgICAgIH1cbiAgICA5MFx0ICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgOTFcdCAgICAgICAgfWNhdGNoKEV4Y2VwdGlvbiBlKXtcbiAgICA5Mlx0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZHVyaW5nIEFPRlJld3JpdGVyXCIsIGUpO1xuICAgIDkzXHQgICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLmRpc2NhcmRSZXdyaXRlQnVmZmVyKCk7XG4gICAgOTRcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA5NVx0ICAgICAgICB9ZmluYWxseSB7XG4gICAgOTZcdCAgICAgICAgICAgIGlzUmV3cml0aW5nLnNldChmYWxzZSk7XG4gICAgOTdcdCAgICAgICAgfVxuICAgIDk4XHQgICAgfVxuICAgIDk5XHRcbiAgIDEwMFx0ICAgIHByaXZhdGUgdm9pZCBhdG9taWNSZXBsYWNlRmlsZShGaWxlIHRlbXBGaWxlLCBGaWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAxMDFcdCAgICAgICAgaWYoIXRlbXBGaWxlLnJlbmFtZVRvKGZpbGUpKXtcbiAgIDEwMlx0ICAgICAgICAgICAgRmlsZSBiYWNrdXAgPSBuZXcgRmlsZShmaWxlLmdldEFic29sdXRlUGF0aCgpICsgXCIuYmFrXCIpO1xuICAgMTAzXHQgICAgICAgICAgICBpZihmaWxlLmV4aXN0cygpKXtcbiAgIDEwNFx0ICAgICAgICAgICAgICAgIGlmKGJhY2t1cC5leGlzdHMoKSl7XG4gICAxMDVcdCAgICAgICAgICAgICAgICAgICAgYmFja3VwLmRlbGV0ZSgpO1xuICAgMTA2XHQgICAgICAgICAgICAgICAgfVxuICAgMTA3XHQgICAgICAgICAgICAgICAgZmlsZS5yZW5hbWVUbyhiYWNrdXApO1xuICAgMTA4XHQgICAgICAgICAgICB9XG4gICAxMDlcdFxuICAgMTEwXHQgICAgICAgICAgICBpZighdGVtcEZpbGUucmVuYW1lVG8odGVtcEZpbGUpKXtcbiAgIDExMVx0ICAgICAgICAgICAgICAgIEZpbGVzLmNvcHkodGVtcEZpbGUudG9QYXRoKCksIGZpbGUudG9QYXRoKCkpO1xuICAgMTEyXHQgICAgICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XG4gICAxMTNcdCAgICAgICAgICAgIH1cbiAgIDExNFx0XG4gICAxMTVcdCAgICAgICAgICAgIGlmKGJhY2t1cC5leGlzdHMoKSl7XG4gICAxMTZcdCAgICAgICAgICAgICAgICBiYWNrdXAuZGVsZXRlKCk7XG4gICAxMTdcdCAgICAgICAgICAgIH1cbiAgIDExOFx0ICAgICAgICB9XG4gICAxMTlcdCAgICB9XG4gICAxMjBcdFxuICAgMTIxXHRcbiAgIDEyMlx0ICAgIHByaXZhdGUgdm9pZCBhcHBlbmRSZXdyaXRlQnVmZmVyVG9UZW1wRmlsZShMaXN0PEJ5dGVCdWZmZXI+IGJ1ZmZlcnMpIHRocm93cyBJT0V4Y2VwdGlvbntcbiAgIDEyM1x0ICAgICAgICBpZihidWZmZXJzPT1udWxsIHx8IGJ1ZmZlcnMuaXNFbXB0eSgpKXtcbiAgIDEyNFx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgMTI1XHQgICAgICAgIH1cbiAgIDEyNlx0ICAgICAgICB0cnkoUmFuZG9tQWNjZXNzRmlsZSByYWYgPSBuZXcgUmFuZG9tQWNjZXNzRmlsZSh0ZW1wRmlsZW5hbWUsXCJyd1wiKTtcbiAgIDEyN1x0ICAgICAgICBGaWxlQ2hhbm5lbCBmaWxlQ2hhbm5lbCA9IHJhZi5nZXRDaGFubmVsKCk7KXtcbiAgIDEyOFx0ICAgICAgICAgICAgZmlsZUNoYW5uZWwucG9zaXRpb24oZmlsZUNoYW5uZWwuc2l6ZSgpKTtcbiAgIDEyOVx0XG4gICAxMzBcdCAgICAgICAgICAgIGZvcihCeXRlQnVmZmVyIGJ1ZmZlciA6IGJ1ZmZlcnMpe1xuICAgMTMxXHQgICAgICAgICAgICAgICAgaWYoYnVmZmVyLmhhc1JlbWFpbmluZygpICYmIGJ1ZmZlciE9bnVsbCl7XG4gICAxMzJcdCAgICAgICAgICAgICAgICAgICAgZmlsZUNoYW5uZWwud3JpdGUoYnVmZmVyKTtcbiAgIDEzM1x0ICAgICAgICAgICAgICAgIH1cbiAgIDEzNFx0ICAgICAgICAgICAgfVxuICAgMTM1XHQgICAgICAgICAgICBmaWxlQ2hhbm5lbC5mb3JjZShmYWxzZSk7XG4gICAxMzZcdCAgICAgICAgfVxuICAgMTM3XHRcbiAgIDEzOFx0ICAgIH1cbiAgIDEzOVx0XG4gICAxNDBcdFxuICAgMTQxXHQgICAgcHJpdmF0ZSBib29sZWFuIGRvV3JpdGUoKSB7XG4gICAxNDJcdCAgICAgICAgdHJ5KFJhbmRvbUFjY2Vzc0ZpbGUgcmFmID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUodGVtcEZpbGVuYW1lLFwicndcIik7XG4gICAxNDNcdCAgICAgICAgICAgIEZpbGVDaGFubmVsIGZpbGVDaGFubmVsID0gcmFmLmdldENoYW5uZWwoKTtcbiAgIDE0NFx0ICAgICAgICApe1xuICAgMTQ1XHQgICAgICAgICAgICBCeXRlQnVmIGJ5dGVCdWYgPSBVbnBvb2xlZC5idWZmZXIoKTtcbiAgIDE0Nlx0XG4gICAxNDdcdCAgICAgICAgICAgIGZvcihpbnQgaT0wO2k8cmVkaXNDb3JlLmdldERiTnVtKCk7aSsrKXtcbiAgIDE0OFx0XG4gICAxNDlcdCAgICAgICAgICAgICAgICBNYXA8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGRiRGF0YSA9IHJlZGlzQ29yZS5nZXREQkRhdGEoaSk7XG4gICAxNTBcdCAgICAgICAgICAgICAgICBpZighZGJEYXRhLmlzRW1wdHkoKSl7XG4gICAxNTFcdCAgICAgICAgICAgICAgICAgICAgd3JpdGVTZWxlY3RDb21tYW5kKGJ5dGVCdWYsaSk7XG4gICAxNTJcdCAgICAgICAgICAgICAgICAgICAgZmx1c2hJZk5lZWRlZChieXRlQnVmLGZpbGVDaGFubmVsKTtcbiAgIDE1M1x0ICAgICAgICAgICAgICAgIH1cbiAgIDE1NFx0ICAgICAgICAgICAgICAgIGZvcihNYXAuRW50cnk8Qnl0ZXNXcmFwcGVyLCBSZWRpc0RhdGE+IGVudHJ5IDogZGJEYXRhLmVudHJ5U2V0KCkpe1xuICAgMTU1XHQgICAgICAgICAgICAgICAgICAgIEJ5dGVzV3JhcHBlciBrZXkgPSBlbnRyeS5nZXRLZXkoKTtcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgICAgICBSZWRpc0RhdGEgdmFsdWUgPSBlbnRyeS5nZXRWYWx1ZSgpO1xuICAgMTU3XHRcbiAgIDE1OFx0ICAgICAgICAgICAgICAgICAgICBMaXN0PFJlc3A+IGNvbW1hbmRMaXN0ID0gdmFsdWUuY29udmVydFRvUkVTUCgpO1xuICAgMTU5XHQgICAgICAgICAgICAgICAgICAgIGZvcihSZXNwIGNvbW1hbmQgOiBjb21tYW5kTGlzdCl7XG4gICAxNjBcdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQud3JpdGUoY29tbWFuZCwgYnl0ZUJ1Zik7XG4gICAxNjFcdCAgICAgICAgICAgICAgICAgICAgICAgIGZsdXNoSWZOZWVkZWQoYnl0ZUJ1ZixmaWxlQ2hhbm5lbCk7XG4gICAxNjJcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMTYzXHQgICAgICAgICAgICAgICAgfVxuICAgMTY0XHQgICAgICAgICAgICB9XG4gICAxNjVcdCAgICAgICAgICAgIGlmKGJ5dGVCdWYucmVhZGFibGVCeXRlcygpPjApe1xuICAgMTY2XHQgICAgICAgICAgICAgICAgQnl0ZUJ1ZmZlciAgYnl0ZUJ1ZmZlciA9IGJ5dGVCdWYubmlvQnVmZmVyKCk7XG4gICAxNjdcdCAgICAgICAgICAgICAgICBmaWxlQ2hhbm5lbC53cml0ZShieXRlQnVmZmVyKTtcbiAgIDE2OFx0ICAgICAgICAgICAgfVxuICAgMTY5XHRcbiAgIDE3MFx0ICAgICAgICB9Y2F0Y2goRXhjZXB0aW9uIGUpe1xuICAgMTcxXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBkdXJpbmcgQU9GUmV3cml0ZXJcIiwgZSk7XG4gICAxNzJcdCAgICAgICAgfVxuICAgMTczXHQgICAgICAgIHJldHVybiB0cnVlO1xuICAgMTc0XHQgICAgfVxuICAgMTc1XHRcbiAgIDE3Nlx0ICAgIHByaXZhdGUgdm9pZCB3cml0ZVNlbGVjdENvbW1hbmQoQnl0ZUJ1ZiBieXRlQnVmLCBpbnQgaSkge1xuICAgMTc3XHQgICAgICAgIExpc3Q8UmVzcD4gc2VsZWN0Q29tbWFuZCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgMTc4XHQgICAgICAgIHNlbGVjdENvbW1hbmQuYWRkKG5ldyBCdWxrU3RyaW5nKG5ldyBCeXRlc1dyYXBwZXIoXCJTRUxFQ1RcIi5nZXRCeXRlcygpKSkpO1xuICAgMTc5XHQgICAgICAgIHNlbGVjdENvbW1hbmQuYWRkKG5ldyBCdWxrU3RyaW5nKG5ldyBCeXRlc1dyYXBwZXIoU3RyaW5nLnZhbHVlT2YoaSkuZ2V0Qnl0ZXMoKSkpKTtcbiAgIDE4MFx0XG4gICAxODFcdCAgICAgICAgUmVzcEFycmF5IHNlbGVjdENvbW1hbmRBcnJheSA9IG5ldyBSZXNwQXJyYXkoc2VsZWN0Q29tbWFuZC50b0FycmF5KG5ldyBSZXNwWzBdKSk7XG4gICAxODJcdCAgICAgICAgc2VsZWN0Q29tbWFuZEFycmF5LndyaXRlKHNlbGVjdENvbW1hbmRBcnJheSwgYnl0ZUJ1Zik7XG4gICAxODNcdFxuICAgMTg0XHQgICAgfVxuICAgMTg1XHRcbiAgIDE4Nlx0ICAgIHByaXZhdGUgdm9pZCBmbHVzaElmTmVlZGVkKEJ5dGVCdWYgYnVmZmVyLCBGaWxlQ2hhbm5lbCBjaGFubmVsKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgMTg3XHQgICAgICAgIC8vIOW9k+e8k+WGsuWMuuS9v+eUqOi2hei/hzc1JeaXtuWIt+aWsFxuICAgMTg4XHQgICAgICAgIGlmIChidWZmZXIucmVhZGFibGVCeXRlcygpID4gKGJ1ZmZlclNpemUgKiAwLjc1KSkge1xuICAgMTg5XHQgICAgICAgICAgICBCeXRlQnVmZmVyIGJ5dGVCdWZmZXIgPSBidWZmZXIubmlvQnVmZmVyKCk7XG4gICAxOTBcdCAgICAgICAgICAgIGNoYW5uZWwud3JpdGUoYnl0ZUJ1ZmZlcik7XG4gICAxOTFcdCAgICAgICAgICAgIGJ1ZmZlci5jbGVhcigpO1xuICAgMTkyXHQgICAgICAgIH1cbiAgIDE5M1x0ICAgIH1cbiAgIDE5NFx0XG4gICAxOTVcdFxuICAgMTk2XHR9XG4gICAxOTdcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTk3XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxZGQxNmI3Yi1lNzE5LTQ0ZmItYmY5NS1iMjVmZTJiMTg0M2I7dG9vbHVfdnJ0eF8wMUdHaHlQUjNxUjNoS2lNWG5RQXZpb1IiOnsicmVxdWVzdElkIjoiMWRkMTZiN2ItZTcxOS00NGZiLWJmOTUtYjI1ZmUyYjE4NDNiIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUdHaHlQUjNxUjNoS2lNWG5RQXZpb1IiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbiAgICAgNFx0aW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5VbnBvb2xlZDtcbiAgICAgNVx0aW1wb3J0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5Db21wbGV0ZUZ1dHVyZTtcbiAgICAgNlx0aW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuICAgICA3XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbiAgICAgOFx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YubG9hZGVyLkFPRkxvYWRlcjtcbiAgICAgOVx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YubG9hZGVyLkxvYWRlcjtcbiAgICAxMFx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucHJvY2Vzc29yLkFPRlByb2Nlc3NvcjtcbiAgICAxMVx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucHJvY2Vzc29yLlByb2Nlc3NvcjtcbiAgICAxMlx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucmV3cml0ZXIuQU9GUmV3cml0ZXI7XG4gICAgMTNcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLndyaXRlci5BT0ZXcml0ZXI7XG4gICAgMTRcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLndyaXRlci5Xcml0ZXI7XG4gICAgMTVcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbiAgICAxNlx0XG4gICAgMTdcdGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuICAgIDE4XHRpbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjtcbiAgICAxOVx0aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgMjBcdGltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7XG4gICAgMjFcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAyMlx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbXBsZXRhYmxlRnV0dXJlO1xuICAgIDIzXHRpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0Jvb2xlYW47XG4gICAgMjRcdFxuICAgIDI1XHQvKipcbiAgICAyNlx0ICogQU9G5aSE55CG5Zmo77yM6LSf6LSj566h55CGQU9G55qE5ZCE5Liq57uE5Lu25ZKM5pON5L2cXG4gICAgMjdcdCAqL1xuICAgIDI4XHRwdWJsaWMgY2xhc3MgQU9GSGFuZGxlciB7XG4gICAgMjlcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihBT0ZIYW5kbGVyLmNsYXNzKTtcbiAgICAzMFx0XG4gICAgMzFcdCAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBmaWxlbmFtZTsgICAgICAgICAgICAgICAvLyBBT0bmlofku7blkI1cbiAgICAzMlx0ICAgIHByaXZhdGUgZmluYWwgV3JpdGVyIHdyaXRlcjsgICAgICAgICAgICAgICAgIC8vIEFPRuWGmeWFpeWZqFxuICAgIDMzXHQgICAgcHJpdmF0ZSBmaW5hbCBQcm9jZXNzb3IgcHJvY2Vzc29yOyAgICAgICAgICAgLy8gQU9G5aSE55CG5ZmoXG4gICAgMzRcdCAgICBwcml2YXRlIGZpbmFsIExvYWRlciBsb2FkZXI7ICAgICAgICAgICAgICAgICAvLyBBT0bliqDovb3lmahcbiAgICAzNVx0ICAgIHByaXZhdGUgZmluYWwgQU9GQmFja2dyb3VuZFNlcnZpY2UgYmFja2dyb3VuZFNlcnZpY2U7ICAvLyBBT0blkI7lj7DmnI3liqFcbiAgICAzNlx0ICAgIHByaXZhdGUgQU9GU3luY1N0cmF0ZWd5IHN5bmNTdHJhdGVneTsgICAgICAgIC8vIOWQjOatpeetlueVpVxuICAgIDM3XHRcbiAgICAzOFx0ICAgIHByaXZhdGUgQU9GUmV3cml0ZXIgcmV3cml0ZXI7XG4gICAgMzlcdCAgICBwcml2YXRlIGZpbmFsIEF0b21pY0Jvb2xlYW4gcmV3cml0aW5nO1xuICAgIDQwXHQgICAgcHJpdmF0ZSBUaHJlYWQgcmV3cml0ZVRocmVhZDtcbiAgICA0MVx0ICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gcmV3cml0ZUJ1ZmZlcjtcbiAgICA0Mlx0ICAgIHByaXZhdGUgQXRvbWljQm9vbGVhbiBjb2xsZWN0aW5nUmV3cml0ZUJ1ZmZlciA9IG5ldyBBdG9taWNCb29sZWFuKGZhbHNlKTtcbiAgICA0M1x0XG4gICAgNDRcdCAgICBwcml2YXRlIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHJld3JpdGVGdXR1cmU7XG4gICAgNDVcdFxuICAgIDQ2XHQgICAgLyoqXG4gICAgNDdcdCAgICAgKiDmnoTpgKBBT0blpITnkIblmahcbiAgICA0OFx0ICAgICAqIEBwYXJhbSBmaWxlbmFtZSBBT0bmlofku7blkI1cbiAgICA0OVx0ICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24g5aaC5p6c5Yib5bu65paH5Lu25aSx6LSlXG4gICAgNTBcdCAgICAgKi9cbiAgICA1MVx0ICAgIHB1YmxpYyBBT0ZIYW5kbGVyKFN0cmluZyBmaWxlbmFtZSwgUmVkaXNDb3JlIHJlZGlzQ29yZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICA1Mlx0ICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgNTNcdCAgICAgICAgLy8gMS4g6K6+572u6buY6K6k5ZCM5q2l562W55Wl5Li65q+P56eS5ZCM5q2lXG4gICAgNTRcdCAgICAgICAgdGhpcy5zeW5jU3RyYXRlZ3kgPSBBT0ZTeW5jU3RyYXRlZ3kuRVZFUllTRUM7XG4gICAgNTVcdCAgICAgICAgLy8gMi4g5Yib5bu6QU9G5YaZ5YWl5ZmoXG4gICAgNTZcdCAgICAgICAgdGhpcy53cml0ZXIgPSBuZXcgQU9GV3JpdGVyKGZpbGVuYW1lLCBzeW5jU3RyYXRlZ3kpO1xuICAgIDU3XHQgICAgICAgIC8vIDMuIOWIm+W7ukFPRuWkhOeQhuWZqO+8jOiuvue9rue8k+WGsuWMuuWkp+Wwj+S4ujJNQlxuICAgIDU4XHQgICAgICAgIHRoaXMucHJvY2Vzc29yID0gbmV3IEFPRlByb2Nlc3Nvcih3cml0ZXIsIDIgKiAxMDI0ICogMTAyNCk7XG4gICAgNTlcdCAgICAgICAgLy8gNC4g5Yib5bu6QU9G5Yqg6L295ZmoXG4gICAgNjBcdCAgICAgICAgdGhpcy5sb2FkZXIgPSBuZXcgQU9GTG9hZGVyKCk7XG4gICAgNjFcdCAgICAgICAgLy8gNS4g5Yib5bu6QU9G5ZCO5Y+w5pyN5YqhXG4gICAgNjJcdCAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU2VydmljZSA9IG5ldyBBT0ZCYWNrZ3JvdW5kU2VydmljZShwcm9jZXNzb3IsIHN5bmNTdHJhdGVneSk7XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgIHRoaXMucmV3cml0ZXIgPSBuZXcgQU9GUmV3cml0ZXIocmVkaXNDb3JlLCBmaWxlbmFtZSwyKjEwMjQqMTAyNCk7XG4gICAgNjVcdCAgICAgICAgdGhpcy5yZXdyaXRpbmcgPSBuZXcgQXRvbWljQm9vbGVhbihmYWxzZSk7XG4gICAgNjZcdCAgICB9XG4gICAgNjdcdFxuICAgIDY4XHQgICAgLyoqXG4gICAgNjlcdCAgICAgKiDlkK/liqhBT0blpITnkIblmahcbiAgICA3MFx0ICAgICAqL1xuICAgIDcxXHQgICAgcHVibGljIHZvaWQgc3RhcnQoKSB7XG4gICAgNzJcdCAgICAgICAgLy8g5ZCv5Yqo5ZCO5Y+w5pyN5YqhXG4gICAgNzNcdCAgICAgICAgYmFja2dyb3VuZFNlcnZpY2Uuc3RhcnQoKTtcbiAgICA3NFx0ICAgIH1cbiAgICA3NVx0XG4gICAgNzZcdCAgICAvKipcbiAgICA3N1x0ICAgICAqIOi/veWKoOWRveS7pOWIsEFPRlxuICAgIDc4XHQgICAgICogQHBhcmFtIGNvbW1hbmQg6KaB6L+95Yqg55qE5ZG95LukXG4gICAgNzlcdCAgICAgKi9cbiAgICA4MFx0ICAgIHB1YmxpYyB2b2lkIGFwcGVuZChSZXNwIGNvbW1hbmQpIHtcbiAgICA4MVx0ICAgICAgICAvLyDlsIblkb3ku6TkuqTnu5nlpITnkIblmajvvIzlpITnkIblmajkvJrku47lr7nlupTnmoRDb21tYW5k6Zif5YiX5Lit6I635Y+W5ZG95LukXG4gICAgODJcdCAgICAgICAgcHJvY2Vzc29yLmFwcGVuZChjb21tYW5kKTtcbiAgICA4M1x0XG4gICAgODRcdCAgICAgICAgaWYoY29sbGVjdGluZ1Jld3JpdGVCdWZmZXIuZ2V0KCkgJiYgcmV3cml0ZUJ1ZmZlciAhPSBudWxsKXtcbiAgICA4NVx0ICAgICAgICAgICAgQnl0ZUJ1ZiBidWYgPSBVbnBvb2xlZC5kaXJlY3RCdWZmZXIoKTtcbiAgICA4Nlx0ICAgICAgICAgICAgY29tbWFuZC53cml0ZShjb21tYW5kLCBidWYpO1xuICAgIDg3XHQgICAgICAgICAgICBCeXRlQnVmZmVyIGJ5dGVCdWZmZXIgPSBidWYubmlvQnVmZmVyKCk7XG4gICAgODhcdCAgICAgICAgICAgIHJld3JpdGVCdWZmZXIuYWRkKGJ5dGVCdWZmZXIpO1xuICAgIDg5XHQgICAgICAgICAgICBidWYucmVsZWFzZSgpO1xuICAgIDkwXHQgICAgICAgIH1cbiAgICA5MVx0ICAgIH1cbiAgICA5Mlx0XG4gICAgOTNcdCAgICAvKipcbiAgICA5NFx0ICAgICAqIOWBnOatokFPRuWkhOeQhuWZqFxuICAgIDk1XHQgICAgICovXG4gICAgOTZcdCAgICBwdWJsaWMgdm9pZCBzdG9wKCkge1xuICAgIDk3XHQgICAgICAgIC8vIDEuIOWBnOatouWQjuWPsOacjeWKoVxuICAgIDk4XHQgICAgICAgIGJhY2tncm91bmRTZXJ2aWNlLnN0b3AoKTtcbiAgICA5OVx0ICAgICAgICAvLyAyLiDlhbPpl63lhpnlhaXlmahcbiAgIDEwMFx0ICAgICAgICB3cml0ZXIuY2xvc2UoKTtcbiAgIDEwMVx0XG4gICAxMDJcdCAgICB9XG4gICAxMDNcdFxuICAgMTA0XHQgICAgLyoqXG4gICAxMDVcdCAgICAgKiDorr7nva7lkIzmraXnrZbnlaVcbiAgIDEwNlx0ICAgICAqIEBwYXJhbSBzdHJhdGVneSDmlrDnmoTlkIzmraXnrZbnlaVcbiAgIDEwN1x0ICAgICAqL1xuICAgMTA4XHQgICAgcHVibGljIHZvaWQgc2V0U3luY1N0cmF0ZWd5KEFPRlN5bmNTdHJhdGVneSBzdHJhdGVneSkge1xuICAgMTA5XHQgICAgICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAxMTBcdCAgICB9XG4gICAxMTFcdFxuICAgMTEyXHQgICAgLyoqXG4gICAxMTNcdCAgICAgKiDliqDovb1BT0bmlofku7ZcbiAgIDExNFx0ICAgICAqIEBwYXJhbSByZWRpc0NvcmUgUmVkaXPmoLjlv4Plrp7kvotcbiAgIDExNVx0ICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24g5aaC5p6c5Yqg6L295aSx6LSlXG4gICAxMTZcdCAgICAgKi9cbiAgIDExN1x0ICAgIHB1YmxpYyB2b2lkIGxvYWQoUmVkaXNDb3JlIHJlZGlzQ29yZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgIDExOFx0ICAgICAgICAvLyDkvb/nlKjliqDovb3lmajliqDovb1BT0bmlofku7ZcbiAgIDExOVx0ICAgICAgICBsb2FkZXIubG9hZChmaWxlbmFtZSwgcmVkaXNDb3JlKTtcbiAgIDEyMFx0ICAgIH1cbiAgIDEyMVx0XG4gICAxMjJcdCAgICBwdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gc3RhcnRSZXdyaXRlKCkge1xuICAgMTIzXHQgICAgICAgIGlmIChyZXdyaXRpbmcuZ2V0KCkpIHtcbiAgIDEyNFx0ICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLlt7LmnInph43lhpnku7vliqHlnKjov5vooYzkuK3vvIzlv73nlaXmraTmrKHor7fmsYJcIik7XG4gICAxMjVcdCAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IGZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XG4gICAxMjZcdCAgICAgICAgICAgIGZ1dHVyZS5jb21wbGV0ZShmYWxzZSk7XG4gICAxMjdcdCAgICAgICAgICAgIHJldHVybiBmdXR1cmU7XG4gICAxMjhcdCAgICAgICAgfVxuICAgMTI5XHQgICAgICAgIGlmICghcmV3cml0ZXIuY2FuUmV3cml0ZSgpKSB7XG4gICAxMzBcdCAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi6YeN5YaZ5paH5Lu25aSx6LSl77yM6K+35qOA5p+l6YeN5YaZ5paH5Lu25piv5ZCm5q2j5Zyo6KKr5L2/55SoXCIpO1xuICAgMTMxXHQgICAgICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgMTMyXHQgICAgICAgICAgICBmdXR1cmUuY29tcGxldGUoZmFsc2UpO1xuICAgMTMzXHQgICAgICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgMTM0XHQgICAgICAgIH1cbiAgIDEzNVx0XG4gICAxMzZcdCAgICAgICAgaWYgKHJld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgMTM3XHQgICAgICAgICAgICByZXdyaXRlRnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgIDEzOFx0ICAgICAgICAgICAgQ29tcGxldGFibGVGdXR1cmUucnVuQXN5bmMoKCkgLT4ge1xuICAgMTM5XHQgICAgICAgICAgICAgICAgdHJ5IHtcbiAgIDE0MFx0ICAgICAgICAgICAgICAgICAgICAvLyDmiafooYzph43lhpnpgLvovpHliY3vvIznoa7kv53miYDmnInmlbDmja7pg73lt7LliLfnm5hcbiAgIDE0MVx0ICAgICAgICAgICAgICAgICAgICBwcm9jZXNzb3IuZmx1c2goKTtcbiAgIDE0Mlx0XG4gICAxNDNcdCAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZXG4gICAxNDRcdCAgICAgICAgICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gcmV3cml0ZXIucmV3cml0ZSgpO1xuICAgMTQ1XHRcbiAgIDE0Nlx0ICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgMTQ3XHQgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIkFPRumHjeWGmeaIkOWKn+WujOaIkFwiKTtcbiAgIDE0OFx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgMTQ5XHQgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIkFPRumHjeWGmeWksei0pVwiKTtcbiAgIDE1MFx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxNTFcdFxuICAgMTUyXHQgICAgICAgICAgICAgICAgICAgIHJld3JpdGVGdXR1cmUuY29tcGxldGUoc3VjY2Vzcyk7XG4gICAxNTNcdCAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTU0XHQgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFPRumHjeWGmei/h+eoi+S4reWHuumUmVwiLCBlKTtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlRXhjZXB0aW9uYWxseShlKTtcbiAgIDE1Nlx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAxNTdcdCAgICAgICAgICAgICAgICAgICAgcmV3cml0aW5nLnNldChmYWxzZSk7XG4gICAxNThcdCAgICAgICAgICAgICAgICB9XG4gICAxNTlcdCAgICAgICAgICAgIH0pO1xuICAgMTYwXHQgICAgICAgIH1cbiAgIDE2MVx0ICAgICAgICByZXR1cm4gcmV3cml0ZUZ1dHVyZTtcbiAgIDE2Mlx0ICAgICAgICB9XG4gICAxNjNcdFxuICAgMTY0XHRcbiAgIDE2NVx0XG4gICAxNjZcdCAgICBwdWJsaWMgYm9vbGVhbiBpc1Jld3JpdGluZygpe1xuICAgMTY3XHQgICAgICAgIHJldHVybiByZXdyaXRpbmcuZ2V0KCk7XG4gICAxNjhcdCAgICB9XG4gICAxNjlcdFxuICAgMTcwXHRcbiAgIDE3MVx0XG4gICAxNzJcdCAgICBwdWJsaWMgdm9pZCBzdGFydFJld3JpdGVCdWZmZXIoKSB7XG4gICAxNzNcdCAgICAgICAgcmV3cml0ZUJ1ZmZlciA9IENvbGxlY3Rpb25zLnN5bmNocm9uaXplZExpc3QobmV3IEFycmF5TGlzdDw+KCkpO1xuICAgMTc0XHQgICAgICAgIGNvbGxlY3RpbmdSZXdyaXRlQnVmZmVyLnNldCh0cnVlKTtcbiAgIDE3NVx0ICAgIH1cbiAgIDE3Nlx0XG4gICAxNzdcdFxuICAgMTc4XHQgICAgcHVibGljIHZvaWQgZGlzY2FyZFJld3JpdGVCdWZmZXIoKSB7XG4gICAxNzlcdCAgICAgICAgY29sbGVjdGluZ1Jld3JpdGVCdWZmZXIuc2V0KGZhbHNlKTtcbiAgIDE4MFx0ICAgICAgICByZXdyaXRlQnVmZmVyID0gbnVsbDtcbiAgIDE4MVx0ICAgIH1cbiAgIDE4Mlx0XG4gICAxODNcdCAgICBwdWJsaWMgTGlzdDxCeXRlQnVmZmVyPiBzdG9wUmV3cml0ZUJ1ZmZlckFuZEdldCgpIHtcbiAgIDE4NFx0ICAgICAgICBjb2xsZWN0aW5nUmV3cml0ZUJ1ZmZlci5zZXQoZmFsc2UpO1xuICAgMTg1XHQgICAgICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gcmVzdWx0ID0gcmV3cml0ZUJ1ZmZlcjtcbiAgIDE4Nlx0ICAgICAgICByZXdyaXRlQnVmZmVyID0gbnVsbDtcbiAgIDE4N1x0ICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgMTg4XHQgICAgfVxuICAgMTg5XHR9XG4gICAxOTBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTkwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxZDRlNmZmYy1kZTdiLTQyNTEtOTk1Ny1mOWJjZGFmNDYyMDg7dG9vbHVfdnJ0eF8wMUZuWFZWN25IYW41UTZyQ1AyQldLbnIiOnsicmVxdWVzdElkIjoiMWQ0ZTZmZmMtZGU3Yi00MjUxLTk5NTctZjliY2RhZjQ2MjA4IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUZuWFZWN25IYW41UTZyQ1AyQldLbnIiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9wcm9jZXNzb3IvQU9GUHJvY2Vzc29yLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZi5wcm9jZXNzb3I7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG4gICAgIDRcdGltcG9ydCBpby5uZXR0eS5idWZmZXIuVW5wb29sZWQ7XG4gICAgIDVcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbiAgICAgNlx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2Yud3JpdGVyLldyaXRlcjtcbiAgICAgN1x0aW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuICAgICA4XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnV0aWxzLkRvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWU7XG4gICAgIDlcdFxuICAgIDEwXHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAxMVx0aW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7XG4gICAgMTJcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5MaW5rZWRCbG9ja2luZ1F1ZXVlO1xuICAgIDEzXHRpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGltZVVuaXQ7XG4gICAgMTRcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWljQm9vbGVhbjtcbiAgICAxNVx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmxvY2tzLlJlZW50cmFudExvY2s7XG4gICAgMTZcdFxuICAgIDE3XHQvKipcbiAgICAxOFx0ICogQU9G5aSE55CG5Zmo77yM6LSf6LSj5bCG5ZG95Luk6L+95Yqg5YiwQU9G5paH5Lu2XG4gICAgMTlcdCAqL1xuICAgIDIwXHRwdWJsaWMgY2xhc3MgQU9GUHJvY2Vzc29yIGltcGxlbWVudHMgUHJvY2Vzc29yIHtcbiAgICAyMVx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKEFPRlByb2Nlc3Nvci5jbGFzcyk7XG4gICAgMjJcdFxuICAgIDIzXHQgICAgcHJpdmF0ZSBmaW5hbCBEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlIGJ1ZmZlclF1ZXVlOyAgICAvLyDlj4znvJPlhrLpmJ/liJdcbiAgICAyNFx0ICAgIHByaXZhdGUgZmluYWwgV3JpdGVyIHdyaXRlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5paH5Lu25YaZ5YWl5ZmoXG4gICAgMjVcdCAgICBwcml2YXRlIGZpbmFsIEF0b21pY0Jvb2xlYW4gcnVubmluZzsgICAgICAgICAgICAgICAgICAgIC8vIOi/kOihjOeKtuaAgeagh+W/l1xuICAgIDI2XHRcbiAgICAyN1x0XG4gICAgMjhcdCAgICBwcml2YXRlIGZpbmFsIGludCBiYXRjaFNpemU7XG4gICAgMjlcdCAgICBwcml2YXRlIEJ5dGVCdWYgYmF0Y2hCdWZmZXI7XG4gICAgMzBcdCAgICBwcml2YXRlIGZpbmFsIFJlZW50cmFudExvY2sgYmF0Y2hMb2NrID0gbmV3IFJlZW50cmFudExvY2soKTtcbiAgICAzMVx0ICAgIC8qKlxuICAgIDMyXHQgICAgICog5p6E6YCgQU9G5aSE55CG5ZmoXG4gICAgMzNcdCAgICAgKiBAcGFyYW0gd3JpdGVyIOaWh+S7tuWGmeWFpeWZqFxuICAgIDM0XHQgICAgICogQHBhcmFtIGJ1ZmZlclNpemUg57yT5Yay5Yy65aSn5bCPXG4gICAgMzVcdCAgICAgKi9cbiAgICAzNlx0ICAgIHB1YmxpYyBBT0ZQcm9jZXNzb3IoV3JpdGVyIHdyaXRlciwgaW50IGJ1ZmZlclNpemUsIGludCBiYXRjaFNpemUpIHtcbiAgICAzN1x0ICAgICAgICAvLyAxLiDliJ3lp4vljJbnu4Tku7ZcbiAgICAzOFx0ICAgICAgICB0aGlzLndyaXRlciA9IHdyaXRlcjtcbiAgICAzOVx0ICAgICAgICB0aGlzLmJ1ZmZlclF1ZXVlID0gbmV3IERvdWJsZUJ1ZmZlckJsb2NraW5nUXVldWUoYnVmZmVyU2l6ZSk7XG4gICAgNDBcdCAgICAgICAgdGhpcy5ydW5uaW5nID0gbmV3IEF0b21pY0Jvb2xlYW4odHJ1ZSk7XG4gICAgNDFcdCAgICAgICAgdGhpcy5iYXRjaFNpemUgPSBiYXRjaFNpemU7XG4gICAgNDJcdCAgICAgICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFVucG9vbGVkLmRpcmVjdEJ1ZmZlcihiYXRjaFNpemUpO1xuICAgIDQzXHQgICAgfVxuICAgIDQ0XHRcbiAgICA0NVx0ICAgIHB1YmxpYyBBT0ZQcm9jZXNzb3IoV3JpdGVyIHdyaXRlciwgaW50IGJ1ZmZlclNpemUpIHtcbiAgICA0Nlx0ICAgICAgICB0aGlzKHdyaXRlciwgYnVmZmVyU2l6ZSwgNDA5Nik7IC8vIOm7mOiupOaJueWkhOeQhuWkp+Wwj+S4ujRLQlxuICAgIDQ3XHQgICAgfVxuICAgIDQ4XHRcbiAgICA0OVx0ICAgIEBPdmVycmlkZVxuICAgIDUwXHQgICAgcHVibGljIHZvaWQgYXBwZW5kKFJlc3AgY29tbWFuZCkge1xuICAgIDUxXHQgICAgICAgIC8vIOWmguaenOS4jeWcqOi/kOihjOeKtuaAge+8jOS4jeWkhOeQhuWRveS7pFxuICAgIDUyXHQgICAgICAgIGlmICghcnVubmluZy5nZXQoKSkge1xuICAgIDUzXHQgICAgICAgICAgICByZXR1cm47XG4gICAgNTRcdCAgICAgICAgfVxuICAgIDU1XHRcbiAgICA1Nlx0ICAgICAgICB0cnkge1xuICAgIDU3XHQgICAgICAgICAgICBiYXRjaExvY2subG9jaygpO1xuICAgIDU4XHQgICAgICAgICAgICB0cnkge1xuICAgIDU5XHQgICAgICAgICAgICAgICAgLy8g5Lyw6K6h5ZG95Luk5aSn5bCP77yM5aaC5p6c6LaF6L+H5om55aSE55CG57yT5Yay5Yy65aSn5bCP77yM55u05o6l5YaZ5YWlXG4gICAgNjBcdCAgICAgICAgICAgICAgICBpbnQgZXN0aW1hdGVkU2l6ZSA9IGVzdGltYXRlQ29tbWFuZFNpemUoY29tbWFuZCk7XG4gICAgNjFcdFxuICAgIDYyXHQgICAgICAgICAgICAgICAgaWYgKGVzdGltYXRlZFNpemUgPiBiYXRjaFNpemUpIHtcbiAgICA2M1x0ICAgICAgICAgICAgICAgICAgICAvLyDlkb3ku6TlpKrlpKfvvIzljZXni6zlpITnkIZcbiAgICA2NFx0ICAgICAgICAgICAgICAgICAgICBCeXRlQnVmIGJ1ZiA9IFVucG9vbGVkLmRpcmVjdEJ1ZmZlcihlc3RpbWF0ZWRTaXplKTtcbiAgICA2NVx0ICAgICAgICAgICAgICAgICAgICBjb21tYW5kLndyaXRlKGNvbW1hbmQsIGJ1Zik7XG4gICAgNjZcdCAgICAgICAgICAgICAgICAgICAgQnl0ZUJ1ZmZlciBieXRlQnVmZmVyID0gYnVmLm5pb0J1ZmZlcigpO1xuICAgIDY3XHQgICAgICAgICAgICAgICAgICAgIGJ1ZmZlclF1ZXVlLnB1dChieXRlQnVmZmVyKTtcbiAgICA2OFx0ICAgICAgICAgICAgICAgICAgICBidWYucmVsZWFzZSgpO1xuICAgIDY5XHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA3MFx0ICAgICAgICAgICAgICAgIH1cbiAgICA3MVx0XG4gICAgNzJcdCAgICAgICAgICAgICAgICAvLyDlpoLmnpzmibnlpITnkIbnvJPlhrLljLrliankvZnnqbrpl7TkuI3otrPvvIzlhYjliLfmlrBcbiAgICA3M1x0ICAgICAgICAgICAgICAgIGlmIChiYXRjaEJ1ZmZlci53cml0YWJsZUJ5dGVzKCkgPCBlc3RpbWF0ZWRTaXplKSB7XG4gICAgNzRcdCAgICAgICAgICAgICAgICAgICAgZmx1c2hCYXRjaCgpO1xuICAgIDc1XHQgICAgICAgICAgICAgICAgfVxuICAgIDc2XHRcbiAgICA3N1x0ICAgICAgICAgICAgICAgIC8vIOWwhuWRveS7pOWGmeWFpeaJueWkhOeQhue8k+WGsuWMulxuICAgIDc4XHQgICAgICAgICAgICAgICAgaW50IHdyaXRlckluZGV4ID0gYmF0Y2hCdWZmZXIud3JpdGVySW5kZXgoKTtcbiAgICA3OVx0ICAgICAgICAgICAgICAgIGNvbW1hbmQud3JpdGUoY29tbWFuZCwgYmF0Y2hCdWZmZXIpO1xuICAgIDgwXHRcbiAgICA4MVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOaJueWkhOeQhue8k+WGsuWMuuW3sua7oe+8jOWIt+aWsFxuICAgIDgyXHQgICAgICAgICAgICAgICAgaWYgKGJhdGNoQnVmZmVyLndyaXRhYmxlQnl0ZXMoKSA8IGJhdGNoU2l6ZSAvIDEwKSB7IC8vIOWJqeS9meS4jei2szEwJeaXtuWIt+aWsFxuICAgIDgzXHQgICAgICAgICAgICAgICAgICAgIGZsdXNoQmF0Y2goKTtcbiAgICA4NFx0ICAgICAgICAgICAgICAgIH1cbiAgICA4NVx0ICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICA4Nlx0ICAgICAgICAgICAgICAgIGJhdGNoTG9jay51bmxvY2soKTtcbiAgICA4N1x0ICAgICAgICAgICAgfVxuICAgIDg4XHQgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHtcbiAgICA4OVx0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9GUHJvY2Vzc29yLmFwcGVuZCgpIGludGVycnVwdGVkXCIsIGUpO1xuICAgIDkwXHQgICAgICAgICAgICBUaHJlYWQuY3VycmVudFRocmVhZCgpLmludGVycnVwdCgpO1xuICAgIDkxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgOTJcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFPRlByb2Nlc3Nvci5hcHBlbmQoKSBlcnJvclwiLCBlKTtcbiAgICA5M1x0ICAgICAgICB9XG4gICAgOTRcdCAgICB9XG4gICAgOTVcdFxuICAgIDk2XHRcbiAgICA5N1x0ICAgIHByaXZhdGUgaW50IGVzdGltYXRlQ29tbWFuZFNpemUoUmVzcCBjb21tYW5kKSB7XG4gICAgOThcdCAgICAgICAgaWYgKGNvbW1hbmQgPT0gbnVsbCkge1xuICAgIDk5XHQgICAgICAgICAgICByZXR1cm4gMDtcbiAgIDEwMFx0ICAgICAgICB9XG4gICAxMDFcdFxuICAgMTAyXHQgICAgICAgIHJldHVybiAxMjg7XG4gICAxMDNcdCAgICB9XG4gICAxMDRcdFxuICAgMTA1XHQgICAgLyoqXG4gICAxMDZcdCAgICAgKiDliLfmlrDmibnlpITnkIbnvJPlhrLljLpcbiAgIDEwN1x0ICAgICAqL1xuICAgMTA4XHQgICAgcHJpdmF0ZSB2b2lkIGZsdXNoQmF0Y2goKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgMTA5XHQgICAgICAgIGlmICggYmF0Y2hCdWZmZXIgPT0gbnVsbHx8YmF0Y2hCdWZmZXIucmVhZGFibGVCeXRlcygpIDw9IDApIHtcbiAgIDExMFx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgMTExXHQgICAgICAgIH1cbiAgIDExMlx0XG4gICAxMTNcdCAgICAgICAgLy8g6I635Y+W5om55aSE55CG55qEQnl0ZUJ1ZmZlcuW5tuaUvuWFpemYn+WIl1xuICAgMTE0XHQgICAgICAgIEJ5dGVCdWZmZXIgYnl0ZUJ1ZmZlciA9IGJhdGNoQnVmZmVyLm5pb0J1ZmZlcigwLCBiYXRjaEJ1ZmZlci5yZWFkYWJsZUJ5dGVzKCkpO1xuICAgMTE1XHQgICAgICAgIGJ1ZmZlclF1ZXVlLnB1dChieXRlQnVmZmVyKTtcbiAgIDExNlx0XG4gICAxMTdcdCAgICAgICAgLy8g6YeK5pS+5pen57yT5Yay5Yy677yM5Yib5bu65paw57yT5Yay5Yy6XG4gICAxMThcdCAgICAgICAgYmF0Y2hCdWZmZXIucmVsZWFzZSgpO1xuICAgMTE5XHQgICAgICAgIGJhdGNoQnVmZmVyID0gVW5wb29sZWQuZGlyZWN0QnVmZmVyKGJhdGNoU2l6ZSk7XG4gICAxMjBcdCAgICB9XG4gICAxMjFcdFxuICAgMTIyXHRcbiAgIDEyM1x0ICAgIEBPdmVycmlkZVxuICAgMTI0XHQgICAgcHVibGljIHZvaWQgZmx1c2goKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgMTI1XHQgICAgICAgIHRyeSB7XG4gICAxMjZcdCAgICAgICAgICAgIGJhdGNoTG9jay5sb2NrKCk7XG4gICAxMjdcdCAgICAgICAgICAgIHRyeSB7XG4gICAxMjhcdCAgICAgICAgICAgICAgICAvLyDliLfmlrDmibnlpITnkIbnvJPlhrLljLpcbiAgIDEyOVx0ICAgICAgICAgICAgICAgIGZsdXNoQmF0Y2goKTtcbiAgIDEzMFx0ICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDEzMVx0ICAgICAgICAgICAgICAgIGJhdGNoTG9jay51bmxvY2soKTtcbiAgIDEzMlx0ICAgICAgICAgICAgfVxuICAgMTMzXHRcbiAgIDEzNFx0ICAgICAgICAgICAgLy8g5LuO5Y+M57yT5Yay6Zif5YiX5Lit6I635Y+W5b6F5YaZ5YWl55qE57yT5Yay5Yy6XG4gICAxMzVcdCAgICAgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gYnVmZmVyUXVldWUucG9sbCgpO1xuICAgMTM2XHRcbiAgIDEzN1x0ICAgICAgICAgICAgaWYgKGJ1ZmZlciAhPSBudWxsICYmIGJ1ZmZlci5oYXNSZW1haW5pbmcoKSkge1xuICAgMTM4XHQgICAgICAgICAgICAgICAgdHJ5IHtcbiAgIDEzOVx0ICAgICAgICAgICAgICAgICAgICAvLyDlsIbnvJPlhrLljLrlhpnlhaXmlofku7ZcbiAgIDE0MFx0ICAgICAgICAgICAgICAgICAgICB3cml0ZXIud3JpdGUoYnVmZmVyKTtcbiAgIDE0MVx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgIDE0Mlx0ICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0ZQcm9jZXNzb3IuZmx1c2goKSBJTyBlcnJvclwiLCBlKTtcbiAgIDE0M1x0ICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgMTQ0XHQgICAgICAgICAgICAgICAgfVxuICAgMTQ1XHQgICAgICAgICAgICB9XG4gICAxNDZcdCAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkge1xuICAgMTQ3XHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0ZQcm9jZXNzb3IuZmx1c2goKSBpbnRlcnJ1cHRlZFwiLCBlKTtcbiAgIDE0OFx0ICAgICAgICAgICAgVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTtcbiAgIDE0OVx0ICAgICAgICB9XG4gICAxNTBcdCAgICB9XG4gICAxNTFcdFxuICAgMTUyXHQgICAgQE92ZXJyaWRlXG4gICAxNTNcdCAgICBwdWJsaWMgdm9pZCBzdG9wKCkge1xuICAgMTU0XHQgICAgICAgIC8vIOWBnOatouWkhOeQhuWZqFxuICAgMTU1XHQgICAgICAgIGlmIChydW5uaW5nLmNvbXBhcmVBbmRTZXQodHJ1ZSwgZmFsc2UpKSB7XG4gICAxNTZcdCAgICAgICAgICAgIHRyeSB7XG4gICAxNTdcdCAgICAgICAgICAgICAgICBiYXRjaExvY2subG9jaygpO1xuICAgMTU4XHQgICAgICAgICAgICAgICAgdHJ5IHtcbiAgIDE1OVx0ICAgICAgICAgICAgICAgICAgICAvLyDnoa7kv53miYDmnInmibnlpITnkIbmlbDmja7pg73ooqvliLfmlrBcbiAgIDE2MFx0ICAgICAgICAgICAgICAgICAgICBmbHVzaEJhdGNoKCk7XG4gICAxNjFcdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgMTYyXHQgICAgICAgICAgICAgICAgICAgIGJhdGNoTG9jay51bmxvY2soKTtcbiAgIDE2M1x0ICAgICAgICAgICAgICAgIH1cbiAgIDE2NFx0XG4gICAxNjVcdCAgICAgICAgICAgICAgICAvLyDph4rmlL7otYTmupBcbiAgIDE2Nlx0ICAgICAgICAgICAgICAgIGlmIChiYXRjaEJ1ZmZlciAhPSBudWxsKSB7XG4gICAxNjdcdCAgICAgICAgICAgICAgICAgICAgYmF0Y2hCdWZmZXIucmVsZWFzZSgpO1xuICAgMTY4XHQgICAgICAgICAgICAgICAgICAgIGJhdGNoQnVmZmVyID0gbnVsbDtcbiAgIDE2OVx0ICAgICAgICAgICAgICAgIH1cbiAgIDE3MFx0ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE3MVx0ICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGR1cmluZyBBT0ZQcm9jZXNzb3Igc2h1dGRvd25cIiwgZSk7XG4gICAxNzJcdCAgICAgICAgICAgIH1cbiAgIDE3M1x0ICAgICAgICB9XG4gICAxNzRcdCAgICB9XG4gICAxNzVcdFxuICAgMTc2XHQgICAgQE92ZXJyaWRlXG4gICAxNzdcdCAgICBwdWJsaWMgYm9vbGVhbiBpc1J1bm5pbmcoKSB7XG4gICAxNzhcdCAgICAgICAgcmV0dXJuIHJ1bm5pbmcuZ2V0KCk7XG4gICAxNzlcdCAgICB9XG4gICAxODBcdFxuICAgMTgxXHQgICAgLyoqXG4gICAxODJcdCAgICAgKiDojrflj5blhpnlhaXkvY3nva7vvIznlKjkuo7nm5HmjqdcbiAgIDE4M1x0ICAgICAqL1xuICAgMTg0XHQgICAgcHVibGljIGxvbmcgZ2V0V3JpdGVQb3NpdGlvbigpIHtcbiAgIDE4NVx0ICAgICAgICByZXR1cm4gYnVmZmVyUXVldWUuZ2V0V3JpdGVQb3NpdGlvbigpO1xuICAgMTg2XHQgICAgfVxuICAgMTg3XHRcbiAgIDE4OFx0ICAgIC8qKlxuICAgMTg5XHQgICAgICog6I635Y+W5Yi355uY5L2N572u77yM55So5LqO55uR5o6nXG4gICAxOTBcdCAgICAgKi9cbiAgIDE5MVx0ICAgIHB1YmxpYyBsb25nIGdldEZsdXNoUG9zaXRpb24oKSB7XG4gICAxOTJcdCAgICAgICAgcmV0dXJuIGJ1ZmZlclF1ZXVlLmdldEZsdXNoUG9zaXRpb24oKTtcbiAgIDE5M1x0ICAgIH1cbiAgIDE5NFx0XG4gICAxOTVcdCAgICAvKipcbiAgIDE5Nlx0ICAgICAqIOiOt+WPluacquWIt+ebmOaVsOaNruWkp+Wwj++8jOeUqOS6juebkeaOp1xuICAgMTk3XHQgICAgICovXG4gICAxOThcdCAgICBwdWJsaWMgbG9uZyBnZXRVbmZsdXNoZWRTaXplKCkge1xuICAgMTk5XHQgICAgICAgIHJldHVybiBidWZmZXJRdWV1ZS5nZXRVbmZsdXNoZWRTaXplKCk7XG4gICAyMDBcdCAgICB9XG4gICAyMDFcdH1cbiAgIDIwMlx0XG4gICAyMDNcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMjAzXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3YWU0NTRkNC03YjhmLTQxNTQtYWU1My0yZWRjZDU3ZWJlMmI7dG9vbHVfdnJ0eF8wMVVmS2VzVjNxa3VxNnJBcE1NVDZuVmIiOnsicmVxdWVzdElkIjoiN2FlNDU0ZDQtN2I4Zi00MTU0LWFlNTMtMmVkY2Q1N2ViZTJiIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMVVmS2VzVjNxa3VxNnJBcE1NVDZuVmIiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3JkYi9jb3JlL1JEQkhhbmRsZXIuamF2YTpcbiAgICAgMVx0cGFja2FnZSBzaXRlLmhuZnkyNTgucmRiLmNvcmU7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbiAgICAgNFx0aW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG4gICAgIDVcdGltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmV4ZWN1dG9yLkV4ZWN1dG9yTWFuYWdlcjtcbiAgICAgNlx0aW1wb3J0IHNpdGUuaG5meTI1OC5yZGIucG9saWN5LkNoYW5nZVRyYWNrZXI7XG4gICAgIDdcdGltcG9ydCBzaXRlLmhuZnkyNTgucmRiLnBvbGljeS5TYXZlUG9saWN5O1xuICAgICA4XHRcbiAgICAgOVx0aW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG4gICAgMTBcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC4qO1xuICAgIDExXHRcbiAgICAxMlx0cHVibGljIGNsYXNzIFJEQkhhbmRsZXIge1xuICAgIDEzXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXIgbG9nZ2VyID0gb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXIuZ2V0TG9nZ2VyKFJEQkhhbmRsZXIuY2xhc3MpO1xuICAgIDE0XHRcbiAgICAxNVx0ICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICAxNlx0ICAgIHByaXZhdGUgZmluYWwgUkRCU2F2ZXIgc2F2ZXI7XG4gICAgMTdcdCAgICBwcml2YXRlIGZpbmFsIFJEQkxvYWRlciBsb2FkZXI7XG4gICAgMThcdCAgICBwcml2YXRlIGZpbmFsIFNhdmVQb2xpY3kgc2F2ZVBvbGljeTtcbiAgICAxOVx0ICAgIHByaXZhdGUgZmluYWwgQ2hhbmdlVHJhY2tlciBjaGFuZ2VUcmFja2VyO1xuICAgIDIwXHQgICAgcHJpdmF0ZSBmaW5hbCBFeGVjdXRvck1hbmFnZXIgZXhlY3V0b3JNYW5hZ2VyO1xuICAgIDIxXHQgICAgcHJpdmF0ZSBmaW5hbCBSREJGaWxlTWFuYWdlciBmaWxlTWFuYWdlcjtcbiAgICAyMlx0XG4gICAgMjNcdCAgICBwcml2YXRlIHZvbGF0aWxlIGJvb2xlYW4gaXNTYXZpbmcgPSBmYWxzZTtcbiAgICAyNFx0XG4gICAgMjVcdCAgICBwdWJsaWMgUkRCSGFuZGxlcihSZWRpc0NvcmUgcmVkaXNDb3JlKSB7XG4gICAgMjZcdCAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSByZWRpc0NvcmU7XG4gICAgMjdcdCAgICAgICAgdGhpcy5leGVjdXRvck1hbmFnZXIgPSBuZXcgRXhlY3V0b3JNYW5hZ2VyKCk7XG4gICAgMjhcdCAgICAgICAgdGhpcy5zYXZlciA9IG5ldyBSREJTYXZlcihyZWRpc0NvcmUsIGV4ZWN1dG9yTWFuYWdlci5nZXRJb0V4ZWN1dG9yKCkpO1xuICAgIDI5XHQgICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFJEQkxvYWRlcihyZWRpc0NvcmUpO1xuICAgIDMwXHQgICAgICAgIHRoaXMuc2F2ZVBvbGljeSA9IG5ldyBTYXZlUG9saWN5KCk7XG4gICAgMzFcdCAgICAgICAgdGhpcy5jaGFuZ2VUcmFja2VyID0gbmV3IENoYW5nZVRyYWNrZXIoKTtcbiAgICAzMlx0ICAgICAgICB0aGlzLmZpbGVNYW5hZ2VyID0gbmV3IFJEQkZpbGVNYW5hZ2VyKCk7XG4gICAgMzNcdCAgICB9XG4gICAgMzRcdFxuICAgIDM1XHQgICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZSgpIHtcbiAgICAzNlx0ICAgICAgICB0cnkge1xuICAgIDM3XHQgICAgICAgICAgICBsb2FkKCk7XG4gICAgMzhcdCAgICAgICAgICAgIHN0YXJ0QXV0b1NhdmUoKTtcbiAgICAzOVx0ICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgNDBcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuWIneWni+WMllJEQuWkhOeQhuWZqOWksei0pVwiLCBlKTtcbiAgICA0MVx0ICAgICAgICB9XG4gICAgNDJcdCAgICB9XG4gICAgNDNcdFxuICAgIDQ0XHQgICAgcHJpdmF0ZSB2b2lkIHN0YXJ0QXV0b1NhdmUoKSB7XG4gICAgNDVcdCAgICAgICAgZXhlY3V0b3JNYW5hZ2VyLmdldFNjaGVkdWxlcigpLnNjaGVkdWxlQXRGaXhlZFJhdGUoKCkgLT4ge1xuICAgIDQ2XHQgICAgICAgICAgICB0cnkge1xuICAgIDQ3XHQgICAgICAgICAgICAgICAgY2hlY2tTYXZlQ29uZGl0aW9ucygpO1xuICAgIDQ4XHQgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDQ5XHQgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6Ieq5Yqo5L+d5a2Y5qOA5p+l5aSx6LSlXCIsIGUpO1xuICAgIDUwXHQgICAgICAgICAgICB9XG4gICAgNTFcdCAgICAgICAgfSwgMSwgMSwgVGltZVVuaXQuU0VDT05EUyk7XG4gICAgNTJcdCAgICB9XG4gICAgNTNcdFxuICAgIDU0XHQgICAgcHJpdmF0ZSB2b2lkIGNoZWNrU2F2ZUNvbmRpdGlvbnMoKSB7XG4gICAgNTVcdCAgICAgICAgaWYgKGlzU2F2aW5nKSByZXR1cm47XG4gICAgNTZcdFxuICAgIDU3XHQgICAgICAgIGxvbmcgbm93ID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLyAxMDAwO1xuICAgIDU4XHQgICAgICAgIGlmIChzYXZlUG9saWN5LnNob3VsZEZ1bGxTYXZlKG5vdykpIHtcbiAgICA1OVx0ICAgICAgICAgICAgYmdzYXZlKHRydWUpO1xuICAgIDYwXHQgICAgICAgIH0gZWxzZSBpZiAoY2hhbmdlVHJhY2tlci5oYXNNb2RpZmljYXRpb25zKCkpIHtcbiAgICA2MVx0ICAgICAgICAgICAgYmdzYXZlKGZhbHNlKTtcbiAgICA2Mlx0ICAgICAgICB9XG4gICAgNjNcdCAgICB9XG4gICAgNjRcdFxuICAgIDY1XHQgICAgcHVibGljIHZvaWQgbm90aWZ5RGF0YUNoYW5nZWQoaW50IGRiSW5kZXgsIEJ5dGVzV3JhcHBlciBrZXkpIHtcbiAgICA2Nlx0ICAgICAgICBzYXZlUG9saWN5LnJlY29yZENoYW5nZSgpO1xuICAgIDY3XHQgICAgICAgIGNoYW5nZVRyYWNrZXIudHJhY2tDaGFuZ2UoZGJJbmRleCwga2V5KTtcbiAgICA2OFx0ICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICBwdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gc2F2ZSgpIHtcbiAgICA3MVx0ICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgIDcyXHQgICAgICAgIGlmICghYmdzYXZlKHRydWUpKSB7XG4gICAgNzNcdCAgICAgICAgICAgIGZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkobmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcIuW3suacieS/neWtmOS7u+WKoei/kOihjFwiKSk7XG4gICAgNzRcdCAgICAgICAgfSBlbHNlIHtcbiAgICA3NVx0ICAgICAgICAgICAgZXhlY3V0b3JNYW5hZ2VyLmdldFNhdmVFeGVjdXRvcigpLmV4ZWN1dGUoKCkgLT4ge1xuICAgIDc2XHQgICAgICAgICAgICAgICAgd2hpbGUgKGlzU2F2aW5nKSBUaHJlYWQueWllbGQoKTtcbiAgICA3N1x0ICAgICAgICAgICAgICAgIGZ1dHVyZS5jb21wbGV0ZSh0cnVlKTtcbiAgICA3OFx0ICAgICAgICAgICAgfSk7XG4gICAgNzlcdCAgICAgICAgfVxuICAgIDgwXHQgICAgICAgIHJldHVybiBmdXR1cmU7XG4gICAgODFcdCAgICB9XG4gICAgODJcdFxuICAgIDgzXHQgICAgcHVibGljIGJvb2xlYW4gYmdzYXZlKGJvb2xlYW4gZnVsbFNhdmUpIHtcbiAgICA4NFx0ICAgICAgICBpZiAoaXNTYXZpbmcpIHtcbiAgICA4NVx0ICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLlt7LmnIlSRELkv53lrZjku7vliqHlnKjov5vooYzkuK3vvIzlv73nlaXmraTmrKHor7fmsYJcIik7XG4gICAgODZcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA4N1x0ICAgICAgICB9XG4gICAgODhcdFxuICAgIDg5XHQgICAgICAgIGlzU2F2aW5nID0gdHJ1ZTtcbiAgICA5MFx0ICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBzYXZlRnV0dXJlO1xuICAgIDkxXHRcbiAgICA5Mlx0ICAgICAgICBpZiAoZnVsbFNhdmUpIHtcbiAgICA5M1x0ICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCLlvIDlp4vlkI7lj7Dlhajph4/kv53lrZhSRELmlofku7ZcIik7XG4gICAgOTRcdCAgICAgICAgICAgIHNhdmVGdXR1cmUgPSBzYXZlci5zYXZlRnVsbFJEQigpO1xuICAgIDk1XHQgICAgICAgIH0gZWxzZSB7XG4gICAgOTZcdCAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5ZCO5Y+w5aKe6YeP5L+d5a2YUkRC5paH5Lu2XCIpO1xuICAgIDk3XHQgICAgICAgICAgICBzYXZlRnV0dXJlID0gc2F2ZXIuc2F2ZUluY3JlbWVudGFsUkRCKGNoYW5nZVRyYWNrZXIuZ2V0TW9kaWZpZWREYXRhKCkpO1xuICAgIDk4XHQgICAgICAgIH1cbiAgICA5OVx0XG4gICAxMDBcdCAgICAgICAgc2F2ZUZ1dHVyZS53aGVuQ29tcGxldGUoKHJlc3VsdCwgZXgpIC0+IHtcbiAgIDEwMVx0ICAgICAgICAgICAgaWYgKGV4ICE9IG51bGwpIHtcbiAgIDEwMlx0ICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuWQjuWPsOS/neWtmFJEQuaWh+S7tuWksei0pVwiLCBleCk7XG4gICAxMDNcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAxMDRcdCAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIlJEQuaWh+S7tlwiICsgKGZ1bGxTYXZlID8gXCLlhajph49cIiA6IFwi5aKe6YePXCIpICsgXCLlkI7lj7Dkv53lrZjlrozmiJBcIik7XG4gICAxMDVcdCAgICAgICAgICAgICAgICBpZiAoZnVsbFNhdmUpIHtcbiAgIDEwNlx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2VUcmFja2VyLmNsZWFyKCk7XG4gICAxMDdcdCAgICAgICAgICAgICAgICB9XG4gICAxMDhcdCAgICAgICAgICAgIH1cbiAgIDEwOVx0ICAgICAgICAgICAgaXNTYXZpbmcgPSBmYWxzZTtcbiAgIDExMFx0ICAgICAgICB9KTtcbiAgIDExMVx0XG4gICAxMTJcdCAgICAgICAgcmV0dXJuIHRydWU7XG4gICAxMTNcdCAgICB9XG4gICAxMTRcdFxuICAgMTE1XHQgICAgcHVibGljIHZvaWQgbG9hZCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAxMTZcdCAgICAgICAgbG9nZ2VyLmluZm8oXCLlvIDlp4vliqDovb1SRELmlofku7ZcIik7XG4gICAxMTdcdCAgICAgICAgbG9hZGVyLmNsZWFyQWxsRGF0YWJhc2VzKCk7XG4gICAxMThcdFxuICAgMTE5XHQgICAgICAgIGlmIChmaWxlTWFuYWdlci5mdWxsUmRiRXhpc3RzKCkpIHtcbiAgIDEyMFx0ICAgICAgICAgICAgbG9hZGVyLmxvYWRSREIoZmlsZU1hbmFnZXIuZ2V0RnVsbFJkYkZpbGUoKSk7XG4gICAxMjFcdCAgICAgICAgfVxuICAgMTIyXHRcbiAgIDEyM1x0ICAgICAgICBpZiAoZmlsZU1hbmFnZXIuaW5jcmVtZW50YWxSZGJFeGlzdHMoKSkge1xuICAgMTI0XHQgICAgICAgICAgICBsb2FkZXIubG9hZFJEQihmaWxlTWFuYWdlci5nZXRJbmNyZW1lbnRhbFJkYkZpbGUoKSk7XG4gICAxMjVcdCAgICAgICAgfVxuICAgMTI2XHRcbiAgIDEyN1x0ICAgICAgICBsb2dnZXIuaW5mbyhcIlJEQuaWh+S7tuWKoOi9veaIkOWKn1wiKTtcbiAgIDEyOFx0ICAgIH1cbiAgIDEyOVx0XG4gICAxMzBcdCAgICBwdWJsaWMgdm9pZCBzaHV0ZG93bigpIHtcbiAgIDEzMVx0ICAgICAgICBleGVjdXRvck1hbmFnZXIuc2h1dGRvd24oKTtcbiAgIDEzMlx0ICAgIH1cbiAgIDEzM1x0XG4gICAxMzRcdCAgICBwdWJsaWMgYm9vbGVhbiBpc1NhdmluZygpIHtcbiAgIDEzNVx0ICAgICAgICByZXR1cm4gaXNTYXZpbmc7XG4gICAxMzZcdCAgICB9XG4gICAxMzdcdH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDEzN1xuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZmRhMTk2MGYtMjc0NC00YjdlLWIwNDItZTFjZWE1M2YyZDcxO3Rvb2x1X3ZydHhfMDE5VGZUWng5ekd6YTZaVkhROERRWGI1Ijp7InJlcXVlc3RJZCI6ImZkYTE5NjBmLTI3NDQtNGI3ZS1iMDQyLWUxY2VhNTNmMmQ3MSIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDE5VGZUWng5ekd6YTZaVkhROERRWGI1IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC91dGlscy9Eb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnV0aWxzO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7XG4gICAgIDRcdGltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjtcbiAgICAgNVx0aW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjtcbiAgICAgNlx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkJsb2NraW5nUXVldWU7XG4gICAgIDdcdGltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5UaW1lVW5pdDtcbiAgICAgOFx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmxvY2tzLkNvbmRpdGlvbjtcbiAgICAgOVx0aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmxvY2tzLlJlZW50cmFudExvY2s7XG4gICAgMTBcdFxuICAgIDExXHRwdWJsaWMgY2xhc3MgRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZSBpbXBsZW1lbnRzIEJsb2NraW5nUXVldWU8Qnl0ZUJ1ZmZlcj4ge1xuICAgIDEyXHQgICAgcHJpdmF0ZSBmaW5hbCBpbnQgYnVmZmVyU2l6ZTtcbiAgICAxM1x0ICAgIHByaXZhdGUgQnl0ZUJ1ZmZlciBjdXJyZW50QnVmZmVyO1xuICAgIDE0XHQgICAgcHJpdmF0ZSBCeXRlQnVmZmVyIGZsdXNoaW5nQnVmZmVyO1xuICAgIDE1XHRcbiAgICAxNlx0ICAgIHByaXZhdGUgZmluYWwgUmVlbnRyYW50TG9jayBsb2NrID0gbmV3IFJlZW50cmFudExvY2soKTtcbiAgICAxN1x0ICAgIHByaXZhdGUgZmluYWwgQ29uZGl0aW9uIG5vdEZ1bGwgPSBsb2NrLm5ld0NvbmRpdGlvbigpO1xuICAgIDE4XHQgICAgcHJpdmF0ZSBmaW5hbCBDb25kaXRpb24gbm90RW1wdHkgPSBsb2NrLm5ld0NvbmRpdGlvbigpO1xuICAgIDE5XHRcbiAgICAyMFx0ICAgIHByaXZhdGUgdm9sYXRpbGUgYm9vbGVhbiBjbG9zZWQgPSBmYWxzZTtcbiAgICAyMVx0XG4gICAgMjJcdCAgICBwcml2YXRlIHZvbGF0aWxlIGxvbmcgd3JpdGVQb3NpdGlvbiA9IDA7XG4gICAgMjNcdCAgICBwcml2YXRlIHZvbGF0aWxlIGxvbmcgZmx1c2hQb3NpdGlvbiA9IDA7XG4gICAgMjRcdFxuICAgIDI1XHRcbiAgICAyNlx0XG4gICAgMjdcdCAgICBwdWJsaWMgRG91YmxlQnVmZmVyQmxvY2tpbmdRdWV1ZShpbnQgYnVmZmVyU2l6ZSkge1xuICAgIDI4XHQgICAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7XG4gICAgMjlcdCAgICAgICAgdGhpcy5jdXJyZW50QnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICAzMFx0ICAgICAgICB0aGlzLmZsdXNoaW5nQnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZURpcmVjdChidWZmZXJTaXplKTtcbiAgICAzMVx0ICAgIH1cbiAgICAzMlx0XG4gICAgMzNcdCAgICBAT3ZlcnJpZGVcbiAgICAzNFx0ICAgIHB1YmxpYyB2b2lkIHB1dChCeXRlQnVmZmVyIHNyYykgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uIHtcbiAgICAzNVx0ICAgICAgICBpZiAoY2xvc2VkKSB7XG4gICAgMzZcdCAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJRdWV1ZSBpcyBjbG9zZWRcIik7XG4gICAgMzdcdCAgICAgICAgfVxuICAgIDM4XHRcbiAgICAzOVx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgICA0MFx0ICAgICAgICB0cnkge1xuICAgIDQxXHQgICAgICAgICAgICBpbnQgcmVxdWlyZWRTcGFjZSA9IHNyYy5yZW1haW5pbmcoKTtcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjee8k+WGsuWMuuepuumXtOS4jei2s++8jOetieW+heWIt+aWsFxuICAgIDQ0XHQgICAgICAgICAgICB3aGlsZSAoY3VycmVudEJ1ZmZlci5yZW1haW5pbmcoKSA8IHJlcXVpcmVkU3BhY2UpIHtcbiAgICA0NVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOe8k+WGsuWMuuWkquWwj+aXoOazleaUvuWFpeaVsOaNru+8jOaKm+WHuuW8guW4uFxuICAgIDQ2XHQgICAgICAgICAgICAgICAgaWYgKHJlcXVpcmVkU3BhY2UgPiBidWZmZXJTaXplKSB7XG4gICAgNDdcdCAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcbiAgICA0OFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQnVmZmVyIHRvbyBsYXJnZTogXCIgKyByZXF1aXJlZFNwYWNlICsgXCIgYnl0ZXMsIG1heCBpcyBcIiArIGJ1ZmZlclNpemUpO1xuICAgIDQ5XHQgICAgICAgICAgICAgICAgfVxuICAgIDUwXHRcbiAgICA1MVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjee8k+WGsuWMuuW3suS9v+eUqOepuumXtOi2hei/h+S4gOWNiu+8jOS4u+WKqOinpuWPkeS6pOaNolxuICAgIDUyXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA+IGJ1ZmZlclNpemUgLyAyKSB7XG4gICAgNTNcdCAgICAgICAgICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgICA1NFx0ICAgICAgICAgICAgICAgICAgICBub3RGdWxsLnNpZ25hbCgpO1xuICAgIDU1XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICA1Nlx0ICAgICAgICAgICAgICAgICAgICAvLyDlkKbliJnnrYnlvoXnqbrpl7Tlj5jlvpflj6/nlKhcbiAgICA1N1x0ICAgICAgICAgICAgICAgICAgICBub3RGdWxsLmF3YWl0KCk7XG4gICAgNThcdCAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlZCkge1xuICAgIDU5XHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgaXMgY2xvc2VkXCIpO1xuICAgIDYwXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgICA2MVx0ICAgICAgICAgICAgICAgIH1cbiAgICA2Mlx0ICAgICAgICAgICAgfVxuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICAgICAgLy8g6K6w5b2V5YaZ5YWl5YmN55qE5L2N572u77yM55So5LqO6Lef6LiqXG4gICAgNjVcdCAgICAgICAgICAgIGludCBiZWZvcmVQb3MgPSBjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCk7XG4gICAgNjZcdFxuICAgIDY3XHQgICAgICAgICAgICAvLyDmiafooYzmlbDmja7lhpnlhaVcbiAgICA2OFx0ICAgICAgICAgICAgY3VycmVudEJ1ZmZlci5wdXQoc3JjKTtcbiAgICA2OVx0XG4gICAgNzBcdCAgICAgICAgICAgIC8vIOabtOaWsOWGmeWFpeS9jee9rlxuICAgIDcxXHQgICAgICAgICAgICB3cml0ZVBvc2l0aW9uICs9IChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgLSBiZWZvcmVQb3MpO1xuICAgIDcyXHRcbiAgICA3M1x0ICAgICAgICAgICAgLy8g6YCa55+l5pyJ5paw5pWw5o2u5Y+v55SoXG4gICAgNzRcdCAgICAgICAgICAgIG5vdEVtcHR5LnNpZ25hbCgpO1xuICAgIDc1XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAgNzZcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAgNzdcdCAgICAgICAgfVxuICAgIDc4XHQgICAgfVxuICAgIDc5XHRcbiAgICA4MFx0XG4gICAgODFcdCAgICBAT3ZlcnJpZGVcbiAgICA4Mlx0ICAgIHB1YmxpYyBCeXRlQnVmZmVyIHRha2UoKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgIDgzXHQgICAgICAgIGxvY2subG9jaygpO1xuICAgIDg0XHQgICAgICAgIHRyeSB7XG4gICAgODVcdCAgICAgICAgICAgIHdoaWxlIChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgPT0gMCAmJiAhY2xvc2VkKSB7XG4gICAgODZcdCAgICAgICAgICAgICAgICBub3RFbXB0eS5hd2FpdCgpO1xuICAgIDg3XHQgICAgICAgICAgICB9XG4gICAgODhcdFxuICAgIDg5XHQgICAgICAgICAgICBpZiAoY2xvc2VkICYmIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwKSB7XG4gICAgOTBcdCAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICA5MVx0ICAgICAgICAgICAgfVxuICAgIDkyXHRcbiAgICA5M1x0ICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgICA5NFx0XG4gICAgOTVcdCAgICAgICAgICAgIG5vdEZ1bGwuc2lnbmFsKCk7XG4gICAgOTZcdCAgICAgICAgICAgIHJldHVybiBmbHVzaGluZ0J1ZmZlcjtcbiAgICA5N1x0ICAgICAgICB9IGZpbmFsbHkge1xuICAgIDk4XHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgIDk5XHQgICAgICAgIH1cbiAgIDEwMFx0ICAgIH1cbiAgIDEwMVx0XG4gICAxMDJcdCAgICBwcml2YXRlIHZvaWQgc3dhcEFyZWEoKSB7XG4gICAxMDNcdCAgICAgICAgLy8g5Lqk5o2i57yT5Yay5Yy6XG4gICAxMDRcdCAgICAgICAgQnl0ZUJ1ZmZlciB0ZW1wID0gZmx1c2hpbmdCdWZmZXI7XG4gICAxMDVcdCAgICAgICAgZmx1c2hpbmdCdWZmZXIgPSBjdXJyZW50QnVmZmVyO1xuICAgMTA2XHQgICAgICAgIGN1cnJlbnRCdWZmZXIgPSB0ZW1wO1xuICAgMTA3XHRcbiAgIDEwOFx0ICAgICAgICAvLyDlh4blpIfov5Tlm57nmoTnvJPlhrLljLpcbiAgIDEwOVx0ICAgICAgICBmbHVzaGluZ0J1ZmZlci5mbGlwKCk7XG4gICAxMTBcdCAgICAgICAgY3VycmVudEJ1ZmZlci5jbGVhcigpO1xuICAgMTExXHRcbiAgIDExMlx0ICAgICAgICBmbHVzaFBvc2l0aW9uID0gd3JpdGVQb3NpdGlvbjtcbiAgIDExM1x0ICAgIH1cbiAgIDExNFx0XG4gICAxMTVcdCAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHtcbiAgIDExNlx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDExN1x0ICAgICAgICB0cnkge1xuICAgMTE4XHQgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgMTE5XHQgICAgICAgICAgICBub3RFbXB0eS5zaWduYWxBbGwoKTtcbiAgIDEyMFx0ICAgICAgICAgICAgbm90RnVsbC5zaWduYWxBbGwoKTtcbiAgIDEyMVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTIyXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMTIzXHQgICAgICAgIH1cbiAgIDEyNFx0ICAgIH1cbiAgIDEyNVx0XG4gICAxMjZcdCAgICBAT3ZlcnJpZGVcbiAgIDEyN1x0ICAgIHB1YmxpYyBib29sZWFuIG9mZmVyKEJ5dGVCdWZmZXIgYnl0ZUJ1ZmZlcikge1xuICAgMTI4XHQgICAgICAgIGlmIChjbG9zZWQpIHtcbiAgIDEyOVx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTMwXHQgICAgICAgIH1cbiAgIDEzMVx0XG4gICAxMzJcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAxMzNcdCAgICAgICAgdHJ5IHtcbiAgIDEzNFx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRCdWZmZXIucmVtYWluaW5nKCkgPCBieXRlQnVmZmVyLnJlbWFpbmluZygpKSB7XG4gICAxMzVcdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAxMzZcdCAgICAgICAgICAgIH1cbiAgIDEzN1x0ICAgICAgICAgICAgY3VycmVudEJ1ZmZlci5wdXQoYnl0ZUJ1ZmZlcik7XG4gICAxMzhcdCAgICAgICAgICAgIG5vdEVtcHR5LnNpZ25hbCgpO1xuICAgMTM5XHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDE0MFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTQxXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMTQyXHQgICAgICAgIH1cbiAgIDE0M1x0ICAgIH1cbiAgIDE0NFx0XG4gICAxNDVcdCAgICBAT3ZlcnJpZGVcbiAgIDE0Nlx0ICAgIHB1YmxpYyBib29sZWFuIG9mZmVyKEJ5dGVCdWZmZXIgYnl0ZUJ1ZmZlciwgbG9uZyB0aW1lb3V0LCBUaW1lVW5pdCB1bml0KSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgMTQ3XHQgICAgICAgIGlmIChjbG9zZWQpIHtcbiAgIDE0OFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTQ5XHQgICAgICAgIH1cbiAgIDE1MFx0XG4gICAxNTFcdCAgICAgICAgbG9uZyBuYW5vcyA9IHVuaXQudG9OYW5vcyh0aW1lb3V0KTtcbiAgIDE1Mlx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDE1M1x0ICAgICAgICB0cnkge1xuICAgMTU0XHQgICAgICAgICAgICB3aGlsZSAoY3VycmVudEJ1ZmZlci5yZW1haW5pbmcoKSA8IGJ5dGVCdWZmZXIucmVtYWluaW5nKCkpIHtcbiAgIDE1NVx0ICAgICAgICAgICAgICAgIGlmIChuYW5vcyA8PSAwKSB7XG4gICAxNTZcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTU3XHQgICAgICAgICAgICAgICAgfVxuICAgMTU4XHQgICAgICAgICAgICAgICAgbmFub3MgPSBub3RGdWxsLmF3YWl0TmFub3MobmFub3MpO1xuICAgMTU5XHQgICAgICAgICAgICAgICAgaWYgKGNsb3NlZCkge1xuICAgMTYwXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDE2MVx0ICAgICAgICAgICAgICAgIH1cbiAgIDE2Mlx0ICAgICAgICAgICAgfVxuICAgMTYzXHQgICAgICAgICAgICBjdXJyZW50QnVmZmVyLnB1dChieXRlQnVmZmVyKTtcbiAgIDE2NFx0ICAgICAgICAgICAgbm90RW1wdHkuc2lnbmFsKCk7XG4gICAxNjVcdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgMTY2XHQgICAgICAgIH0gZmluYWxseSB7XG4gICAxNjdcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAxNjhcdCAgICAgICAgfVxuICAgMTY5XHQgICAgfVxuICAgMTcwXHRcbiAgIDE3MVx0ICAgIEBPdmVycmlkZVxuICAgMTcyXHQgICAgcHVibGljIEJ5dGVCdWZmZXIgcG9sbCgpIHtcbiAgIDE3M1x0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDE3NFx0ICAgICAgICB0cnkge1xuICAgMTc1XHQgICAgICAgICAgICBpZiAoY3VycmVudEJ1ZmZlci5wb3NpdGlvbigpID09IDApIHtcbiAgIDE3Nlx0ICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgMTc3XHQgICAgICAgICAgICB9XG4gICAxNzhcdFxuICAgMTc5XHQgICAgICAgICAgICAvLyDkuqTmjaLnvJPlhrLljLpcbiAgIDE4MFx0ICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgIDE4MVx0XG4gICAxODJcdCAgICAgICAgICAgIG5vdEZ1bGwuc2lnbmFsKCk7XG4gICAxODNcdCAgICAgICAgICAgIHJldHVybiBmbHVzaGluZ0J1ZmZlcjtcbiAgIDE4NFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMTg1XHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMTg2XHQgICAgICAgIH1cbiAgIDE4N1x0ICAgIH1cbiAgIDE4OFx0XG4gICAxODlcdCAgICBAT3ZlcnJpZGVcbiAgIDE5MFx0ICAgIHB1YmxpYyBCeXRlQnVmZmVyIHBvbGwobG9uZyB0aW1lb3V0LCBUaW1lVW5pdCB1bml0KSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuICAgMTkxXHQgICAgICAgIGxvbmcgbmFub3MgPSB1bml0LnRvTmFub3ModGltZW91dCk7XG4gICAxOTJcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAxOTNcdCAgICAgICAgdHJ5IHtcbiAgIDE5NFx0ICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwICYmICFjbG9zZWQpIHtcbiAgIDE5NVx0ICAgICAgICAgICAgICAgIGlmIChuYW5vcyA8PSAwKSB7XG4gICAxOTZcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAxOTdcdCAgICAgICAgICAgICAgICB9XG4gICAxOThcdCAgICAgICAgICAgICAgICBuYW5vcyA9IG5vdEVtcHR5LmF3YWl0TmFub3MobmFub3MpO1xuICAgMTk5XHQgICAgICAgICAgICB9XG4gICAyMDBcdFxuICAgMjAxXHQgICAgICAgICAgICBpZiAoY2xvc2VkICYmIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwKSB7XG4gICAyMDJcdCAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgIDIwM1x0ICAgICAgICAgICAgfVxuICAgMjA0XHRcbiAgIDIwNVx0ICAgICAgICAgICAgLy8g5Lqk5o2i57yT5Yay5Yy6XG4gICAyMDZcdCAgICAgICAgICAgIHN3YXBBcmVhKCk7XG4gICAyMDdcdFxuICAgMjA4XHQgICAgICAgICAgICBub3RGdWxsLnNpZ25hbCgpO1xuICAgMjA5XHQgICAgICAgICAgICByZXR1cm4gZmx1c2hpbmdCdWZmZXI7XG4gICAyMTBcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDIxMVx0ICAgICAgICAgICAgbG9jay51bmxvY2soKTtcbiAgIDIxMlx0ICAgICAgICB9XG4gICAyMTNcdCAgICB9XG4gICAyMTRcdFxuICAgMjE1XHQgICAgQE92ZXJyaWRlXG4gICAyMTZcdCAgICBwdWJsaWMgaW50IHJlbWFpbmluZ0NhcGFjaXR5KCkge1xuICAgMjE3XHQgICAgICAgIGxvY2subG9jaygpO1xuICAgMjE4XHQgICAgICAgIHRyeSB7XG4gICAyMTlcdCAgICAgICAgICAgIHJldHVybiBjdXJyZW50QnVmZmVyLnJlbWFpbmluZygpO1xuICAgMjIwXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAyMjFcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAyMjJcdCAgICAgICAgfVxuICAgMjIzXHQgICAgfVxuICAgMjI0XHRcbiAgIDIyNVx0ICAgIEBPdmVycmlkZVxuICAgMjI2XHQgICAgcHVibGljIGludCBkcmFpblRvKENvbGxlY3Rpb248PyBzdXBlciBCeXRlQnVmZmVyPiBjKSB7XG4gICAyMjdcdCAgICAgICAgcmV0dXJuIGRyYWluVG8oYywgSW50ZWdlci5NQVhfVkFMVUUpO1xuICAgMjI4XHQgICAgfVxuICAgMjI5XHRcbiAgIDIzMFx0ICAgIEBPdmVycmlkZVxuICAgMjMxXHQgICAgcHVibGljIGludCBkcmFpblRvKENvbGxlY3Rpb248PyBzdXBlciBCeXRlQnVmZmVyPiBjLCBpbnQgbWF4RWxlbWVudHMpIHtcbiAgIDIzMlx0ICAgICAgICBpZiAoYyA9PSBudWxsKSB0aHJvdyBuZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oKTtcbiAgIDIzM1x0ICAgICAgICBpZiAoYyA9PSB0aGlzKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7XG4gICAyMzRcdCAgICAgICAgaWYgKG1heEVsZW1lbnRzIDw9IDApIHJldHVybiAwO1xuICAgMjM1XHRcbiAgIDIzNlx0ICAgICAgICBsb2NrLmxvY2soKTtcbiAgIDIzN1x0ICAgICAgICB0cnkge1xuICAgMjM4XHQgICAgICAgICAgICBpbnQgbiA9IE1hdGgubWluKG1heEVsZW1lbnRzLCAxKTsgLy8g5oiR5Lus5q+P5qyh5pyA5aSa5Y+q6IO95Y+W5LiA5Liq57yT5Yay5Yy6XG4gICAyMzlcdFxuICAgMjQwXHQgICAgICAgICAgICBpZiAoY3VycmVudEJ1ZmZlci5wb3NpdGlvbigpID09IDApIHtcbiAgIDI0MVx0ICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgMjQyXHQgICAgICAgICAgICB9XG4gICAyNDNcdFxuICAgMjQ0XHQgICAgICAgICAgICAvLyDkuqTmjaLnvJPlhrLljLpcbiAgIDI0NVx0ICAgICAgICAgICAgc3dhcEFyZWEoKTtcbiAgIDI0Nlx0XG4gICAyNDdcdCAgICAgICAgICAgIGMuYWRkKGZsdXNoaW5nQnVmZmVyKTtcbiAgIDI0OFx0ICAgICAgICAgICAgbm90RnVsbC5zaWduYWwoKTtcbiAgIDI0OVx0ICAgICAgICAgICAgcmV0dXJuIG47XG4gICAyNTBcdCAgICAgICAgfSBmaW5hbGx5IHtcbiAgIDI1MVx0ICAgICAgICAgICAgbG9jay51bmxvY2soKTtcbiAgIDI1Mlx0ICAgICAgICB9XG4gICAyNTNcdCAgICB9XG4gICAyNTRcdFxuICAgMjU1XHQgICAgQE92ZXJyaWRlXG4gICAyNTZcdCAgICBwdWJsaWMgaW50IHNpemUoKSB7XG4gICAyNTdcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAyNThcdCAgICAgICAgdHJ5IHtcbiAgIDI1OVx0ICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKTtcbiAgIDI2MFx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMjYxXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMjYyXHQgICAgICAgIH1cbiAgIDI2M1x0ICAgIH1cbiAgIDI2NFx0XG4gICAyNjVcdCAgICBAT3ZlcnJpZGVcbiAgIDI2Nlx0ICAgIHB1YmxpYyBib29sZWFuIGlzRW1wdHkoKSB7XG4gICAyNjdcdCAgICAgICAgbG9jay5sb2NrKCk7XG4gICAyNjhcdCAgICAgICAgdHJ5IHtcbiAgIDI2OVx0ICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRCdWZmZXIucG9zaXRpb24oKSA9PSAwO1xuICAgMjcwXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAyNzFcdCAgICAgICAgICAgIGxvY2sudW5sb2NrKCk7XG4gICAyNzJcdCAgICAgICAgfVxuICAgMjczXHQgICAgfVxuICAgMjc0XHRcbiAgIDI3NVx0ICAgIEBPdmVycmlkZVxuICAgMjc2XHQgICAgcHVibGljIGJvb2xlYW4gY29udGFpbnMoT2JqZWN0IG8pIHtcbiAgIDI3N1x0ICAgICAgICByZXR1cm4gZmFsc2U7IC8vIOS4jeaUr+aMgeatpOaTjeS9nFxuICAgMjc4XHQgICAgfVxuICAgMjc5XHRcbiAgIDI4MFx0ICAgIEBPdmVycmlkZVxuICAgMjgxXHQgICAgcHVibGljIEl0ZXJhdG9yPEJ5dGVCdWZmZXI+IGl0ZXJhdG9yKCkge1xuICAgMjgyXHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDI4M1x0ICAgIH1cbiAgIDI4NFx0XG4gICAyODVcdCAgICBAT3ZlcnJpZGVcbiAgIDI4Nlx0ICAgIHB1YmxpYyBPYmplY3RbXSB0b0FycmF5KCkge1xuICAgMjg3XHQgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDI4OFx0ICAgIH1cbiAgIDI4OVx0XG4gICAyOTBcdCAgICBAT3ZlcnJpZGVcbiAgIDI5MVx0ICAgIHB1YmxpYyA8VD4gVFtdIHRvQXJyYXkoVFtdIGEpIHtcbiAgIDI5Mlx0ICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsgLy8g5LiN5pSv5oyB5q2k5pON5L2cXG4gICAyOTNcdCAgICB9XG4gICAyOTRcdFxuICAgMjk1XHQgICAgQE92ZXJyaWRlXG4gICAyOTZcdCAgICBwdWJsaWMgYm9vbGVhbiByZW1vdmUoT2JqZWN0IG8pIHtcbiAgIDI5N1x0ICAgICAgICByZXR1cm4gZmFsc2U7IC8vIOS4jeaUr+aMgeatpOaTjeS9nFxuICAgMjk4XHQgICAgfVxuICAgMjk5XHRcbiAgIDMwMFx0ICAgIEBPdmVycmlkZVxuICAgMzAxXHQgICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNBbGwoQ29sbGVjdGlvbjw/PiBjKSB7XG4gICAzMDJcdCAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDMwM1x0ICAgIH1cbiAgIDMwNFx0XG4gICAzMDVcdCAgICBAT3ZlcnJpZGVcbiAgIDMwNlx0ICAgIHB1YmxpYyBib29sZWFuIGFkZEFsbChDb2xsZWN0aW9uPD8gZXh0ZW5kcyBCeXRlQnVmZmVyPiBjKSB7XG4gICAzMDdcdCAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7IC8vIOS4jeaUr+aMgeatpOaTjeS9nFxuICAgMzA4XHQgICAgfVxuICAgMzA5XHRcbiAgIDMxMFx0ICAgIEBPdmVycmlkZVxuICAgMzExXHQgICAgcHVibGljIGJvb2xlYW4gcmVtb3ZlQWxsKENvbGxlY3Rpb248Pz4gYykge1xuICAgMzEyXHQgICAgICAgIHJldHVybiBmYWxzZTsgLy8g5LiN5pSv5oyB5q2k5pON5L2cXG4gICAzMTNcdCAgICB9XG4gICAzMTRcdFxuICAgMzE1XHQgICAgQE92ZXJyaWRlXG4gICAzMTZcdCAgICBwdWJsaWMgYm9vbGVhbiByZXRhaW5BbGwoQ29sbGVjdGlvbjw/PiBjKSB7XG4gICAzMTdcdCAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyDkuI3mlK/mjIHmraTmk43kvZxcbiAgIDMxOFx0ICAgIH1cbiAgIDMxOVx0XG4gICAzMjBcdCAgICBAT3ZlcnJpZGVcbiAgIDMyMVx0ICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkge1xuICAgMzIyXHQgICAgICAgIGxvY2subG9jaygpO1xuICAgMzIzXHQgICAgICAgIHRyeSB7XG4gICAzMjRcdCAgICAgICAgICAgIGN1cnJlbnRCdWZmZXIuY2xlYXIoKTtcbiAgIDMyNVx0ICAgICAgICAgICAgZmx1c2hpbmdCdWZmZXIuY2xlYXIoKTtcbiAgIDMyNlx0ICAgICAgICAgICAgbm90RnVsbC5zaWduYWxBbGwoKTtcbiAgIDMyN1x0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMzI4XHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMzI5XHQgICAgICAgIH1cbiAgIDMzMFx0ICAgIH1cbiAgIDMzMVx0XG4gICAzMzJcdCAgICBAT3ZlcnJpZGVcbiAgIDMzM1x0ICAgIHB1YmxpYyBib29sZWFuIGFkZChCeXRlQnVmZmVyIGJ5dGVCdWZmZXIpIHtcbiAgIDMzNFx0ICAgICAgICBpZiAob2ZmZXIoYnl0ZUJ1ZmZlcikpIHtcbiAgIDMzNVx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAzMzZcdCAgICAgICAgfVxuICAgMzM3XHQgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oXCJRdWV1ZSBmdWxsXCIpO1xuICAgMzM4XHQgICAgfVxuICAgMzM5XHRcbiAgIDM0MFx0ICAgIEBPdmVycmlkZVxuICAgMzQxXHQgICAgcHVibGljIEJ5dGVCdWZmZXIgcmVtb3ZlKCkge1xuICAgMzQyXHQgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gcG9sbCgpO1xuICAgMzQzXHQgICAgICAgIGlmIChidWZmZXIgPT0gbnVsbCkge1xuICAgMzQ0XHQgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgZW1wdHlcIik7XG4gICAzNDVcdCAgICAgICAgfVxuICAgMzQ2XHQgICAgICAgIHJldHVybiBidWZmZXI7XG4gICAzNDdcdCAgICB9XG4gICAzNDhcdFxuICAgMzQ5XHQgICAgQE92ZXJyaWRlXG4gICAzNTBcdCAgICBwdWJsaWMgQnl0ZUJ1ZmZlciBlbGVtZW50KCkge1xuICAgMzUxXHQgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gcGVlaygpO1xuICAgMzUyXHQgICAgICAgIGlmIChidWZmZXIgPT0gbnVsbCkge1xuICAgMzUzXHQgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiUXVldWUgZW1wdHlcIik7XG4gICAzNTRcdCAgICAgICAgfVxuICAgMzU1XHQgICAgICAgIHJldHVybiBidWZmZXI7XG4gICAzNTZcdCAgICB9XG4gICAzNTdcdFxuICAgMzU4XHQgICAgQE92ZXJyaWRlXG4gICAzNTlcdCAgICBwdWJsaWMgQnl0ZUJ1ZmZlciBwZWVrKCkge1xuICAgMzYwXHQgICAgICAgIGxvY2subG9jaygpO1xuICAgMzYxXHQgICAgICAgIHRyeSB7XG4gICAzNjJcdCAgICAgICAgICAgIGlmIChjdXJyZW50QnVmZmVyLnBvc2l0aW9uKCkgPT0gMCkge1xuICAgMzYzXHQgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAzNjRcdCAgICAgICAgICAgIH1cbiAgIDM2NVx0ICAgICAgICAgICAgLy8g6L+U5Zue5b2T5YmN57yT5Yay5Yy655qE5Y+q6K+76KeG5Zu+XG4gICAzNjZcdCAgICAgICAgICAgIEJ5dGVCdWZmZXIgdmlldyA9IGN1cnJlbnRCdWZmZXIuZHVwbGljYXRlKCk7XG4gICAzNjdcdCAgICAgICAgICAgIHZpZXcuZmxpcCgpO1xuICAgMzY4XHQgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgIDM2OVx0ICAgICAgICB9IGZpbmFsbHkge1xuICAgMzcwXHQgICAgICAgICAgICBsb2NrLnVubG9jaygpO1xuICAgMzcxXHQgICAgICAgIH1cbiAgIDM3Mlx0ICAgIH1cbiAgIDM3M1x0XG4gICAzNzRcdCAgICBwdWJsaWMgbG9uZyBnZXRXcml0ZVBvc2l0aW9uKCkge1xuICAgMzc1XHQgICAgICAgIHJldHVybiB3cml0ZVBvc2l0aW9uO1xuICAgMzc2XHQgICAgfVxuICAgMzc3XHRcbiAgIDM3OFx0ICAgIC8qKlxuICAgMzc5XHQgICAgICog6I635Y+W5pyA5ZCO5Yi355uY5L2N572uXG4gICAzODBcdCAgICAgKi9cbiAgIDM4MVx0ICAgIHB1YmxpYyBsb25nIGdldEZsdXNoUG9zaXRpb24oKSB7XG4gICAzODJcdCAgICAgICAgcmV0dXJuIGZsdXNoUG9zaXRpb247XG4gICAzODNcdCAgICB9XG4gICAzODRcdFxuICAgMzg1XHQgICAgLyoqXG4gICAzODZcdCAgICAgKiDojrflj5bmnKrliLfnm5jmlbDmja7lpKflsI9cbiAgIDM4N1x0ICAgICAqL1xuICAgMzg4XHQgICAgcHVibGljIGxvbmcgZ2V0VW5mbHVzaGVkU2l6ZSgpIHtcbiAgIDM4OVx0ICAgICAgICByZXR1cm4gd3JpdGVQb3NpdGlvbiAtIGZsdXNoUG9zaXRpb247XG4gICAzOTBcdCAgICB9XG4gICAzOTFcdH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDM5MVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiN2I0OTRhOWItYWRlMi00OWY1LWJkMmMtMmVhMTIyOWY3MmNhO3Rvb2x1X3ZydHhfMDFDWjRrZTlhd3V1bjZkNm0yUzNoeTlwIjp7InJlcXVlc3RJZCI6IjdiNDk0YTliLWFkZTItNDlmNS1iZDJjLTJlYTEyMjlmNzJjYSIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFDWjRrZTlhd3V1bjZkNm0yUzNoeTlwIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YTpcbiAgIDEwMFx0ICAgIHByaXZhdGUgdm9pZCBhdG9taWNSZXBsYWNlRmlsZShGaWxlIHRlbXBGaWxlLCBGaWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAxMDFcdCAgICAgICAgaWYoIXRlbXBGaWxlLnJlbmFtZVRvKGZpbGUpKXtcbiAgIDEwMlx0ICAgICAgICAgICAgRmlsZSBiYWNrdXAgPSBuZXcgRmlsZShmaWxlLmdldEFic29sdXRlUGF0aCgpICsgXCIuYmFrXCIpO1xuICAgMTAzXHQgICAgICAgICAgICBpZihmaWxlLmV4aXN0cygpKXtcbiAgIDEwNFx0ICAgICAgICAgICAgICAgIGlmKGJhY2t1cC5leGlzdHMoKSl7XG4gICAxMDVcdCAgICAgICAgICAgICAgICAgICAgYmFja3VwLmRlbGV0ZSgpO1xuICAgMTA2XHQgICAgICAgICAgICAgICAgfVxuICAgMTA3XHQgICAgICAgICAgICAgICAgZmlsZS5yZW5hbWVUbyhiYWNrdXApO1xuICAgMTA4XHQgICAgICAgICAgICB9XG4gICAxMDlcdFxuICAgMTEwXHQgICAgICAgICAgICBpZighdGVtcEZpbGUucmVuYW1lVG8odGVtcEZpbGUpKXtcbiAgIDExMVx0ICAgICAgICAgICAgICAgIEZpbGVzLmNvcHkodGVtcEZpbGUudG9QYXRoKCksIGZpbGUudG9QYXRoKCkpO1xuICAgMTEyXHQgICAgICAgICAgICAgICAgdGVtcEZpbGUuZGVsZXRlKCk7XG4gICAxMTNcdCAgICAgICAgICAgIH1cbiAgIDExNFx0XG4gICAxMTVcdCAgICAgICAgICAgIGlmKGJhY2t1cC5leGlzdHMoKSl7XG4gICAxMTZcdCAgICAgICAgICAgICAgICBiYWNrdXAuZGVsZXRlKCk7XG4gICAxMTdcdCAgICAgICAgICAgIH1cbiAgIDExOFx0ICAgICAgICB9XG4gICAxMTlcdCAgICB9XG4gICAxMjBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTk3XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxOGU1MjQ3Mi01NTQ2LTQ0Y2EtOTYxMi01ZjI0YmE2YzE3ZjA7dG9vbHVfdnJ0eF8wMVh5d3BhdnhoN3pLNWlLa1pqNlJrUG8iOnsicmVxdWVzdElkIjoiMThlNTI0NzItNTU0Ni00NGNhLTk2MTItNWYyNGJhNmMxN2YwIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMVh5d3BhdnhoN3pLNWlLa1pqNlJrUG8iLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA5Nlx0ICAgICAgICAgICAgaXNSZXdyaXRpbmcuc2V0KGZhbHNlKTtcbiAgICA5N1x0ICAgICAgICB9XG4gICAgOThcdCAgICB9XG4gICAgOTlcdFxuICAgMTAwXHQgICAgLyoqXG4gICAxMDFcdCAgICAgKiDljp/lrZDmgKflnLDmm7/mjaJBT0bmlofku7ZcbiAgIDEwMlx0ICAgICAqIEBwYXJhbSB0ZW1wRmlsZSDkuLTml7bmlofku7ZcbiAgIDEwM1x0ICAgICAqIEBwYXJhbSB0YXJnZXRGaWxlIOebruagh+aWh+S7tlxuICAgMTA0XHQgICAgICogQHRocm93cyBJT0V4Y2VwdGlvbiDlpoLmnpzmlofku7bmk43kvZzlpLHotKVcbiAgIDEwNVx0ICAgICAqL1xuICAgMTA2XHQgICAgcHJpdmF0ZSB2b2lkIGF0b21pY1JlcGxhY2VGaWxlKEZpbGUgdGVtcEZpbGUsIEZpbGUgdGFyZ2V0RmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgIDEwN1x0ICAgICAgICAvLyDlsJ3or5Xnm7TmjqXph43lkb3lkI3vvIjlnKjlpKflpJrmlbDns7vnu5/kuIrmmK/ljp/lrZDmk43kvZzvvIlcbiAgIDEwOFx0ICAgICAgICBpZiAodGVtcEZpbGUucmVuYW1lVG8odGFyZ2V0RmlsZSkpIHtcbiAgIDEwOVx0ICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCLmiJDlip/pgJrov4fph43lkb3lkI3mm7/mjaJBT0bmlofku7ZcIik7XG4gICAxMTBcdCAgICAgICAgICAgIHJldHVybjtcbiAgIDExMVx0ICAgICAgICB9XG4gICAxMTJcdFxuICAgMTEzXHQgICAgICAgIGxvZ2dlci5pbmZvKFwi55u05o6l6YeN5ZG95ZCN5aSx6LSl77yM5L2/55So5aSH5Lu9562W55Wl5pu/5o2iQU9G5paH5Lu2XCIpO1xuICAgMTE0XHRcbiAgIDExNVx0ICAgICAgICAvLyDlpoLmnpznm7TmjqXph43lkb3lkI3lpLHotKXvvIzkvb/nlKjlpIfku73nrZbnlaVcbiAgIDExNlx0ICAgICAgICBGaWxlIGJhY2t1cEZpbGUgPSBuZXcgRmlsZSh0YXJnZXRGaWxlLmdldEFic29sdXRlUGF0aCgpICsgXCIuYmFrXCIpO1xuICAgMTE3XHRcbiAgIDExOFx0ICAgICAgICAvLyDliKDpmaTlt7LlrZjlnKjnmoTlpIfku73mlofku7ZcbiAgIDExOVx0ICAgICAgICBpZiAoYmFja3VwRmlsZS5leGlzdHMoKSAmJiAhYmFja3VwRmlsZS5kZWxldGUoKSkge1xuICAgMTIwXHQgICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIoOmZpOW3suWtmOWcqOeahOWkh+S7veaWh+S7tjogXCIgKyBiYWNrdXBGaWxlLmdldEFic29sdXRlUGF0aCgpKTtcbiAgIDEyMVx0ICAgICAgICB9XG4gICAxMjJcdFxuICAgMTIzXHQgICAgICAgIC8vIOWmguaenOebruagh+aWh+S7tuWtmOWcqO+8jOWwhuWFtumHjeWRveWQjeS4uuWkh+S7vVxuICAgMTI0XHQgICAgICAgIGlmICh0YXJnZXRGaWxlLmV4aXN0cygpKSB7XG4gICAxMjVcdCAgICAgICAgICAgIGlmICghdGFyZ2V0RmlsZS5yZW5hbWVUbyhiYWNrdXBGaWxlKSkge1xuICAgMTI2XHQgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6Dms5XliJvlu7rlpIfku73mlofku7bvvIzlsIbkvb/nlKjlpI3liLbmlrnlvI/mm7/mjaJcIik7XG4gICAxMjdcdCAgICAgICAgICAgIH1cbiAgIDEyOFx0ICAgICAgICB9XG4gICAxMjlcdFxuICAgMTMwXHQgICAgICAgIC8vIOWkjeWItuS4tOaXtuaWh+S7tuWIsOebruagh+S9jee9rlxuICAgMTMxXHQgICAgICAgIEZpbGVzLmNvcHkodGVtcEZpbGUudG9QYXRoKCksIHRhcmdldEZpbGUudG9QYXRoKCkpO1xuICAgMTMyXHQgICAgICAgIGlmICghdGVtcEZpbGUuZGVsZXRlKCkpIHtcbiAgIDEzM1x0ICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6Dms5XliKDpmaTkuLTml7bmlofku7Y6IFwiICsgdGVtcEZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpO1xuICAgMTM0XHQgICAgICAgIH1cbiAgIDEzNVx0XG4gICAxMzZcdCAgICAgICAgLy8g5pON5L2c5oiQ5Yqf5ZCO5Yig6Zmk5aSH5Lu9XG4gICAxMzdcdCAgICAgICAgaWYgKGJhY2t1cEZpbGUuZXhpc3RzKCkgJiYgIWJhY2t1cEZpbGUuZGVsZXRlKCkpIHtcbiAgIDEzOFx0ICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6Dms5XliKDpmaTlpIfku73mlofku7Y6IFwiICsgYmFja3VwRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSk7XG4gICAxMzlcdCAgICAgICAgfVxuICAgMTQwXHRcbiAgIDE0MVx0ICAgICAgICBsb2dnZXIuaW5mbyhcIuaIkOWKn+mAmui/h+WkjeWItuabv+aNokFPRuaWh+S7tlwiKTtcbiAgIDE0Mlx0ICAgIH1cbiAgIDE0M1x0XG4gICAxNDRcdFxuICAgMTQ1XHQgICAgcHJpdmF0ZSB2b2lkIGFwcGVuZFJld3JpdGVCdWZmZXJUb1RlbXBGaWxlKExpc3Q8Qnl0ZUJ1ZmZlcj4gYnVmZmVycykgdGhyb3dzIElPRXhjZXB0aW9ue1xuICAgMTQ2XHQgICAgICAgIGlmKGJ1ZmZlcnM9PW51bGwgfHwgYnVmZmVycy5pc0VtcHR5KCkpe1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2MmUxMDNmOS04Zjc0LTQwM2MtODQ1NC0wYzFmMzVlOGFiMTI7dG9vbHVfdnJ0eF8wMVBQNHBkY244OWRoUk0yNTJVR3NCazUiOnsicmVxdWVzdElkIjoiNjJlMTAzZjktOGY3NC00MDNjLTg0NTQtMGMxZjM1ZThhYjEyIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMVBQNHBkY244OWRoUk0yNTJVR3NCazUiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9yZXdyaXRlci9BT0ZSZXdyaXRlci5qYXZhOlxuICAgIDUwXHQgICAgICAgIHJldHVybiAhaXNSZXdyaXRpbmcuZ2V0KCk7XG4gICAgNTFcdCAgICB9XG4gICAgNTJcdFxuICAgIDUzXHQgICAgTGlzdDxCeXRlQnVmZmVyPiByZXdyaXRlQnVmZmVyO1xuICAgIDU0XHRcbiAgICA1NVx0ICAgIHB1YmxpYyBib29sZWFuIHJld3JpdGUoKXtcbiAgICA1Nlx0ICAgICAgICBpZighaXNSZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSx0cnVlKSl7XG4gICAgNTdcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuato+WcqOmHjeWGmVwiKTtcbiAgICA1OFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDU5XHQgICAgICAgIH1cbiAgICA2MFx0XG4gICAgNjFcdCAgICAgICAgdHJ5e1xuICAgIDYyXHQgICAgICAgICAgICByZXdyaXRlQnVmZmVyID0gQ29sbGVjdGlvbnMuc3luY2hyb25pemVkTGlzdChuZXcgQXJyYXlMaXN0PD4oKSk7XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0YXJ0UmV3cml0ZUJ1ZmZlcigpO1xuICAgIDY1XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDIyMFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNmY3ZWQ1YjAtZDFkYS00NjAzLTk4YWQtYTNhYWYwZjRjM2IwO3Rvb2x1X3ZydHhfMDFYekF1Y2FkQzJzYWFEOHVUdnBZb3lDIjp7InJlcXVlc3RJZCI6IjZmN2VkNWIwLWQxZGEtNDYwMy05OGFkLWEzYWFmMGY0YzNiMCIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFYekF1Y2FkQzJzYWFEOHVUdnBZb3lDIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvcmV3cml0ZXIvQU9GUmV3cml0ZXIuamF2YTpcbiAgICA1MFx0ICAgICAgICByZXR1cm4gIWlzUmV3cml0aW5nLmdldCgpO1xuICAgIDUxXHQgICAgfVxuICAgIDUyXHRcbiAgICA1M1x0ICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gcmV3cml0ZUJ1ZmZlcjtcbiAgICA1NFx0XG4gICAgNTVcdCAgICBwdWJsaWMgYm9vbGVhbiByZXdyaXRlKCl7XG4gICAgNTZcdCAgICAgICAgaWYoIWlzUmV3cml0aW5nLmNvbXBhcmVBbmRTZXQoZmFsc2UsdHJ1ZSkpe1xuICAgIDU3XHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLmraPlnKjph43lhplcIik7XG4gICAgNThcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA1OVx0ICAgICAgICB9XG4gICAgNjBcdFxuICAgIDYxXHQgICAgICAgIHRyeXtcbiAgICA2Mlx0ICAgICAgICAgICAgcmV3cml0ZUJ1ZmZlciA9IENvbGxlY3Rpb25zLnN5bmNocm9uaXplZExpc3QobmV3IEFycmF5TGlzdDw+KCkpO1xuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5zdGFydFJld3JpdGVCdWZmZXIoKTtcbiAgICA2NVx0XG4gICAgNjZcdCAgICAgICAgICAgIEZpbGUgdGVtcEZpbGUgPSBuZXcgRmlsZSh0ZW1wRmlsZW5hbWUpO1xuICAgIDY3XHQgICAgICAgICAgICBpZih0ZW1wRmlsZS5leGlzdHMoKSl7XG4gICAgNjhcdCAgICAgICAgICAgICAgICB0ZW1wRmlsZS5kZWxldGUoKTtcbiAgICA2OVx0ICAgICAgICAgICAgfVxuICAgIDcwXHRcbiAgICA3MVx0XG4gICAgNzJcdFxuICAgIDczXHQgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBkb1dyaXRlKCk7XG4gICAgNzRcdFxuICAgIDc1XHRcbiAgICA3Nlx0ICAgICAgICAgICAgaWYoc3VjY2Vzcyl7XG4gICAgNzdcdCAgICAgICAgICAgICAgICBMaXN0PEJ5dGVCdWZmZXI+IGJ1ZmZlcnMgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0b3BSZXdyaXRlQnVmZmVyQW5kR2V0KCk7XG4gICAgNzhcdFxuICAgIDc5XHQgICAgICAgICAgICAgICAgLy8g5bCG6YeN5YaZ5pyf6Ze055qE5ZG95Luk6L+95Yqg5Yiw5pawQU9G5paH5Lu2XG4gICAgODBcdCAgICAgICAgICAgICAgICBhcHBlbmRSZXdyaXRlQnVmZmVyVG9UZW1wRmlsZShidWZmZXJzKTtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgICAgICAgICAvLyDljp/lrZDmgKflnLDmm7/mjaLmlofku7ZcbiAgICA4M1x0ICAgICAgICAgICAgICAgIGF0b21pY1JlcGxhY2VGaWxlKHRlbXBGaWxlLCBuZXcgRmlsZShhb2ZGaWxlbmFtZSkpO1xuICAgIDg0XHQgICAgICAgICAgICB9ZWxzZXtcbiAgICA4NVx0ICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIumHjeWGmeWksei0pVwiKTtcbiAgICA4Nlx0ICAgICAgICAgICAgICAgIHRlbXBGaWxlLmRlbGV0ZSgpO1xuICAgIDg3XHRcbiAgICA4OFx0ICAgICAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuZGlzY2FyZFJld3JpdGVCdWZmZXIoKTtcbiAgICA4OVx0ICAgICAgICAgICAgfVxuICAgIDkwXHQgICAgICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICA5MVx0ICAgICAgICB9Y2F0Y2goRXhjZXB0aW9uIGUpe1xuICAgIDkyXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBkdXJpbmcgQU9GUmV3cml0ZXJcIiwgZSk7XG4gICAgOTNcdCAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuZGlzY2FyZFJld3JpdGVCdWZmZXIoKTtcbiAgICA5NFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIDk1XHQgICAgICAgIH1maW5hbGx5IHtcbiAgICA5Nlx0ICAgICAgICAgICAgaXNSZXdyaXRpbmcuc2V0KGZhbHNlKTtcbiAgICA5N1x0ICAgICAgICB9XG4gICAgOThcdCAgICB9XG4gICAgOTlcdFxuICAgMTAwXHQgICAgLyoqXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMjBcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjI5YWVjMTIzLWM3ZjktNDUxMy05ODIzLTMxOWZkNmEyNWQxOTt0b29sdV92cnR4XzAxMldQUDJMejZSc2gxY2pRUkRLV0E0WiI6eyJyZXF1ZXN0SWQiOiIyOWFlYzEyMy1jN2Y5LTQ1MTMtOTgyMy0zMTlmZDZhMjVkMTkiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxMldQUDJMejZSc2gxY2pRUkRLV0E0WiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Jld3JpdGVyL0FPRlJld3JpdGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDQ5XHQgICAgcHVibGljIGJvb2xlYW4gY2FuUmV3cml0ZSgpe1xuICAgIDUwXHQgICAgICAgIHJldHVybiAhaXNSZXdyaXRpbmcuZ2V0KCk7XG4gICAgNTFcdCAgICB9XG4gICAgNTJcdFxuICAgIDUzXHQgICAgLyoqXG4gICAgNTRcdCAgICAgKiDmiafooYxBT0bph43lhpnmk43kvZxcbiAgICA1NVx0ICAgICAqIEByZXR1cm4g6YeN5YaZ5piv5ZCm5oiQ5YqfXG4gICAgNTZcdCAgICAgKi9cbiAgICA1N1x0ICAgIHB1YmxpYyBib29sZWFuIHJld3JpdGUoKSB7XG4gICAgNThcdCAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey57uP5Zyo6YeN5YaZ5LitXG4gICAgNTlcdCAgICAgICAgaWYgKCFpc1Jld3JpdGluZy5jb21wYXJlQW5kU2V0KGZhbHNlLCB0cnVlKSkge1xuICAgIDYwXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnlpLHotKXvvJrlt7LmnInph43lhpnku7vliqHlnKjov5vooYzkuK1cIik7XG4gICAgNjFcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA2Mlx0ICAgICAgICB9XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgIHRyeSB7XG4gICAgNjVcdCAgICAgICAgICAgIC8vIOmAmuefpUFPRuWkhOeQhuWZqOW8gOWni+aUtumbhumHjeWGmeacn+mXtOeahOWRveS7pFxuICAgIDY2XHQgICAgICAgICAgICByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0QW9mSGFuZGxlcigpLnN0YXJ0UmV3cml0ZUJ1ZmZlcigpO1xuICAgIDY3XHRcbiAgICA2OFx0ICAgICAgICAgICAgLy8g5YeG5aSH5Li05pe25paH5Lu2XG4gICAgNjlcdCAgICAgICAgICAgIEZpbGUgdGVtcEZpbGUgPSBuZXcgRmlsZSh0ZW1wRmlsZW5hbWUpO1xuICAgIDcwXHQgICAgICAgICAgICBpZiAodGVtcEZpbGUuZXhpc3RzKCkgJiYgIXRlbXBGaWxlLmRlbGV0ZSgpKSB7XG4gICAgNzFcdCAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIoOmZpOW3suWtmOWcqOeahOS4tOaXtuaWh+S7tjogXCIgKyB0ZW1wRmlsZW5hbWUpO1xuICAgIDcyXHQgICAgICAgICAgICB9XG4gICAgNzNcdFxuICAgIDc0XHQgICAgICAgICAgICAvLyDmiafooYzlrp7pmYXnmoTph43lhpnmk43kvZxcbiAgICA3NVx0ICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCLlvIDlp4vmiafooYxBT0bph43lhplcIik7XG4gICAgNzZcdCAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGRvV3JpdGUoKTtcbiAgICA3N1x0XG4gICAgNzhcdCAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgNzlcdCAgICAgICAgICAgICAgICAvLyDojrflj5bph43lhpnmnJ/pl7TmlLbpm4bnmoTlkb3ku6RcbiAgICA4MFx0ICAgICAgICAgICAgICAgIExpc3Q8Qnl0ZUJ1ZmZlcj4gYnVmZmVycyA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuc3RvcFJld3JpdGVCdWZmZXJBbmRHZXQoKTtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgICAgICAgICAvLyDlsIbph43lhpnmnJ/pl7TnmoTlkb3ku6Tov73liqDliLDmlrBBT0bmlofku7ZcbiAgICA4M1x0ICAgICAgICAgICAgICAgIGFwcGVuZFJld3JpdGVCdWZmZXJUb1RlbXBGaWxlKGJ1ZmZlcnMpO1xuICAgIDg0XHRcbiAgICA4NVx0ICAgICAgICAgICAgICAgIC8vIOWOn+WtkOaAp+WcsOabv+aNouaWh+S7tlxuICAgIDg2XHQgICAgICAgICAgICAgICAgYXRvbWljUmVwbGFjZUZpbGUodGVtcEZpbGUsIG5ldyBGaWxlKGFvZkZpbGVuYW1lKSk7XG4gICAgODdcdCAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIkFPRumHjeWGmeaIkOWKn+WujOaIkFwiKTtcbiAgICA4OFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgICA4OVx0ICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFPRumHjeWGmeWksei0pe+8muWGmeWFpei/h+eoi+WHuumUmVwiKTtcbiAgICA5MFx0ICAgICAgICAgICAgICAgIGlmICh0ZW1wRmlsZS5leGlzdHMoKSAmJiAhdGVtcEZpbGUuZGVsZXRlKCkpIHtcbiAgICA5MVx0ICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOazleWIoOmZpOS4tOaXtuaWh+S7tjogXCIgKyB0ZW1wRmlsZW5hbWUpO1xuICAgIDkyXHQgICAgICAgICAgICAgICAgfVxuICAgIDkzXHRcbiAgICA5NFx0ICAgICAgICAgICAgICAgIC8vIOS4ouW8g+aUtumbhueahOWRveS7pFxuICAgIDk1XHQgICAgICAgICAgICAgICAgcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEFvZkhhbmRsZXIoKS5kaXNjYXJkUmV3cml0ZUJ1ZmZlcigpO1xuICAgIDk2XHQgICAgICAgICAgICB9XG4gICAgOTdcdFxuICAgIDk4XHQgICAgICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICA5OVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTAwXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnov4fnqIvkuK3lj5HnlJ/lvILluLhcIiwgZSk7XG4gICAxMDFcdCAgICAgICAgICAgIHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRBb2ZIYW5kbGVyKCkuZGlzY2FyZFJld3JpdGVCdWZmZXIoKTtcbiAgIDEwMlx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTAzXHQgICAgICAgIH0gZmluYWxseSB7XG4gICAxMDRcdCAgICAgICAgICAgIC8vIOaXoOiuuuaIkOWKn+S4juWQpu+8jOmDvemHjee9rumHjeWGmeeKtuaAgVxuICAgMTA1XHQgICAgICAgICAgICBpc1Jld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgMTA2XHQgICAgICAgIH1cbiAgIDEwN1x0ICAgIH1cbiAgIDEwOFx0XG4gICAxMDlcdCAgICAvKipcbiAgIDExMFx0ICAgICAqIOWOn+WtkOaAp+WcsOabv+aNokFPRuaWh+S7tlxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3N2ExODE3Ny04Yzk4LTQ0N2ItOGViYi03MjM1MTU5NTU3ODQ7dG9vbHVfdnJ0eF8wMUZMeUFaZXN1dkZxZm1paGhZNHJTeGUiOnsicmVxdWVzdElkIjoiNzdhMTgxNzctOGM5OC00NDdiLThlYmItNzIzNTE1OTU1Nzg0IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUZMeUFaZXN1dkZxZm1paGhZNHJTeGUiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmE6XG4gICAxMjBcdCAgICB9XG4gICAxMjFcdFxuICAgMTIyXHQgICAgcHVibGljIENvbXBsZXRhYmxlRnV0dXJlPEJvb2xlYW4+IHN0YXJ0UmV3cml0ZSgpIHtcbiAgIDEyM1x0ICAgICAgICBpZiAocmV3cml0aW5nLmdldCgpKSB7XG4gICAxMjRcdCAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5bey5pyJ6YeN5YaZ5Lu75Yqh5Zyo6L+b6KGM5Lit77yM5b+955Wl5q2k5qyh6K+35rGCXCIpO1xuICAgMTI1XHQgICAgICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgMTI2XHQgICAgICAgICAgICBmdXR1cmUuY29tcGxldGUoZmFsc2UpO1xuICAgMTI3XHQgICAgICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgMTI4XHQgICAgICAgIH1cbiAgIDEyOVx0ICAgICAgICBpZiAoIXJld3JpdGVyLmNhblJld3JpdGUoKSkge1xuICAgMTMwXHQgICAgICAgICAgICBsb2dnZXIud2FybihcIumHjeWGmeaWh+S7tuWksei0pe+8jOivt+ajgOafpemHjeWGmeaWh+S7tuaYr+WQpuato+WcqOiiq+S9v+eUqFwiKTtcbiAgIDEzMVx0ICAgICAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Qm9vbGVhbj4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcbiAgIDEzMlx0ICAgICAgICAgICAgZnV0dXJlLmNvbXBsZXRlKGZhbHNlKTtcbiAgIDEzM1x0ICAgICAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgIDEzNFx0ICAgICAgICB9XG4gICAxMzVcdFxuICAgMTM2XHQgICAgICAgIGlmIChyZXdyaXRpbmcuY29tcGFyZUFuZFNldChmYWxzZSwgdHJ1ZSkpIHtcbiAgIDEzN1x0ICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XG4gICAxMzhcdCAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlLnJ1bkFzeW5jKCgpIC0+IHtcbiAgIDEzOVx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM6YeN5YaZ6YC76L6R5YmN77yM56Gu5L+d5omA5pyJ5pWw5o2u6YO95bey5Yi355uYXG4gICAxNDFcdCAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc29yLmZsdXNoKCk7XG4gICAxNDJcdFxuICAgMTQzXHQgICAgICAgICAgICAgICAgICAgIC8vIOaJp+ihjOmHjeWGmVxuICAgMTQ0XHQgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHJld3JpdGVyLnJld3JpdGUoKTtcbiAgIDE0NVx0XG4gICAxNDZcdCAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDE0N1x0ICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bph43lhpnmiJDlip/lrozmiJBcIik7XG4gICAxNDhcdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDE0OVx0ICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJBT0bph43lhpnlpLHotKVcIik7XG4gICAxNTBcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMTUxXHRcbiAgIDE1Mlx0ICAgICAgICAgICAgICAgICAgICByZXdyaXRlRnV0dXJlLmNvbXBsZXRlKHN1Y2Nlc3MpO1xuICAgMTUzXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDE1NFx0ICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0bph43lhpnov4fnqIvkuK3lh7rplJlcIiwgZSk7XG4gICAxNTVcdCAgICAgICAgICAgICAgICAgICAgcmV3cml0ZUZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZSk7XG4gICAxNTZcdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgMTU3XHQgICAgICAgICAgICAgICAgICAgIHJld3JpdGluZy5zZXQoZmFsc2UpO1xuICAgMTU4XHQgICAgICAgICAgICAgICAgfVxuICAgMTU5XHQgICAgICAgICAgICB9KTtcbiAgIDE2MFx0ICAgICAgICB9XG4gICAxNjFcdCAgICAgICAgcmV0dXJuIHJld3JpdGVGdXR1cmU7XG4gICAxNjJcdCAgICAgICAgfVxuICAgMTYzXHRcbiAgIDE2NFx0XG4gICAxNjVcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTkwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIzMjk1Nzg2OC05M2E0LTQyYTAtYjMyOS1jNTRlZmI0MjcxODc7dG9vbHVfdnJ0eF8wMTR0UnVNSm9kdmtFUktTdk5XdVdxa0giOnsicmVxdWVzdElkIjoiMzI5NTc4NjgtOTNhNC00MmEwLWIzMjktYzU0ZWZiNDI3MTg3IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMTR0UnVNSm9kdmtFUktTdk5XdVdxa0giLCJwaGFzZSI6N30sIjU2OTMzNmI2LTQ5NDYtNDUxZC1hM2JiLTFlZGRkZDk5MWJjMTt0b29sdV92cnR4XzAxU3ZSeEZ0ekVUWUFYNnYxNE1OVzJSYSI6eyJyZXF1ZXN0SWQiOiI1NjkzMzZiNi00OTQ2LTQ1MWQtYTNiYi0xZWRkZGQ5OTFiYzEiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxU3ZSeEZ0ekVUWUFYNnYxNE1OVzJSYSIsInBoYXNlIjo4LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEudXRpbC5FbnVtU2V0O1xuaW1wb3J0IGphdmEudXRpbC5TZXQ7XG5cbkBDaGFubmVsSGFuZGxlci5TaGFyYWJsZVxucHVibGljIGNsYXNzIE15Q29tbWFuZEhhbmRsZXIgZXh0ZW5kcyBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI8UmVzcD4ge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15Q29tbWFuZEhhbmRsZXIuY2xhc3MpO1xuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcjtcblxuICAgIC8vIOS9v+eUqEVudW1TZXTmj5Dpq5jmn6Xmib7mlYjnjodcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTZXQ8Q29tbWFuZFR5cGU+IFdSSVRFX0NPTU1BTkRTID0gRW51bVNldC5vZihcbiAgICAgICAgICAgIENvbW1hbmRUeXBlLlNFVCwgQ29tbWFuZFR5cGUuREVMLCBDb21tYW5kVHlwZS5JTkNSLCBDb21tYW5kVHlwZS5NU0VULFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuRVhQSVJFLCBDb21tYW5kVHlwZS5TQURELCBDb21tYW5kVHlwZS5TUkVNLCBDb21tYW5kVHlwZS5TUE9QLFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuSFNFVCwgQ29tbWFuZFR5cGUuSE1FU1QsIENvbW1hbmRUeXBlLkhERUwsXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5MUFVTSCwgQ29tbWFuZFR5cGUuUlBVU0gsIENvbW1hbmRUeXBlLkxQT1AsIENvbW1hbmRUeXBlLlJQT1AsIENvbW1hbmRUeXBlLkxSRU0sXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5aQURELCBDb21tYW5kVHlwZS5aUkVNLENvbW1hbmRUeXBlLlNFTEVDVFxuICAgICk7XG5cbiAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlcihSZWRpc0NvcmUgcmVkaXNDb3JlLCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXIsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcikge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICAgICAgdGhpcy5hb2ZIYW5kbGVyID0gYW9mSGFuZGxlcjtcbiAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gcmRiSGFuZGxlcjtcblxuXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgICAgIGlmIChtc2cgaW5zdGFuY2VvZiBSZXNwQXJyYXkpIHtcbiAgICAgICAgICAgIFJlc3BBcnJheSBhcnJheSA9IChSZXNwQXJyYXkpIG1zZztcbiAgICAgICAgICAgIFJlc3AgcmVzcG9uc2UgPSBwcm9jZXNzQ29tbWFuZChhcnJheSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biByZXF1ZXN0IHR5cGVcIikpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIFJlc3AgcHJvY2Vzc0NvbW1hbmQoUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICBpZiAoY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIGVtcHR5IGNvbW1hbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVzcFtdIGFycmF5ID0gY29tbWFuZEFycmF5LmdldEFycmF5KCk7XG4gICAgICAgICAgICBTdHJpbmcgY29tbWFuZE5hbWUgPSAoKEJ1bGtTdHJpbmcpIGFycmF5WzBdKS5nZXRDb250ZW50KCkudG9VdGY4U3RyaW5nKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIENvbW1hbmRUeXBlIGNvbW1hbmRUeXBlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbW1hbmRUeXBlID0gQ29tbWFuZFR5cGUudmFsdWVPZihjb21tYW5kTmFtZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gY29tbWFuZCAnXCIgKyBjb21tYW5kTmFtZSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNob3VsZEhhbmRsZUluQ2x1c3Rlcihjb21tYW5kVHlwZSwgY29tbWFuZEFycmF5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDbHVzdGVyQ29tbWFuZChjb21tYW5kVHlwZSwgY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQ29tbWFuZCBjb21tYW5kID0gY29tbWFuZFR5cGUuZ2V0U3VwcGxpZXIoKS5hcHBseShyZWRpc0NvcmUpO1xuICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGFycmF5KTtcblxuICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuXG4gICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBhcnJheS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmRiSGFuZGxlci5ub3RpZnlEYXRhQ2hhbmdlZChyZWRpc0NvcmUuZ2V0Q3VycmVudERCKCkuZ2V0SWQoKSwgKChCdWxrU3RyaW5nKSBhcnJheVsxXSkuZ2V0Q29udGVudCgpKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgIGlmIChjdXJyZW50Tm9kZUlkLmVxdWFscyh0YXJnZXROb2RlSWQpKSB7XG4gICAgICAgICAgICBDb21tYW5kIGNvbW1hbmQgPSBjb21tYW5kVHlwZS5nZXRTdXBwbGllcigpLmFwcGx5KHJlZGlzQ29yZSk7XG4gICAgICAgICAgICBjb21tYW5kLnNldENvbnRleHQoY29tbWFuZEFycmF5LmdldEFycmF5KCkpO1xuICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuXG4gICAgICAgICAgICAvLyDnoa7kv53mnKzlnLDmiafooYzml7bkuZ/op6blj5FSREJcbiAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZGJIYW5kbGVyLm5vdGlmeURhdGFDaGFuZ2VkKHJlZGlzQ29yZS5nZXRDdXJyZW50REIoKS5nZXRJZCgpLCBrZXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBmb3J3YXJkVG9UYXJnZXROb2RlKHRhcmdldE5vZGVJZCwgY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIFJlc3AgZm9yd2FyZFRvVGFyZ2V0Tm9kZShTdHJpbmcgdGFyZ2V0Tm9kZUlkLCBSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyDojrflj5bnm67moIfoioLngrnnmoTmnI3liqHlrp7kvotcbiAgICAgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIHRhcmdldFNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUodGFyZ2V0Tm9kZUlkKTtcblxuICAgICAgICAgICAgaWYgKHRhcmdldFNlcnZpY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIOi9rOWPkeWRveS7pOWIsOebruagh+iKgueCuVxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRTZXJ2aWNlLmV4ZWN1dGVDb21tYW5kKGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHRhcmdldCBub2RlIG5vdCBhdmFpbGFibGU6IFwiICsgdGFyZ2V0Tm9kZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZvcndhcmRpbmcgY29tbWFuZCB0byBub2RlIFwiICsgdGFyZ2V0Tm9kZUlkLCBlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIGZvcndhcmRpbmcgZmFpbGVkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXCIsIGNhdXNlKTtcbiAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiBcIiArIGNhdXNlLmdldE1lc3NhZ2UoKSkpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY2hhbm5lbC9EZWZhdWx0Q2hhbm5lbFNlbGVjdFN0cmF0ZWd5LmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNoYW5uZWw7XG5cblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuZXBvbGwuRXBvbGw7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5rcXVldWUuS1F1ZXVlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jaGFubmVsLm9wdGlvbnMuRXBvbGxDaGFubmVsT3B0aW9uO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jaGFubmVsLm9wdGlvbnMuS3F1ZXVlQ2hhbm5lbE9wdGlvbjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5vcHRpb25zLlNlbGVjdENoYW5uZWxPcHRpb247XG5cbnB1YmxpYyBjbGFzcyBEZWZhdWx0Q2hhbm5lbFNlbGVjdFN0cmF0ZWd5IGltcGxlbWVudHMgQ2hhbm5lbFNlbGVjdFN0cmF0ZWd5e1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMb2NhbENoYW5uZWxPcHRpb24gc2VsZWN0KCkge1xuICAgICAgICBpZihLUXVldWUuaXNBdmFpbGFibGUoKSl7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEtxdWV1ZUNoYW5uZWxPcHRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZihFcG9sbC5pc0F2YWlsYWJsZSgpKXtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXBvbGxDaGFubmVsT3B0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTZWxlY3RDaGFubmVsT3B0aW9uKCk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9zZXJ2ZXIvTXlSZWRpc1NlcnZpY2UuamF2YVxuLi4uXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuRGVmYXVsdENoYW5uZWxTZWxlY3RTdHJhdGVneTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5Mb2NhbENoYW5uZWxPcHRpb247XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDtcbi4uLlxuXG4gICAgICAgICAgICAvLyDliJvlu7rnu5/kuIDnmoTlkb3ku6TlpITnkIblmahcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEhhbmRsZXIgPSBuZXcgTXlDb21tYW5kSGFuZGxlcihyZWRpc0NvcmUsIGFvZkhhbmRsZXIsIHJkYkhhbmRsZXIpO1xuXG4gICAgICAgICAgICBTZXJ2ZXJCb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IFNlcnZlckJvb3RzdHJhcCgpO1xuICAgICAgICAgICAgYm9vdHN0cmFwLmdyb3VwKGJvc3NHcm91cCwgd29ya2VyR3JvdXApXG4gICAgICAgICAgICAgICAgICAgIC5jaGFubmVsKGNoYW5uZWxPcHRpb24uZ2V0Q2hhbm5lbENsYXNzKCkpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLlNPX0tFRVBBTElWRSwgdHJ1ZSkuXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uKENoYW5uZWxPcHRpb24uVENQX05PREVMQVksIHRydWUpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLkFMTE9DQVRPUiwgUG9vbGVkQnl0ZUJ1ZkFsbG9jYXRvci5ERUZBVUxUKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGRIYW5kbGVyKG5ldyBDaGFubmVsSW5pdGlhbGl6ZXI8U29ja2V0Q2hhbm5lbD4oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RlY3RlZCB2b2lkIGluaXRDaGFubmVsKFNvY2tldENoYW5uZWwgY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFubmVsUGlwZWxpbmUgcGlwZWxpbmUgPSBjaC5waXBlbGluZSgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeURlY29kZXIoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeVJlc3BvbnNlRW5jb2RlcigpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEVOQUJMRV9DT01QUkVTU0lPTil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IENvbXByZXNzaW9uQ29lZEMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QoY29tbWFuZEV4ZWN1dG9yLCBjb21tYW5kSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyQ29udGV4dDtcbmltcG9ydCBpby5uZXR0eS5oYW5kbGVyLmNvZGVjLkJ5dGVUb01lc3NhZ2VEZWNvZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouKjtcblxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5wdWJsaWMgY2xhc3MgTXlEZWNvZGVyIGV4dGVuZHMgQnl0ZVRvTWVzc2FnZURlY29kZXIge1xuICAgIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15RGVjb2Rlci5jbGFzcyk7XG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi5byA5aeL6Kej56CBXCIpO1xuICAgICAgICAgICAgICAgIC8vIOagh+iusOW9k+WJjeivu+WPluS9jee9rlxuICAgICAgICAgICAgICAgIGluLm1hcmtSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIFJlc3AgZGVjb2RlZCA9IFJlc3AuZGVjb2RlKGluKTtcbiAgICAgICAgICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuino+eggeaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LmFkZChkZWNvZGVkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLop6PnoIHlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5oC75L2T5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvcmRiL2NvcmUvUkRCSGFuZGxlci5qYXZhXG4uLi5cblxuICAgIHByaXZhdGUgdm9pZCBjaGVja1NhdmVDb25kaXRpb25zKCkge1xuICAgICAgICBpZiAoaXNTYXZpbmcpIHJldHVybjtcblxuICAgICAgICBsb25nIG5vdyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIC8gMTAwMDtcbiAgICAgICAgaWYgKHNhdmVQb2xpY3kuc2hvdWxkRnVsbFNhdmUobm93KSkge1xuICAgICAgICAgICAgYmdzYXZlKHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZVRyYWNrZXIuaGFzTW9kaWZpY2F0aW9ucygpKSB7XG4gICAgICAgICAgICBiZ3NhdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgbm90aWZ5RGF0YUNoYW5nZWQoaW50IGRiSW5kZXgsIEJ5dGVzV3JhcHBlciBrZXkpIHtcbiAgICAgICAgc2F2ZVBvbGljeS5yZWNvcmRDaGFuZ2UoKTtcbiAgICAgICAgY2hhbmdlVHJhY2tlci50cmFja0NoYW5nZShkYkluZGV4LCBrZXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBzYXZlKCkge1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxCb29sZWFuPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuICAgICAgICBpZiAoIWJnc2F2ZSh0cnVlKSkge1xuICAgICAgICAgICAgZnV0dXJlLmNvbXBsZXRlRXhjZXB0aW9uYWxseShuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwi5bey5pyJ5L+d5a2Y5Lu75Yqh6L+Q6KGMXCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4ZWN1dG9yTWFuYWdlci5nZXRTYXZlRXhlY3V0b3IoKS5leGVjdXRlKCgpIC0+IHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaXNTYXZpbmcpIFRocmVhZC55aWVsZCgpO1xuICAgICAgICAgICAgICAgIGZ1dHVyZS5jb21wbGV0ZSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdXR1cmU7XG4gICAgfVxuLi4uXG5cbiAgICBwdWJsaWMgdm9pZCBsb2FkKCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCLlvIDlp4vliqDovb1SRELmlofku7ZcIik7XG4gICAgICAgIGxvYWRlci5jbGVhckFsbERhdGFiYXNlcygpO1xuXG4gICAgICAgIGlmIChmaWxlTWFuYWdlci5mdWxsUmRiRXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkUkRCKGZpbGVNYW5hZ2VyLmdldEZ1bGxSZGJGaWxlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbGVNYW5hZ2VyLmluY3JlbWVudGFsUmRiRXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkUkRCKGZpbGVNYW5hZ2VyLmdldEluY3JlbWVudGFsUmRiRmlsZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ2dlci5pbmZvKFwiUkRC5paH5Lu25Yqg6L295oiQ5YqfXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNodXRkb3duKCkge1xuICAgICAgICBleGVjdXRvck1hbmFnZXIuc2h1dGRvd24oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpc1NhdmluZygpIHtcbiAgICAgICAgcmV0dXJuIGlzU2F2aW5nO1xuICAgIH1cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9sb2FkZXIvQU9GTG9hZGVyLmphdmFcbi4uLlxuXG4gICAgICAgIHRyeSAoRmlsZUNoYW5uZWwgY2hhbm5lbCA9IG5ldyBSYW5kb21BY2Nlc3NGaWxlKGZpbGVuYW1lLCBcInJcIikuZ2V0Q2hhbm5lbCgpKSB7XG4gICAgICAgICAgICAvLyAxLiDliJvlu7rnvJPlhrLljLpcbiAgICAgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZSg4MTkyKTsgIC8vIOS4gOe6p+e8k+WtmFxuICAgICAgICAgICAgQnl0ZUJ1ZiBieXRlQnVmID0gVW5wb29sZWQuYnVmZmVyKCk7ICAvLyDkuoznuqfnvJPlrZhcblxuICAgICAgICAgICAgTG9hZFN0YXRzIHN0YXRzID0gbmV3IExvYWRTdGF0cygpO1xuICAgICAgICAgICAgaW50IGN1cnJlbnREYkluZGV4ID0gMDtcblxuICAgICAgICAgICAgLy8gMi4g6K+75Y+W5paH5Lu25YaF5a65XG4gICAgICAgICAgICB3aGlsZSAoY2hhbm5lbC5yZWFkKGJ1ZmZlcikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIuZmxpcCgpOyAgLy8g5YiH5o2i5Li66K+75qih5byPXG4gICAgICAgICAgICAgICAgYnl0ZUJ1Zi53cml0ZUJ5dGVzKGJ1ZmZlcik7ICAvLyDlhpnlhaXliLDkuoznuqfnvJPlrZjkuK1cbiAgICAgICAgICAgICAgICBidWZmZXIuY2xlYXIoKTsgIC8vIOa4heepuuS4gOe6p+e8k+WtmFxuXG4gICAgICAgICAgICAgICAgLy8gMy4g5aSE55CG6K+75Y+W5Yiw55qE5ZG95LukXG4gICAgICAgICAgICAgICAgY3VycmVudERiSW5kZXggPSBwcm9jZXNzQ29tbWFuZHMocmVkaXNDb3JlLCBieXRlQnVmLCBzdGF0cywgY3VycmVudERiSW5kZXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcIkFPRuWKoOi9veWujOaIkDog5oiQ5Yqf5Yqg6L29IFwiICsgc3RhdHMuY29tbWFuZHNMb2FkZWQgKyBcIiDmnaHlkb3ku6QsIOWksei0pSBcIiArIHN0YXRzLmNvbW1hbmRzRmFpbGVkICsgXCIg5p2hXCIpO1xuICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLor7vlj5ZBT0bmlofku7bml7blh7rplJlcIiwgZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jbHVzdGVyL0NsdXN0ZXJDbGllbnQuamF2YVxuLi4uXG5cbiAgICBwdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Vm9pZD4gY29ubmVjdCgpIHtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Vm9pZD4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcblxuICAgICAgICBncm91cCA9IG5ldyBOaW9FdmVudExvb3BHcm91cCgpO1xuICAgICAgICBCb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IEJvb3RzdHJhcCgpO1xuICAgICAgICBib290c3RyYXAuZ3JvdXAoZ3JvdXApXG4gICAgICAgICAgICAgICAgLmNoYW5uZWwoTmlvU29ja2V0Q2hhbm5lbC5jbGFzcylcbiAgICAgICAgICAgICAgICAub3B0aW9uKENoYW5uZWxPcHRpb24uQ09OTkVDVF9USU1FT1VUX01JTExJUywgNTAwMClcbiAgICAgICAgICAgICAgICAuaGFuZGxlcihuZXcgQ2hhbm5lbEluaXRpYWxpemVyPFNvY2tldENoYW5uZWw+KCkge1xuICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaW5pdENoYW5uZWwoU29ja2V0Q2hhbm5lbCBjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbm5lbFBpcGVsaW5lIHBpcGVsaW5lID0gY2gucGlwZWxpbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15RGVjb2RlcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15UmVzcG9uc2VFbmNvZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgQ2x1c3RlckNsaWVudEhhbmRsZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25uZWN0V2l0aFJldHJ5KGJvb3RzdHJhcCwgaG9zdCwgcG9ydCwgZnV0dXJlLCAzLCAxMDAwKTtcbiAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgICB9XG4uLi5cblxuICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIENsdXN0ZXJDbGllbnRIYW5kbGVyIGV4dGVuZHMgU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyPFJlc3A+IHtcbiAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIGNoYW5uZWxSZWFkMChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIG1zZykge1xuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVjZWl2ZWQgY2x1c3RlciBtZXNzYWdlOiBcIiArIG1zZyk7XG4gICAgICAgIH1cblxuICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgcHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFRocm93YWJsZSBjYXVzZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRXhjZXB0aW9uIGluIENsdXN0ZXJDbGllbnRIYW5kbGVyOiBcIiArIGNhdXNlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBjdHguY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvcmRiL2NvcmUvUkRCTG9hZGVyLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgUkRCTG9hZGVyIGltcGxlbWVudHMgTG9hZGVyIHtcbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXIgbG9nZ2VyID0gb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXIuZ2V0TG9nZ2VyKFJEQkxvYWRlci5jbGFzcyk7XG5cbiAgICBwdWJsaWMgUkRCTG9hZGVyKFJlZGlzQ29yZSByZWRpc0NvcmUpIHtcbiAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSByZWRpc0NvcmU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgbG9hZFJEQihGaWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIGlmICghZmlsZS5leGlzdHMoKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJSRELmlofku7bkuI3lrZjlnKg6IFwiICsgZmlsZS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IChEYXRhSW5wdXRTdHJlYW0gZGlzID0gbmV3IERhdGFJbnB1dFN0cmVhbShuZXcgRmlsZUlucHV0U3RyZWFtKGZpbGUpKSkge1xuICAgICAgICAgICAgaWYgKCFSREJVdGlsLnZhbGlkYXRlUkRCSGVhZGVyKGRpcykpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIuaXoOaViOeahFJEQuaWh+S7tuagvOW8jzogXCIgKyBmaWxlLmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9hZERhdGEoZGlzKTtcbiAgICAgICAgfSBjYXRjaCAoRU9GRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlJEQuaWh+S7tuivu+WPluaXtumBh+WIsOaEj+WklueahOaWh+S7tue7k+adn1wiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgICAgICAgICBzd2l0Y2ggKChieXRlKXR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFJEQkNvbnN0YW50cy5SREJfT1BDT0RFX1NFTEVDVERCOlxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGIgPSAoaW50KSBSREJVdGlsLnJlYWRMZW5ndGgoZGlzKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwi5YiH5o2i5Yiw5pWw5o2u5bqTOiBcIiArIGN1cnJlbnREYik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgUkRCQ29uc3RhbnRzLlNUUklOR19UWVBFOlxuICAgICAgICAgICAgICAgICAgICBsb2FkU3RyaW5nKGRpcywgY3VycmVudERiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBSREJDb25zdGFudHMuTElTVF9UWVBFOlxuICAgICAgICAgICAgICAgICAgICBsb2FkTGlzdChkaXMsIGN1cnJlbnREYik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgUkRCQ29uc3RhbnRzLlNFVF9UWVBFOlxuICAgICAgICAgICAgICAgICAgICBsb2FkU2V0KGRpcywgY3VycmVudERiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBSREJDb25zdGFudHMuSEFTSF9UWVBFOlxuICAgICAgICAgICAgICAgICAgICBsb2FkSGFzaChkaXMsIGN1cnJlbnREYik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgUkRCQ29uc3RhbnRzLlpTRVRfVFlQRTpcbiAgICAgICAgICAgICAgICAgICAgbG9hZFpzZXQoZGlzLCBjdXJyZW50RGIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFJEQkNvbnN0YW50cy5SREJfT1BDT0RFX0VYUElSRVRJTUU6XG4gICAgICAgICAgICAgICAgY2FzZSBSREJDb25zdGFudHMuUkRCX09QQ09ERV9FWFBJUkVUSU1FX01TOlxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIuaaguS4jeaUr+aMgei/h+acn+aXtumXtO+8jOi3s+i/h1wiKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzLnJlYWRJbnQoKTsgLy8g6Lez6L+H6L+H5pyf5pe26Ze0XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5pyq55+l55qE5pWw5o2u57G75Z6LOiBcIiArIHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NoYW5uZWwvb3B0aW9ucy9FcG9sbENoYW5uZWxPcHRpb24uamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBFcG9sbENoYW5uZWxPcHRpb24gaW1wbGVtZW50cyBMb2NhbENoYW5uZWxPcHRpb24ge1xuICAgIHByaXZhdGUgZmluYWwgRXBvbGxFdmVudExvb3BHcm91cCBzaW5nbGVFdmVudExvb3A7XG5cbiAgICBwdWJsaWMgRXBvbGxDaGFubmVsT3B0aW9uKCkge1xuICAgICAgICB0aGlzLnNpbmdsZUV2ZW50TG9vcCA9IG5ldyBFcG9sbEV2ZW50TG9vcEdyb3VwKDEsIHIgLT4ge1xuICAgICAgICAgICAgVGhyZWFkIHQgPSBuZXcgVGhyZWFkKHIsIFwiUmVkaXMtRXZlbnRMb29wXCIpO1xuICAgICAgICAgICAgdC5zZXREYWVtb24oZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBFdmVudExvb3BHcm91cCBib3NzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaW5nbGVFdmVudExvb3A7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEV2ZW50TG9vcEdyb3VwIHNlbGVjdG9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2luZ2xlRXZlbnRMb29wOyAvLyDkvb/nlKjlkIzkuIDkuKrkuovku7blvqrnjq/nu4RcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ2xhc3MgZ2V0Q2hhbm5lbENsYXNzKCkge1xuICAgICAgICByZXR1cm4gRXBvbGxTZXJ2ZXJTb2NrZXRDaGFubmVsLmNsYXNzO1xuICAgIH1cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NoYW5uZWwvb3B0aW9ucy9LcXVldWVDaGFubmVsT3B0aW9uLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNoYW5uZWwub3B0aW9ucztcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuRXZlbnRMb29wR3JvdXA7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5rcXVldWUuS1F1ZXVlRXZlbnRMb29wR3JvdXA7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5rcXVldWUuS1F1ZXVlU2VydmVyU29ja2V0Q2hhbm5lbDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5Mb2NhbENoYW5uZWxPcHRpb247XG5cbnB1YmxpYyBjbGFzcyBLcXVldWVDaGFubmVsT3B0aW9uIGltcGxlbWVudHMgTG9jYWxDaGFubmVsT3B0aW9uIHtcbiAgICBwcml2YXRlIGZpbmFsIEtRdWV1ZUV2ZW50TG9vcEdyb3VwIHNpbmdsZUV2ZW50TG9vcDtcblxuICAgIHB1YmxpYyBLcXVldWVDaGFubmVsT3B0aW9uKCkge1xuICAgICAgICB0aGlzLnNpbmdsZUV2ZW50TG9vcCA9IG5ldyBLUXVldWVFdmVudExvb3BHcm91cCgxLCByIC0+IHtcbiAgICAgICAgICAgIFRocmVhZCB0ID0gbmV3IFRocmVhZChyLCBcIlJlZGlzLUV2ZW50TG9vcFwiKTtcbiAgICAgICAgICAgIHQuc2V0RGFlbW9uKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgYm9zcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2luZ2xlRXZlbnRMb29wO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBFdmVudExvb3BHcm91cCBzZWxlY3RvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbmdsZUV2ZW50TG9vcDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ2xhc3MgZ2V0Q2hhbm5lbENsYXNzKCkge1xuICAgICAgICByZXR1cm4gS1F1ZXVlU2VydmVyU29ja2V0Q2hhbm5lbC5jbGFzcztcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NoYW5uZWwvTG9jYWxDaGFubmVsT3B0aW9uLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNoYW5uZWw7XG5cbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWw7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5FdmVudExvb3BHcm91cDtcblxucHVibGljIGludGVyZmFjZSBMb2NhbENoYW5uZWxPcHRpb248IEMgZXh0ZW5kcyBDaGFubmVsPiAge1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4g6L+U5Zue6I635Y+WdGNw57q/56iLXG4gICAgICovXG4gICAgRXZlbnRMb29wR3JvdXAgYm9zcygpO1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4g6L+U5Zue5aSE55CGdGNw57q/56iLXG4gICAgICovXG4gICAgRXZlbnRMb29wR3JvdXAgc2VsZWN0b3JzKCk7XG4gICAgLyoqXG4gICAgICogQHJldHVybiDov5Tlm57nrqHpgZPnsbvlnotcbiAgICAgKi9cbiAgICBDbGFzczw/IGV4dGVuZHMgQz4gZ2V0Q2hhbm5lbENsYXNzKCk7XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJVdGlsLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgUkRCVXRpbCB7XG4gICAgcHVibGljIHN0YXRpYyB2b2lkIHdyaXRlU3RyaW5nKERhdGFPdXRwdXRTdHJlYW0gZG9zLCBieXRlW10gc3RyKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICB3cml0ZUxlbmd0aChkb3MsIHN0ci5sZW5ndGgpO1xuICAgICAgICBkb3Mud3JpdGUoc3RyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGJ5dGVbXSByZWFkU3RyaW5nKERhdGFJbnB1dFN0cmVhbSBkaXMpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIGxvbmcgbGVuZ3RoID0gcmVhZExlbmd0aChkaXMpO1xuICAgICAgICBpZiAobGVuZ3RoIDwgMCB8fCBsZW5ndGggPiBJbnRlZ2VyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKFwiSW52YWxpZCBzdHJpbmcgbGVuZ3RoOiBcIiArIGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZVtdIHN0ciA9IG5ldyBieXRlWyhpbnQpIGxlbmd0aF07XG4gICAgICAgIGRpcy5yZWFkRnVsbHkoc3RyKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgd3JpdGVMZW5ndGgoRGF0YU91dHB1dFN0cmVhbSBkb3MsIGxvbmcgbGVuZ3RoKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICBkb3Mud3JpdGVJbnQoKGludCkgbGVuZ3RoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGxvbmcgcmVhZExlbmd0aChEYXRhSW5wdXRTdHJlYW0gZGlzKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICByZXR1cm4gZGlzLnJlYWRJbnQoKSAmIDB4RkZGRkZGRkZMO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvQ29tcHJlc3Npb25Db2VkQy5qYXZhXG4uLi5cblxuICAgICAgICAgICAgZmxvYXQgY29tcHJlc3Npb25SYXRpbyA9IChmbG9hdCljb21wcmVzc2VkTGVuZ3RoIC8gb3JpZ2luYWxTaXplICogMTAwO1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oU3RyaW5nLmZvcm1hdChcIuaVsOaNruW3suWOi+e8qTog5Y6f5aeL5aSn5bCPPSVk5a2X6IqCLCDljovnvKnlkI49JWTlrZfoioIsIOWOi+e8qeeOhz0lLjJmJSVcIixcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxTaXplLCBjb21wcmVzc2VkTGVuZ3RoLCBjb21wcmVzc2lvblJhdGlvKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDmnKrljovnvKnnmoTmg4XlhrVcbiAgICAgICAgICAgIG91dC53cml0ZUJ5dGUoMCk7XG4gICAgICAgICAgICBvdXQud3JpdGVJbnQob3JpZ2luYWxTaXplKTtcbiAgICAgICAgICAgIG91dC53cml0ZUJ5dGVzKG1zZywgcmVhZGVySW5kZXgsIG9yaWdpbmFsU2l6ZSk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5pWw5o2u5pyq5Y6L57ypOiDlpKflsI89XCIgKyBvcmlnaW5hbFNpemUgKyBcIuWtl+iKgiAo5bCP5LqO6ZiI5YC8KVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmnInotrPlpJ/nmoTmlbDmja7mnaXor7vlj5bmoIforrBcbiAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGluLm1hcmtSZWFkZXJJbmRleCgpO1xuXG4gICAgICAgIC8vIOivu+WPluWOi+e8qeagh+iusFxuICAgICAgICBieXRlIGlzQ29tcHJlc3NlZCA9IGluLnJlYWRCeXRlKCk7XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NoYW5uZWwvb3B0aW9ucy9EZWZhdWx0Q2hhbm5lbE9wdGlvbi5qYXZhXG4uLi5cbiBcbiBwdWJsaWMgY2xhc3MgRGVmYXVsdENoYW5uZWxPcHRpb24gaW1wbGVtZW50cyBMb2NhbENoYW5uZWxPcHRpb24ge1xuIFxuICAgICBwcml2YXRlIGZpbmFsIERlZmF1bHRFdmVudExvb3BHcm91cCBib3NzO1xuICAgICBwcml2YXRlIGZpbmFsIERlZmF1bHRFdmVudExvb3BHcm91cCBzZWxlY3RvcnM7XG4gXG4gICAgIHB1YmxpYyBEZWZhdWx0Q2hhbm5lbE9wdGlvbigpXG4gICAgIHtcbiAgICAgICAgIHRoaXMuYm9zcyA9ICBuZXcgRGVmYXVsdEV2ZW50TG9vcEdyb3VwKDQsIG5ldyBUaHJlYWRGYWN0b3J5KCkge1xuICAgICAgICAgICAgIHByaXZhdGUgQXRvbWljSW50ZWdlciBpbmRleCA9IG5ldyBBdG9taWNJbnRlZ2VyKDApO1xuIFxuICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgIHB1YmxpYyBUaHJlYWQgbmV3VGhyZWFkKFJ1bm5hYmxlIHIpIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUaHJlYWQociwgXCJTZXJ2ZXJfYm9zc19cIiArIGluZGV4LmdldEFuZEluY3JlbWVudCgpKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICB9KTtcbiAgICAgICAgIHRoaXMuc2VsZWN0b3JzID0gbmV3IERlZmF1bHRFdmVudExvb3BHcm91cCg4LCBuZXcgVGhyZWFkRmFjdG9yeSgpIHtcbiAgICAgICAgICAgICBwcml2YXRlIEF0b21pY0ludGVnZXIgaW5kZXggPSBuZXcgQXRvbWljSW50ZWdlcigwKTtcbiBcbiAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICBwdWJsaWMgVGhyZWFkIG5ld1RocmVhZChSdW5uYWJsZSByKSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVGhyZWFkKHIsIFwiU2VydmVyX3NlbGVjdG9yX1wiICsgaW5kZXguZ2V0QW5kSW5jcmVtZW50KCkpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH0pO1xuICAgICB9XG4gICAgIEBPdmVycmlkZVxuICAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgYm9zcygpIHtcbiAgICAgICAgIHJldHVybiB0aGlzLmJvc3M7XG4gICAgIH1cbiBcbiAgICAgQE92ZXJyaWRlXG4gICAgIHB1YmxpYyBFdmVudExvb3BHcm91cCBzZWxlY3RvcnMoKSB7XG4gICAgICAgICByZXR1cm4gIHRoaXMuc2VsZWN0b3JzO1xuICAgICB9XG4gXG4gICAgIEBPdmVycmlkZVxuICAgICBwdWJsaWMgQ2xhc3MgZ2V0Q2hhbm5lbENsYXNzKCkge1xuICAgICAgICAgcmV0dXJuIExvY2FsU2VydmVyQ2hhbm5lbC5jbGFzcztcbiAgICAgfVxuIH0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9JbmZvLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvbW1hbmQuaW1wbDtcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5CdWxrU3RyaW5nO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2MuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIyZjQyZGRhMy05OGQ1LTRhZTYtOWVmMi04MzRmOWVhZDhhMTc7dG9vbHVfdnJ0eF8wMVRraWdoQ2YxRVV6a2kxOWpTblA1OXkiOnsicmVxdWVzdElkIjoiMmY0MmRkYTMtOThkNS00YWU2LTllZjItODM0ZjllYWQ4YTE3IiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMVRraWdoQ2YxRVV6a2kxOWpTblA1OXkiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YTpcbiAgICAgMVx0cGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlcjtcbiAgICAgNFx0aW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuICAgICA1XHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5TaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI7XG4gICAgIDZcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbiAgICAgN1x0aW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG4gICAgIDhcdGltcG9ydCBzaXRlLmhuZnkyNTguYW9mLkFPRkhhbmRsZXI7XG4gICAgIDlcdGltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5SZWRpc0NsdXN0ZXI7XG4gICAgMTBcdGltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuICAgIDExXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG4gICAgMTJcdGltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuICAgIDEzXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG4gICAgMTRcdGltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcbiAgICAxNVx0aW1wb3J0IHNpdGUuaG5meTI1OC5zZXJ2ZXIuTXlSZWRpc1NlcnZpY2U7XG4gICAgMTZcdFxuICAgIDE3XHRpbXBvcnQgamF2YS51dGlsLkVudW1TZXQ7XG4gICAgMThcdGltcG9ydCBqYXZhLnV0aWwuU2V0O1xuICAgIDE5XHRcbiAgICAyMFx0QENoYW5uZWxIYW5kbGVyLlNoYXJhYmxlXG4gICAgMjFcdHB1YmxpYyBjbGFzcyBNeUNvbW1hbmRIYW5kbGVyIGV4dGVuZHMgU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyPFJlc3A+IHtcbiAgICAyMlx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15Q29tbWFuZEhhbmRsZXIuY2xhc3MpO1xuICAgIDIzXHQgICAgcHJpdmF0ZSBmaW5hbCBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuICAgIDI0XHQgICAgcHJpdmF0ZSBmaW5hbCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXI7XG4gICAgMjVcdCAgICBwcml2YXRlIGZpbmFsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcjtcbiAgICAyNlx0XG4gICAgMjdcdCAgICAvLyDkvb/nlKhFbnVtU2V05o+Q6auY5p+l5om+5pWI546HXG4gICAgMjhcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTZXQ8Q29tbWFuZFR5cGU+IFdSSVRFX0NPTU1BTkRTID0gRW51bVNldC5vZihcbiAgICAyOVx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuU0VULCBDb21tYW5kVHlwZS5ERUwsIENvbW1hbmRUeXBlLklOQ1IsIENvbW1hbmRUeXBlLk1TRVQsXG4gICAgMzBcdCAgICAgICAgICAgIENvbW1hbmRUeXBlLkVYUElSRSwgQ29tbWFuZFR5cGUuU0FERCwgQ29tbWFuZFR5cGUuU1JFTSwgQ29tbWFuZFR5cGUuU1BPUCxcbiAgICAzMVx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuSFNFVCwgQ29tbWFuZFR5cGUuSE1FU1QsIENvbW1hbmRUeXBlLkhERUwsXG4gICAgMzJcdCAgICAgICAgICAgIENvbW1hbmRUeXBlLkxQVVNILCBDb21tYW5kVHlwZS5SUFVTSCwgQ29tbWFuZFR5cGUuTFBPUCwgQ29tbWFuZFR5cGUuUlBPUCwgQ29tbWFuZFR5cGUuTFJFTSxcbiAgICAzM1x0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuWkFERCwgQ29tbWFuZFR5cGUuWlJFTSxDb21tYW5kVHlwZS5TRUxFQ1RcbiAgICAzNFx0ICAgICk7XG4gICAgMzVcdFxuICAgIDM2XHQgICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSwgQU9GSGFuZGxlciBhb2ZIYW5kbGVyLCBSREJIYW5kbGVyIHJkYkhhbmRsZXIpIHtcbiAgICAzN1x0ICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICAzOFx0ICAgICAgICB0aGlzLmFvZkhhbmRsZXIgPSBhb2ZIYW5kbGVyO1xuICAgIDM5XHQgICAgICAgIHRoaXMucmRiSGFuZGxlciA9IHJkYkhhbmRsZXI7XG4gICAgNDBcdFxuICAgIDQxXHRcbiAgICA0Mlx0ICAgIH1cbiAgICA0M1x0XG4gICAgNDRcdCAgICBAT3ZlcnJpZGVcbiAgICA0NVx0ICAgIHByb3RlY3RlZCB2b2lkIGNoYW5uZWxSZWFkMChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIG1zZykge1xuICAgIDQ2XHQgICAgICAgIGlmIChtc2cgaW5zdGFuY2VvZiBSZXNwQXJyYXkpIHtcbiAgICA0N1x0ICAgICAgICAgICAgUmVzcEFycmF5IGFycmF5ID0gKFJlc3BBcnJheSkgbXNnO1xuICAgIDQ4XHQgICAgICAgICAgICBSZXNwIHJlc3BvbnNlID0gcHJvY2Vzc0NvbW1hbmQoYXJyYXkpO1xuICAgIDQ5XHQgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCkge1xuICAgIDUwXHQgICAgICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gocmVzcG9uc2UpO1xuICAgIDUxXHQgICAgICAgICAgICB9XG4gICAgNTJcdCAgICAgICAgfSBlbHNlIHtcbiAgICA1M1x0ICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiB1bmtub3duIHJlcXVlc3QgdHlwZVwiKSk7XG4gICAgNTRcdCAgICAgICAgfVxuICAgIDU1XHQgICAgfVxuICAgIDU2XHRcbiAgICA1N1x0ICAgIHB1YmxpYyBSZXNwIHByb2Nlc3NDb21tYW5kKFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICA1OFx0ICAgICAgICBpZiAoY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID09IDApIHtcbiAgICA1OVx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZW1wdHkgY29tbWFuZFwiKTtcbiAgICA2MFx0ICAgICAgICB9XG4gICAgNjFcdFxuICAgIDYyXHQgICAgICAgIHRyeSB7XG4gICAgNjNcdCAgICAgICAgICAgIFJlc3BbXSBhcnJheSA9IGNvbW1hbmRBcnJheS5nZXRBcnJheSgpO1xuICAgIDY0XHQgICAgICAgICAgICBTdHJpbmcgY29tbWFuZE5hbWUgPSAoKEJ1bGtTdHJpbmcpIGFycmF5WzBdKS5nZXRDb250ZW50KCkudG9VdGY4U3RyaW5nKCkudG9VcHBlckNhc2UoKTtcbiAgICA2NVx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUgY29tbWFuZFR5cGU7XG4gICAgNjZcdFxuICAgIDY3XHQgICAgICAgICAgICB0cnkge1xuICAgIDY4XHQgICAgICAgICAgICAgICAgY29tbWFuZFR5cGUgPSBDb21tYW5kVHlwZS52YWx1ZU9mKGNvbW1hbmROYW1lKTtcbiAgICA2OVx0ICAgICAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHtcbiAgICA3MFx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gY29tbWFuZCAnXCIgKyBjb21tYW5kTmFtZSArIFwiJ1wiKTtcbiAgICA3MVx0ICAgICAgICAgICAgfVxuICAgIDcyXHRcbiAgICA3M1x0ICAgICAgICAgICAgaWYgKHNob3VsZEhhbmRsZUluQ2x1c3Rlcihjb21tYW5kVHlwZSwgY29tbWFuZEFycmF5KSkge1xuICAgIDc0XHQgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNsdXN0ZXJDb21tYW5kKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpO1xuICAgIDc1XHQgICAgICAgICAgICB9XG4gICAgNzZcdFxuICAgIDc3XHQgICAgICAgICAgICBDb21tYW5kIGNvbW1hbmQgPSBjb21tYW5kVHlwZS5nZXRTdXBwbGllcigpLmFwcGx5KHJlZGlzQ29yZSk7XG4gICAgNzhcdCAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChhcnJheSk7XG4gICAgNzlcdFxuICAgIDgwXHQgICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG4gICAgODFcdFxuICAgIDgyXHQgICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBhcnJheS5sZW5ndGggPiAxKSB7XG4gICAgODNcdCAgICAgICAgICAgICAgICByZGJIYW5kbGVyLm5vdGlmeURhdGFDaGFuZ2VkKHJlZGlzQ29yZS5nZXRDdXJyZW50REIoKS5nZXRJZCgpLCAoKEJ1bGtTdHJpbmcpIGFycmF5WzFdKS5nZXRDb250ZW50KCkpO1xuICAgIDg0XHQgICAgICAgICAgICB9XG4gICAgODVcdFxuICAgIDg2XHQgICAgICAgICAgICAvLyDlpoLmnpzlkK/nlKjkuoZBT0bvvIzorrDlvZXlkb3ku6RcbiAgICA4N1x0ICAgICAgICAgICBpZiAoYW9mSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSl7XG4gICAgODhcdCAgICAgICAgICAgICAgICBhb2ZIYW5kbGVyLmFwcGVuZChjb21tYW5kQXJyYXkpO1xuICAgIDg5XHQgICAgICAgICAgICB9XG4gICAgOTBcdFxuICAgIDkxXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIDkyXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgOTNcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgY29tbWFuZFwiLCBlKTtcbiAgICA5NFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgOTVcdCAgICAgICAgfVxuICAgIDk2XHQgICAgfVxuICAgIDk3XHRcbiAgICA5OFx0ICAgIHByaXZhdGUgYm9vbGVhbiBzaG91bGRIYW5kbGVJbkNsdXN0ZXIoQ29tbWFuZFR5cGUgY29tbWFuZFR5cGUsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICA5OVx0ICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAxMDBcdCAgICAgICAgcmV0dXJuIGNsdXN0ZXIgIT0gbnVsbCAmJiBjbHVzdGVyLmlzU2hhcmRpbmdFbmFibGVkKCkgJiZcbiAgIDEwMVx0ICAgICAgICAgICAgICAgIChjb21tYW5kVHlwZSA9PSBDb21tYW5kVHlwZS5HRVQgfHwgY29tbWFuZFR5cGUgPT0gQ29tbWFuZFR5cGUuU0VUKTtcbiAgIDEwMlx0ICAgIH1cbiAgIDEwM1x0XG4gICAxMDRcdCAgICBwcml2YXRlIFJlc3AgaGFuZGxlQ2x1c3RlckNvbW1hbmQoQ29tbWFuZFR5cGUgY29tbWFuZFR5cGUsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgIDEwNVx0ICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAxMDZcdCAgICAgICAgQnl0ZXNXcmFwcGVyIGtleSA9ICgoQnVsa1N0cmluZykgY29tbWFuZEFycmF5LmdldEFycmF5KClbMV0pLmdldENvbnRlbnQoKTtcbiAgIDEwN1x0ICAgICAgICBTdHJpbmcgdGFyZ2V0Tm9kZUlkID0gY2x1c3Rlci5nZXROb2RlRm9yS2V5KGtleSk7XG4gICAxMDhcdCAgICAgICAgU3RyaW5nIGN1cnJlbnROb2RlSWQgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q3VycmVudE5vZGUoKS5nZXRJZCgpO1xuICAgMTA5XHRcbiAgIDExMFx0ICAgICAgICBpZiAoY3VycmVudE5vZGVJZC5lcXVhbHModGFyZ2V0Tm9kZUlkKSkge1xuICAgMTExXHQgICAgICAgICAgICBDb21tYW5kIGNvbW1hbmQgPSBjb21tYW5kVHlwZS5nZXRTdXBwbGllcigpLmFwcGx5KHJlZGlzQ29yZSk7XG4gICAxMTJcdCAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKSk7XG4gICAxMTNcdCAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcbiAgIDExNFx0XG4gICAxMTVcdCAgICAgICAgICAgIC8vIOehruS/neacrOWcsOaJp+ihjOaXtuS5n+inpuWPkVJEQlxuICAgMTE2XHQgICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPiAxKSB7XG4gICAxMTdcdCAgICAgICAgICAgICAgICByZGJIYW5kbGVyLm5vdGlmeURhdGFDaGFuZ2VkKHJlZGlzQ29yZS5nZXRDdXJyZW50REIoKS5nZXRJZCgpLCBrZXkpO1xuICAgMTE4XHQgICAgICAgICAgICB9XG4gICAxMTlcdFxuICAgMTIwXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgMTIxXHQgICAgICAgIH0gZWxzZSB7XG4gICAxMjJcdCAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gZm9yd2FyZFRvVGFyZ2V0Tm9kZSh0YXJnZXROb2RlSWQsIGNvbW1hbmRBcnJheSk7XG4gICAxMjNcdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAxMjRcdCAgICAgICAgfVxuICAgMTI1XHQgICAgfVxuICAgMTI2XHRcbiAgIDEyN1x0ICAgIHByaXZhdGUgUmVzcCBmb3J3YXJkVG9UYXJnZXROb2RlKFN0cmluZyB0YXJnZXROb2RlSWQsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgIDEyOFx0ICAgICAgICB0cnkge1xuICAgMTI5XHQgICAgICAgICAgICAvLyDojrflj5bnm67moIfoioLngrnnmoTmnI3liqHlrp7kvotcbiAgIDEzMFx0ICAgICAgICAgICAgUmVkaXNDbHVzdGVyIGNsdXN0ZXIgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q2x1c3RlcigpO1xuICAgMTMxXHQgICAgICAgICAgICBNeVJlZGlzU2VydmljZSB0YXJnZXRTZXJ2aWNlID0gY2x1c3Rlci5nZXROb2RlKHRhcmdldE5vZGVJZCk7XG4gICAxMzJcdFxuICAgMTMzXHQgICAgICAgICAgICBpZiAodGFyZ2V0U2VydmljZSAhPSBudWxsKSB7XG4gICAxMzRcdCAgICAgICAgICAgICAgICAvLyDovazlj5Hlkb3ku6TliLDnm67moIfoioLngrlcbiAgIDEzNVx0ICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRTZXJ2aWNlLmV4ZWN1dGVDb21tYW5kKGNvbW1hbmRBcnJheSk7XG4gICAxMzZcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAxMzdcdCAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiB0YXJnZXQgbm9kZSBub3QgYXZhaWxhYmxlOiBcIiArIHRhcmdldE5vZGVJZCk7XG4gICAxMzhcdCAgICAgICAgICAgIH1cbiAgIDEzOVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTQwXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmb3J3YXJkaW5nIGNvbW1hbmQgdG8gbm9kZSBcIiArIHRhcmdldE5vZGVJZCwgZSk7XG4gICAxNDFcdCAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIGZvcndhcmRpbmcgZmFpbGVkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgIDE0Mlx0ICAgICAgICB9XG4gICAxNDNcdCAgICB9XG4gICAxNDRcdFxuICAgMTQ1XHQgICAgQE92ZXJyaWRlXG4gICAxNDZcdCAgICBwdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgVGhyb3dhYmxlIGNhdXNlKSB7XG4gICAxNDdcdCAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXCIsIGNhdXNlKTtcbiAgIDE0OFx0ICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIFwiICsgY2F1c2UuZ2V0TWVzc2FnZSgpKSk7XG4gICAxNDlcdCAgICB9XG4gICAxNTBcdH1cbiAgIDE1MVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxNTFcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjRiYzQyZDBmLWEwOTYtNDJmYS1hYjJlLTI3ZjdiZWUxYjFhZTt0b29sdV92cnR4XzAxSmR4dXpITWFadnoxOVp0eGdickFqRSI6eyJyZXF1ZXN0SWQiOiI0YmM0MmQwZi1hMDk2LTQyZmEtYWIyZS0yN2Y3YmVlMWIxYWUiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxSmR4dXpITWFadnoxOVp0eGdickFqRSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlEZWNvZGVyLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvZGVyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuICAgICA0XHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBpby5uZXR0eS5oYW5kbGVyLmNvZGVjLkJ5dGVUb01lc3NhZ2VEZWNvZGVyO1xuICAgICA2XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG4gICAgIDdcdGltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLio7XG4gICAgIDhcdFxuICAgICA5XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMTBcdFxuICAgIDExXHRwdWJsaWMgY2xhc3MgTXlEZWNvZGVyIGV4dGVuZHMgQnl0ZVRvTWVzc2FnZURlY29kZXIge1xuICAgIDEyXHQgICAgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlEZWNvZGVyLmNsYXNzKTtcbiAgICAxM1x0ICAgIEBPdmVycmlkZVxuICAgIDE0XHQgICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDE1XHQgICAgICAgIHRyeSB7XG4gICAgMTZcdCAgICAgICAgICAgIGlmIChpbi5yZWFkYWJsZUJ5dGVzKCkgPiAwKSB7XG4gICAgMTdcdCAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi5byA5aeL6Kej56CBXCIpO1xuICAgIDE4XHQgICAgICAgICAgICAgICAgLy8g5qCH6K6w5b2T5YmN6K+75Y+W5L2N572uXG4gICAgMTlcdCAgICAgICAgICAgICAgICBpbi5tYXJrUmVhZGVySW5kZXgoKTtcbiAgICAyMFx0ICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgMjFcdCAgICAgICAgICAgICAgICAgICAgUmVzcCBkZWNvZGVkID0gUmVzcC5kZWNvZGUoaW4pO1xuICAgIDIyXHQgICAgICAgICAgICAgICAgICAgIC8vbG9nZ2VyLmluZm8oXCLop6PnoIHmiJDlip9cIik7XG4gICAgMjNcdCAgICAgICAgICAgICAgICAgICAgb3V0LmFkZChkZWNvZGVkKTtcbiAgICAyNFx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgMjVcdCAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6Kej56CB5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAyNlx0ICAgICAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAgMjdcdCAgICAgICAgICAgICAgICB9XG4gICAgMjhcdCAgICAgICAgICAgIH1cbiAgICAyOVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDMwXHQgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLmgLvkvZPlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDMxXHQgICAgICAgIH1cbiAgICAzMlx0ICAgIH1cbiAgICAzM1x0fVxuICAgIDM0XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDM0XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJiOTM2NWI2MS0xN2MwLTQ5N2YtYWQxZC03YmY4MzMwOTI2NDI7dG9vbHVfdnJ0eF8wMUJXVmhxbmVKOEI2VmZBNGRWOXdna00iOnsicmVxdWVzdElkIjoiYjkzNjViNjEtMTdjMC00OTdmLWFkMWQtN2JmODMzMDkyNjQyIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMUJXVmhxbmVKOEI2VmZBNGRWOXdna00iLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL0NvbXByZXNzaW9uQ29lZEMuamF2YTpcbiAgICAgMVx0cGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG4gICAgIDRcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyQ29udGV4dDtcbiAgICAgNVx0aW1wb3J0IGlvLm5ldHR5LmhhbmRsZXIuY29kZWMuQnl0ZVRvTWVzc2FnZUNvZGVjO1xuICAgICA2XHRpbXBvcnQgbmV0Lmpwb3VudHoubHo0LkxaNENvbXByZXNzb3I7XG4gICAgIDdcdGltcG9ydCBuZXQuanBvdW50ei5sejQuTFo0RmFjdG9yeTtcbiAgICAgOFx0aW1wb3J0IG5ldC5qcG91bnR6Lmx6NC5MWjRGYXN0RGVjb21wcmVzc29yO1xuICAgICA5XHRpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG4gICAgMTBcdFxuICAgIDExXHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMTJcdFxuICAgIDEzXHRwdWJsaWMgY2xhc3MgQ29tcHJlc3Npb25Db2VkQyBleHRlbmRzIEJ5dGVUb01lc3NhZ2VDb2RlYzxCeXRlQnVmPiB7XG4gICAgMTRcdFxuICAgIDE1XHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQ29tcHJlc3Npb25Db2VkQy5jbGFzcyk7XG4gICAgMTZcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgQ09NUFJFU1NJT05fVEhSRVNIT0xEID0gNjQ7XG4gICAgMTdcdCAgICBwcml2YXRlIGZpbmFsIExaNENvbXByZXNzb3IgY29tcHJlc3NvcjtcbiAgICAxOFx0ICAgIHByaXZhdGUgZmluYWwgTFo0RmFzdERlY29tcHJlc3NvciBkZWNvbXByZXNzb3I7XG4gICAgMTlcdFxuICAgIDIwXHQgICAgcHVibGljIENvbXByZXNzaW9uQ29lZEMoKSB7XG4gICAgMjFcdCAgICAgICAgdGhpcy5jb21wcmVzc29yID0gTFo0RmFjdG9yeS5mYXN0ZXN0SW5zdGFuY2UoKS5mYXN0Q29tcHJlc3NvcigpO1xuICAgIDIyXHQgICAgICAgIHRoaXMuZGVjb21wcmVzc29yID0gTFo0RmFjdG9yeS5mYXN0ZXN0SW5zdGFuY2UoKS5mYXN0RGVjb21wcmVzc29yKCk7XG4gICAgMjNcdCAgICAgICAgbG9nZ2VyLmluZm8oXCLliJ3lp4vljJbljovnvKnnvJbop6PnoIHlmajvvIzljovnvKnpmIjlgLw6IFwiICsgQ09NUFJFU1NJT05fVEhSRVNIT0xEICsgXCIg5a2X6IqCXCIpO1xuICAgIDI0XHQgICAgfVxuICAgIDI1XHRcbiAgICAyNlx0ICAgIEBPdmVycmlkZVxuICAgIDI3XHQgICAgcHJvdGVjdGVkIHZvaWQgZW5jb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgbXNnLCBCeXRlQnVmIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgMjhcdCAgICAgICAgLy8g5L+d5a2Y5Y6f5aeLcmVhZGVySW5kZXhcbiAgICAyOVx0ICAgICAgICBpbnQgcmVhZGVySW5kZXggPSBtc2cucmVhZGVySW5kZXgoKTtcbiAgICAzMFx0ICAgICAgICBpbnQgb3JpZ2luYWxTaXplID0gbXNnLnJlYWRhYmxlQnl0ZXMoKTtcbiAgICAzMVx0XG4gICAgMzJcdCAgICAgICAgLy8g5Y+q5Y6L57yp5aSn5LqO6ZiI5YC855qEXG4gICAgMzNcdCAgICAgICAgaWYob3JpZ2luYWxTaXplID4gQ09NUFJFU1NJT05fVEhSRVNIT0xEKXtcbiAgICAzNFx0ICAgICAgICAgICAgLy8gMS7lhpnlhaXljovnvKnmoIforrBcbiAgICAzNVx0ICAgICAgICAgICAgb3V0LndyaXRlQnl0ZSgxKTtcbiAgICAzNlx0XG4gICAgMzdcdCAgICAgICAgICAgIC8vIDIu5YeG5aSH5Y6L57ypXG4gICAgMzhcdCAgICAgICAgICAgIGJ5dGVbXSBieXRlcyA9IG5ldyBieXRlW29yaWdpbmFsU2l6ZV07XG4gICAgMzlcdCAgICAgICAgICAgIG1zZy5nZXRCeXRlcyhyZWFkZXJJbmRleCwgYnl0ZXMpOyAvLyDkvb/nlKhnZXRCeXRlc+iAjOS4jeaYr3JlYWRCeXRlc++8jOmBv+WFjeenu+WKqHJlYWRlckluZGV4XG4gICAgNDBcdFxuICAgIDQxXHQgICAgICAgICAgICAvLyAzLuiuoeeul+WOi+e8qeWQjuWPr+iDveeahOacgOWkp+mVv+W6plxuICAgIDQyXHQgICAgICAgICAgICBpbnQgbWF4TGVuZ3RoID0gY29tcHJlc3Nvci5tYXhDb21wcmVzc2VkTGVuZ3RoKG9yaWdpbmFsU2l6ZSk7XG4gICAgNDNcdCAgICAgICAgICAgIGJ5dGVbXSBjb21wcmVzc2VkQnl0ZXMgPSBuZXcgYnl0ZVttYXhMZW5ndGhdO1xuICAgIDQ0XHRcbiAgICA0NVx0ICAgICAgICAgICAgLy8gNC7ljovnvKnmlbDmja5cbiAgICA0Nlx0ICAgICAgICAgICAgaW50IGNvbXByZXNzZWRMZW5ndGggPSBjb21wcmVzc29yLmNvbXByZXNzKGJ5dGVzLCAwLCBvcmlnaW5hbFNpemUsIGNvbXByZXNzZWRCeXRlcywgMCwgbWF4TGVuZ3RoKTtcbiAgICA0N1x0XG4gICAgNDhcdCAgICAgICAgICAgIC8vIDUu5YaZ5YWl5Y6f5aeL6ZW/5bqmXG4gICAgNDlcdCAgICAgICAgICAgIG91dC53cml0ZUludChvcmlnaW5hbFNpemUpO1xuICAgIDUwXHRcbiAgICA1MVx0ICAgICAgICAgICAgLy8gNi7lhpnlhaXljovnvKnlkI7nmoTplb/luqZcbiAgICA1Mlx0ICAgICAgICAgICAgb3V0LndyaXRlSW50KGNvbXByZXNzZWRMZW5ndGgpO1xuICAgIDUzXHRcbiAgICA1NFx0ICAgICAgICAgICAgLy8gNy7lhpnlhaXljovnvKnmlbDmja5cbiAgICA1NVx0ICAgICAgICAgICAgb3V0LndyaXRlQnl0ZXMoY29tcHJlc3NlZEJ5dGVzLCAwLCBjb21wcmVzc2VkTGVuZ3RoKTtcbiAgICA1Nlx0XG4gICAgNTdcdCAgICAgICAgICAgIGZsb2F0IGNvbXByZXNzaW9uUmF0aW8gPSAoZmxvYXQpY29tcHJlc3NlZExlbmd0aCAvIG9yaWdpbmFsU2l6ZSAqIDEwMDtcbiAgICA1OFx0ICAgICAgICAgICAgbG9nZ2VyLmluZm8oU3RyaW5nLmZvcm1hdChcIuaVsOaNruW3suWOi+e8qTog5Y6f5aeL5aSn5bCPPSVk5a2X6IqCLCDljovnvKnlkI49JWTlrZfoioIsIOWOi+e8qeeOhz0lLjJmJSVcIixcbiAgICA1OVx0ICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFNpemUsIGNvbXByZXNzZWRMZW5ndGgsIGNvbXByZXNzaW9uUmF0aW8pKTtcbiAgICA2MFx0ICAgICAgICB9IGVsc2Uge1xuICAgIDYxXHQgICAgICAgICAgICAvLyDmnKrljovnvKnnmoTmg4XlhrVcbiAgICA2Mlx0ICAgICAgICAgICAgb3V0LndyaXRlQnl0ZSgwKTtcbiAgICA2M1x0ICAgICAgICAgICAgb3V0LndyaXRlSW50KG9yaWdpbmFsU2l6ZSk7XG4gICAgNjRcdCAgICAgICAgICAgIG91dC53cml0ZUJ5dGVzKG1zZywgcmVhZGVySW5kZXgsIG9yaWdpbmFsU2l6ZSk7XG4gICAgNjVcdFxuICAgIDY2XHQgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIuaVsOaNruacquWOi+e8qTog5aSn5bCPPVwiICsgb3JpZ2luYWxTaXplICsgXCLlrZfoioIgKOWwj+S6jumYiOWAvClcIik7XG4gICAgNjdcdCAgICAgICAgfVxuICAgIDY4XHQgICAgfVxuICAgIDY5XHRcbiAgICA3MFx0XG4gICAgNzFcdCAgICBAT3ZlcnJpZGVcbiAgICA3Mlx0ICAgIHByb3RlY3RlZCB2b2lkIGRlY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBCeXRlQnVmIGluLCBMaXN0PE9iamVjdD4gb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICA3M1x0ICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmnInotrPlpJ/nmoTmlbDmja7mnaXor7vlj5bmoIforrBcbiAgICA3NFx0ICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpIDwgMSkge1xuICAgIDc1XHQgICAgICAgICAgICByZXR1cm47XG4gICAgNzZcdCAgICAgICAgfVxuICAgIDc3XHRcbiAgICA3OFx0ICAgICAgICBpbi5tYXJrUmVhZGVySW5kZXgoKTtcbiAgICA3OVx0XG4gICAgODBcdCAgICAgICAgLy8g6K+75Y+W5Y6L57yp5qCH6K6wXG4gICAgODFcdCAgICAgICAgYnl0ZSBpc0NvbXByZXNzZWQgPSBpbi5yZWFkQnl0ZSgpO1xuICAgIDgyXHRcbiAgICA4M1x0ICAgICAgICBpZiAoaXNDb21wcmVzc2VkID09IDEpIHtcbiAgICA4NFx0ICAgICAgICAgICAgLy8g6ZyA6KaB6K+75Y+W5Y6f5aeL6ZW/5bqm5ZKM5Y6L57yp6ZW/5bqmXG4gICAgODVcdCAgICAgICAgICAgIGlmIChpbi5yZWFkYWJsZUJ5dGVzKCkgPCA4KSB7XG4gICAgODZcdCAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAgODdcdCAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgODhcdCAgICAgICAgICAgIH1cbiAgICA4OVx0XG4gICAgOTBcdCAgICAgICAgICAgIC8vIOivu+WPluWOn+Wni+mVv+W6plxuICAgIDkxXHQgICAgICAgICAgICBpbnQgb3JpZ2luYWxMZW5ndGggPSBpbi5yZWFkSW50KCk7XG4gICAgOTJcdFxuICAgIDkzXHQgICAgICAgICAgICAvLyDor7vlj5bljovnvKnplb/luqZcbiAgICA5NFx0ICAgICAgICAgICAgaW50IGNvbXByZXNzZWRMZW5ndGggPSBpbi5yZWFkSW50KCk7XG4gICAgOTVcdFxuICAgIDk2XHQgICAgICAgICAgICAvLyDnoa7kv53mnInotrPlpJ/nmoTmlbDmja5cbiAgICA5N1x0ICAgICAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA8IGNvbXByZXNzZWRMZW5ndGgpIHtcbiAgICA5OFx0ICAgICAgICAgICAgICAgIGluLnJlc2V0UmVhZGVySW5kZXgoKTtcbiAgICA5OVx0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgIDEwMFx0ICAgICAgICAgICAgfVxuICAgMTAxXHRcbiAgIDEwMlx0ICAgICAgICAgICAgLy8g6K+75Y+W5Y6L57yp5pWw5o2uXG4gICAxMDNcdCAgICAgICAgICAgIGJ5dGVbXSBjb21wcmVzc2VkID0gbmV3IGJ5dGVbY29tcHJlc3NlZExlbmd0aF07XG4gICAxMDRcdCAgICAgICAgICAgIGluLnJlYWRCeXRlcyhjb21wcmVzc2VkKTtcbiAgIDEwNVx0XG4gICAxMDZcdCAgICAgICAgICAgIC8vIOino+WOi+e8qeaVsOaNrlxuICAgMTA3XHQgICAgICAgICAgICBieXRlW10gZGVjb21wcmVzc2VkID0gbmV3IGJ5dGVbb3JpZ2luYWxMZW5ndGhdO1xuICAgMTA4XHQgICAgICAgICAgICBkZWNvbXByZXNzb3IuZGVjb21wcmVzcyhjb21wcmVzc2VkLCAwLCBkZWNvbXByZXNzZWQsIDAsIG9yaWdpbmFsTGVuZ3RoKTtcbiAgIDEwOVx0XG4gICAxMTBcdCAgICAgICAgICAgIC8vIOWIm+W7uuino+WOi+WQjueahCBCeXRlQnVmXG4gICAxMTFcdCAgICAgICAgICAgIEJ5dGVCdWYgcmVzdWx0ID0gY3R4LmFsbG9jKCkuYnVmZmVyKG9yaWdpbmFsTGVuZ3RoKTtcbiAgIDExMlx0ICAgICAgICAgICAgcmVzdWx0LndyaXRlQnl0ZXMoZGVjb21wcmVzc2VkLCAwLCBvcmlnaW5hbExlbmd0aCk7XG4gICAxMTNcdCAgICAgICAgICAgIG91dC5hZGQocmVzdWx0KTtcbiAgIDExNFx0XG4gICAxMTVcdCAgICAgICAgICAgIGxvZ2dlci5pbmZvKFN0cmluZy5mb3JtYXQoXCLmlbDmja7lt7Lop6PljovnvKk6IOWOi+e8qeWkp+Wwjz0lZOWtl+iKgiwg6Kej5Y6L5ZCOPSVk5a2X6IqCXCIsXG4gICAxMTZcdCAgICAgICAgICAgICAgICAgICAgY29tcHJlc3NlZExlbmd0aCwgb3JpZ2luYWxMZW5ndGgpKTtcbiAgIDExN1x0ICAgICAgICB9IGVsc2Uge1xuICAgMTE4XHQgICAgICAgICAgICAvLyDpnIDopoHor7vlj5bmnKrljovnvKnplb/luqZcbiAgIDExOVx0ICAgICAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA8IDQpIHtcbiAgIDEyMFx0ICAgICAgICAgICAgICAgIGluLnJlc2V0UmVhZGVySW5kZXgoKTtcbiAgIDEyMVx0ICAgICAgICAgICAgICAgIHJldHVybjtcbiAgIDEyMlx0ICAgICAgICAgICAgfVxuICAgMTIzXHRcbiAgIDEyNFx0ICAgICAgICAgICAgLy8g6K+75Y+W5pyq5Y6L57yp6ZW/5bqmXG4gICAxMjVcdCAgICAgICAgICAgIGludCBsZW5ndGggPSBpbi5yZWFkSW50KCk7XG4gICAxMjZcdFxuICAgMTI3XHQgICAgICAgICAgICAvLyDnoa7kv53mnInotrPlpJ/nmoTmlbDmja5cbiAgIDEyOFx0ICAgICAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA8IGxlbmd0aCkge1xuICAgMTI5XHQgICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgMTMwXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgMTMxXHQgICAgICAgICAgICB9XG4gICAxMzJcdFxuICAgMTMzXHQgICAgICAgICAgICAvLyDliJvlu7rnu5PmnpwgQnl0ZUJ1ZiDlubbmraPnoa7or7vlj5bmlbDmja5cbiAgIDEzNFx0ICAgICAgICAgICAgQnl0ZUJ1ZiByZXN1bHQgPSBjdHguYWxsb2MoKS5idWZmZXIobGVuZ3RoKTtcbiAgIDEzNVx0ICAgICAgICAgICAgaW4ucmVhZEJ5dGVzKHJlc3VsdCwgbGVuZ3RoKTtcbiAgIDEzNlx0ICAgICAgICAgICAgcmVzdWx0LndyaXRlckluZGV4KGxlbmd0aCk7IC8vIOehruS/neWGmeWFpee0ouW8leato+ehruiuvue9rlxuICAgMTM3XHQgICAgICAgICAgICBvdXQuYWRkKHJlc3VsdCk7XG4gICAxMzhcdFxuICAgMTM5XHQgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIuaOpeaUtuWIsOacquWOi+e8qeaVsOaNrjog5aSn5bCPPVwiICsgbGVuZ3RoICsgXCLlrZfoioJcIik7XG4gICAxNDBcdCAgICAgICAgfVxuICAgMTQxXHQgICAgfVxuICAgMTQyXHR9XG4gICAxNDNcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTQzXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI1YmMzYjQ3NS00NTVkLTQ3NjktODY1Ny00YTI4MjU0MmIzMWI7dG9vbHVfdnJ0eF8wMTdKNEJCSDJMcDJRRENURHJyQ3A1azciOnsicmVxdWVzdElkIjoiNWJjM2I0NzUtNDU1ZC00NzY5LTg2NTctNGEyODI1NDJiMzFiIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMTdKNEJCSDJMcDJRRENURHJyQ3A1azciLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015UmVzcG9uc2VFbmNvZGVyLmphdmE6XG4gICAgIDFcdHBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvZGVyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuICAgICA0XHRpbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWZVdGlsO1xuICAgICA1XHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG4gICAgIDZcdGltcG9ydCBpby5uZXR0eS5oYW5kbGVyLmNvZGVjLk1lc3NhZ2VUb0J5dGVFbmNvZGVyO1xuICAgICA3XHRpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG4gICAgIDhcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbiAgICAgOVx0XG4gICAgMTBcdHB1YmxpYyBjbGFzcyBNeVJlc3BvbnNlRW5jb2RlciBleHRlbmRzIE1lc3NhZ2VUb0J5dGVFbmNvZGVyPFJlc3A+IHtcbiAgICAxMVx0ICAgIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15UmVzcG9uc2VFbmNvZGVyLmNsYXNzKTtcbiAgICAxMlx0ICAgIEBPdmVycmlkZVxuICAgIDEzXHQgICAgcHJvdGVjdGVkIHZvaWQgZW5jb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgcmVzcCwgQnl0ZUJ1ZiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgIDE0XHQgICAgICAgIHRyeSB7XG4gICAgMTVcdCAgICAgICAgICAgIHJlc3Aud3JpdGUocmVzcCwgb3V0KTtcbiAgICAxNlx0ICAgICAgICAgICAgLy8vL2xvZ2dlci5pbmZvKFwiRW5jb2RlZCByZXNwb25zZTogXCIgKyBCeXRlQnVmVXRpbC5oZXhEdW1wKG91dCkpO1xuICAgIDE3XHQgICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGUpIHtcbiAgICAxOFx0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi57yW56CB5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAxOVx0ICAgICAgICAgICAgY3R4LmNsb3NlKCk7XG4gICAgMjBcdCAgICAgICAgfVxuICAgIDIxXHQgICAgfVxuICAgIDIyXHR9XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyMlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZmRkYTAxMDEtNjdhMi00YmJlLWJkNzEtNzgxN2JmZjVhYzM4O3Rvb2x1X3ZydHhfMDFKVk00UXU3cHFFckU1R283OVZjQ2FVIjp7InJlcXVlc3RJZCI6ImZkZGEwMTAxLTY3YTItNGJiZS1iZDcxLTc4MTdiZmY1YWMzOCIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFKVk00UXU3cHFFckU1R283OVZjQ2FVIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvc2VydmVyL015UmVkaXNTZXJ2aWNlLmphdmFcbi4uLlxuXG5pbXBvcnQgaW8ubmV0dHkuYm9vdHN0cmFwLlNlcnZlckJvb3RzdHJhcDtcbmltcG9ydCBpby5uZXR0eS5idWZmZXIuUG9vbGVkQnl0ZUJ1ZkFsbG9jYXRvcjtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLio7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5zb2NrZXQuU29ja2V0Q2hhbm5lbDtcbmltcG9ydCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuRGVmYXVsdEV2ZW50RXhlY3V0b3JHcm91cDtcbmltcG9ydCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuRGVmYXVsdFRocmVhZEZhY3Rvcnk7XG5pbXBvcnQgaW8ubmV0dHkudXRpbC5jb25jdXJyZW50LkV2ZW50RXhlY3V0b3JHcm91cDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguUmVkaXNDb3JlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmVJbXBsO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YuQU9GU3luY1N0cmF0ZWd5O1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLkNsdXN0ZXJDbGllbnQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNsdXN0ZXIuQ2x1c3Rlck5vZGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNsdXN0ZXIuUmVkaXNDbHVzdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb2Rlci5Db21wcmVzc2lvbkNvZWRDO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb2Rlci5NeUNvbW1hbmRIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb2Rlci5NeURlY29kZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLk15UmVzcG9uc2VFbmNvZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jaGFubmVsLkRlZmF1bHRDaGFubmVsU2VsZWN0U3RyYXRlZ3k7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuTG9jYWxDaGFubmVsT3B0aW9uO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YuQU9GSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEudXRpbC5NYXA7XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudEhhc2hNYXA7XG5cbnB1YmxpYyBjbGFzcyBNeVJlZGlzU2VydmljZSBpbXBsZW1lbnRzIFJlZGlzU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlSZWRpc1NlcnZpY2UuY2xhc3MpO1xuXG4gICAgLy8g6YCa6L+H5L+u5pS56L+Z5Lqb5qCH5b+X5p2l5byA5ZCv5oiW5YWz6ZetQU9G5ZKMUkRC5Yqf6IO9XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBFTkFCTEVfQU9GID0gdHJ1ZTtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29sZWFuIEVOQUJMRV9SREIgPSBmYWxzZTtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGJvb2xlYW4gRU5BQkxFX0NPTVBSRVNTSU9OID0gZmFsc2U7XG5cbiAgICAvLyDpu5jorqTmlbDmja7lupPmlbDph4/vvIzkuI5SZWRpc+m7mOiupOWAvOS/neaMgeS4gOiHtFxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBERUZBVUxUX0RCX05VTSA9IDE2O1xuXG4gICAgcHJpdmF0ZSBSZWRpc0NsdXN0ZXIgY2x1c3RlcjtcbiAgICBwcml2YXRlIENsdXN0ZXJOb2RlIGN1cnJlbnROb2RlO1xuICAgIHByaXZhdGUgTWFwPFN0cmluZywgQ2x1c3RlckNsaWVudD4gY2x1c3RlckNsaWVudHMgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8PigpO1xuICAgIHB1YmxpYyBNeUNvbW1hbmRIYW5kbGVyIGNvbW1hbmRIYW5kbGVyO1xuXG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgcG9ydDtcbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBMb2NhbENoYW5uZWxPcHRpb24gY2hhbm5lbE9wdGlvbjtcbiAgICBwcml2YXRlIGZpbmFsIEV2ZW50RXhlY3V0b3JHcm91cCBjb21tYW5kRXhlY3V0b3I7XG4gICAgcHJpdmF0ZSBmaW5hbCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJIYW5kbGVyIHJkYkhhbmRsZXI7XG5cbiAgICBwcml2YXRlIENoYW5uZWwgc2VydmVyQ2hhbm5lbDtcbiAgICBwcml2YXRlIEV2ZW50TG9vcEdyb3VwIGJvc3NHcm91cDtcbiAgICBwcml2YXRlIEV2ZW50TG9vcEdyb3VwIHdvcmtlckdyb3VwO1xuXG4gICAgLy8g5re75Yqg5pa55rOV566h55CG6ZuG576k6L+e5o6lXG4gICAgcHVibGljIHZvaWQgYWRkQ2x1c3RlckNsaWVudChTdHJpbmcgbm9kZUlkLCBDbHVzdGVyQ2xpZW50IGNsaWVudCkge1xuICAgICAgICBjbHVzdGVyQ2xpZW50cy5wdXQobm9kZUlkLCBjbGllbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBDbHVzdGVyQ2xpZW50IGdldENsdXN0ZXJDbGllbnQoU3RyaW5nIG5vZGVJZCkge1xuICAgICAgICByZXR1cm4gY2x1c3RlckNsaWVudHMuZ2V0KG5vZGVJZCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q2x1c3RlcihSZWRpc0NsdXN0ZXIgY2x1c3Rlcikge1xuICAgICAgICB0aGlzLmNsdXN0ZXIgPSBjbHVzdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBSZWRpc0NsdXN0ZXIgZ2V0Q2x1c3RlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2x1c3RlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDdXJyZW50Tm9kZShDbHVzdGVyTm9kZSBub2RlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBub2RlO1xuICAgIH1cblxuICAgIHB1YmxpYyBNeVJlZGlzU2VydmljZShpbnQgcG9ydCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgdGhpcyhwb3J0LCBERUZBVUxUX0RCX05VTSk7XG4gICAgfVxuXG4gICAgcHVibGljIE15UmVkaXNTZXJ2aWNlKGludCBwb3J0LCBpbnQgZGJOdW0pIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIHRoaXMucG9ydCA9IHBvcnQ7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gbmV3IFJlZGlzQ29yZUltcGwoZGJOdW0sIHRoaXMpO1xuICAgICAgICB0aGlzLmNoYW5uZWxPcHRpb24gPSBuZXcgRGVmYXVsdENoYW5uZWxTZWxlY3RTdHJhdGVneSgpLnNlbGVjdCgpO1xuICAgICAgICB0aGlzLmNvbW1hbmRFeGVjdXRvciA9IG5ldyBEZWZhdWx0RXZlbnRFeGVjdXRvckdyb3VwKDEsXG4gICAgICAgICAgICAgICAgbmV3IERlZmF1bHRUaHJlYWRGYWN0b3J5KFwicmVkaXMtY21kXCIpKTtcblxuICAgICAgICAvLyDmoLnmja7phY3nva7lhrPlrprmmK/lkKbliJ3lp4vljJZSRELlpITnkIblmahcbiAgICAgICAgaWYgKEVOQUJMRV9SREIpIHtcbiAgICAgICAgICAgIHRoaXMucmRiSGFuZGxlciA9IG5ldyBSREJIYW5kbGVyKHJlZGlzQ29yZSk7XG4gICAgICAgICAgICAoKFJlZGlzQ29yZUltcGwpIHJlZGlzQ29yZSkuc2V0UkRCSGFuZGxlcih0aGlzLnJkYkhhbmRsZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOagueaNrumFjee9ruWGs+WumuaYr+WQpuWIneWni+WMlkFPRuWkhOeQhuWZqFxuICAgICAgICBpZiAoRU5BQkxFX0FPRikge1xuICAgICAgICAgICAgdGhpcy5hb2ZIYW5kbGVyID0gbmV3IEFPRkhhbmRsZXIoXCJyZWRpcy5hb2ZcIiwgcmVkaXNDb3JlKTtcbiAgICAgICAgICAgIHRoaXMuYW9mSGFuZGxlci5zZXRTeW5jU3RyYXRlZ3koQU9GU3luY1N0cmF0ZWd5LkVWRVJZU0VDKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYW9mSGFuZGxlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5ib3NzR3JvdXAgPSBjaGFubmVsT3B0aW9uLmJvc3MoKTtcbiAgICAgICAgdGhpcy53b3JrZXJHcm91cCA9IGNoYW5uZWxPcHRpb24uc2VsZWN0b3JzKCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChFTkFCTEVfUkRCICYmIHJkYkhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmRiSGFuZGxlci5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChFTkFCTEVfQU9GICYmIGFvZkhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW9mSGFuZGxlci5zdGFydCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYW9mSGFuZGxlci5sb2FkKHJlZGlzQ29yZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWIm+W7uue7n+S4gOeahOWRveS7pOWkhOeQhuWZqFxuICAgICAgICAgICAgdGhpcy5jb21tYW5kSGFuZGxlciA9IG5ldyBNeUNvbW1hbmRIYW5kbGVyKHJlZGlzQ29yZSwgYW9mSGFuZGxlciwgcmRiSGFuZGxlcik7XG5cbiAgICAgICAgICAgIFNlcnZlckJvb3RzdHJhcCBib290c3RyYXAgPSBuZXcgU2VydmVyQm9vdHN0cmFwKCk7XG4gICAgICAgICAgICBib290c3RyYXAuZ3JvdXAoYm9zc0dyb3VwLCB3b3JrZXJHcm91cClcbiAgICAgICAgICAgICAgICAgICAgLmNoYW5uZWwoY2hhbm5lbE9wdGlvbi5nZXRDaGFubmVsQ2xhc3MoKSkuXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uKENoYW5uZWxPcHRpb24uU09fS0VFUEFMSVZFLCB0cnVlKS5cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRPcHRpb24oQ2hhbm5lbE9wdGlvbi5UQ1BfTk9ERUxBWSwgdHJ1ZSkuXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uKENoYW5uZWxPcHRpb24uQUxMT0NBVE9SLCBQb29sZWRCeXRlQnVmQWxsb2NhdG9yLkRFRkFVTFQpXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZEhhbmRsZXIobmV3IENoYW5uZWxJbml0aWFsaXplcjxTb2NrZXRDaGFubmVsPigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaW5pdENoYW5uZWwoU29ja2V0Q2hhbm5lbCBjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5uZWxQaXBlbGluZSBwaXBlbGluZSA9IGNoLnBpcGVsaW5lKCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15RGVjb2RlcigpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15UmVzcG9uc2VFbmNvZGVyKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoRU5BQkxFX0NPTVBSRVNTSU9OKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgQ29tcHJlc3Npb25Db2VkQygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChjb21tYW5kRXhlY3V0b3IsIGNvbW1hbmRIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIOaUueS4uuW8guatpee7keWumlxuICAgICAgICAgICAgYm9vdHN0cmFwLmJpbmQocG9ydCkuYWRkTGlzdGVuZXIoKENoYW5uZWxGdXR1cmUgZnV0dXJlKSAtPiB7XG4gICAgICAgICAgICAgICAgaWYgKGZ1dHVyZS5pc1N1Y2Nlc3MoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckNoYW5uZWwgPSBmdXR1cmUuY2hhbm5lbCgpO1xuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWRpc+acjeWKoeW3suWQr+WKqO+8jOebkeWQrOerr+WPozogXCIgKyBwb3J0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDmt7vliqDlhbPpl63nm5HlkKzlmahcbiAgICAgICAgICAgICAgICAgICAgZnV0dXJlLmNoYW5uZWwoKS5jbG9zZUZ1dHVyZSgpLmFkZExpc3RlbmVyKGNsb3NlRnV0dXJlIC0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2xvc2VGdXR1cmUuaXNTdWNjZXNzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLmnI3liqHlmajlvILluLjlhbPpl61cIiwgY2xvc2VGdXR1cmUuY2F1c2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuWQr+WKqOacjeWKoeWksei0pe+8jOerr+WPozogXCIgKyBwb3J0LCBmdXR1cmUuY2F1c2UoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLmnI3liqHlmajlkK/liqjlvILluLhcIiwgZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihlKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIHZvaWQgc2VuZE1lc3NhZ2VUb05vZGUoU3RyaW5nIHRvTm9kZUlkLCBSZXNwIG1lc3NhZ2UpIHtcbiAgICAgICAgQ2x1c3RlckNsaWVudCBjbGllbnQgPSBjbHVzdGVyQ2xpZW50cy5nZXQodG9Ob2RlSWQpO1xuICAgICAgICBpZiAoY2xpZW50ICE9IG51bGwgJiYgY2xpZW50LmlzQWN0aXZlKCkpIHsgIC8vIOehruS/nei/nuaOpea0u+i3g1xuICAgICAgICAgICAgY2xpZW50LnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTm8gYWN0aXZlIGNvbm5lY3Rpb24gdG8gbm9kZSBcIiArIHRvTm9kZUlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBNeVJlZGlzU2VydmljZSBnZXRSZWRpc1NlcnZpY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZWRpc0NvcmUgZ2V0UmVkaXNDb3JlKCkge1xuICAgICAgICByZXR1cm4gcmVkaXNDb3JlO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbnQgZ2V0UG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHBvcnQ7XG4gICAgfVxuXG4gICAgcHVibGljIFJlc3AgZXhlY3V0ZUNvbW1hbmQoUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICByZXR1cm4gY29tbWFuZEhhbmRsZXIucHJvY2Vzc0NvbW1hbmQoY29tbWFuZEFycmF5KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgQ2x1c3Rlck5vZGUgZ2V0Q3VycmVudE5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnROb2RlO1xuICAgIH1cblxuICAgIHB1YmxpYyBNeUNvbW1hbmRIYW5kbGVyIGdldENvbW1hbmRIYW5kbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kSGFuZGxlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgQU9GSGFuZGxlciBnZXRBb2ZIYW5kbGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hb2ZIYW5kbGVyO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL0FPRkhhbmRsZXIuamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiDmnoTpgKBBT0blpITnkIblmahcbiAgICAgKiBAcGFyYW0gZmlsZW5hbWUgQU9G5paH5Lu25ZCNXG4gICAgICogQHRocm93cyBJT0V4Y2VwdGlvbiDlpoLmnpzliJvlu7rmlofku7blpLHotKVcbiAgICAgKi9cbiAgICBwdWJsaWMgQU9GSGFuZGxlcihTdHJpbmcgZmlsZW5hbWUsIFJlZGlzQ29yZSByZWRpc0NvcmUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgLy8gMS4g6K6+572u6buY6K6k5ZCM5q2l562W55Wl5Li65q+P56eS5ZCM5q2lXG4gICAgICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gQU9GU3luY1N0cmF0ZWd5LkVWRVJZU0VDO1xuICAgICAgICAvLyAyLiDliJvlu7pBT0blhpnlhaXlmahcbiAgICAgICAgdGhpcy53cml0ZXIgPSBuZXcgQU9GV3JpdGVyKGZpbGVuYW1lLCBzeW5jU3RyYXRlZ3kpO1xuICAgICAgICAvLyAzLiDliJvlu7pBT0blpITnkIblmajvvIzorr7nva7nvJPlhrLljLrlpKflsI/kuLoyTUJcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBuZXcgQU9GUHJvY2Vzc29yKHdyaXRlciwgMiAqIDEwMjQgKiAxMDI0KTtcbiAgICAgICAgLy8gNC4g5Yib5bu6QU9G5Yqg6L295ZmoXG4gICAgICAgIHRoaXMubG9hZGVyID0gbmV3IEFPRkxvYWRlcigpO1xuICAgICAgICAvLyA1LiDliJvlu7pBT0blkI7lj7DmnI3liqFcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU2VydmljZSA9IG5ldyBBT0ZCYWNrZ3JvdW5kU2VydmljZShwcm9jZXNzb3IsIHN5bmNTdHJhdGVneSk7XG5cbiAgICAgICAgdGhpcy5yZXdyaXRlciA9IG5ldyBBT0ZSZXdyaXRlcihyZWRpc0NvcmUsIGZpbGVuYW1lLDIqMTAyNCoxMDI0KTtcbiAgICAgICAgdGhpcy5yZXdyaXRpbmcgPSBuZXcgQXRvbWljQm9vbGVhbihmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5ZCv5YqoQU9G5aSE55CG5ZmoXG4gICAgICovXG4gICAgcHVibGljIHZvaWQgc3RhcnQoKSB7XG4gICAgICAgIC8vIOWQr+WKqOWQjuWPsOacjeWKoVxuICAgICAgICBiYWNrZ3JvdW5kU2VydmljZS5zdGFydCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOi/veWKoOWRveS7pOWIsEFPRlxuICAgICAqIEBwYXJhbSBjb21tYW5kIOimgei/veWKoOeahOWRveS7pFxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIGFwcGVuZChSZXNwIGNvbW1hbmQpIHtcbiAgICAgICAgLy8g5bCG5ZG95Luk5Lqk57uZ5aSE55CG5Zmo77yM5aSE55CG5Zmo5Lya5LuO5a+55bqU55qEQ29tbWFuZOmYn+WIl+S4reiOt+WPluWRveS7pFxuICAgICAgICBwcm9jZXNzb3IuYXBwZW5kKGNvbW1hbmQpO1xuXG4gICAgICAgIGlmKGNvbGxlY3RpbmdSZXdyaXRlQnVmZmVyLmdldCgpICYmIHJld3JpdGVCdWZmZXIgIT0gbnVsbCl7XG4gICAgICAgICAgICBCeXRlQnVmIGJ1ZiA9IFVucG9vbGVkLmRpcmVjdEJ1ZmZlcigpO1xuICAgICAgICAgICAgY29tbWFuZC53cml0ZShjb21tYW5kLCBidWYpO1xuICAgICAgICAgICAgQnl0ZUJ1ZmZlciBieXRlQnVmZmVyID0gYnVmLm5pb0J1ZmZlcigpO1xuICAgICAgICAgICAgcmV3cml0ZUJ1ZmZlci5hZGQoYnl0ZUJ1ZmZlcik7XG4gICAgICAgICAgICBidWYucmVsZWFzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5YGc5q2iQU9G5aSE55CG5ZmoXG4gICAgICovXG4gICAgcHVibGljIHZvaWQgc3RvcCgpIHtcbiAgICAgICAgLy8gMS4g5YGc5q2i5ZCO5Y+w5pyN5YqhXG4gICAgICAgIGJhY2tncm91bmRTZXJ2aWNlLnN0b3AoKTtcbiAgICAgICAgLy8gMi4g5YWz6Zet5YaZ5YWl5ZmoXG4gICAgICAgIHdyaXRlci5jbG9zZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6K6+572u5ZCM5q2l562W55WlXG4gICAgICogQHBhcmFtIHN0cmF0ZWd5IOaWsOeahOWQjOatpeetlueVpVxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIHNldFN5bmNTdHJhdGVneShBT0ZTeW5jU3RyYXRlZ3kgc3RyYXRlZ3kpIHtcbiAgICAgICAgdGhpcy5zeW5jU3RyYXRlZ3kgPSBzdHJhdGVneTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEudXRpbC5FbnVtU2V0O1xuaW1wb3J0IGphdmEudXRpbC5TZXQ7XG4uLi5cblxuICAgIHB1YmxpYyBNeUNvbW1hbmRIYW5kbGVyKFJlZGlzQ29yZSByZWRpc0NvcmUsIEFPRkhhbmRsZXIgYW9mSGFuZGxlciwgUkRCSGFuZGxlciByZGJIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgICAgICB0aGlzLmFvZkhhbmRsZXIgPSBhb2ZIYW5kbGVyO1xuICAgICAgICB0aGlzLnJkYkhhbmRsZXIgPSByZGJIYW5kbGVyO1xuXG5cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBjaGFubmVsUmVhZDAoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCBtc2cpIHtcbiAgICAgICAgaWYgKG1zZyBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgICAgICAgICAgUmVzcEFycmF5IGFycmF5ID0gKFJlc3BBcnJheSkgbXNnO1xuICAgICAgICAgICAgUmVzcCByZXNwb25zZSA9IHByb2Nlc3NDb21tYW5kKGFycmF5KTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiB1bmtub3duIHJlcXVlc3QgdHlwZVwiKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgUmVzcCBwcm9jZXNzQ29tbWFuZChSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIGlmIChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZW1wdHkgY29tbWFuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXNwW10gYXJyYXkgPSBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKTtcbiAgICAgICAgICAgIFN0cmluZyBjb21tYW5kTmFtZSA9ICgoQnVsa1N0cmluZykgYXJyYXlbMF0pLmdldENvbnRlbnQoKS50b1V0ZjhTdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgQ29tbWFuZFR5cGUgY29tbWFuZFR5cGU7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZFR5cGUgPSBDb21tYW5kVHlwZS52YWx1ZU9mKGNvbW1hbmROYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biBjb21tYW5kICdcIiArIGNvbW1hbmROYW1lICsgXCInXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlSW5DbHVzdGVyKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNsdXN0ZXJDb21tYW5kKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBDb21tYW5kIGNvbW1hbmQgPSBjb21tYW5kVHlwZS5nZXRTdXBwbGllcigpLmFwcGx5KHJlZGlzQ29yZSk7XG4gICAgICAgICAgICBjb21tYW5kLnNldENvbnRleHQoYXJyYXkpO1xuXG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG5cbiAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGFycmF5Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZGJIYW5kbGVyLm5vdGlmeURhdGFDaGFuZ2VkKHJlZGlzQ29yZS5nZXRDdXJyZW50REIoKS5nZXRJZCgpLCAoKEJ1bGtTdHJpbmcpIGFycmF5WzFdKS5nZXRDb250ZW50KCkpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgaWYgKGN1cnJlbnROb2RlSWQuZXF1YWxzKHRhcmdldE5vZGVJZCkpIHtcbiAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKSk7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG5cbiAgICAgICAgICAgIC8vIOehruS/neacrOWcsOaJp+ihjOaXtuS5n+inpuWPkVJEQlxuICAgICAgICAgICAgaWYgKHJkYkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkgJiYgY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksIGtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGZvcndhcmRUb1RhcmdldE5vZGUodGFyZ2V0Tm9kZUlkLCBjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL3Byb2Nlc3Nvci9BT0ZQcm9jZXNzb3IuamF2YVxuLi4uXG5cblxuICAgIHByaXZhdGUgZmluYWwgaW50IGJhdGNoU2l6ZTtcbiAgICBwcml2YXRlIEJ5dGVCdWYgYmF0Y2hCdWZmZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBSZWVudHJhbnRMb2NrIGJhdGNoTG9jayA9IG5ldyBSZWVudHJhbnRMb2NrKCk7XG4gICAgLyoqXG4gICAgICog5p6E6YCgQU9G5aSE55CG5ZmoXG4gICAgICogQHBhcmFtIHdyaXRlciDmlofku7blhpnlhaXlmahcbiAgICAgKiBAcGFyYW0gYnVmZmVyU2l6ZSDnvJPlhrLljLrlpKflsI9cbiAgICAgKi9cbiAgICBwdWJsaWMgQU9GUHJvY2Vzc29yKFdyaXRlciB3cml0ZXIsIGludCBidWZmZXJTaXplLCBpbnQgYmF0Y2hTaXplKSB7XG4gICAgICAgIC8vIDEuIOWIneWni+WMlue7hOS7tlxuICAgICAgICB0aGlzLndyaXRlciA9IHdyaXRlcjtcbiAgICAgICAgdGhpcy5idWZmZXJRdWV1ZSA9IG5ldyBEb3VibGVCdWZmZXJCbG9ja2luZ1F1ZXVlKGJ1ZmZlclNpemUpO1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBuZXcgQXRvbWljQm9vbGVhbih0cnVlKTtcbiAgICAgICAgdGhpcy5iYXRjaFNpemUgPSBiYXRjaFNpemU7XG4gICAgICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBVbnBvb2xlZC5kaXJlY3RCdWZmZXIoYmF0Y2hTaXplKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgQU9GUHJvY2Vzc29yKFdyaXRlciB3cml0ZXIsIGludCBidWZmZXJTaXplKSB7XG4gICAgICAgIHRoaXMod3JpdGVyLCBidWZmZXJTaXplLCA0MDk2KTsgLy8g6buY6K6k5om55aSE55CG5aSn5bCP5Li6NEtCXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgYXBwZW5kKFJlc3AgY29tbWFuZCkge1xuICAgICAgICAvLyDlpoLmnpzkuI3lnKjov5DooYznirbmgIHvvIzkuI3lpITnkIblkb3ku6RcbiAgICAgICAgaWYgKCFydW5uaW5nLmdldCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlEZWNvZGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvZGVyO1xuXG5pbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG5pbXBvcnQgaW8ubmV0dHkuaGFuZGxlci5jb2RlYy5CeXRlVG9NZXNzYWdlRGVjb2RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLio7XG5cbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxucHVibGljIGNsYXNzIE15RGVjb2RlciBleHRlbmRzIEJ5dGVUb01lc3NhZ2VEZWNvZGVyIHtcbiAgICBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihNeURlY29kZXIuY2xhc3MpO1xuICAgIEBPdmVycmlkZVxuICAgIHByb3RlY3RlZCB2b2lkIGRlY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBCeXRlQnVmIGluLCBMaXN0PE9iamVjdD4gb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChpbi5yZWFkYWJsZUJ5dGVzKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuW8gOWni+ino+eggVwiKTtcbiAgICAgICAgICAgICAgICAvLyDmoIforrDlvZPliY3or7vlj5bkvY3nva5cbiAgICAgICAgICAgICAgICBpbi5tYXJrUmVhZGVySW5kZXgoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBSZXNwIGRlY29kZWQgPSBSZXNwLmRlY29kZShpbik7XG4gICAgICAgICAgICAgICAgICAgIC8vbG9nZ2VyLmluZm8oXCLop6PnoIHmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgIG91dC5hZGQoZGVjb2RlZCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6Kej56CB5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuaAu+S9k+W8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015UmVzcG9uc2VFbmNvZGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvZGVyO1xuXG5pbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG5pbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWZVdGlsO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuaW1wb3J0IGlvLm5ldHR5LmhhbmRsZXIuY29kZWMuTWVzc2FnZVRvQnl0ZUVuY29kZXI7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG5cbnB1YmxpYyBjbGFzcyBNeVJlc3BvbnNlRW5jb2RlciBleHRlbmRzIE1lc3NhZ2VUb0J5dGVFbmNvZGVyPFJlc3A+IHtcbiAgICBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihNeVJlc3BvbnNlRW5jb2Rlci5jbGFzcyk7XG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZW5jb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgcmVzcCwgQnl0ZUJ1ZiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzcC53cml0ZShyZXNwLCBvdXQpO1xuICAgICAgICAgICAgLy8vL2xvZ2dlci5pbmZvKFwiRW5jb2RlZCByZXNwb25zZTogXCIgKyBCeXRlQnVmVXRpbC5oZXhEdW1wKG91dCkpO1xuICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLnvJbnoIHlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgY3R4LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jbHVzdGVyL0NsdXN0ZXJDbGllbnQuamF2YVxuLi4uXG5cbiAgICBwdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Vm9pZD4gY29ubmVjdCgpIHtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Vm9pZD4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcblxuICAgICAgICBncm91cCA9IG5ldyBOaW9FdmVudExvb3BHcm91cCgpO1xuICAgICAgICBCb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IEJvb3RzdHJhcCgpO1xuICAgICAgICBib290c3RyYXAuZ3JvdXAoZ3JvdXApXG4gICAgICAgICAgICAgICAgLmNoYW5uZWwoTmlvU29ja2V0Q2hhbm5lbC5jbGFzcylcbiAgICAgICAgICAgICAgICAub3B0aW9uKENoYW5uZWxPcHRpb24uQ09OTkVDVF9USU1FT1VUX01JTExJUywgNTAwMClcbiAgICAgICAgICAgICAgICAuaGFuZGxlcihuZXcgQ2hhbm5lbEluaXRpYWxpemVyPFNvY2tldENoYW5uZWw+KCkge1xuICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaW5pdENoYW5uZWwoU29ja2V0Q2hhbm5lbCBjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbm5lbFBpcGVsaW5lIHBpcGVsaW5lID0gY2gucGlwZWxpbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15RGVjb2RlcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15UmVzcG9uc2VFbmNvZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgQ2x1c3RlckNsaWVudEhhbmRsZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25uZWN0V2l0aFJldHJ5KGJvb3RzdHJhcCwgaG9zdCwgcG9ydCwgZnV0dXJlLCAzLCAxMDAwKTtcbiAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL0NvbXByZXNzaW9uQ29lZEMuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBDb21wcmVzc2lvbkNvZWRDIGV4dGVuZHMgQnl0ZVRvTWVzc2FnZUNvZGVjPEJ5dGVCdWY+IHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKENvbXByZXNzaW9uQ29lZEMuY2xhc3MpO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBDT01QUkVTU0lPTl9USFJFU0hPTEQgPSA2NDtcbiAgICBwcml2YXRlIGZpbmFsIExaNENvbXByZXNzb3IgY29tcHJlc3NvcjtcbiAgICBwcml2YXRlIGZpbmFsIExaNEZhc3REZWNvbXByZXNzb3IgZGVjb21wcmVzc29yO1xuXG4gICAgcHVibGljIENvbXByZXNzaW9uQ29lZEMoKSB7XG4gICAgICAgIHRoaXMuY29tcHJlc3NvciA9IExaNEZhY3RvcnkuZmFzdGVzdEluc3RhbmNlKCkuZmFzdENvbXByZXNzb3IoKTtcbiAgICAgICAgdGhpcy5kZWNvbXByZXNzb3IgPSBMWjRGYWN0b3J5LmZhc3Rlc3RJbnN0YW5jZSgpLmZhc3REZWNvbXByZXNzb3IoKTtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCLliJ3lp4vljJbljovnvKnnvJbop6PnoIHlmajvvIzljovnvKnpmIjlgLw6IFwiICsgQ09NUFJFU1NJT05fVEhSRVNIT0xEICsgXCIg5a2X6IqCXCIpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHByb3RlY3RlZCB2b2lkIGVuY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBCeXRlQnVmIG1zZywgQnl0ZUJ1ZiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAvLyDkv53lrZjljp/lp4tyZWFkZXJJbmRleFxuICAgICAgICBpbnQgcmVhZGVySW5kZXggPSBtc2cucmVhZGVySW5kZXgoKTtcbiAgICAgICAgaW50IG9yaWdpbmFsU2l6ZSA9IG1zZy5yZWFkYWJsZUJ5dGVzKCk7XG4uLi5cblxuICAgICAgICAgICAgZmxvYXQgY29tcHJlc3Npb25SYXRpbyA9IChmbG9hdCljb21wcmVzc2VkTGVuZ3RoIC8gb3JpZ2luYWxTaXplICogMTAwO1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oU3RyaW5nLmZvcm1hdChcIuaVsOaNruW3suWOi+e8qTog5Y6f5aeL5aSn5bCPPSVk5a2X6IqCLCDljovnvKnlkI49JWTlrZfoioIsIOWOi+e8qeeOhz0lLjJmJSVcIixcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxTaXplLCBjb21wcmVzc2VkTGVuZ3RoLCBjb21wcmVzc2lvblJhdGlvKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDmnKrljovnvKnnmoTmg4XlhrVcbiAgICAgICAgICAgIG91dC53cml0ZUJ5dGUoMCk7XG4gICAgICAgICAgICBvdXQud3JpdGVJbnQob3JpZ2luYWxTaXplKTtcbiAgICAgICAgICAgIG91dC53cml0ZUJ5dGVzKG1zZywgcmVhZGVySW5kZXgsIG9yaWdpbmFsU2l6ZSk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5pWw5o2u5pyq5Y6L57ypOiDlpKflsI89XCIgKyBvcmlnaW5hbFNpemUgKyBcIuWtl+iKgiAo5bCP5LqO6ZiI5YC8KVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmnInotrPlpJ/nmoTmlbDmja7mnaXor7vlj5bmoIforrBcbiAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGluLm1hcmtSZWFkZXJJbmRleCgpO1xuXG4gICAgICAgIC8vIOivu+WPluWOi+e8qeagh+iusFxuICAgICAgICBieXRlIGlzQ29tcHJlc3NlZCA9IGluLnJlYWRCeXRlKCk7XG4uLi5cblxuICAgICAgICAgICAgLy8g6K+75Y+W5Y6L57yp5pWw5o2uXG4gICAgICAgICAgICBieXRlW10gY29tcHJlc3NlZCA9IG5ldyBieXRlW2NvbXByZXNzZWRMZW5ndGhdO1xuICAgICAgICAgICAgaW4ucmVhZEJ5dGVzKGNvbXByZXNzZWQpO1xuXG4gICAgICAgICAgICAvLyDop6PljovnvKnmlbDmja5cbiAgICAgICAgICAgIGJ5dGVbXSBkZWNvbXByZXNzZWQgPSBuZXcgYnl0ZVtvcmlnaW5hbExlbmd0aF07XG4gICAgICAgICAgICBkZWNvbXByZXNzb3IuZGVjb21wcmVzcyhjb21wcmVzc2VkLCAwLCBkZWNvbXByZXNzZWQsIDAsIG9yaWdpbmFsTGVuZ3RoKTtcblxuICAgICAgICAgICAgLy8g5Yib5bu66Kej5Y6L5ZCO55qEIEJ5dGVCdWZcbiAgICAgICAgICAgIEJ5dGVCdWYgcmVzdWx0ID0gY3R4LmFsbG9jKCkuYnVmZmVyKG9yaWdpbmFsTGVuZ3RoKTtcbiAgICAgICAgICAgIHJlc3VsdC53cml0ZUJ5dGVzKGRlY29tcHJlc3NlZCwgMCwgb3JpZ2luYWxMZW5ndGgpO1xuICAgICAgICAgICAgb3V0LmFkZChyZXN1bHQpO1xuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhTdHJpbmcuZm9ybWF0KFwi5pWw5o2u5bey6Kej5Y6L57ypOiDljovnvKnlpKflsI89JWTlrZfoioIsIOino+WOi+WQjj0lZOWtl+iKglwiLFxuICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2VkTGVuZ3RoLCBvcmlnaW5hbExlbmd0aCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g6ZyA6KaB6K+75Y+W5pyq5Y6L57yp6ZW/5bqmXG4gICAgICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpIDwgNCkge1xuICAgICAgICAgICAgICAgIGluLnJlc2V0UmVhZGVySW5kZXgoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOivu+WPluacquWOi+e8qemVv+W6plxuICAgICAgICAgICAgaW50IGxlbmd0aCA9IGluLnJlYWRJbnQoKTtcblxuICAgICAgICAgICAgLy8g56Gu5L+d5pyJ6Laz5aSf55qE5pWw5o2uXG4gICAgICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaW4ucmVzZXRSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvcHJvdG9jYWwvRXJyb3JzLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnByb3RvY2FsO1xuXG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcblxucHVibGljIGNsYXNzIEVycm9ycyBleHRlbmRzIFJlc3BcbntcbiAgICBTdHJpbmcgY29udGVudDtcblxuICAgIHB1YmxpYyBFcnJvcnMoU3RyaW5nIGNvbnRlbnQpXG4gICAge1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q29udGVudCgpXG4gICAge1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCB3cml0ZShSZXNwIHJlc3AsIEJ5dGVCdWYgYnVmZmVyKSB7XG4gICAgICAgIGJ1ZmZlci53cml0ZUJ5dGUoKGJ5dGUpICctJyk7XG4gICAgICAgIFN0cmluZyBjb250ZW50ICAgPSAoKEVycm9ycykgcmVzcCkuZ2V0Q29udGVudCgpO1xuICAgICAgICBjaGFyW10gY2hhckFycmF5ID0gY29udGVudC50b0NoYXJBcnJheSgpO1xuICAgICAgICBmb3IgKGNoYXIgZWFjaCA6IGNoYXJBcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgYnVmZmVyLndyaXRlQnl0ZSgoYnl0ZSkgZWFjaCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLndyaXRlQnl0ZSgoYnl0ZSkgJ1xccicpO1xuICAgICAgICBidWZmZXIud3JpdGVCeXRlKChieXRlKSAnXFxuJyk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9wcm90b2NhbC9TaW1wbGVTdHJpbmcuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTgucHJvdG9jYWw7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcblxucHVibGljIGNsYXNzIFNpbXBsZVN0cmluZyBleHRlbmRzIFJlc3BcbntcbiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFNpbXBsZVN0cmluZyBPSyA9IG5ldyBTaW1wbGVTdHJpbmcoXCJPS1wiKTtcbiAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBjb250ZW50O1xuXG4gICAgcHVibGljIFNpbXBsZVN0cmluZyhTdHJpbmcgY29udGVudClcbiAgICB7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIFN0cmluZyBnZXRDb250ZW50KClcbiAgICB7XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbiAgICBwdWJsaWMgIHZvaWQgd3JpdGUoUmVzcCByZXNwLCBCeXRlQnVmIGJ1ZmZlcilcbiAgICB7XG4gICAgICAgIGJ1ZmZlci53cml0ZUJ5dGUoKGJ5dGUpICcrJyk7XG4gICAgICAgIFN0cmluZyBjb250ZW50ICAgPSAoKFNpbXBsZVN0cmluZykgcmVzcCkuZ2V0Q29udGVudCgpO1xuICAgICAgICBjaGFyW10gY2hhckFycmF5ID0gY29udGVudC50b0NoYXJBcnJheSgpO1xuICAgICAgICBmb3IgKGNoYXIgZWFjaCA6IGNoYXJBcnJheSlcbiAgICAgICAge1xuICAgICAgICAgICAgYnVmZmVyLndyaXRlQnl0ZSgoYnl0ZSkgZWFjaCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLndyaXRlQnl0ZSgoYnl0ZSkgJ1xccicpO1xuICAgICAgICBidWZmZXIuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19fSwiZHJhZnRFeGNoYW5nZSI6eyJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIn1dfSwic3RhdHVzIjoiZHJhZnQifSwiZHJhZnRBY3RpdmVDb250ZXh0SWRzIjpbIi86TDUtMjMiLCJGOi9IdWFSZWRpcy9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9zZXJ2ZXIvTXlSZWRpc1NlcnZpY2UuamF2YSIsIi9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeVJlc3BvbnNlRW5jb2Rlci5qYXZhIiwiL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL0NvbXByZXNzaW9uQ29lZEMuamF2YSIsIi9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YSIsIi9zcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmEiLCJGOi9IdWFSZWRpc2ZhbHNlZmFsc2UiLCJ1c2VyR3VpZGVsaW5lcyIsImFnZW50TWVtb3JpZXMiXSwicmVxdWVzdElkcyI6W10sImlzUGlubmVkIjpmYWxzZSwiaXNTaGFyZWFibGUiOnRydWUsImV4dHJhRGF0YSI6eyJpc0FnZW50Q29udmVyc2F0aW9uIjp0cnVlLCJoYXNEaXJ0eUVkaXRzIjp0cnVlLCJiYXNlbGluZVRpbWVzdGFtcCI6MTc0NjIxNjE5MTI5MX0sInBlcnNvbmFUeXBlIjowfSwiMjQyMDA3ZTktYTg2MS00MzYwLWJjN2UtOTdiMzdhZDk0MDJlIjp7ImlkIjoiMjQyMDA3ZTktYTg2MS00MzYwLWJjN2UtOTdiMzdhZDk0MDJlIiwiY3JlYXRlZEF0SXNvIjoiMjAyNS0wNS0wMlQyMDo0OTowNS43NjZaIiwibGFzdEludGVyYWN0ZWRBdElzbyI6IjIwMjUtMDUtMDJUMjA6NTQ6MzIuMjQ0WiIsImNoYXRIaXN0b3J5IjpbeyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjYxMjdlODI3LTE2MTUtNGM4My04MTc1LWNkOWU1OWZiMzA4MiIsInJlcXVlc3RfbWVzc2FnZSI6IuaIkeeahOS7o+eggeacrOi6q+aYr+S4gOS4qmphdmHniYjmnKznmoRyZWRpc+acjeWKoeerryDlnKjkvb/nlKjlrpjmlrnlrqLmiLfnq69jdHJsY+aWreW8gOi/nuaOpeeahOaXtuWAmSDmnI3liqHnq6/kvJrmiqXplJkgW2ZyYW1lXSAyMDI1LTA1LTAzIDA0OjQ4OjQ5LDE3NiAtIDEyNDU2IEVSUk9SIFtyZWRpcy1jbWQtNC0xXSBzaXRlLmhuZnkyNTguY29kZXIuTXlDb21tYW5kSGFuZGxlcjoxNDcgIC0gRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXHJcbmphdmEuaW8uSU9FeGNlcHRpb246IOi/nOeoi+S4u+acuuW8uui/q+WFs+mXreS6huS4gOS4queOsOacieeahOi/nuaOpeOAglxyXG5cdGF0IHN1bi5uaW8uY2guU29ja2V0RGlzcGF0Y2hlci5yZWFkMChOYXRpdmUgTWV0aG9kKVxyXG5cdGF0IHN1bi5uaW8uY2guU29ja2V0RGlzcGF0Y2hlci5yZWFkKFNvY2tldERpc3BhdGNoZXIuamF2YTo0MylcclxuXHRhdCBzdW4ubmlvLmNoLklPVXRpbC5yZWFkSW50b05hdGl2ZUJ1ZmZlcihJT1V0aWwuamF2YToyMjMpXHJcblx0YXQgc3VuLm5pby5jaC5JT1V0aWwucmVhZChJT1V0aWwuamF2YToxOTIpXHJcblx0YXQgc3VuLm5pby5jaC5Tb2NrZXRDaGFubmVsSW1wbC5yZWFkKFNvY2tldENoYW5uZWxJbXBsLmphdmE6Mzc5KVxyXG5cdGF0IGlvLm5ldHR5LmJ1ZmZlci5Qb29sZWRCeXRlQnVmLnNldEJ5dGVzKFBvb2xlZEJ5dGVCdWYuamF2YToyNTMpXHJcblx0YXQgaW8ubmV0dHkuYnVmZmVyLkFic3RyYWN0Qnl0ZUJ1Zi53cml0ZUJ5dGVzKEFic3RyYWN0Qnl0ZUJ1Zi5qYXZhOjExMzMpXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5zb2NrZXQubmlvLk5pb1NvY2tldENoYW5uZWwuZG9SZWFkQnl0ZXMoTmlvU29ja2V0Q2hhbm5lbC5qYXZhOjM1MClcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5BYnN0cmFjdE5pb0J5dGVDaGFubmVsJE5pb0J5dGVVbnNhZmUucmVhZChBYnN0cmFjdE5pb0J5dGVDaGFubmVsLmphdmE6MTQ4KVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcC5wcm9jZXNzU2VsZWN0ZWRLZXkoTmlvRXZlbnRMb29wLmphdmE6NzE0KVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcC5wcm9jZXNzU2VsZWN0ZWRLZXlzT3B0aW1pemVkKE5pb0V2ZW50TG9vcC5qYXZhOjY1MClcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucHJvY2Vzc1NlbGVjdGVkS2V5cyhOaW9FdmVudExvb3AuamF2YTo1NzYpXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnJ1bihOaW9FdmVudExvb3AuamF2YTo0OTMpXHJcblx0YXQgaW8ubmV0dHkudXRpbC5jb25jdXJyZW50LlNpbmdsZVRocmVhZEV2ZW50RXhlY3V0b3IkNC5ydW4oU2luZ2xlVGhyZWFkRXZlbnRFeGVjdXRvci5qYXZhOjk4OSlcclxuXHRhdCBpby5uZXR0eS51dGlsLmludGVybmFsLlRocmVhZEV4ZWN1dG9yTWFwJDIucnVuKFRocmVhZEV4ZWN1dG9yTWFwLmphdmE6NzQpXHJcblx0YXQgaW8ubmV0dHkudXRpbC5jb25jdXJyZW50LkZhc3RUaHJlYWRMb2NhbFJ1bm5hYmxlLnJ1bihGYXN0VGhyZWFkTG9jYWxSdW5uYWJsZS5qYXZhOjMwKVxyXG5cdGF0IGphdmEubGFuZy5UaHJlYWQucnVuKFRocmVhZC5qYXZhOjc1MCkg5L2g6K6k5Li65piv5LuA5LmI5Y6f5ZugIOaAjuS5iOS/ruWkjeWRoiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiLmiJHnmoTku6PnoIHmnKzouqvmmK/kuIDkuKpqYXZh54mI5pys55qEcmVkaXPmnI3liqHnq68g5Zyo5L2/55So5a6Y5pa55a6i5oi356uvY3RybGPmlq3lvIDov57mjqXnmoTml7blgJkg5pyN5Yqh56uv5Lya5oql6ZSZIFtmcmFtZV0gMjAyNS0wNS0wMyAwNDo0ODo0OSwxNzYgLSAxMjQ1NiBFUlJPUiBbcmVkaXMtY21kLTQtMV0gc2l0ZS5obmZ5MjU4LmNvZGVyLk15Q29tbWFuZEhhbmRsZXI6MTQ3ICAtIEVycm9yIGluIGNvbW1hbmQgaGFuZGxlclxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJqYXZhLmlvLklPRXhjZXB0aW9uOiDov5znqIvkuLvmnLrlvLrov6vlhbPpl63kuobkuIDkuKrnjrDmnInnmoTov57mjqXjgIJcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBzdW4ubmlvLmNoLlNvY2tldERpc3BhdGNoZXIucmVhZDAoTmF0aXZlIE1ldGhvZClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBzdW4ubmlvLmNoLlNvY2tldERpc3BhdGNoZXIucmVhZChTb2NrZXREaXNwYXRjaGVyLmphdmE6NDMpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgc3VuLm5pby5jaC5JT1V0aWwucmVhZEludG9OYXRpdmVCdWZmZXIoSU9VdGlsLmphdmE6MjIzKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IHN1bi5uaW8uY2guSU9VdGlsLnJlYWQoSU9VdGlsLmphdmE6MTkyKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IHN1bi5uaW8uY2guU29ja2V0Q2hhbm5lbEltcGwucmVhZChTb2NrZXRDaGFubmVsSW1wbC5qYXZhOjM3OSlcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS5idWZmZXIuUG9vbGVkQnl0ZUJ1Zi5zZXRCeXRlcyhQb29sZWRCeXRlQnVmLmphdmE6MjUzKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LmJ1ZmZlci5BYnN0cmFjdEJ5dGVCdWYud3JpdGVCeXRlcyhBYnN0cmFjdEJ5dGVCdWYuamF2YToxMTMzKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LmNoYW5uZWwuc29ja2V0Lm5pby5OaW9Tb2NrZXRDaGFubmVsLmRvUmVhZEJ5dGVzKE5pb1NvY2tldENoYW5uZWwuamF2YTozNTApXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uQWJzdHJhY3ROaW9CeXRlQ2hhbm5lbCROaW9CeXRlVW5zYWZlLnJlYWQoQWJzdHJhY3ROaW9CeXRlQ2hhbm5lbC5qYXZhOjE0OClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucHJvY2Vzc1NlbGVjdGVkS2V5KE5pb0V2ZW50TG9vcC5qYXZhOjcxNClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucHJvY2Vzc1NlbGVjdGVkS2V5c09wdGltaXplZChOaW9FdmVudExvb3AuamF2YTo2NTApXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnByb2Nlc3NTZWxlY3RlZEtleXMoTmlvRXZlbnRMb29wLmphdmE6NTc2KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcC5ydW4oTmlvRXZlbnRMb29wLmphdmE6NDkzKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5TaW5nbGVUaHJlYWRFdmVudEV4ZWN1dG9yJDQucnVuKFNpbmdsZVRocmVhZEV2ZW50RXhlY3V0b3IuamF2YTo5ODkpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgaW8ubmV0dHkudXRpbC5pbnRlcm5hbC5UaHJlYWRFeGVjdXRvck1hcCQyLnJ1bihUaHJlYWRFeGVjdXRvck1hcC5qYXZhOjc0KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5GYXN0VGhyZWFkTG9jYWxSdW5uYWJsZS5ydW4oRmFzdFRocmVhZExvY2FsUnVubmFibGUuamF2YTozMClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQuamF2YTo3NTApIOS9oOiupOS4uuaYr+S7gOS5iOWOn+WboCDmgI7kuYjkv67lpI3lkaIifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTR3ZTZkV20xRkFVV3FRbUVNVFFSWGMiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIE15Q29tbWFuZEhhbmRsZXIgY2xhc3MsIGVzcGVjaWFsbHkgYXJvdW5kIGxpbmUgMTQ3IHdoZXJlIHRoZSBlcnJvciBpcyBvY2N1cnJpbmcuIExvb2sgZm9yIGhvdyBpdCBoYW5kbGVzIGNsaWVudCBjb25uZWN0aW9ucyBhbmQgY29tbWFuZCBwcm9jZXNzaW5nLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgZGlhZ25vc2UgYW5kIGZpeCB0aGUgZXJyb3IgdGhhdCBvY2N1cnMgd2hlbiBhIGNsaWVudCBkaXNjb25uZWN0cyB1c2luZyBDdHJsK0MuIExldCBtZSBnYXRoZXIgc29tZSBpbmZvcm1hdGlvbiBhYm91dCB5b3VyIGNvZGUgZmlyc3QgdG8gdW5kZXJzdGFuZCBob3cgeW91ciBSZWRpcyBzZXJ2ZXIgaGFuZGxlcyBjb25uZWN0aW9ucyBhbmQgY29tbWFuZCBwcm9jZXNzaW5nLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiLmiJHnmoTku6PnoIHmnKzouqvmmK/kuIDkuKpqYXZh54mI5pys55qEcmVkaXPmnI3liqHnq68g5Zyo5L2/55So5a6Y5pa55a6i5oi356uvY3RybGPmlq3lvIDov57mjqXnmoTml7blgJkg5pyN5Yqh56uv5Lya5oql6ZSZIFtmcmFtZV0gMjAyNS0wNS0wMyAwNDo0ODo0OSwxNzYgLSAxMjQ1NiBFUlJPUiBbcmVkaXMtY21kLTQtMV0gc2l0ZS5obmZ5MjU4LmNvZGVyLk15Q29tbWFuZEhhbmRsZXI6MTQ3ICAtIEVycm9yIGluIGNvbW1hbmQgaGFuZGxlclxyXG5qYXZhLmlvLklPRXhjZXB0aW9uOiDov5znqIvkuLvmnLrlvLrov6vlhbPpl63kuobkuIDkuKrnjrDmnInnmoTov57mjqXjgIJcclxuXHRhdCBzdW4ubmlvLmNoLlNvY2tldERpc3BhdGNoZXIucmVhZDAoTmF0aXZlIE1ldGhvZClcclxuXHRhdCBzdW4ubmlvLmNoLlNvY2tldERpc3BhdGNoZXIucmVhZChTb2NrZXREaXNwYXRjaGVyLmphdmE6NDMpXHJcblx0YXQgc3VuLm5pby5jaC5JT1V0aWwucmVhZEludG9OYXRpdmVCdWZmZXIoSU9VdGlsLmphdmE6MjIzKVxyXG5cdGF0IHN1bi5uaW8uY2guSU9VdGlsLnJlYWQoSU9VdGlsLmphdmE6MTkyKVxyXG5cdGF0IHN1bi5uaW8uY2guU29ja2V0Q2hhbm5lbEltcGwucmVhZChTb2NrZXRDaGFubmVsSW1wbC5qYXZhOjM3OSlcclxuXHRhdCBpby5uZXR0eS5idWZmZXIuUG9vbGVkQnl0ZUJ1Zi5zZXRCeXRlcyhQb29sZWRCeXRlQnVmLmphdmE6MjUzKVxyXG5cdGF0IGlvLm5ldHR5LmJ1ZmZlci5BYnN0cmFjdEJ5dGVCdWYud3JpdGVCeXRlcyhBYnN0cmFjdEJ5dGVCdWYuamF2YToxMTMzKVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwuc29ja2V0Lm5pby5OaW9Tb2NrZXRDaGFubmVsLmRvUmVhZEJ5dGVzKE5pb1NvY2tldENoYW5uZWwuamF2YTozNTApXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uQWJzdHJhY3ROaW9CeXRlQ2hhbm5lbCROaW9CeXRlVW5zYWZlLnJlYWQoQWJzdHJhY3ROaW9CeXRlQ2hhbm5lbC5qYXZhOjE0OClcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucHJvY2Vzc1NlbGVjdGVkS2V5KE5pb0V2ZW50TG9vcC5qYXZhOjcxNClcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucHJvY2Vzc1NlbGVjdGVkS2V5c09wdGltaXplZChOaW9FdmVudExvb3AuamF2YTo2NTApXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnByb2Nlc3NTZWxlY3RlZEtleXMoTmlvRXZlbnRMb29wLmphdmE6NTc2KVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcC5ydW4oTmlvRXZlbnRMb29wLmphdmE6NDkzKVxyXG5cdGF0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5TaW5nbGVUaHJlYWRFdmVudEV4ZWN1dG9yJDQucnVuKFNpbmdsZVRocmVhZEV2ZW50RXhlY3V0b3IuamF2YTo5ODkpXHJcblx0YXQgaW8ubmV0dHkudXRpbC5pbnRlcm5hbC5UaHJlYWRFeGVjdXRvck1hcCQyLnJ1bihUaHJlYWRFeGVjdXRvck1hcC5qYXZhOjc0KVxyXG5cdGF0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5GYXN0VGhyZWFkTG9jYWxSdW5uYWJsZS5ydW4oRmFzdFRocmVhZExvY2FsUnVubmFibGUuamF2YTozMClcclxuXHRhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQuamF2YTo3NTApIOS9oOiupOS4uuaYr+S7gOS5iOWOn+WboCDmgI7kuYjkv67lpI3lkaIifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6NDk6NDEuOTIxWiIsInJlc3BvbnNlX3RleHQiOiJJJ2xsIGhlbHAgeW91IGRpYWdub3NlIGFuZCBmaXggdGhlIGVycm9yIHRoYXQgb2NjdXJzIHdoZW4gYSBjbGllbnQgZGlzY29ubmVjdHMgdXNpbmcgQ3RybCtDLiBMZXQgbWUgZ2F0aGVyIHNvbWUgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBjb2RlIGZpcnN0IHRvIHVuZGVyc3RhbmQgaG93IHlvdXIgUmVkaXMgc2VydmVyIGhhbmRsZXMgY29ubmVjdGlvbnMgYW5kIGNvbW1hbmQgcHJvY2Vzc2luZy5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI5ZWVmMzE2My02OWI4LTQwYWYtYTQ0NC00YmQ4YmFjMmY2NWQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE5S0hubnlQYmZOZWo0bnhrMlJ2Szd3IiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0aGUgTmV0dHkgcGlwZWxpbmUgaXMgc2V0IHVwIGFuZCBob3cgY2hhbm5lbCBldmVudHMgbGlrZSBkaXNjb25uZWN0aW9uIGFyZSBoYW5kbGVkLiBMb29rIGZvciBhbnkgY2hhbm5lbCBsaWZlY3ljbGUgbWV0aG9kcyBsaWtlIGNoYW5uZWxJbmFjdGl2ZSBvciBjaGFubmVsVW5yZWdpc3RlcmVkIGluIHRoZSBjb2RlYmFzZS5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgYWxzbyBjaGVjayBob3cgTmV0dHkgaGFuZGxlcyBjb25uZWN0aW9ucyBhbmQgY2hhbm5lbCBldmVudHMgaW4geW91ciBSZWRpcyBpbXBsZW1lbnRhdGlvbjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEudXRpbC5FbnVtU2V0O1xuaW1wb3J0IGphdmEudXRpbC5TZXQ7XG5cbkBDaGFubmVsSGFuZGxlci5TaGFyYWJsZVxucHVibGljIGNsYXNzIE15Q29tbWFuZEhhbmRsZXIgZXh0ZW5kcyBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI8UmVzcD4ge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15Q29tbWFuZEhhbmRsZXIuY2xhc3MpO1xuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcjtcblxuICAgIC8vIOS9v+eUqEVudW1TZXTmj5Dpq5jmn6Xmib7mlYjnjodcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTZXQ8Q29tbWFuZFR5cGU+IFdSSVRFX0NPTU1BTkRTID0gRW51bVNldC5vZihcbiAgICAgICAgICAgIENvbW1hbmRUeXBlLlNFVCwgQ29tbWFuZFR5cGUuREVMLCBDb21tYW5kVHlwZS5JTkNSLCBDb21tYW5kVHlwZS5NU0VULFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuRVhQSVJFLCBDb21tYW5kVHlwZS5TQURELCBDb21tYW5kVHlwZS5TUkVNLCBDb21tYW5kVHlwZS5TUE9QLFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuSFNFVCwgQ29tbWFuZFR5cGUuSE1FU1QsIENvbW1hbmRUeXBlLkhERUwsXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5MUFVTSCwgQ29tbWFuZFR5cGUuUlBVU0gsIENvbW1hbmRUeXBlLkxQT1AsIENvbW1hbmRUeXBlLlJQT1AsIENvbW1hbmRUeXBlLkxSRU0sXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5aQURELCBDb21tYW5kVHlwZS5aUkVNLENvbW1hbmRUeXBlLlNFTEVDVFxuICAgICk7XG5cbiAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlcihSZWRpc0NvcmUgcmVkaXNDb3JlLCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXIsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcikge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICAgICAgdGhpcy5hb2ZIYW5kbGVyID0gYW9mSGFuZGxlcjtcbiAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gcmRiSGFuZGxlcjtcblxuXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgICAgIGlmIChtc2cgaW5zdGFuY2VvZiBSZXNwQXJyYXkpIHtcbiAgICAgICAgICAgIFJlc3BBcnJheSBhcnJheSA9IChSZXNwQXJyYXkpIG1zZztcbiAgICAgICAgICAgIFJlc3AgcmVzcG9uc2UgPSBwcm9jZXNzQ29tbWFuZChhcnJheSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biByZXF1ZXN0IHR5cGVcIikpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIFJlc3AgcHJvY2Vzc0NvbW1hbmQoUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICBpZiAoY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIGVtcHR5IGNvbW1hbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVzcFtdIGFycmF5ID0gY29tbWFuZEFycmF5LmdldEFycmF5KCk7XG4gICAgICAgICAgICBTdHJpbmcgY29tbWFuZE5hbWUgPSAoKEJ1bGtTdHJpbmcpIGFycmF5WzBdKS5nZXRDb250ZW50KCkudG9VdGY4U3RyaW5nKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIENvbW1hbmRUeXBlIGNvbW1hbmRUeXBlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbW1hbmRUeXBlID0gQ29tbWFuZFR5cGUudmFsdWVPZihjb21tYW5kTmFtZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gY29tbWFuZCAnXCIgKyBjb21tYW5kTmFtZSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNob3VsZEhhbmRsZUluQ2x1c3Rlcihjb21tYW5kVHlwZSwgY29tbWFuZEFycmF5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDbHVzdGVyQ29tbWFuZChjb21tYW5kVHlwZSwgY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQ29tbWFuZCBjb21tYW5kID0gY29tbWFuZFR5cGUuZ2V0U3VwcGxpZXIoKS5hcHBseShyZWRpc0NvcmUpO1xuICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGFycmF5KTtcblxuICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuXG4gICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBhcnJheS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmRiSGFuZGxlci5ub3RpZnlEYXRhQ2hhbmdlZChyZWRpc0NvcmUuZ2V0Q3VycmVudERCKCkuZ2V0SWQoKSwgKChCdWxrU3RyaW5nKSBhcnJheVsxXSkuZ2V0Q29udGVudCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5aaC5p6c5ZCv55So5LqGQU9G77yM6K6w5b2V5ZG95LukXG4gICAgICAgICAgIGlmIChhb2ZIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpKXtcbiAgICAgICAgICAgICAgICBhb2ZIYW5kbGVyLmFwcGVuZChjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBjb21tYW5kXCIsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGJvb2xlYW4gc2hvdWxkSGFuZGxlSW5DbHVzdGVyKENvbW1hbmRUeXBlIGNvbW1hbmRUeXBlLCBSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGNsdXN0ZXIgIT0gbnVsbCAmJiBjbHVzdGVyLmlzU2hhcmRpbmdFbmFibGVkKCkgJiZcbiAgICAgICAgICAgICAgICAoY29tbWFuZFR5cGUgPT0gQ29tbWFuZFR5cGUuR0VUIHx8IGNvbW1hbmRUeXBlID09IENvbW1hbmRUeXBlLlNFVCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBSZXNwIGhhbmRsZUNsdXN0ZXJDb21tYW5kKENvbW1hbmRUeXBlIGNvbW1hbmRUeXBlLCBSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgICAgICAgQnl0ZXNXcmFwcGVyIGtleSA9ICgoQnVsa1N0cmluZykgY29tbWFuZEFycmF5LmdldEFycmF5KClbMV0pLmdldENvbnRlbnQoKTtcbiAgICAgICAgU3RyaW5nIHRhcmdldE5vZGVJZCA9IGNsdXN0ZXIuZ2V0Tm9kZUZvcktleShrZXkpO1xuICAgICAgICBTdHJpbmcgY3VycmVudE5vZGVJZCA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDdXJyZW50Tm9kZSgpLmdldElkKCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnROb2RlSWQuZXF1YWxzKHRhcmdldE5vZGVJZCkpIHtcbiAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKSk7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG5cbiAgICAgICAgICAgIC8vIOehruS/neacrOWcsOaJp+ihjOaXtuS5n+inpuWPkVJEQlxuICAgICAgICAgICAgaWYgKHJkYkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkgJiYgY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksIGtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGZvcndhcmRUb1RhcmdldE5vZGUodGFyZ2V0Tm9kZUlkLCBjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgUmVzcCBmb3J3YXJkVG9UYXJnZXROb2RlKFN0cmluZyB0YXJnZXROb2RlSWQsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOiOt+WPluebruagh+iKgueCueeahOacjeWKoeWunuS+i1xuICAgICAgICAgICAgUmVkaXNDbHVzdGVyIGNsdXN0ZXIgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q2x1c3RlcigpO1xuICAgICAgICAgICAgTXlSZWRpc1NlcnZpY2UgdGFyZ2V0U2VydmljZSA9IGNsdXN0ZXIuZ2V0Tm9kZSh0YXJnZXROb2RlSWQpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0U2VydmljZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8g6L2s5Y+R5ZG95Luk5Yiw55uu5qCH6IqC54K5XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdGFyZ2V0IG5vZGUgbm90IGF2YWlsYWJsZTogXCIgKyB0YXJnZXROb2RlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZm9yd2FyZGluZyBjb21tYW5kIHRvIG5vZGUgXCIgKyB0YXJnZXROb2RlSWQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFRocm93YWJsZSBjYXVzZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIFwiICsgY2F1c2UuZ2V0TWVzc2FnZSgpKSk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9zZXJ2ZXIvTXlSZWRpc1NlcnZpY2UuamF2YVxuLi4uXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuRGVmYXVsdENoYW5uZWxTZWxlY3RTdHJhdGVneTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5Mb2NhbENoYW5uZWxPcHRpb247XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDtcbi4uLlxuXG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgcG9ydDtcbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBMb2NhbENoYW5uZWxPcHRpb24gY2hhbm5lbE9wdGlvbjtcbiAgICBwcml2YXRlIGZpbmFsIEV2ZW50RXhlY3V0b3JHcm91cCBjb21tYW5kRXhlY3V0b3I7XG4gICAgcHJpdmF0ZSBmaW5hbCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJIYW5kbGVyIHJkYkhhbmRsZXI7XG5cbiAgICBwcml2YXRlIENoYW5uZWwgc2VydmVyQ2hhbm5lbDtcbiAgICBwcml2YXRlIEV2ZW50TG9vcEdyb3VwIGJvc3NHcm91cDtcbiAgICBwcml2YXRlIEV2ZW50TG9vcEdyb3VwIHdvcmtlckdyb3VwO1xuXG4gICAgLy8g5re75Yqg5pa55rOV566h55CG6ZuG576k6L+e5o6lXG4gICAgcHVibGljIHZvaWQgYWRkQ2x1c3RlckNsaWVudChTdHJpbmcgbm9kZUlkLCBDbHVzdGVyQ2xpZW50IGNsaWVudCkge1xuICAgICAgICBjbHVzdGVyQ2xpZW50cy5wdXQobm9kZUlkLCBjbGllbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBDbHVzdGVyQ2xpZW50IGdldENsdXN0ZXJDbGllbnQoU3RyaW5nIG5vZGVJZCkge1xuICAgICAgICByZXR1cm4gY2x1c3RlckNsaWVudHMuZ2V0KG5vZGVJZCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q2x1c3RlcihSZWRpc0NsdXN0ZXIgY2x1c3Rlcikge1xuICAgICAgICB0aGlzLmNsdXN0ZXIgPSBjbHVzdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBSZWRpc0NsdXN0ZXIgZ2V0Q2x1c3RlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2x1c3RlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDdXJyZW50Tm9kZShDbHVzdGVyTm9kZSBub2RlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBub2RlO1xuICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAvLyDliJvlu7rnu5/kuIDnmoTlkb3ku6TlpITnkIblmahcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEhhbmRsZXIgPSBuZXcgTXlDb21tYW5kSGFuZGxlcihyZWRpc0NvcmUsIGFvZkhhbmRsZXIsIHJkYkhhbmRsZXIpO1xuXG4gICAgICAgICAgICBTZXJ2ZXJCb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IFNlcnZlckJvb3RzdHJhcCgpO1xuICAgICAgICAgICAgYm9vdHN0cmFwLmdyb3VwKGJvc3NHcm91cCwgd29ya2VyR3JvdXApXG4gICAgICAgICAgICAgICAgICAgIC5jaGFubmVsKGNoYW5uZWxPcHRpb24uZ2V0Q2hhbm5lbENsYXNzKCkpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLlNPX0tFRVBBTElWRSwgdHJ1ZSkuXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uKENoYW5uZWxPcHRpb24uVENQX05PREVMQVksIHRydWUpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLkFMTE9DQVRPUiwgUG9vbGVkQnl0ZUJ1ZkFsbG9jYXRvci5ERUZBVUxUKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGRIYW5kbGVyKG5ldyBDaGFubmVsSW5pdGlhbGl6ZXI8U29ja2V0Q2hhbm5lbD4oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RlY3RlZCB2b2lkIGluaXRDaGFubmVsKFNvY2tldENoYW5uZWwgY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFubmVsUGlwZWxpbmUgcGlwZWxpbmUgPSBjaC5waXBlbGluZSgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeURlY29kZXIoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeVJlc3BvbnNlRW5jb2RlcigpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEVOQUJMRV9DT01QUkVTU0lPTil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IENvbXByZXNzaW9uQ29lZEMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QoY29tbWFuZEV4ZWN1dG9yLCBjb21tYW5kSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuLi4uXG5cbiAgICBwdWJsaWMgdm9pZCBzZW5kTWVzc2FnZVRvTm9kZShTdHJpbmcgdG9Ob2RlSWQsIFJlc3AgbWVzc2FnZSkge1xuICAgICAgICBDbHVzdGVyQ2xpZW50IGNsaWVudCA9IGNsdXN0ZXJDbGllbnRzLmdldCh0b05vZGVJZCk7XG4gICAgICAgIGlmIChjbGllbnQgIT0gbnVsbCAmJiBjbGllbnQuaXNBY3RpdmUoKSkgeyAgLy8g56Gu5L+d6L+e5o6l5rS76LeDXG4gICAgICAgICAgICBjbGllbnQuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJObyBhY3RpdmUgY29ubmVjdGlvbiB0byBub2RlIFwiICsgdG9Ob2RlSWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIE15UmVkaXNTZXJ2aWNlIGdldFJlZGlzU2VydmljZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlZGlzQ29yZSBnZXRSZWRpc0NvcmUoKSB7XG4gICAgICAgIHJldHVybiByZWRpc0NvcmU7XG4gICAgfVxuXG4gICAgcHVibGljIGludCBnZXRQb3J0KCkge1xuICAgICAgICByZXR1cm4gcG9ydDtcbiAgICB9XG5cbiAgICBwdWJsaWMgUmVzcCBleGVjdXRlQ29tbWFuZChSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kSGFuZGxlci5wcm9jZXNzQ29tbWFuZChjb21tYW5kQXJyYXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBDbHVzdGVyTm9kZSBnZXRDdXJyZW50Tm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudE5vZGU7XG4gICAgfVxuXG4gICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIgZ2V0Q29tbWFuZEhhbmRsZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmRIYW5kbGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBBT0ZIYW5kbGVyIGdldEFvZkhhbmRsZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFvZkhhbmRsZXI7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jbHVzdGVyL0NsdXN0ZXJDbGllbnQuamF2YVxuLi4uXG5cbiAgICBwdWJsaWMgQ29tcGxldGFibGVGdXR1cmU8Vm9pZD4gY29ubmVjdCgpIHtcbiAgICAgICAgQ29tcGxldGFibGVGdXR1cmU8Vm9pZD4gZnV0dXJlID0gbmV3IENvbXBsZXRhYmxlRnV0dXJlPD4oKTtcblxuICAgICAgICBncm91cCA9IG5ldyBOaW9FdmVudExvb3BHcm91cCgpO1xuICAgICAgICBCb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IEJvb3RzdHJhcCgpO1xuICAgICAgICBib290c3RyYXAuZ3JvdXAoZ3JvdXApXG4gICAgICAgICAgICAgICAgLmNoYW5uZWwoTmlvU29ja2V0Q2hhbm5lbC5jbGFzcylcbiAgICAgICAgICAgICAgICAub3B0aW9uKENoYW5uZWxPcHRpb24uQ09OTkVDVF9USU1FT1VUX01JTExJUywgNTAwMClcbiAgICAgICAgICAgICAgICAuaGFuZGxlcihuZXcgQ2hhbm5lbEluaXRpYWxpemVyPFNvY2tldENoYW5uZWw+KCkge1xuICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaW5pdENoYW5uZWwoU29ja2V0Q2hhbm5lbCBjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbm5lbFBpcGVsaW5lIHBpcGVsaW5lID0gY2gucGlwZWxpbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15RGVjb2RlcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15UmVzcG9uc2VFbmNvZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgQ2x1c3RlckNsaWVudEhhbmRsZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25uZWN0V2l0aFJldHJ5KGJvb3RzdHJhcCwgaG9zdCwgcG9ydCwgZnV0dXJlLCAzLCAxMDAwKTtcbiAgICAgICAgcmV0dXJuIGZ1dHVyZTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvQ29tbWFuZC5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jb21tYW5kO1xuXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG5cbnB1YmxpYyBpbnRlcmZhY2UgQ29tbWFuZCB7XG4gICAgQ29tbWFuZFR5cGUgZ2V0VHlwZSgpO1xuICAgIHZvaWQgc2V0Q29udGV4dChSZXNwW10gYXJyYXkpO1xuICAgIFJlc3AgaGFuZGxlKCk7IC8vIOi/lOWbnlJlc3Dlr7nosaHogIzkuI3mmK/nm7TmjqXlhpnlhaVjaGFubmVsXG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvSW5mby5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIEluZm8gaW1wbGVtZW50cyBDb21tYW5kXG4ge1xuXG4gICAgIHByaXZhdGUgUmVkaXNDb3JlIHJlZGlzQ29yZTtcblxuICAgICBwdWJsaWMgSW5mbyhSZWRpc0NvcmUgcmVkaXNDb3JlKVxuICAgICB7XG4gICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICAgfVxuICAgICBAT3ZlcnJpZGVcbiAgICAgcHVibGljIENvbW1hbmRUeXBlIGdldFR5cGUoKVxuICAgICB7XG4gICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuSU5GTztcbiAgICAgfVxuIFxuICAgICBAT3ZlcnJpZGVcbiAgICAgcHVibGljIHZvaWQgc2V0Q29udGV4dChSZXNwW10gYXJyYXkpXG4gICAgIHtcblxuICAgICB9XG4gXG4gICAgIEBPdmVycmlkZVxuICAgICBwdWJsaWMgUmVzcCBoYW5kbGUoKVxuICAgICB7XG4gICAgICAgICBMaXN0PFN0cmluZz4gbGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICAgbGlzdC5hZGQoXCJyZWRpc192ZXJzaW9uOmpmaXJlX3JlZGlzX21vY2tcIik7XG4gICAgICAgICBsaXN0LmFkZChcIm9zOlwiICsgU3lzdGVtLmdldFByb3BlcnR5KFwib3MubmFtZVwiKSk7XG4gICAgICAgICBsaXN0LmFkZChcInByb2Nlc3NfaWQ6XCIgKyBnZXRQaWQoKSk7XG4gICAgICAgICBPcHRpb25hbDxTdHJpbmc+IHJlZHVjZSA9IGxpc3Quc3RyZWFtKCkubWFwKG5hbWUgLT4gbmFtZSArIFwiXFxyXFxuXCIpLnJlZHVjZSgoZmlyc3QsIHNlY29uZCkgLT4gZmlyc3QgKyBzZWNvbmQpO1xuICAgICAgICAgU3RyaW5nICAgICAgICAgICBzICAgICAgPSByZWR1Y2UuZ2V0KCk7XG4gICAgICAgICByZXR1cm4gbmV3IEJ1bGtTdHJpbmcobmV3IEJ5dGVzV3JhcHBlcihzLmdldEJ5dGVzKFN0YW5kYXJkQ2hhcnNldHMuVVRGXzgpKSk7XG4gICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL0Jnc2F2ZS5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgaWYgKHJkYkhhbmRsZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgUkRCIHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey57uP5Zyo6L+b6KGM5L+d5a2YXG4gICAgICAgIGlmIChyZGJIYW5kbGVyLmlzU2F2aW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwiRVJSIEJhY2tncm91bmQgc2F2ZSBhbHJlYWR5IGluIHByb2dyZXNzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6Kem5Y+R5ZCO5Y+w5YWo6YeP5L+d5a2YXG4gICAgICAgIGJvb2xlYW4gc3RhcnRlZCA9IHJkYkhhbmRsZXIuYmdzYXZlKHRydWUpO1xuICAgICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJCYWNrZ3JvdW5kIHNhdmluZyBzdGFydGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgQmFja2dyb3VuZCBzYXZlIGNvdWxkIG5vdCBiZSBzdGFydGVkXCIpO1xuICAgICAgICB9XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL1NlbGVjdC5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFNlbGVjdCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIHByaXZhdGUgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGludCBpbmRleDtcblxuICAgIHB1YmxpYyBTZWxlY3QoUmVkaXNDb3JlIHJlZGlzQ29yZSkge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ29tbWFuZFR5cGUgZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlNFTEVDVDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzZXRDb250ZXh0KFJlc3BbXSBhcnJheSkge1xuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoIDwgMiB8fCAhKGFycmF5WzFdIGluc3RhbmNlb2YgQnVsa1N0cmluZykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIFNFTEVDVCBjb21tYW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIGluZGV4ID0gSW50ZWdlci5wYXJzZUludCgoKEJ1bGtTdHJpbmcpIGFycmF5WzFdKS5nZXRDb250ZW50KCkudG9VdGY4U3RyaW5nKCkpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlZGlzQ29yZS5zZWxlY3REQihpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIk9LXCIpO1xuICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgaW52YWxpZCBEQiBpbmRleFwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL1NhdmUuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBTYXZlIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgcHJpdmF0ZSBmaW5hbCBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuICAgIHByaXZhdGUgZmluYWwgUkRCSGFuZGxlciByZGJIYW5kbGVyO1xuXG4gICAgcHVibGljIFNhdmUoUmVkaXNDb3JlIHJlZGlzQ29yZSkge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gKChSZWRpc0NvcmVJbXBsKSByZWRpc0NvcmUpLmdldFJEQkhhbmRsZXIoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ29tbWFuZFR5cGUgZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlNBVkU7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc2V0Q29udGV4dChSZXNwW10gYXJyYXkpIHtcbiAgICAgICAgLy8gU0FWRSDlkb3ku6TkuI3pnIDopoHpop3lpJblj4LmlbAs5omA5Lul6L+Z6YeM5LiN6ZyA6KaB5YGa5Lu75L2V5LqLXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICBpZiAocmRiSGFuZGxlciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkVSUiBSREIgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmRiSGFuZGxlci5zYXZlKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIk9LXCIpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9QaW5nLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvbW1hbmQuaW1wbDtcblxuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLkJ1bGtTdHJpbmc7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlNpbXBsZVN0cmluZztcblxucHVibGljIGNsYXNzIFBpbmcgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ29tbWFuZFR5cGUgZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlBJTkc7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc2V0Q29udGV4dChSZXNwW10gYXJyYXkpIHtcblxuICAgIH1cblxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIlBPTkdcIik7XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL1NldC9TbWVtZWJlcnMuamF2YVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUmVzcCBoYW5kbGUoKSB7XG4gICAgICAgIFJlZGlzRGF0YSByZWRpc0RhdGEgPSByZWRpc0NvcmUuZ2V0KGtleSk7XG4gICAgICAgIGlmKHJlZGlzRGF0YSA9PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwibm8gc3VjaCBzZXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYocmVkaXNEYXRhIGluc3RhbmNlb2YgUmVkaXNTZXQpe1xuICAgICAgICAgICAgUmVkaXNTZXQgcmVkaXNTZXQgPSAoUmVkaXNTZXQpIHJlZGlzRGF0YTtcbiAgICAgICAgICAgIENvbGxlY3Rpb248Qnl0ZXNXcmFwcGVyPiBrZXlzID0gcmVkaXNTZXQua2V5cygpO1xuICAgICAgICAgICAgUmVzcFtdIGJ1bGtTdHJpbmdzID0ga2V5cy5zdHJlYW0oKVxuICAgICAgICAgICAgICAgICAgICAubWFwKEJ1bGtTdHJpbmc6Om5ldylcbiAgICAgICAgICAgICAgICAgICAgLnRvQXJyYXkoUmVzcFtdOjpuZXcpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwQXJyYXkoYnVsa1N0cmluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiV1JPTkdUWVBFIE9wZXJhdGlvbiBhZ2FpbnN0IGEga2V5IGhvbGRpbmcgdGhlIHdyb25nIGtpbmQgb2YgdmFsdWVcIik7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvVHlwZS5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgUmVkaXNEYXRhIHJlZGlzRGF0YSA9IHJlZGlzQ29yZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHJlZGlzRGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIm5vbmVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocmVkaXNEYXRhIGluc3RhbmNlb2YgUmVkaXNTdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwic3RyaW5nXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZGlzRGF0YSBpbnN0YW5jZW9mIFJlZGlzTGlzdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJsaXN0XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZGlzRGF0YSBpbnN0YW5jZW9mIFJlZGlzU2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcInNldFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWRpc0RhdGEgaW5zdGFuY2VvZiBSZWRpc1pzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwienNldFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWRpc0RhdGEgaW5zdGFuY2VvZiBSZWRpc0hhc2gpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwiaGFzaFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIm5vbmVcIik7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvSGFzaC9IbWdldC5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgUmVkaXNEYXRhIHJlZGlzRGF0YSA9IHJlZGlzQ29yZS5nZXQoa2V5KTtcbiAgICAgICAgZm9yKEJ5dGVzV3JhcHBlciBmaWVsZDpmaWVsZHMpe1xuICAgICAgICAgICAgaWYocmVkaXNEYXRhID09IG51bGwpe1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiV1JPTkdUWVBFIE9wZXJhdGlvbiBhZ2FpbnN0IGEga2V5IGhvbGRpbmcgdGhlIHdyb25nIGtpbmQgb2YgdmFsdWVcIik7XG4gICAgICAgICAgICB9ZWxzZSBpZihyZWRpc0RhdGEgaW5zdGFuY2VvZiBSZWRpc0hhc2gpe1xuICAgICAgICAgICAgICAgIFJlZGlzSGFzaCByZWRpc0hhc2ggPSAoUmVkaXNIYXNoKSByZWRpc0RhdGE7XG4gICAgICAgICAgICAgICAgTWFwPEJ5dGVzV3JhcHBlciwgQnl0ZXNXcmFwcGVyPiBtYXAgPSByZWRpc0hhc2guZ2V0TWFwKCk7XG4gICAgICAgICAgICAgICAgUmVzcFtdIGFycmF5ID0gbmV3IFJlc3BbZmllbGRzLnNpemUoKV07XG4gICAgICAgICAgICAgICAgZm9yKGludCBpPTA7aTxmaWVsZHMuc2l6ZSgpO2krKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKG1hcC5jb250YWluc0tleShmaWVsZHMuZ2V0KGkpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVtpXSA9IG5ldyBCdWxrU3RyaW5nKG1hcC5nZXQoZmllbGRzLmdldChpKSkpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W2ldID0gbmV3IEJ1bGtTdHJpbmcobmV3IEJ5dGVzV3JhcHBlcigoXCIobmlsKVwiKS5nZXRCeXRlcygpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwQXJyYXkoYXJyYXkpO1xuXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIldST05HVFlQRSBPcGVyYXRpb24gYWdhaW5zdCBhIGtleSBob2xkaW5nIHRoZSB3cm9uZyBraW5kIG9mIHZhbHVlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9TdHJpbmcvR2V0LmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgR2V0IGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgcHJpdmF0ZSBCeXRlc1dyYXBwZXIga2V5O1xuICAgIHByaXZhdGUgUmVkaXNDb3JlIHJlZGlzQ29yZTtcblxuICAgIHB1YmxpYyBHZXQoUmVkaXNDb3JlIHJlZGlzQ29yZSkge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ29tbWFuZFR5cGUgZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkdFVDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzZXRDb250ZXh0KFJlc3BbXSBhcnJheSkge1xuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoIDwgMiB8fCAhKGFycmF5WzFdIGluc3RhbmNlb2YgQnVsa1N0cmluZykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIEdFVCBjb21tYW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMua2V5ID0gKChCdWxrU3RyaW5nKSBhcnJheVsxXSkuZ2V0Q29udGVudCgpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgUmVkaXNTdHJpbmcgdmFsdWUgPSAoUmVkaXNTdHJpbmcpIHJlZGlzQ29yZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBCdWxrU3RyaW5nLk51bGxCdWxrU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQnVsa1N0cmluZyh2YWx1ZS5nZXRWYWx1ZSgpKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9MaXN0L0xyYW5nZS5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgUmVkaXNEYXRhIHJlZGlzRGF0YSA9IHJlZGlzQ29yZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHJlZGlzRGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ1bGtTdHJpbmcobmV3IEJ5dGVzV3JhcHBlcihcIlwiLmdldEJ5dGVzKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVkaXNEYXRhIGluc3RhbmNlb2YgUmVkaXNMaXN0KSB7XG4gICAgICAgICAgICBSZWRpc0xpc3QgcmVkaXNMaXN0ID0gKFJlZGlzTGlzdCkgcmVkaXNEYXRhO1xuICAgICAgICAgICAgTGlzdDxCeXRlc1dyYXBwZXI+IGxyYW5nZSA9IHJlZGlzTGlzdC5scmFuZ2Uoc3RhcnQsIGVuZCk7XG5cbiAgICAgICAgICAgIC8vIOebtOaOpeWIm+W7ulJlc3BBcnJhee+8jOmBv+WFjeS4remXtOmbhuWQiFxuICAgICAgICAgICAgUmVzcFtdIHJlc3BBcnJheSA9IG5ldyBSZXNwW2xyYW5nZS5zaXplKCldO1xuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBscmFuZ2Uuc2l6ZSgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXNwQXJyYXlbaV0gPSBuZXcgQnVsa1N0cmluZyhscmFuZ2UuZ2V0KGkpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwQXJyYXkocmVzcEFycmF5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIldST05HVFlQRSBPcGVyYXRpb24gYWdhaW5zdCBhIGtleSBob2xkaW5nIHRoZSB3cm9uZyBraW5kIG9mIHZhbHVlXCIpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9Db21tYW5kVHlwZS5qYXZhXG4uLi5cblxucHVibGljIGVudW0gQ29tbWFuZFR5cGUge1xuICAgIFBJTkcoY29yZSAtPiBuZXcgUGluZygpKSxcbiAgICBJTkZPKEluZm86Om5ldyksXG4gICAgU0VUKFNldDo6bmV3KSxcbiAgICBERUwoRGVsOjpuZXcpLFxuICAgIElOQ1IoSW5jcjo6bmV3KSxcbiAgICBNU0VUKE1zZXQ6Om5ldyksXG4gICAgRVhJU1QoRXhpc3Q6Om5ldyksXG4gICAgRVhQSVJFKEV4cGlyZTo6bmV3KSxcbiAgICBTQUREKFNhZGQ6Om5ldyksXG4gICAgVFRMKFR0bDo6bmV3KSxcbiAgICBTTUVNQkVSUyhTbWVtZWJlcnM6Om5ldyksXG4gICAgU0lTTUVNQkVSKFNpc21lbWJlcjo6bmV3KSxcbiAgICBTQ0FSRChTY2FyZDo6bmV3KSxcbiAgICBTUkVNKFNyZW06Om5ldyksXG4gICAgU1BPUChTcG9wOjpuZXcpLFxuICAgIEhTRVQoSHNldDo6bmV3KSxcbiAgICBIR0VUKEhnZXQ6Om5ldyksXG4gICAgSE1FU1QoSG1lc3Q6Om5ldyksXG4gICAgSEdFVEFMTChIZ2V0YWxsOjpuZXcpLFxuICAgIEhNR0VUKEhtZ2V0OjpuZXcpLFxuICAgIEhERUwoSGRlbDo6bmV3KSxcbiAgICBIRVhJU1RTKEhleGlzdHM6Om5ldyksXG4gICAgSExFTihIbGVuOjpuZXcpLFxuICAgIExQVVNIKExwdXNoOjpuZXcpLFxuICAgIFJQVVNIKFJwdXNoOjpuZXcpLFxuICAgIExSQU5HRShMcmFuZ2U6Om5ldyksXG4gICAgTExFTihMbGVuOjpuZXcpLFxuICAgIExQT1AoTHBvcDo6bmV3KSxcbiAgICBSUE9QKFJwb3A6Om5ldyksXG4gICAgTFJFTShMcmVtOjpuZXcpLFxuICAgIFpBREQoWmFkZDo6bmV3KSxcbiAgICBaUkFOR0UoWnJhbmdlOjpuZXcpLFxuICAgIFpSRVZSQU5HRShacmV2cmFuZ2U6Om5ldyksXG4gICAgWlJBTkdFQllTQ09SRShacmFuZ2VieXNjb3JlOjpuZXcpLFxuICAgIFpSRU0oWnJlbTo6bmV3KSxcbiAgICBaQ0FSRChaY2FyZDo6bmV3KSxcbiAgICBaU0NPUkUoWnNjb3JlOjpuZXcpLFxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvUy4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTR3ZTZkV20xRkFVV3FRbUVNVFFSWGMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6NDk6NTMuNTY5WiIsInJlc3BvbnNlX3RleHQiOiJMZXQgbWUgYWxzbyBjaGVjayBob3cgTmV0dHkgaGFuZGxlcyBjb25uZWN0aW9ucyBhbmQgY2hhbm5lbCBldmVudHMgaW4geW91ciBSZWRpcyBpbXBsZW1lbnRhdGlvbjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1NWNhY2U1OS05YWU2LTRkZjktODkwMy02OGE1MDg4MTBlY2EiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFHbU42NkJ5TUNpZ3F0YjYxNHBYd3BqIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkJhc2VkIG9uIHRoZSBjb2RlIEkndmUgcmV2aWV3ZWQsIEkgdW5kZXJzdGFuZCB0aGUgaXNzdWUuIFdoZW4gYSBjbGllbnQgZGlzY29ubmVjdHMgYWJydXB0bHkgKGxpa2UgdXNpbmcgQ3RybCtDKSwgeW91ciBSZWRpcyBzZXJ2ZXIgaXMgbG9nZ2luZyBhbiBJT0V4Y2VwdGlvbiB3aXRoIHRoZSBtZXNzYWdlIFwi6L+c56iL5Li75py65by66L+r5YWz6Zet5LqG5LiA5Liq546w5pyJ55qE6L+e5o6lXCIgKFJlbW90ZSBob3N0IGZvcmNpYmx5IGNsb3NlZCBhbiBleGlzdGluZyBjb25uZWN0aW9uKS4gVGhpcyBpcyBoYXBwZW5pbmcgaW4gdGhlIGBNeUNvbW1hbmRIYW5kbGVyYCBjbGFzcy5cblxuTGV0IG1lIGNyZWF0ZSBhIHBsYW4gdG8gZml4IHRoaXMgaXNzdWU6XG5cbiMjIERldGFpbGVkIFBsYW5cblxuMS4gKipVbmRlcnN0YW5kIHRoZSByb290IGNhdXNlKio6XG4gICAtIFRoZSBlcnJvciBvY2N1cnMgYmVjYXVzZSB3aGVuIGEgY2xpZW50IGRpc2Nvbm5lY3RzIGFicnVwdGx5LCBOZXR0eSB0cmllcyB0byByZWFkIGZyb20gdGhlIGNsb3NlZCBzb2NrZXQgY2hhbm5lbCwgcmVzdWx0aW5nIGluIGFuIElPRXhjZXB0aW9uLlxuICAgLSBUaGlzIGlzIG5vcm1hbCBiZWhhdmlvciB3aGVuIGNvbm5lY3Rpb25zIGFyZSB0ZXJtaW5hdGVkIHVuZXhwZWN0ZWRseSwgYnV0IGl0J3MgYmVpbmcgbG9nZ2VkIGFzIGFuIGVycm9yLlxuXG4yLiAqKkltcGxlbWVudCBhIHByb3BlciBzb2x1dGlvbioqOlxuICAgLSBBZGQgYSBgY2hhbm5lbEluYWN0aXZlYCBtZXRob2QgdG8gdGhlIGBNeUNvbW1hbmRIYW5kbGVyYCBjbGFzcyB0byBoYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3Rpb25zIGdyYWNlZnVsbHkuXG4gICAtIE1vZGlmeSB0aGUgYGV4Y2VwdGlvbkNhdWdodGAgbWV0aG9kIHRvIGhhbmRsZSBjb25uZWN0aW9uIHJlc2V0IGV4Y2VwdGlvbnMgbW9yZSBlbGVnYW50bHkuXG5cbjMuICoqRmlsZXMgdG8gbW9kaWZ5Kio6XG4gICAtIGBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmFgIC0gQWRkIHByb3BlciBjb25uZWN0aW9uIGhhbmRsaW5nXG5cbkxldCBtZSBvdXRsaW5lIHRoZSBjaGFuZ2VzIGluIGRldGFpbDpcblxuIyMgSW1wbGVtZW50YXRpb24gUGxhblxuXG4xLiBNb2RpZnkgYE15Q29tbWFuZEhhbmRsZXIuamF2YWAgdG86XG4gICAtIEFkZCBhIGBjaGFubmVsSW5hY3RpdmVgIG1ldGhvZCB0byBoYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3Rpb25zXG4gICAtIFVwZGF0ZSB0aGUgYGV4Y2VwdGlvbkNhdWdodGAgbWV0aG9kIHRvIGhhbmRsZSBjb25uZWN0aW9uIHJlc2V0IGV4Y2VwdGlvbnMgbW9yZSBncmFjZWZ1bGx5XG4gICAtIEFkZCBhIGhlbHBlciBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIGFuIGV4Y2VwdGlvbiBpcyByZWxhdGVkIHRvIGNsaWVudCBkaXNjb25uZWN0aW9uXG5cbk5vdywgbGV0J3MgaW1wbGVtZW50IHRoZXNlIGNoYW5nZXM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9zZXJ2ZXIvTXlSZWRpc1NlcnZpY2UuamF2YVxuLi4uXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuRGVmYXVsdENoYW5uZWxTZWxlY3RTdHJhdGVneTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5Mb2NhbENoYW5uZWxPcHRpb247XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDtcbi4uLlxuXG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgcG9ydDtcbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBMb2NhbENoYW5uZWxPcHRpb24gY2hhbm5lbE9wdGlvbjtcbiAgICBwcml2YXRlIGZpbmFsIEV2ZW50RXhlY3V0b3JHcm91cCBjb21tYW5kRXhlY3V0b3I7XG4gICAgcHJpdmF0ZSBmaW5hbCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJIYW5kbGVyIHJkYkhhbmRsZXI7XG5cbiAgICBwcml2YXRlIENoYW5uZWwgc2VydmVyQ2hhbm5lbDtcbiAgICBwcml2YXRlIEV2ZW50TG9vcEdyb3VwIGJvc3NHcm91cDtcbiAgICBwcml2YXRlIEV2ZW50TG9vcEdyb3VwIHdvcmtlckdyb3VwO1xuXG4gICAgLy8g5re75Yqg5pa55rOV566h55CG6ZuG576k6L+e5o6lXG4gICAgcHVibGljIHZvaWQgYWRkQ2x1c3RlckNsaWVudChTdHJpbmcgbm9kZUlkLCBDbHVzdGVyQ2xpZW50IGNsaWVudCkge1xuICAgICAgICBjbHVzdGVyQ2xpZW50cy5wdXQobm9kZUlkLCBjbGllbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBDbHVzdGVyQ2xpZW50IGdldENsdXN0ZXJDbGllbnQoU3RyaW5nIG5vZGVJZCkge1xuICAgICAgICByZXR1cm4gY2x1c3RlckNsaWVudHMuZ2V0KG5vZGVJZCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q2x1c3RlcihSZWRpc0NsdXN0ZXIgY2x1c3Rlcikge1xuICAgICAgICB0aGlzLmNsdXN0ZXIgPSBjbHVzdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBSZWRpc0NsdXN0ZXIgZ2V0Q2x1c3RlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2x1c3RlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDdXJyZW50Tm9kZShDbHVzdGVyTm9kZSBub2RlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBub2RlO1xuICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAvLyDliJvlu7rnu5/kuIDnmoTlkb3ku6TlpITnkIblmahcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEhhbmRsZXIgPSBuZXcgTXlDb21tYW5kSGFuZGxlcihyZWRpc0NvcmUsIGFvZkhhbmRsZXIsIHJkYkhhbmRsZXIpO1xuXG4gICAgICAgICAgICBTZXJ2ZXJCb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IFNlcnZlckJvb3RzdHJhcCgpO1xuICAgICAgICAgICAgYm9vdHN0cmFwLmdyb3VwKGJvc3NHcm91cCwgd29ya2VyR3JvdXApXG4gICAgICAgICAgICAgICAgICAgIC5jaGFubmVsKGNoYW5uZWxPcHRpb24uZ2V0Q2hhbm5lbENsYXNzKCkpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLlNPX0tFRVBBTElWRSwgdHJ1ZSkuXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uKENoYW5uZWxPcHRpb24uVENQX05PREVMQVksIHRydWUpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLkFMTE9DQVRPUiwgUG9vbGVkQnl0ZUJ1ZkFsbG9jYXRvci5ERUZBVUxUKVxuICAgICAgICAgICAgICAgICAgICAuY2hpbGRIYW5kbGVyKG5ldyBDaGFubmVsSW5pdGlhbGl6ZXI8U29ja2V0Q2hhbm5lbD4oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RlY3RlZCB2b2lkIGluaXRDaGFubmVsKFNvY2tldENoYW5uZWwgY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFubmVsUGlwZWxpbmUgcGlwZWxpbmUgPSBjaC5waXBlbGluZSgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeURlY29kZXIoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeVJlc3BvbnNlRW5jb2RlcigpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEVOQUJMRV9DT01QUkVTU0lPTil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IENvbXByZXNzaW9uQ29lZEMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QoY29tbWFuZEV4ZWN1dG9yLCBjb21tYW5kSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDmlLnkuLrlvILmraXnu5HlrppcbiAgICAgICAgICAgIGJvb3RzdHJhcC5iaW5kKHBvcnQpLmFkZExpc3RlbmVyKChDaGFubmVsRnV0dXJlIGZ1dHVyZSkgLT4ge1xuICAgICAgICAgICAgICAgIGlmIChmdXR1cmUuaXNTdWNjZXNzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJDaGFubmVsID0gZnV0dXJlLmNoYW5uZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVkaXPmnI3liqHlt7LlkK/liqjvvIznm5HlkKznq6/lj6M6IFwiICsgcG9ydCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g5re75Yqg5YWz6Zet55uR5ZCs5ZmoXG4gICAgICAgICAgICAgICAgICAgIGZ1dHVyZS5jaGFubmVsKCkuY2xvc2VGdXR1cmUoKS5hZGRMaXN0ZW5lcihjbG9zZUZ1dHVyZSAtPiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNsb3NlRnV0dXJlLmlzU3VjY2VzcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5pyN5Yqh5Zmo5byC5bi45YWz6ZetXCIsIGNsb3NlRnV0dXJlLmNhdXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLlkK/liqjmnI3liqHlpLHotKXvvIznq6/lj6M6IFwiICsgcG9ydCwgZnV0dXJlLmNhdXNlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5pyN5Yqh5Zmo5ZCv5Yqo5byC5bi4XCIsIGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHtcbiAgICAgICAgLy8g5YWI5YWz6Zet572R57uc55u45YWz6LWE5rqQXG4gICAgICAgIGlmIChzZXJ2ZXJDaGFubmVsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNlcnZlckNoYW5uZWwuY2xvc2UoKS5hd2FpdFVuaW50ZXJydXB0aWJseSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdvcmtlckdyb3VwICE9IG51bGwpIHtcbiAgICAgICAgICAgIHdvcmtlckdyb3VwLnNodXRkb3duR3JhY2VmdWxseSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJvc3NHcm91cCAhPSBudWxsKSB7XG4gICAgICAgICAgICBib3NzR3JvdXAuc2h1dGRvd25HcmFjZWZ1bGx5KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDnhLblkI7lhbPpl63mjIHkuYXljJbnm7jlhbNcbiAgICAgICAgaWYgKEVOQUJMRV9SREIgJiYgcmRiSGFuZGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICByZGJIYW5kbGVyLnNhdmUoKS5leGNlcHRpb25hbGx5KGUgLT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlJEQuS/neWtmOWksei0pVwiLCBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmRiSGFuZGxlci5zaHV0ZG93bigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEVOQUJMRV9BT0YgJiYgYW9mSGFuZGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBhb2ZIYW5kbGVyLnN0b3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb21tYW5kRXhlY3V0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29tbWFuZEV4ZWN1dG9yLnNodXRkb3duR3JhY2VmdWxseSgpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeURlY29kZXIuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBNeURlY29kZXIgZXh0ZW5kcyBCeXRlVG9NZXNzYWdlRGVjb2RlciB7XG4gICAgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlEZWNvZGVyLmNsYXNzKTtcbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBkZWNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgQnl0ZUJ1ZiBpbiwgTGlzdDxPYmplY3Q+IG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoaW4ucmVhZGFibGVCeXRlcygpID4gMCkge1xuICAgICAgICAgICAgICAgIC8vbG9nZ2VyLmluZm8oXCLlvIDlp4vop6PnoIFcIik7XG4gICAgICAgICAgICAgICAgLy8g5qCH6K6w5b2T5YmN6K+75Y+W5L2N572uXG4gICAgICAgICAgICAgICAgaW4ubWFya1JlYWRlckluZGV4KCk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgUmVzcCBkZWNvZGVkID0gUmVzcC5kZWNvZGUoaW4pO1xuICAgICAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi6Kej56CB5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICBvdXQuYWRkKGRlY29kZWQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuino+eggeW8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIGluLnJlc2V0UmVhZGVySW5kZXgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLmgLvkvZPlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jbHVzdGVyL0NsdXN0ZXJDbGllbnQuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY2x1c3RlcjtcblxuaW1wb3J0IGlvLm5ldHR5LmJvb3RzdHJhcC5Cb290c3RyYXA7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC4qO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcEdyb3VwO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuc29ja2V0LlNvY2tldENoYW5uZWw7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5zb2NrZXQubmlvLk5pb1NvY2tldENoYW5uZWw7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLk15RGVjb2RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29kZXIuTXlSZXNwb25zZUVuY29kZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLlJlc3A7XG5cbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db21wbGV0YWJsZUZ1dHVyZTtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5UaW1lVW5pdDtcblxucHVibGljIGNsYXNzIENsdXN0ZXJDbGllbnQge1xuICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIGhvc3Q7XG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgcG9ydDtcbiAgICBwcml2YXRlIENoYW5uZWwgY2hhbm5lbDtcbiAgICBwcml2YXRlIEV2ZW50TG9vcEdyb3VwIGdyb3VwO1xuXG4gICAgcHVibGljIENsdXN0ZXJDbGllbnQoU3RyaW5nIGhvc3QsIGludCBwb3J0KSB7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMucG9ydCA9IHBvcnQ7XG4gICAgfVxuXG4gICAgcHVibGljIENvbXBsZXRhYmxlRnV0dXJlPFZvaWQ+IGNvbm5lY3QoKSB7XG4gICAgICAgIENvbXBsZXRhYmxlRnV0dXJlPFZvaWQ+IGZ1dHVyZSA9IG5ldyBDb21wbGV0YWJsZUZ1dHVyZTw+KCk7XG5cbiAgICAgICAgZ3JvdXAgPSBuZXcgTmlvRXZlbnRMb29wR3JvdXAoKTtcbiAgICAgICAgQm9vdHN0cmFwIGJvb3RzdHJhcCA9IG5ldyBCb290c3RyYXAoKTtcbiAgICAgICAgYm9vdHN0cmFwLmdyb3VwKGdyb3VwKVxuICAgICAgICAgICAgICAgIC5jaGFubmVsKE5pb1NvY2tldENoYW5uZWwuY2xhc3MpXG4gICAgICAgICAgICAgICAgLm9wdGlvbihDaGFubmVsT3B0aW9uLkNPTk5FQ1RfVElNRU9VVF9NSUxMSVMsIDUwMDApXG4gICAgICAgICAgICAgICAgLmhhbmRsZXIobmV3IENoYW5uZWxJbml0aWFsaXplcjxTb2NrZXRDaGFubmVsPigpIHtcbiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgICAgIHByb3RlY3RlZCB2b2lkIGluaXRDaGFubmVsKFNvY2tldENoYW5uZWwgY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENoYW5uZWxQaXBlbGluZSBwaXBlbGluZSA9IGNoLnBpcGVsaW5lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeURlY29kZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBNeVJlc3BvbnNlRW5jb2RlcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IENsdXN0ZXJDbGllbnRIYW5kbGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY29ubmVjdFdpdGhSZXRyeShib290c3RyYXAsIGhvc3QsIHBvcnQsIGZ1dHVyZSwgMywgMTAwMCk7XG4gICAgICAgIHJldHVybiBmdXR1cmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIGNvbm5lY3RXaXRoUmV0cnkoQm9vdHN0cmFwIGJvb3RzdHJhcCwgU3RyaW5nIGhvc3QsIGludCBwb3J0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbXBsZXRhYmxlRnV0dXJlPFZvaWQ+IGZ1dHVyZSwgaW50IHJldHJpZXMsIGxvbmcgZGVsYXlNcykge1xuICAgICAgICBib290c3RyYXAuY29ubmVjdChob3N0LCBwb3J0KS5hZGRMaXN0ZW5lcigoQ2hhbm5lbEZ1dHVyZUxpc3RlbmVyKSBmIC0+IHtcbiAgICAgICAgICAgIGlmIChmLmlzU3VjY2VzcygpKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbCA9IGYuY2hhbm5lbCgpO1xuICAgICAgICAgICAgICAgIGZ1dHVyZS5jb21wbGV0ZShudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmV0cmllcyA+IDApIHtcbiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50ZihcIkNvbm5lY3Rpb24gdG8gJXM6JWQgZmFpbGVkLCAlZCByZXRyaWVzIGxlZnQuIFJldHJ5aW5nLi4uJW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3QsIHBvcnQsIHJldHJpZXMpO1xuICAgICAgICAgICAgICAgIGYuY2hhbm5lbCgpLmV2ZW50TG9vcCgpLnNjaGVkdWxlKCgpIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RXaXRoUmV0cnkoYm9vdHN0cmFwLCBob3N0LCBwb3J0LCBmdXR1cmUsIHJldHJpZXMgLSAxLCBkZWxheU1zKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5TXMsIFRpbWVVbml0Lk1JTExJU0VDT05EUyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZ1dHVyZS5jb21wbGV0ZUV4Y2VwdGlvbmFsbHkoZi5jYXVzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2VuZE1lc3NhZ2UoUmVzcCByZXNwKSB7XG4gICAgICAgIGlmIChjaGFubmVsICE9IG51bGwgJiYgY2hhbm5lbC5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICBjaGFubmVsLndyaXRlQW5kRmx1c2gocmVzcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJDaGFubmVsIGlzIG5vdCBhY3RpdmUuIENhbm5vdCBzZW5kIG1lc3NhZ2UuXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKGNoYW5uZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgY2hhbm5lbC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncm91cCAhPSBudWxsKSB7XG4gICAgICAgICAgICBncm91cC5zaHV0ZG93bkdyYWNlZnVsbHkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGlzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gY2hhbm5lbCAhPSBudWxsICYmIGNoYW5uZWwuaXNBY3RpdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBDbHVzdGVyQ2xpZW50SGFuZGxlciBleHRlbmRzIFNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjxSZXNwPiB7XG4gICAgICAgIEBPdmVycmlkZVxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBjaGFubmVsUmVhZDAoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCBtc2cpIHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlY2VpdmVkIGNsdXN0ZXIgbWVzc2FnZTogXCIgKyBtc2cpO1xuICAgICAgICB9XG5cbiAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkV4Y2VwdGlvbiBpbiBDbHVzdGVyQ2xpZW50SGFuZGxlcjogXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgY3R4LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NoYW5uZWwvb3B0aW9ucy9LcXVldWVDaGFubmVsT3B0aW9uLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNoYW5uZWwub3B0aW9ucztcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuRXZlbnRMb29wR3JvdXA7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5rcXVldWUuS1F1ZXVlRXZlbnRMb29wR3JvdXA7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5rcXVldWUuS1F1ZXVlU2VydmVyU29ja2V0Q2hhbm5lbDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5Mb2NhbENoYW5uZWxPcHRpb247XG5cbnB1YmxpYyBjbGFzcyBLcXVldWVDaGFubmVsT3B0aW9uIGltcGxlbWVudHMgTG9jYWxDaGFubmVsT3B0aW9uIHtcbiAgICBwcml2YXRlIGZpbmFsIEtRdWV1ZUV2ZW50TG9vcEdyb3VwIHNpbmdsZUV2ZW50TG9vcDtcblxuICAgIHB1YmxpYyBLcXVldWVDaGFubmVsT3B0aW9uKCkge1xuICAgICAgICB0aGlzLnNpbmdsZUV2ZW50TG9vcCA9IG5ldyBLUXVldWVFdmVudExvb3BHcm91cCgxLCByIC0+IHtcbiAgICAgICAgICAgIFRocmVhZCB0ID0gbmV3IFRocmVhZChyLCBcIlJlZGlzLUV2ZW50TG9vcFwiKTtcbiAgICAgICAgICAgIHQuc2V0RGFlbW9uKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgYm9zcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2luZ2xlRXZlbnRMb29wO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBFdmVudExvb3BHcm91cCBzZWxlY3RvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbmdsZUV2ZW50TG9vcDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ2xhc3MgZ2V0Q2hhbm5lbENsYXNzKCkge1xuICAgICAgICByZXR1cm4gS1F1ZXVlU2VydmVyU29ja2V0Q2hhbm5lbC5jbGFzcztcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvZGVyL015Q29tbWFuZEhhbmRsZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJDb250ZXh0O1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5BT0ZIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEudXRpbC5FbnVtU2V0O1xuaW1wb3J0IGphdmEudXRpbC5TZXQ7XG5cbkBDaGFubmVsSGFuZGxlci5TaGFyYWJsZVxucHVibGljIGNsYXNzIE15Q29tbWFuZEhhbmRsZXIgZXh0ZW5kcyBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI8UmVzcD4ge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15Q29tbWFuZEhhbmRsZXIuY2xhc3MpO1xuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcjtcblxuICAgIC8vIOS9v+eUqEVudW1TZXTmj5Dpq5jmn6Xmib7mlYjnjodcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTZXQ8Q29tbWFuZFR5cGU+IFdSSVRFX0NPTU1BTkRTID0gRW51bVNldC5vZihcbiAgICAgICAgICAgIENvbW1hbmRUeXBlLlNFVCwgQ29tbWFuZFR5cGUuREVMLCBDb21tYW5kVHlwZS5JTkNSLCBDb21tYW5kVHlwZS5NU0VULFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuRVhQSVJFLCBDb21tYW5kVHlwZS5TQURELCBDb21tYW5kVHlwZS5TUkVNLCBDb21tYW5kVHlwZS5TUE9QLFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuSFNFVCwgQ29tbWFuZFR5cGUuSE1FU1QsIENvbW1hbmRUeXBlLkhERUwsXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5MUFVTSCwgQ29tbWFuZFR5cGUuUlBVU0gsIENvbW1hbmRUeXBlLkxQT1AsIENvbW1hbmRUeXBlLlJQT1AsIENvbW1hbmRUeXBlLkxSRU0sXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5aQURELCBDb21tYW5kVHlwZS5aUkVNLENvbW1hbmRUeXBlLlNFTEVDVFxuICAgICk7XG5cbiAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlcihSZWRpc0NvcmUgcmVkaXNDb3JlLCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXIsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcikge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICAgICAgdGhpcy5hb2ZIYW5kbGVyID0gYW9mSGFuZGxlcjtcbiAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gcmRiSGFuZGxlcjtcblxuXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgICAgIGlmIChtc2cgaW5zdGFuY2VvZiBSZXNwQXJyYXkpIHtcbiAgICAgICAgICAgIFJlc3BBcnJheSBhcnJheSA9IChSZXNwQXJyYXkpIG1zZztcbiAgICAgICAgICAgIFJlc3AgcmVzcG9uc2UgPSBwcm9jZXNzQ29tbWFuZChhcnJheSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biByZXF1ZXN0IHR5cGVcIikpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIFJlc3AgcHJvY2Vzc0NvbW1hbmQoUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICBpZiAoY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIGVtcHR5IGNvbW1hbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVzcFtdIGFycmF5ID0gY29tbWFuZEFycmF5LmdldEFycmF5KCk7XG4gICAgICAgICAgICBTdHJpbmcgY29tbWFuZE5hbWUgPSAoKEJ1bGtTdHJpbmcpIGFycmF5WzBdKS5nZXRDb250ZW50KCkudG9VdGY4U3RyaW5nKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIENvbW1hbmRUeXBlIGNvbW1hbmRUeXBlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbW1hbmRUeXBlID0gQ29tbWFuZFR5cGUudmFsdWVPZihjb21tYW5kTmFtZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gY29tbWFuZCAnXCIgKyBjb21tYW5kTmFtZSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNob3VsZEhhbmRsZUluQ2x1c3Rlcihjb21tYW5kVHlwZSwgY29tbWFuZEFycmF5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDbHVzdGVyQ29tbWFuZChjb21tYW5kVHlwZSwgY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQ29tbWFuZCBjb21tYW5kID0gY29tbWFuZFR5cGUuZ2V0U3VwcGxpZXIoKS5hcHBseShyZWRpc0NvcmUpO1xuICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGFycmF5KTtcblxuICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuXG4gICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBhcnJheS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmRiSGFuZGxlci5ub3RpZnlEYXRhQ2hhbmdlZChyZWRpc0NvcmUuZ2V0Q3VycmVudERCKCkuZ2V0SWQoKSwgKChCdWxrU3RyaW5nKSBhcnJheVsxXSkuZ2V0Q29udGVudCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5aaC5p6c5ZCv55So5LqGQU9G77yM6K6w5b2V5ZG95LukXG4gICAgICAgICAgIGlmIChhb2ZIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpKXtcbiAgICAgICAgICAgICAgICBhb2ZIYW5kbGVyLmFwcGVuZChjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBjb21tYW5kXCIsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGJvb2xlYW4gc2hvdWxkSGFuZGxlSW5DbHVzdGVyKENvbW1hbmRUeXBlIGNvbW1hbmRUeXBlLCBSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGNsdXN0ZXIgIT0gbnVsbCAmJiBjbHVzdGVyLmlzU2hhcmRpbmdFbmFibGVkKCkgJiZcbiAgICAgICAgICAgICAgICAoY29tbWFuZFR5cGUgPT0gQ29tbWFuZFR5cGUuR0VUIHx8IGNvbW1hbmRUeXBlID09IENvbW1hbmRUeXBlLlNFVCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBSZXNwIGhhbmRsZUNsdXN0ZXJDb21tYW5kKENvbW1hbmRUeXBlIGNvbW1hbmRUeXBlLCBSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgICAgICAgQnl0ZXNXcmFwcGVyIGtleSA9ICgoQnVsa1N0cmluZykgY29tbWFuZEFycmF5LmdldEFycmF5KClbMV0pLmdldENvbnRlbnQoKTtcbiAgICAgICAgU3RyaW5nIHRhcmdldE5vZGVJZCA9IGNsdXN0ZXIuZ2V0Tm9kZUZvcktleShrZXkpO1xuICAgICAgICBTdHJpbmcgY3VycmVudE5vZGVJZCA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDdXJyZW50Tm9kZSgpLmdldElkKCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnROb2RlSWQuZXF1YWxzKHRhcmdldE5vZGVJZCkpIHtcbiAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKSk7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG5cbiAgICAgICAgICAgIC8vIOehruS/neacrOWcsOaJp+ihjOaXtuS5n+inpuWPkVJEQlxuICAgICAgICAgICAgaWYgKHJkYkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkgJiYgY29tbWFuZEFycmF5LmdldEFycmF5KCkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksIGtleSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGZvcndhcmRUb1RhcmdldE5vZGUodGFyZ2V0Tm9kZUlkLCBjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgUmVzcCBmb3J3YXJkVG9UYXJnZXROb2RlKFN0cmluZyB0YXJnZXROb2RlSWQsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOiOt+WPluebruagh+iKgueCueeahOacjeWKoeWunuS+i1xuICAgICAgICAgICAgUmVkaXNDbHVzdGVyIGNsdXN0ZXIgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q2x1c3RlcigpO1xuICAgICAgICAgICAgTXlSZWRpc1NlcnZpY2UgdGFyZ2V0U2VydmljZSA9IGNsdXN0ZXIuZ2V0Tm9kZSh0YXJnZXROb2RlSWQpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0U2VydmljZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8g6L2s5Y+R5ZG95Luk5Yiw55uu5qCH6IqC54K5XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdGFyZ2V0IG5vZGUgbm90IGF2YWlsYWJsZTogXCIgKyB0YXJnZXROb2RlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgZm9yd2FyZGluZyBjb21tYW5kIHRvIG5vZGUgXCIgKyB0YXJnZXROb2RlSWQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFRocm93YWJsZSBjYXVzZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIFwiICsgY2F1c2UuZ2V0TWVzc2FnZSgpKSk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jaGFubmVsL29wdGlvbnMvRXBvbGxDaGFubmVsT3B0aW9uLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgRXBvbGxDaGFubmVsT3B0aW9uIGltcGxlbWVudHMgTG9jYWxDaGFubmVsT3B0aW9uIHtcbiAgICBwcml2YXRlIGZpbmFsIEVwb2xsRXZlbnRMb29wR3JvdXAgc2luZ2xlRXZlbnRMb29wO1xuXG4gICAgcHVibGljIEVwb2xsQ2hhbm5lbE9wdGlvbigpIHtcbiAgICAgICAgdGhpcy5zaW5nbGVFdmVudExvb3AgPSBuZXcgRXBvbGxFdmVudExvb3BHcm91cCgxLCByIC0+IHtcbiAgICAgICAgICAgIFRocmVhZCB0ID0gbmV3IFRocmVhZChyLCBcIlJlZGlzLUV2ZW50TG9vcFwiKTtcbiAgICAgICAgICAgIHQuc2V0RGFlbW9uKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgYm9zcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2luZ2xlRXZlbnRMb29wO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBFdmVudExvb3BHcm91cCBzZWxlY3RvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbmdsZUV2ZW50TG9vcDsgLy8g5L2/55So5ZCM5LiA5Liq5LqL5Lu25b6q546v57uEXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENsYXNzIGdldENoYW5uZWxDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIEVwb2xsU2VydmVyU29ja2V0Q2hhbm5lbC5jbGFzcztcbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jaGFubmVsL29wdGlvbnMvU2VsZWN0Q2hhbm5lbE9wdGlvbi5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFNlbGVjdENoYW5uZWxPcHRpb24gaW1wbGVtZW50cyBMb2NhbENoYW5uZWxPcHRpb24ge1xuICAgIHByaXZhdGUgZmluYWwgRXZlbnRMb29wR3JvdXAgYm9zc0dyb3VwO1xuICAgIHByaXZhdGUgZmluYWwgRXZlbnRMb29wR3JvdXAgd29ya2VyR3JvdXA7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IElPX1RIUkVBRFMgPSBNYXRoLm1pbig4LCBSdW50aW1lLmdldFJ1bnRpbWUoKS5hdmFpbGFibGVQcm9jZXNzb3JzKCkgKiAyKTtcblxuICAgIHB1YmxpYyBTZWxlY3RDaGFubmVsT3B0aW9uKCkge1xuICAgICAgICBUaHJlYWRGYWN0b3J5IGJvc3NGYWN0b3J5ID0gbmV3IERlZmF1bHRUaHJlYWRGYWN0b3J5KFwicmVkaXMtYm9zc1wiKTtcbiAgICAgICAgVGhyZWFkRmFjdG9yeSB3b3JrZXJGYWN0b3J5ID0gbmV3IERlZmF1bHRUaHJlYWRGYWN0b3J5KFwicmVkaXMtaW9cIik7XG4gICAgICAgIHRoaXMuYm9zc0dyb3VwID0gbmV3IE5pb0V2ZW50TG9vcEdyb3VwKDEsIGJvc3NGYWN0b3J5KTtcbiAgICAgICAgdGhpcy53b3JrZXJHcm91cCA9IG5ldyBOaW9FdmVudExvb3BHcm91cChJT19USFJFQURTLCB3b3JrZXJGYWN0b3J5KTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgYm9zcygpIHtcbiAgICAgICAgcmV0dXJuIGJvc3NHcm91cDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgc2VsZWN0b3JzKCkge1xuICAgICAgICByZXR1cm4gd29ya2VyR3JvdXA7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENsYXNzPD8+IGdldENoYW5uZWxDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIE5pb1NlcnZlclNvY2tldENoYW5uZWwuY2xhc3M7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jaGFubmVsL0xvY2FsQ2hhbm5lbE9wdGlvbi5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jaGFubmVsO1xuXG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuRXZlbnRMb29wR3JvdXA7XG5cbnB1YmxpYyBpbnRlcmZhY2UgTG9jYWxDaGFubmVsT3B0aW9uPCBDIGV4dGVuZHMgQ2hhbm5lbD4gIHtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIOi/lOWbnuiOt+WPlnRjcOe6v+eoi1xuICAgICAqL1xuICAgIEV2ZW50TG9vcEdyb3VwIGJvc3MoKTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIOi/lOWbnuWkhOeQhnRjcOe6v+eoi1xuICAgICAqL1xuICAgIEV2ZW50TG9vcEdyb3VwIHNlbGVjdG9ycygpO1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4g6L+U5Zue566h6YGT57G75Z6LXG4gICAgICovXG4gICAgQ2xhc3M8PyBleHRlbmRzIEM+IGdldENoYW5uZWxDbGFzcygpO1xufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY2x1c3Rlci9DbHVzdGVyTWFuYWdlci5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIENsdXN0ZXJNYW5hZ2VyIHtcbiAgICBwcml2YXRlIFJlZGlzQ2x1c3RlciBjbHVzdGVyO1xuXG4gICAgcHVibGljIENsdXN0ZXJNYW5hZ2VyKCkge1xuICAgICAgICB0aGlzLmNsdXN0ZXIgPSBuZXcgUmVkaXNDbHVzdGVyKCk7XG4gICAgICAgIGNsdXN0ZXIuc2V0U2hhcmRpbmdFbmFibGVkKHRydWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemVDbHVzdGVyKCkgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7XG5cbiAgICAgICAgLy8g5YWI5re75Yqg5omA5pyJ6IqC54K5XG4gICAgICAgIGNsdXN0ZXIuYWRkTm9kZShcIm5vZGUxXCIsIFwibG9jYWxob3N0XCIsIDYzNzkpO1xuXG4gICAgICAgIGNsdXN0ZXIuYWRkTm9kZShcIm5vZGUyXCIsIFwibG9jYWxob3N0XCIsIDYzODApO1xuICAgICAgICBjbHVzdGVyLmFkZE5vZGUoXCJub2RlM1wiLCBcImxvY2FsaG9zdFwiLCA2MzgxKTtcblxuICAgICAgICAvLyDlhYjlkK/liqjmiYDmnInoioLngrnmnI3liqFcbiAgICAgICAgY2x1c3Rlci5zdGFydCgpO1xuXG4gICAgICAgIC8vIOetieW+heaJgOacieiKgueCueWQr+WKqOWujOaIkFxuICAgICAgICBUaHJlYWQuc2xlZXAoMjAwMCk7IC8vIOetieW+hTLnp5Lnoa7kv53mnI3liqHlkK/liqhcblxuICAgICAgICAvLyDnhLblkI7lu7rnq4voioLngrnpl7Tov57mjqVcbiAgICAgICAgY2x1c3Rlci5jb25uZWN0Tm9kZXMoKTtcblxuICAgICAgICAvLyDlho3nrYnlvoXov57mjqXlu7rnq4tcbiAgICAgICAgVGhyZWFkLnNsZWVwKDEwMDApO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNlbmRNZXNzYWdlQmV0d2Vlbk5vZGVzKFN0cmluZyBmcm9tTm9kZUlkLCBTdHJpbmcgdG9Ob2RlSWQsIFJlc3AgbWVzc2FnZSkge1xuICAgICAgICBNeVJlZGlzU2VydmljZSBmcm9tU2VydmljZSA9IGNsdXN0ZXIuZ2V0Tm9kZShmcm9tTm9kZUlkKTtcbiAgICAgICAgaWYgKGZyb21TZXJ2aWNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGZyb21TZXJ2aWNlLnNlbmRNZXNzYWdlVG9Ob2RlKHRvTm9kZUlkLCBtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvUmVkaXNDbHVzdGVyTGF1bmNoZXIuamF2YVxuLi4uXG5cbiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHN0YXJ0Tm9kZShSZWRpc0NsdXN0ZXIgY2x1c3RlciwgU3RyaW5nIG5vZGVJZCwgaW50IHBvcnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlN0YXJ0aW5nIG5vZGUgXCIgKyBub2RlSWQgKyBcIiBvbiBwb3J0IFwiICsgcG9ydCk7XG4gICAgICAgICAgICBjbHVzdGVyLmFkZE5vZGUobm9kZUlkLCBcImxvY2FsaG9zdFwiLCBwb3J0KTtcbiAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIHNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUobm9kZUlkKTtcbiAgICAgICAgICAgIHNlcnZpY2Uuc3RhcnQoKTtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIk5vZGUgXCIgKyBub2RlSWQgKyBcIiBzdGFydGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRmFpbGVkIHRvIHN0YXJ0IG5vZGUgXCIgKyBub2RlSWQgKyBcIjogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBMQVRDSC5jb3VudERvd24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHZvaWQga2VlcFJ1bm5pbmcoKSB7XG4gICAgICAgIFJ1bnRpbWUuZ2V0UnVudGltZSgpLmFkZFNodXRkb3duSG9vayhuZXcgVGhyZWFkKCgpIC0+IHtcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlNodXR0aW5nIGRvd24gUmVkaXMgY2x1c3Rlci4uLlwiKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFRocmVhZC5zbGVlcCgxMDAwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxOUtIbm55UGJmTmVqNG54azJSdks3dyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDo1MDowOS4xNDNaIiwicmVzcG9uc2VfdGV4dCI6IkJhc2VkIG9uIHRoZSBjb2RlIEkndmUgcmV2aWV3ZWQsIEkgdW5kZXJzdGFuZCB0aGUgaXNzdWUuIFdoZW4gYSBjbGllbnQgZGlzY29ubmVjdHMgYWJydXB0bHkgKGxpa2UgdXNpbmcgQ3RybCtDKSwgeW91ciBSZWRpcyBzZXJ2ZXIgaXMgbG9nZ2luZyBhbiBJT0V4Y2VwdGlvbiB3aXRoIHRoZSBtZXNzYWdlIFwi6L+c56iL5Li75py65by66L+r5YWz6Zet5LqG5LiA5Liq546w5pyJ55qE6L+e5o6lXCIgKFJlbW90ZSBob3N0IGZvcmNpYmx5IGNsb3NlZCBhbiBleGlzdGluZyBjb25uZWN0aW9uKS4gVGhpcyBpcyBoYXBwZW5pbmcgaW4gdGhlIGBNeUNvbW1hbmRIYW5kbGVyYCBjbGFzcy5cblxuTGV0IG1lIGNyZWF0ZSBhIHBsYW4gdG8gZml4IHRoaXMgaXNzdWU6XG5cbiMjIERldGFpbGVkIFBsYW5cblxuMS4gKipVbmRlcnN0YW5kIHRoZSByb290IGNhdXNlKio6XG4gICAtIFRoZSBlcnJvciBvY2N1cnMgYmVjYXVzZSB3aGVuIGEgY2xpZW50IGRpc2Nvbm5lY3RzIGFicnVwdGx5LCBOZXR0eSB0cmllcyB0byByZWFkIGZyb20gdGhlIGNsb3NlZCBzb2NrZXQgY2hhbm5lbCwgcmVzdWx0aW5nIGluIGFuIElPRXhjZXB0aW9uLlxuICAgLSBUaGlzIGlzIG5vcm1hbCBiZWhhdmlvciB3aGVuIGNvbm5lY3Rpb25zIGFyZSB0ZXJtaW5hdGVkIHVuZXhwZWN0ZWRseSwgYnV0IGl0J3MgYmVpbmcgbG9nZ2VkIGFzIGFuIGVycm9yLlxuXG4yLiAqKkltcGxlbWVudCBhIHByb3BlciBzb2x1dGlvbioqOlxuICAgLSBBZGQgYSBgY2hhbm5lbEluYWN0aXZlYCBtZXRob2QgdG8gdGhlIGBNeUNvbW1hbmRIYW5kbGVyYCBjbGFzcyB0byBoYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3Rpb25zIGdyYWNlZnVsbHkuXG4gICAtIE1vZGlmeSB0aGUgYGV4Y2VwdGlvbkNhdWdodGAgbWV0aG9kIHRvIGhhbmRsZSBjb25uZWN0aW9uIHJlc2V0IGV4Y2VwdGlvbnMgbW9yZSBlbGVnYW50bHkuXG5cbjMuICoqRmlsZXMgdG8gbW9kaWZ5Kio6XG4gICAtIGBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmFgIC0gQWRkIHByb3BlciBjb25uZWN0aW9uIGhhbmRsaW5nXG5cbkxldCBtZSBvdXRsaW5lIHRoZSBjaGFuZ2VzIGluIGRldGFpbDpcblxuIyMgSW1wbGVtZW50YXRpb24gUGxhblxuXG4xLiBNb2RpZnkgYE15Q29tbWFuZEhhbmRsZXIuamF2YWAgdG86XG4gICAtIEFkZCBhIGBjaGFubmVsSW5hY3RpdmVgIG1ldGhvZCB0byBoYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3Rpb25zXG4gICAtIFVwZGF0ZSB0aGUgYGV4Y2VwdGlvbkNhdWdodGAgbWV0aG9kIHRvIGhhbmRsZSBjb25uZWN0aW9uIHJlc2V0IGV4Y2VwdGlvbnMgbW9yZSBncmFjZWZ1bGx5XG4gICAtIEFkZCBhIGhlbHBlciBtZXRob2QgdG8gZGV0ZXJtaW5lIGlmIGFuIGV4Y2VwdGlvbiBpcyByZWxhdGVkIHRvIGNsaWVudCBkaXNjb25uZWN0aW9uXG5cbk5vdywgbGV0J3MgaW1wbGVtZW50IHRoZXNlIGNoYW5nZXM6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMzRiMWFiNDYtZjRmNy00ZjA0LTllY2QtZDczOTliODIzMjFmIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTFV0dGd0SzU4c1dWVWtYVmJUMTRQSiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcImltcG9ydCBqYXZhLnV0aWwuRW51bVNldDtcXG5pbXBvcnQgamF2YS51dGlsLlNldDtcIiwgXCJuZXdfc3RyXCI6IFwiaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XFxuaW1wb3J0IGphdmEubmV0LlNvY2tldEV4Y2VwdGlvbjtcXG5pbXBvcnQgamF2YS51dGlsLkVudW1TZXQ7XFxuaW1wb3J0IGphdmEudXRpbC5TZXQ7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxNywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxOH0sIHtcIm9sZF9zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcXG4gICAgICAgIGxvZ2dlci5lcnJvcihcXFwiRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXFxcIiwgY2F1c2UpO1xcbiAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcXFwiRVJSIFxcXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIGNoYW5uZWxJbmFjdGl2ZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4KSB7XFxuICAgICAgICAvLyBcXHU1YmEyXFx1NjIzN1xcdTdhZWZcXHU2NWFkXFx1NWYwMFxcdThmZGVcXHU2M2E1XFx1NjVmNlxcdThjMDNcXHU3NTI4XFxuICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpIHtcXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXFxcIkNsaWVudCBkaXNjb25uZWN0ZWQ6IFxcXCIgKyBjdHguY2hhbm5lbCgpLnJlbW90ZUFkZHJlc3MoKSk7XFxuICAgICAgICB9XFxuICAgICAgICAvLyBcXHU4YzAzXFx1NzUyOFxcdTcyMzZcXHU3YzdiXFx1NjViOVxcdTZjZDVcXHU3ODZlXFx1NGZkZFxcdTRlOGJcXHU0ZWY2XFx1NGYyMFxcdTY0YWRcXG4gICAgICAgIGN0eC5maXJlQ2hhbm5lbEluYWN0aXZlKCk7XFxuICAgIH1cXG5cXG4gICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcXG4gICAgICAgIC8vIFxcdTY4YzBcXHU2N2U1XFx1NjYyZlxcdTU0MjZcXHU2NjJmXFx1NWJhMlxcdTYyMzdcXHU3YWVmXFx1NjVhZFxcdTVmMDBcXHU4ZmRlXFx1NjNhNVxcdTViZmNcXHU4MWY0XFx1NzY4NFxcdTVmMDJcXHU1ZTM4XFxuICAgICAgICBpZiAoaXNDbGllbnREaXNjb25uZWN0RXhjZXB0aW9uKGNhdXNlKSkge1xcbiAgICAgICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkge1xcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoXFxcIkNsaWVudCBjb25uZWN0aW9uIGNsb3NlZDogXFxcIiArIGN0eC5jaGFubmVsKCkucmVtb3RlQWRkcmVzcygpLCBjYXVzZSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAvLyBcXHU1MTc2XFx1NGVkNlxcdTdjN2JcXHU1NzhiXFx1NzY4NFxcdTVmMDJcXHU1ZTM4XFx1NGVjZFxcdTcxMzZcXHU4YmIwXFx1NWY1NVxcdTRlM2FcXHU5NTE5XFx1OGJlZlxcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcXFwiRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXFxcIiwgY2F1c2UpO1xcbiAgICAgICAgICAgIC8vIFxcdTUzZWFcXHU2NzA5XFx1NTcyOFxcdTkwMWFcXHU5MDUzXFx1NGVjZFxcdTcxMzZcXHU2ZDNiXFx1OGRjM1xcdTY1ZjZcXHU2MjRkXFx1NWMxZFxcdThiZDVcXHU1MTk5XFx1NTE2NVxcdTU0Y2RcXHU1ZTk0XFxuICAgICAgICAgICAgaWYgKGN0eC5jaGFubmVsKCkuaXNBY3RpdmUoKSkge1xcbiAgICAgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFxcXCJFUlIgXFxcIiArIGNhdXNlLmdldE1lc3NhZ2UoKSkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIC8vIFxcdTU5ODJcXHU2NzljXFx1OGZkZVxcdTYzYTVcXHU1ZGYyXFx1N2VjZlxcdTRlMGRcXHU1M2VmXFx1NzUyOFxcdWZmMGNcXHU1MTczXFx1OTVlZFxcdTViODNcXG4gICAgICAgIGlmICghY3R4LmNoYW5uZWwoKS5pc0FjdGl2ZSgpKSB7XFxuICAgICAgICAgICAgY3R4LmNsb3NlKCk7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBcXHU1MjI0XFx1NjVhZFxcdTVmMDJcXHU1ZTM4XFx1NjYyZlxcdTU0MjZcXHU2NjJmXFx1NzUzMVxcdTViYTJcXHU2MjM3XFx1N2FlZlxcdTY1YWRcXHU1ZjAwXFx1OGZkZVxcdTYzYTVcXHU1ZjE1XFx1OGQ3N1xcdTc2ODRcXG4gICAgICogXFxuICAgICAqIEBwYXJhbSBjYXVzZSBcXHU1ZjAyXFx1NWUzOFxcbiAgICAgKiBAcmV0dXJuIFxcdTU5ODJcXHU2NzljXFx1NjYyZlxcdThmZGVcXHU2M2E1XFx1NjVhZFxcdTVmMDBcXHU1ZjAyXFx1NWUzOFxcdThmZDRcXHU1NmRldHJ1ZVxcbiAgICAgKi9cXG4gICAgcHJpdmF0ZSBib29sZWFuIGlzQ2xpZW50RGlzY29ubmVjdEV4Y2VwdGlvbihUaHJvd2FibGUgY2F1c2UpIHtcXG4gICAgICAgIGlmIChjYXVzZSBpbnN0YW5jZW9mIElPRXhjZXB0aW9uKSB7XFxuICAgICAgICAgICAgU3RyaW5nIG1lc3NhZ2UgPSBjYXVzZS5nZXRNZXNzYWdlKCk7XFxuICAgICAgICAgICAgLy8gXFx1NjhjMFxcdTY3ZTVcXHU1NDA0XFx1NzljZFxcdTUzZWZcXHU4MGZkXFx1NzY4NFxcdThmZGVcXHU2M2E1XFx1NjVhZFxcdTVmMDBcXHU2ZDg4XFx1NjA2ZlxcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlICE9IG51bGwgJiYgKFxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFxcXCJDb25uZWN0aW9uIHJlc2V0IGJ5IHBlZXJcXFwiKSB8fFxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFxcXCJcXHU4ZmRjXFx1N2EwYlxcdTRlM2JcXHU2NzNhXFx1NWYzYVxcdThmZWJcXHU1MTczXFx1OTVlZFxcdTRlODZcXHU0ZTAwXFx1NGUyYVxcdTczYjBcXHU2NzA5XFx1NzY4NFxcdThmZGVcXHU2M2E1XFxcIikgfHxcXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb250YWlucyhcXFwiQnJva2VuIHBpcGVcXFwiKSB8fFxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFxcXCJDb25uZWN0aW9uIHJlZnVzZWRcXFwiKSB8fFxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFxcXCJDb25uZWN0aW9uIGNsb3NlZFxcXCIpIHx8XFxuICAgICAgICAgICAgICAgIGNhdXNlIGluc3RhbmNlb2YgU29ja2V0RXhjZXB0aW9uXFxuICAgICAgICAgICAgKTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTQ1LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDE0OX1dfSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBJJ2xsIG1vZGlmeSB0aGUgYE15Q29tbWFuZEhhbmRsZXIuamF2YWAgZmlsZSB0byBoYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3Rpb25zIG1vcmUgZ3JhY2VmdWxseTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhOlxuICAgICAxXHRwYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuICAgICA0XHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLlNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjtcbiAgICAgNlx0aW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuICAgICA3XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbiAgICAgOFx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YuQU9GSGFuZGxlcjtcbiAgICAgOVx0aW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbiAgICAxMFx0aW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG4gICAgMTFcdGltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbiAgICAxMlx0aW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG4gICAgMTNcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbiAgICAxNFx0aW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuY29yZS5SREJIYW5kbGVyO1xuICAgIDE1XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcbiAgICAxNlx0XG4gICAgMTdcdGltcG9ydCBqYXZhLnV0aWwuRW51bVNldDtcbiAgICAxOFx0aW1wb3J0IGphdmEudXRpbC5TZXQ7XG4gICAgMTlcdFxuICAgIDIwXHRAQ2hhbm5lbEhhbmRsZXIuU2hhcmFibGVcbiAgICAyMVx0cHVibGljIGNsYXNzIE15Q29tbWFuZEhhbmRsZXIgZXh0ZW5kcyBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI8UmVzcD4ge1xuICAgIDIyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlDb21tYW5kSGFuZGxlci5jbGFzcyk7XG4gICAgMjNcdCAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgMjRcdCAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICAyNVx0ICAgIHByaXZhdGUgZmluYWwgUkRCSGFuZGxlciByZGJIYW5kbGVyO1xuICAgIDI2XHRcbiAgICAyN1x0ICAgIC8vIOS9v+eUqEVudW1TZXTmj5Dpq5jmn6Xmib7mlYjnjodcbiAgICAyOFx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFNldDxDb21tYW5kVHlwZT4gV1JJVEVfQ09NTUFORFMgPSBFbnVtU2V0Lm9mKFxuICAgIDI5XHQgICAgICAgICAgICBDb21tYW5kVHlwZS5TRVQsIENvbW1hbmRUeXBlLkRFTCwgQ29tbWFuZFR5cGUuSU5DUiwgQ29tbWFuZFR5cGUuTVNFVCxcbiAgICAzMFx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuRVhQSVJFLCBDb21tYW5kVHlwZS5TQURELCBDb21tYW5kVHlwZS5TUkVNLCBDb21tYW5kVHlwZS5TUE9QLFxuICAgIDMxXHQgICAgICAgICAgICBDb21tYW5kVHlwZS5IU0VULCBDb21tYW5kVHlwZS5ITUVTVCwgQ29tbWFuZFR5cGUuSERFTCxcbiAgICAzMlx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuTFBVU0gsIENvbW1hbmRUeXBlLlJQVVNILCBDb21tYW5kVHlwZS5MUE9QLCBDb21tYW5kVHlwZS5SUE9QLCBDb21tYW5kVHlwZS5MUkVNLFxuICAgIDMzXHQgICAgICAgICAgICBDb21tYW5kVHlwZS5aQURELCBDb21tYW5kVHlwZS5aUkVNLENvbW1hbmRUeXBlLlNFTEVDVFxuICAgIDM0XHQgICAgKTtcbiAgICAzNVx0XG4gICAgMzZcdCAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlcihSZWRpc0NvcmUgcmVkaXNDb3JlLCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXIsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcikge1xuICAgIDM3XHQgICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIDM4XHQgICAgICAgIHRoaXMuYW9mSGFuZGxlciA9IGFvZkhhbmRsZXI7XG4gICAgMzlcdCAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gcmRiSGFuZGxlcjtcbiAgICA0MFx0XG4gICAgNDFcdFxuICAgIDQyXHQgICAgfVxuICAgIDQzXHRcbiAgICA0NFx0ICAgIEBPdmVycmlkZVxuICAgIDQ1XHQgICAgcHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgNDZcdCAgICAgICAgaWYgKG1zZyBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgIDQ3XHQgICAgICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBtc2c7XG4gICAgNDhcdCAgICAgICAgICAgIFJlc3AgcmVzcG9uc2UgPSBwcm9jZXNzQ29tbWFuZChhcnJheSk7XG4gICAgNDlcdCAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSk7XG4gICAgNTFcdCAgICAgICAgICAgIH1cbiAgICA1Mlx0ICAgICAgICB9IGVsc2Uge1xuICAgIDUzXHQgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gcmVxdWVzdCB0eXBlXCIpKTtcbiAgICA1NFx0ICAgICAgICB9XG4gICAgNTVcdCAgICB9XG4gICAgNTZcdFxuICAgIDU3XHQgICAgcHVibGljIFJlc3AgcHJvY2Vzc0NvbW1hbmQoUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgIDU4XHQgICAgICAgIGlmIChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPT0gMCkge1xuICAgIDU5XHQgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBlbXB0eSBjb21tYW5kXCIpO1xuICAgIDYwXHQgICAgICAgIH1cbiAgICA2MVx0XG4gICAgNjJcdCAgICAgICAgdHJ5IHtcbiAgICA2M1x0ICAgICAgICAgICAgUmVzcFtdIGFycmF5ID0gY29tbWFuZEFycmF5LmdldEFycmF5KCk7XG4gICAgNjRcdCAgICAgICAgICAgIFN0cmluZyBjb21tYW5kTmFtZSA9ICgoQnVsa1N0cmluZykgYXJyYXlbMF0pLmdldENvbnRlbnQoKS50b1V0ZjhTdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xuICAgIDY1XHQgICAgICAgICAgICBDb21tYW5kVHlwZSBjb21tYW5kVHlwZTtcbiAgICA2Nlx0XG4gICAgNjdcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNjhcdCAgICAgICAgICAgICAgICBjb21tYW5kVHlwZSA9IENvbW1hbmRUeXBlLnZhbHVlT2YoY29tbWFuZE5hbWUpO1xuICAgIDY5XHQgICAgICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkge1xuICAgIDcwXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biBjb21tYW5kICdcIiArIGNvbW1hbmROYW1lICsgXCInXCIpO1xuICAgIDcxXHQgICAgICAgICAgICB9XG4gICAgNzJcdFxuICAgIDczXHQgICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlSW5DbHVzdGVyKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpKSB7XG4gICAgNzRcdCAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2x1c3RlckNvbW1hbmQoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSk7XG4gICAgNzVcdCAgICAgICAgICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICA3OFx0ICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGFycmF5KTtcbiAgICA3OVx0XG4gICAgODBcdCAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGFycmF5Lmxlbmd0aCA+IDEpIHtcbiAgICA4M1x0ICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksICgoQnVsa1N0cmluZykgYXJyYXlbMV0pLmdldENvbnRlbnQoKSk7XG4gICAgODRcdCAgICAgICAgICAgIH1cbiAgICA4NVx0XG4gICAgODZcdCAgICAgICAgICAgIC8vIOWmguaenOWQr+eUqOS6hkFPRu+8jOiusOW9leWRveS7pFxuICAgIDg3XHQgICAgICAgICAgIGlmIChhb2ZIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpKXtcbiAgICA4OFx0ICAgICAgICAgICAgICAgIGFvZkhhbmRsZXIuYXBwZW5kKGNvbW1hbmRBcnJheSk7XG4gICAgODlcdCAgICAgICAgICAgIH1cbiAgICA5MFx0XG4gICAgOTFcdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgOTJcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA5M1x0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBjb21tYW5kXCIsIGUpO1xuICAgIDk0XHQgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA5NVx0ICAgICAgICB9XG4gICAgOTZcdCAgICB9XG4gICAgOTdcdFxuICAgIDk4XHQgICAgcHJpdmF0ZSBib29sZWFuIHNob3VsZEhhbmRsZUluQ2x1c3RlcihDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgIDk5XHQgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgIDEwMFx0ICAgICAgICByZXR1cm4gY2x1c3RlciAhPSBudWxsICYmIGNsdXN0ZXIuaXNTaGFyZGluZ0VuYWJsZWQoKSAmJlxuICAgMTAxXHQgICAgICAgICAgICAgICAgKGNvbW1hbmRUeXBlID09IENvbW1hbmRUeXBlLkdFVCB8fCBjb21tYW5kVHlwZSA9PSBDb21tYW5kVHlwZS5TRVQpO1xuICAgMTAyXHQgICAgfVxuICAgMTAzXHRcbiAgIDEwNFx0ICAgIHByaXZhdGUgUmVzcCBoYW5kbGVDbHVzdGVyQ29tbWFuZChDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgMTA1XHQgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgIDEwNlx0ICAgICAgICBCeXRlc1dyYXBwZXIga2V5ID0gKChCdWxrU3RyaW5nKSBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKVsxXSkuZ2V0Q29udGVudCgpO1xuICAgMTA3XHQgICAgICAgIFN0cmluZyB0YXJnZXROb2RlSWQgPSBjbHVzdGVyLmdldE5vZGVGb3JLZXkoa2V5KTtcbiAgIDEwOFx0ICAgICAgICBTdHJpbmcgY3VycmVudE5vZGVJZCA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDdXJyZW50Tm9kZSgpLmdldElkKCk7XG4gICAxMDlcdFxuICAgMTEwXHQgICAgICAgIGlmIChjdXJyZW50Tm9kZUlkLmVxdWFscyh0YXJnZXROb2RlSWQpKSB7XG4gICAxMTFcdCAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgIDExMlx0ICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGNvbW1hbmRBcnJheS5nZXRBcnJheSgpKTtcbiAgIDExM1x0ICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuICAgMTE0XHRcbiAgIDExNVx0ICAgICAgICAgICAgLy8g56Gu5L+d5pys5Zyw5omn6KGM5pe25Lmf6Kem5Y+RUkRCXG4gICAxMTZcdCAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA+IDEpIHtcbiAgIDExN1x0ICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksIGtleSk7XG4gICAxMThcdCAgICAgICAgICAgIH1cbiAgIDExOVx0XG4gICAxMjBcdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAxMjFcdCAgICAgICAgfSBlbHNlIHtcbiAgIDEyMlx0ICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBmb3J3YXJkVG9UYXJnZXROb2RlKHRhcmdldE5vZGVJZCwgY29tbWFuZEFycmF5KTtcbiAgIDEyM1x0ICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgIDEyNFx0ICAgICAgICB9XG4gICAxMjVcdCAgICB9XG4gICAxMjZcdFxuICAgMTI3XHQgICAgcHJpdmF0ZSBSZXNwIGZvcndhcmRUb1RhcmdldE5vZGUoU3RyaW5nIHRhcmdldE5vZGVJZCwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgMTI4XHQgICAgICAgIHRyeSB7XG4gICAxMjlcdCAgICAgICAgICAgIC8vIOiOt+WPluebruagh+iKgueCueeahOacjeWKoeWunuS+i1xuICAgMTMwXHQgICAgICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAxMzFcdCAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIHRhcmdldFNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUodGFyZ2V0Tm9kZUlkKTtcbiAgIDEzMlx0XG4gICAxMzNcdCAgICAgICAgICAgIGlmICh0YXJnZXRTZXJ2aWNlICE9IG51bGwpIHtcbiAgIDEzNFx0ICAgICAgICAgICAgICAgIC8vIOi9rOWPkeWRveS7pOWIsOebruagh+iKgueCuVxuICAgMTM1XHQgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZEFycmF5KTtcbiAgIDEzNlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDEzN1x0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHRhcmdldCBub2RlIG5vdCBhdmFpbGFibGU6IFwiICsgdGFyZ2V0Tm9kZUlkKTtcbiAgIDEzOFx0ICAgICAgICAgICAgfVxuICAgMTM5XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxNDBcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZvcndhcmRpbmcgY29tbWFuZCB0byBub2RlIFwiICsgdGFyZ2V0Tm9kZUlkLCBlKTtcbiAgIDE0MVx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTQyXHQgICAgICAgIH1cbiAgIDE0M1x0ICAgIH1cbiAgIDE0NFx0XG4gICAxNDVcdCAgICBAT3ZlcnJpZGVcbiAgIDE0Nlx0ICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgIDE0N1x0ICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgMTQ4XHQgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbiAgIDE0OVx0ICAgIH1cbiAgIDE1MFx0fVxuICAgMTUxXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDE1MVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxR21ONjZCeU1DaWdxdGI2MTRwWHdwaiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDo1MDoxOS45MDZaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJJ2xsIG1vZGlmeSB0aGUgYE15Q29tbWFuZEhhbmRsZXIuamF2YWAgZmlsZSB0byBoYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3Rpb25zIG1vcmUgZ3JhY2VmdWxseTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJkNjY3OTMxMi02NDY2LTQ0OTEtYWNmNS1lOGEyMWFlOGQ4YTQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFYQUdzRExVZWVCZWRRZ0Q0d3BXa3M4IiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIGFueSBsb2c0aiBjb25maWd1cmF0aW9uIGZpbGVzIGluIHRoZSBwcm9qZWN0LCBzdWNoIGFzIGxvZzRqLnByb3BlcnRpZXMgb3IgbG9nNGoueG1sXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiVGhlIGNoYW5nZXMgbG9vayBnb29kLiBOb3cgbGV0J3MgYWxzbyBjaGVjayBpZiB0aGVyZSdzIGEgbG9nNGogY29uZmlndXJhdGlvbiBmaWxlIHRoYXQgd2UgbWlnaHQgbmVlZCB0byBtb2RpZnkgdG8gYWRqdXN0IHRoZSBsb2dnaW5nIGxldmVsIGZvciB0aGVzZSBjb25uZWN0aW9uLXJlbGF0ZWQgZXZlbnRzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDEzXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG4gICAgMTRcdGltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcbiAgICAxNVx0aW1wb3J0IHNpdGUuaG5meTI1OC5zZXJ2ZXIuTXlSZWRpc1NlcnZpY2U7XG4gICAgMTZcdFxuICAgIDE3XHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAxOFx0aW1wb3J0IGphdmEubmV0LlNvY2tldEV4Y2VwdGlvbjtcbiAgICAxOVx0aW1wb3J0IGphdmEudXRpbC5FbnVtU2V0O1xuICAgIDIwXHRpbXBvcnQgamF2YS51dGlsLlNldDtcbiAgICAyMVx0XG4gICAgMjJcdEBDaGFubmVsSGFuZGxlci5TaGFyYWJsZVxuICAgIDIzXHRwdWJsaWMgY2xhc3MgTXlDb21tYW5kSGFuZGxlciBleHRlbmRzIFNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjxSZXNwPiB7XG4gICAgMjRcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihNeUNvbW1hbmRIYW5kbGVyLmNsYXNzKTtcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE0M1x0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTQ0XHQgICAgICAgIH1cbiAgIDE0NVx0ICAgIH1cbiAgIDE0Nlx0XG4gICAxNDdcdCAgICBAT3ZlcnJpZGVcbiAgIDE0OFx0ICAgIHB1YmxpYyB2b2lkIGNoYW5uZWxJbmFjdGl2ZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4KSB7XG4gICAxNDlcdCAgICAgICAgLy8g5a6i5oi356uv5pat5byA6L+e5o6l5pe26LCD55SoXG4gICAxNTBcdCAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAxNTFcdCAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkNsaWVudCBkaXNjb25uZWN0ZWQ6IFwiICsgY3R4LmNoYW5uZWwoKS5yZW1vdGVBZGRyZXNzKCkpO1xuICAgMTUyXHQgICAgICAgIH1cbiAgIDE1M1x0ICAgICAgICAvLyDosIPnlKjniLbnsbvmlrnms5Xnoa7kv53kuovku7bkvKDmkq1cbiAgIDE1NFx0ICAgICAgICBjdHguZmlyZUNoYW5uZWxJbmFjdGl2ZSgpO1xuICAgMTU1XHQgICAgfVxuICAgMTU2XHRcbiAgIDE1N1x0ICAgIEBPdmVycmlkZVxuICAgMTU4XHQgICAgcHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFRocm93YWJsZSBjYXVzZSkge1xuICAgMTU5XHQgICAgICAgIC8vIOajgOafpeaYr+WQpuaYr+WuouaIt+err+aWreW8gOi/nuaOpeWvvOiHtOeahOW8guW4uFxuICAgMTYwXHQgICAgICAgIGlmIChpc0NsaWVudERpc2Nvbm5lY3RFeGNlcHRpb24oY2F1c2UpKSB7XG4gICAxNjFcdCAgICAgICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkge1xuICAgMTYyXHQgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiQ2xpZW50IGNvbm5lY3Rpb24gY2xvc2VkOiBcIiArIGN0eC5jaGFubmVsKCkucmVtb3RlQWRkcmVzcygpLCBjYXVzZSk7XG4gICAxNjNcdCAgICAgICAgICAgIH1cbiAgIDE2NFx0ICAgICAgICB9IGVsc2Uge1xuICAgMTY1XHQgICAgICAgICAgICAvLyDlhbbku5bnsbvlnovnmoTlvILluLjku43nhLborrDlvZXkuLrplJnor69cbiAgIDE2Nlx0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXCIsIGNhdXNlKTtcbiAgIDE2N1x0ICAgICAgICAgICAgLy8g5Y+q5pyJ5Zyo6YCa6YGT5LuN54S25rS76LeD5pe25omN5bCd6K+V5YaZ5YWl5ZON5bqUXG4gICAxNjhcdCAgICAgICAgICAgIGlmIChjdHguY2hhbm5lbCgpLmlzQWN0aXZlKCkpIHtcbiAgIDE2OVx0ICAgICAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbiAgIDE3MFx0ICAgICAgICAgICAgfVxuICAgMTcxXHQgICAgICAgIH1cbiAgIDE3Mlx0ICAgICAgICAvLyDlpoLmnpzov57mjqXlt7Lnu4/kuI3lj6/nlKjvvIzlhbPpl63lroNcbiAgIDE3M1x0ICAgICAgICBpZiAoIWN0eC5jaGFubmVsKCkuaXNBY3RpdmUoKSkge1xuICAgMTc0XHQgICAgICAgICAgICBjdHguY2xvc2UoKTtcbiAgIDE3NVx0ICAgICAgICB9XG4gICAxNzZcdCAgICB9XG4gICAxNzdcdFxuICAgMTc4XHQgICAgLyoqXG4gICAxNzlcdCAgICAgKiDliKTmlq3lvILluLjmmK/lkKbmmK/nlLHlrqLmiLfnq6/mlq3lvIDov57mjqXlvJXotbfnmoRcbiAgIDE4MFx0ICAgICAqXG4gICAxODFcdCAgICAgKiBAcGFyYW0gY2F1c2Ug5byC5bi4XG4gICAxODJcdCAgICAgKiBAcmV0dXJuIOWmguaenOaYr+i/nuaOpeaWreW8gOW8guW4uOi/lOWbnnRydWVcbiAgIDE4M1x0ICAgICAqL1xuICAgMTg0XHQgICAgcHJpdmF0ZSBib29sZWFuIGlzQ2xpZW50RGlzY29ubmVjdEV4Y2VwdGlvbihUaHJvd2FibGUgY2F1c2UpIHtcbiAgIDE4NVx0ICAgICAgICBpZiAoY2F1c2UgaW5zdGFuY2VvZiBJT0V4Y2VwdGlvbikge1xuICAgMTg2XHQgICAgICAgICAgICBTdHJpbmcgbWVzc2FnZSA9IGNhdXNlLmdldE1lc3NhZ2UoKTtcbiAgIDE4N1x0ICAgICAgICAgICAgLy8g5qOA5p+l5ZCE56eN5Y+v6IO955qE6L+e5o6l5pat5byA5raI5oGvXG4gICAxODhcdCAgICAgICAgICAgIHJldHVybiBtZXNzYWdlICE9IG51bGwgJiYgKFxuICAgMTg5XHQgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250YWlucyhcIkNvbm5lY3Rpb24gcmVzZXQgYnkgcGVlclwiKSB8fFxuICAgMTkwXHQgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250YWlucyhcIui/nOeoi+S4u+acuuW8uui/q+WFs+mXreS6huS4gOS4queOsOacieeahOi/nuaOpVwiKSB8fFxuICAgMTkxXHQgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250YWlucyhcIkJyb2tlbiBwaXBlXCIpIHx8XG4gICAxOTJcdCAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFwiQ29ubmVjdGlvbiByZWZ1c2VkXCIpIHx8XG4gICAxOTNcdCAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFwiQ29ubmVjdGlvbiBjbG9zZWRcIikgfHxcbiAgIDE5NFx0ICAgICAgICAgICAgICAgIGNhdXNlIGluc3RhbmNlb2YgU29ja2V0RXhjZXB0aW9uXG4gICAxOTVcdCAgICAgICAgICAgICk7XG4gICAxOTZcdCAgICAgICAgfVxuICAgMTk3XHQgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDE5OFx0ICAgIH1cbiAgIDE5OVx0fVxuICAgMjAwXHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTFV0dGd0SzU4c1dWVWtYVmJUMTRQSiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDo1MDozNi41MjdaIiwicmVzcG9uc2VfdGV4dCI6IlRoZSBjaGFuZ2VzIGxvb2sgZ29vZC4gTm93IGxldCdzIGFsc28gY2hlY2sgaWYgdGhlcmUncyBhIGxvZzRqIGNvbmZpZ3VyYXRpb24gZmlsZSB0aGF0IHdlIG1pZ2h0IG5lZWQgdG8gbW9kaWZ5IHRvIGFkanVzdCB0aGUgbG9nZ2luZyBsZXZlbCBmb3IgdGhlc2UgY29ubmVjdGlvbi1yZWxhdGVkIGV2ZW50czpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJhNTVhNzBmZS1iYzUyLTQwYjgtOTA0Mi01NGJiNzkzNWI5OWQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDE2MW9hQVdxdFhMVW5WaERleGYyYzJvIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNyYy9tYWluL3Jlc291cmNlcy9Mb2c0ai5wcm9wZXJ0aWVzXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSBmb3VuZCB0aGUgbG9nNGogY29uZmlndXJhdGlvbiBmaWxlLCBidXQgaXQgYXBwZWFycyB0byBiZSBlbmNvZGVkIGluY29ycmVjdGx5LiBMZXQncyBtb2RpZnkgaXQgdG8gcHJvcGVybHkgaGFuZGxlIHRoZSBjbGllbnQgZGlzY29ubmVjdGlvbiBldmVudHM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9yZXNvdXJjZXMvTG9nNGoucHJvcGVydGllc1xuIyMjIyMjIyMjIyMjI1xuIyDDisOkwrPDtsK1wr3Cv8OYw5bDhsOMwqhcbiMjIyMjIyMjIyMjIyNcblxuIyBsb2c0ai5yb290TG9nZ2Vyw4jDlcOWwr7DisOkwrPDtsOAw6DCscOwwrrDjcK8wrbCscOwwqPCusOWwrvDisOkwrPDtsKywrvCtcONw5PDmsK4w4PCvMK2wrHDsMK1w4TDiMOVw5bCvsOQw4XDj8KiREVCVUcgPCBJTkZPIDwgV0FSTiA8IEVSUk9SIDwgRkFUQUxcbiMgV0FSTsKjwrrDiMOVw5bCvsK8wrbCscOwICAgICBDT05TT0xFwqPCusOKw6TCs8O2w47Cu8OWw4PDl8OUwrzCusK2wqjDksOlwrXDhMOSwrvCuMO2w4PDu8OXw5YgICAgICAgbG9nZmlsZcKjwrrDisOkwrPDtsOOwrvDlsODw5fDlMK8wrrCtsKow5LDpcK1w4TDksK7wrjDtsODw7vDl8OWXG5sb2c0ai5yb290TG9nZ2VyPUlORk8sQ09OU09MRSxsb2dmaWxlXG4jIMOFw6TDlsODQ09OU09MRcOKw6TCs8O2wrXCvcK/w5jDlsOGw4zCqFxubG9nNGouYXBwZW5kZXIuQ09OU09MRT1vcmcuYXBhY2hlLmxvZzRqLkNvbnNvbGVBcHBlbmRlciBcbiMgw4XDpMOWw4NDT05TT0xFw4nDqMOWw4PDjsKqw5fDlMK2wqjDksOlwrLCvMK+w5bDhMKjw4rCvVxubG9nNGouYXBwZW5kZXIuQ09OU09MRS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0IFxuIyDDhcOkw5bDg0NPTlNPTEXDiMOVw5bCvsK1w4TDisOkwrPDtsK4w7HDisK9ICBbZnJhbWVdIDIwMTktMDgtMjIgMjI6NTI6MTIsMDAwICAlcsK6w4TCt8ORwrrDgcODw6vDisO9ICVww4jDlcOWwr7CtcOEw5PDhcOPw4jCvMK2ICV0w4/Dn8Kzw4zDg8O7ICVDw4vDucOKw7TDgMOgw4PDu8ONwqjCs8Kjw47CqsOIwqvDgMOgw4PDuyAlTMK0w7rDgsOrw5bDkMK1w4TDkMOQwrrDhSAleMOPw5/Cs8OMw4/DoMK5w5jDgcKqwrXDhE5EQyAlbcOIw5XDlsK+ICVuwrvCu8OQw5BcbmxvZzRqLmFwcGVuZGVyLkNPTlNPTEUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPVtmcmFtZV0gJWR7eXl5eS1NTS1kZCBISDptbTpzcyxTU1N9IC0gJS00ciAlLTVwIFsldF0gJUM6JUwgJXggLSAlbSVuXG5cbiMjIyMjIyMjIyMjIyMjIyNcbiMgw4rDpMKzw7bCtcK9w4jDlcOWwr7DjsOEwrzDvsOWw5BcbiMjIyMjIyMjIyMjIyMjIyNcblxuIyDDhcOkw5bDg2xvZ2ZpbGXDisOkwrPDtsK1wr3DjsOEwrzDvsOWw5Agw47DhMK8w77CtMOzw5DCocK1wr3CtMOvw5bCuMK2wqjCs8OfwrTDp8K1w4TDisKxwrrDssKyw7rDicO6w5DDgsK1w4TDiMOVw5bCvsOOw4TCvMO+XG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxuIyDCscKjwrTDpsKxw6DDgsOrwrjDscOKwr1cbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuRW5jb2Rpbmc9VVRGLThcbiMgw4rDpMKzw7bDjsOEwrzDvsOOwrvDlsODwrTDi8OOwqrDj8Ouw4TCv8K4w7nDhMK/w4LCvMOPw4LCtcOEbG9nc8OOw4TCvMO+wrzDkMOWw5BcbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuRmlsZT1sb2dzL3Jvb3QubG9nXG4jIMK6w7PDl8K6wr/DicOSw5TDisOHS0IsTUIsR0LCtMOvwrXCvcK4w4PCtMOzw5DCocK6w7PCtMK0wr3CqMOQw4LCtcOEw4jDlcOWwr7DjsOEwrzDvlxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5NYXhGaWxlU2l6ZT0xME1CXG4jIMOJw6jDlsODwrnDtsK2wqjDjsOEwrzDvsK1w4TDl8OuwrTDs8OWwrUzIMOWwrjCv8OJw5LDlMKyw7rDicO6cm9vdC5sb2cuMcKhwqJyb290LmxvZy4ywqHConJvb3QubG9nLjPCusONcm9vdC5sb2fDi8OEwrjDtsOIw5XDlsK+w47DhMK8w75cbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4QmFja3VwSW5kZXg9MyAgXG4jIMOFw6TDlsODbG9nZmlsZcOOwqrDl8OUwrbCqMOSw6XCssK8wr7DlsOEwqPDisK9XG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXRcbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPSVke3l5eXktTU0tZGQgSEg6bW06c3N9ICVGICVwICVtJW5cblxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgwrbDlMKywrvDjcKswrXDhMOAw6DDisOkwrPDtsKywrvDjcKswrXDhMOIw5XDlsK+w47DhMK8w75cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbiMgY2x1Yi5iYWdlZGF0ZcKww7zDj8OCwrXDhMOIw5XDlsK+wrXCpcK2w4DDisOkwrPDtlxubG9nNGoubG9nZ2VyLmNsdWIuYmFnZWRhdGU9REVCVUcsYmFnZWRhdGVcbiMgw4nDqMOWw4PDjsKqZmFsc2XCuMODw4jDlcOWwr7DkMOFw4/CosK+w43CssK7wrvDocK8w5PDiMOrwrXCvXJvb3RMb2dnZXLDlsOQw4HDi1xubG9nNGouYWRkaXRpdml0eS5jbHViLmJhZ2VkYXRlPWZhbHNlXG4jIMOPw4LDg8Omwr7DjcK6w43DicOPw4PDpsOFw6TDlsODw5LCu8ORw7nDgcOLXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZT1vcmcuYXBhY2hlLmxvZzRqLlJvbGxpbmdGaWxlQXBwZW5kZXJcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLkVuY29kaW5nPVVURi04XG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5GaWxlPWxvZ3MvYmFnZWRhdGUubG9nXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5NYXhGaWxlU2l6ZT0xME1CXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5NYXhCYWNrdXBJbmRleD0zXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0XG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5sYXlvdXQuQ29udmVyc2lvblBhdHRlcm49JWR7eXl5eS1NTS1kZCBISDptbTpzc30gJUYgJXAgJW0lbi4uLlxuUGF0aDogcG9tLnhtbFxuPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XG48cHJvamVjdCB4bWxucz1cImh0dHA6Ly9tYXZlbi5hcGFjaGUub3JnL1BPTS80LjAuMFwiXG4gICAgICAgICB4bWxuczp4c2k9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiXG4gICAgICAgICB4c2k6c2NoZW1hTG9jYXRpb249XCJodHRwOi8vbWF2ZW4uYXBhY2hlLm9yZy9QT00vNC4wLjAgaHR0cDovL21hdmVuLmFwYWNoZS5vcmcveHNkL21hdmVuLTQuMC4wLnhzZFwiPlxuICAgIDxtb2RlbFZlcnNpb24+NC4wLjA8L21vZGVsVmVyc2lvbj5cblxuICAgIDxncm91cElkPnNpdGUuaG5meTI1ODwvZ3JvdXBJZD5cbiAgICA8YXJ0aWZhY3RJZD5IdWFSZWRpczwvYXJ0aWZhY3RJZD5cbiAgICA8dmVyc2lvbj4xLjAtU05BUFNIT1Q8L3ZlcnNpb24+XG5cbiAgICA8cHJvcGVydGllcz5cbiAgICAgICAgPG1hdmVuLmNvbXBpbGVyLnNvdXJjZT44PC9tYXZlbi5jb21waWxlci5zb3VyY2U+XG4gICAgICAgIDxtYXZlbi5jb21waWxlci50YXJnZXQ+ODwvbWF2ZW4uY29tcGlsZXIudGFyZ2V0PlxuICAgICAgICA8cHJvamVjdC5idWlsZC5zb3VyY2VFbmNvZGluZz5VVEYtODwvcHJvamVjdC5idWlsZC5zb3VyY2VFbmNvZGluZz5cbiAgICA8L3Byb3BlcnRpZXM+XG5cbiAgICA8ZGVwZW5kZW5jaWVzPlxuICAgICAgICA8ZGVwZW5kZW5jeT5cbiAgICAgICAgICAgIDxncm91cElkPmlvLm5ldHR5PC9ncm91cElkPlxuICAgICAgICAgICAgPGFydGlmYWN0SWQ+bmV0dHktYWxsPC9hcnRpZmFjdElkPlxuICAgICAgICAgICAgPHZlcnNpb24+NC4xLjUxLkZpbmFsPC92ZXJzaW9uPlxuICAgICAgICA8L2RlcGVuZGVuY3k+XG5cbiAgICAgICAgPGRlcGVuZGVuY3k+XG4gICAgICAgICAgICA8Z3JvdXBJZD5sb2c0ajwvZ3JvdXBJZD5cbiAgICAgICAgICAgIDxhcnRpZmFjdElkPmxvZzRqPC9hcnRpZmFjdElkPlxuICAgICAgICAgICAgPHZlcnNpb24+MS4yLjE3PC92ZXJzaW9uPlxuICAgICAgICA8L2RlcGVuZGVuY3k+XG5cbiAgICAgICAgPGRlcGVuZGVuY3k+XG4gICAgICAgICAgICA8Z3JvdXBJZD5vcmcuYXBhY2hlLmNvbW1vbnM8L2dyb3VwSWQ+XG4gICAgICAgICAgICA8YXJ0aWZhY3RJZD5jb21tb25zLXBvb2wyPC9hcnRpZmFjdElkPlxuICAgICAgICAgICAgPHZlcnNpb24+Mi4xMS4xPC92ZXJzaW9uPlxuICAgICAgICA8L2RlcGVuZGVuY3k+XG5cbiAgICAgICAgPCEtLSBKTUggQ29yZSAtLT5cbiAgICAgICAgPGRlcGVuZGVuY3k+XG4gICAgICAgICAgICA8Z3JvdXBJZD5vcmcub3Blbmpkay5qbWg8L2dyb3VwSWQ+XG4gICAgICAgICAgICA8YXJ0aWZhY3RJZD5qbWgtY29yZTwvYXJ0aWZhY3RJZD5cbiAgICAgICAgICAgIDx2ZXJzaW9uPjEuMzU8L3ZlcnNpb24+XG4gICAgICAgIDwvZGVwZW5kZW5jeT5cblxuICAgICAgICA8IS0tIEpNSCBBbm5vdGF0aW9uIFByb2Nlc3NvciAtLT5cbiAgICAgICAgPGRlcGVuZGVuY3k+XG4gICAgICAgICAgICA8Z3JvdXBJZD5vcmcub3Blbmpkay5qbWg8L2dyb3VwSWQ+XG4gICAgICAgICAgICA8YXJ0aWZhY3RJZD5qbWgtZ2VuZXJhdG9yLWFubnByb2Nlc3M8L2FydGlmYWN0SWQ+XG4gICAgICAgICAgICA8dmVyc2lvbj4xLjM1PC92ZXJzaW9uPlxuICAgICAgICAgICAgPHNjb3BlPnByb3ZpZGVkPC9zY29wZT5cbiAgICAgICAgPC9kZXBlbmRlbmN5PlxuXG4gICAgICAgIDxkZXBlbmRlbmN5PlxuICAgICAgICAgICAgPGdyb3VwSWQ+b3JnLmx6NDwvZ3JvdXBJZD5cbiAgICAgICAgICAgIDxhcnRpZmFjdElkPmx6NC1qYXZhPC9hcnRpZmFjdElkPlxuICAgICAgICAgICAgPHZlcnNpb24+MS44LjA8L3ZlcnNpb24+XG4gICAgICAgIDwvZGVwZW5kZW5jeT5cblxuXG4gICAgICAgIDxkZXBlbmRlbmN5PlxuICAgICAgICAgICAgPGdyb3VwSWQ+aW8uZ2l0aHViLmthcmxhdGVtcDwvZ3JvdXBJZD5cbiAgICAgICAgICAgIDxhcnRpZmFjdElkPnVuc2FmZS1hY2Nlc3NvcjwvYXJ0aWZhY3RJZD5cbiAgICAgICAgICAgIDx2ZXJzaW9uPjEuNy4wPC92ZXJzaW9uPlxuICAgICAgICA8L2RlcGVuZGVuY3k+XG5cbiAgICA8L2RlcGVuZGVuY2llcz5cblxuPC9wcm9qZWN0Pi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvUmVkaXNTZXJ2ZXJTdGFydGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4O1xuXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguc2VydmVyLlJlZGlzU2VydmljZTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbnB1YmxpYyBjbGFzcyBSZWRpc1NlcnZlclN0YXJ0ZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKFJlZGlzU2VydmVyU3RhcnRlci5jbGFzcyk7XG4gICAgcHJpdmF0ZSBzdGF0aWMgUmVkaXNTZXJ2aWNlIHJlZGlzU2VydmljZTtcblxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIC8v6buY6K6k56uv5Y+jXG4gICAgICAgIGludCBwb3J0ID0gNjM3OTtcblxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBvcnQgPSBJbnRlZ2VyLnBhcnNlSW50KGFyZ3NbMF0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHBvcnQgbnVtYmVyLCB1c2luZyBkZWZhdWx0OiBcIiArIHBvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5Yib5bu65bm25ZCv5YqoUmVkaXPmnI3liqFcbiAgICAgICAgcmVkaXNTZXJ2aWNlID0gbmV3IE15UmVkaXNTZXJ2aWNlKHBvcnQpO1xuXG4gICAgICAgIC8vIOa3u+WKoOWFs+mXremSqeWtkFxuICAgICAgICBSdW50aW1lLmdldFJ1bnRpbWUoKS5hZGRTaHV0ZG93bkhvb2sobmV3IFRocmVhZCgoKSAtPiB7XG4gICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi5q2j5Zyo5YWz6ZetUmVkaXPmnI3liqHlmaguLi5cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlZGlzU2VydmljZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIC8vIOe7meS4gOS6m+aXtumXtOiuqeaXpeW/l+WujOaIkOWGmeWFpVxuICAgICAgICAgICAgICAgIFRocmVhZC5zbGVlcCg1MDApO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLlhbPpl63mnI3liqHml7blj5HnlJ/plJnor69cIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwiUmVkaXPmnI3liqHlmajlt7LlhbPpl61cIik7XG4gICAgICAgIH0pKTtcblxuICAgICAgICByZWRpc1NlcnZpY2Uuc3RhcnQoKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IC5naXRpZ25vcmVcbnRhcmdldC9cbiEubXZuL3dyYXBwZXIvbWF2ZW4td3JhcHBlci5qYXJcbiEqKi9zcmMvbWFpbi8qKi90YXJnZXQvXG4hKiovc3JjL3Rlc3QvKiovdGFyZ2V0L1xuXG4jIyMgSW50ZWxsaUogSURFQSAjIyNcbi5pZGVhL21vZHVsZXMueG1sXG4uaWRlYS9qYXJSZXBvc2l0b3JpZXMueG1sXG4uaWRlYS9jb21waWxlci54bWxcbi5pZGVhL2xpYnJhcmllcy9cbiouaXdzXG4qLmltbFxuKi5pcHJcblxuIyMjIEVjbGlwc2UgIyMjXG4uYXB0X2dlbmVyYXRlZFxuLmNsYXNzcGF0aFxuLmZhY3RvcnlwYXRoXG4ucHJvamVjdFxuLnNldHRpbmdzXG4uc3ByaW5nQmVhbnNcbi5zdHM0LWNhY2hlXG5cbiMjIyBOZXRCZWFucyAjIyNcbi9uYnByb2plY3QvcHJpdmF0ZS9cbi9uYmJ1aWxkL1xuL2Rpc3QvXG4vbmJkaXN0L1xuLy5uYi1ncmFkbGUvXG5idWlsZC9cbiEqKi9zcmMvbWFpbi8qKi9idWlsZC9cbiEqKi9zcmMvdGVzdC8qKi9idWlsZC9cblxuIyMjIFZTIENvZGUgIyMjXG4udnNjb2RlL1xuXG4jIyMgTWFjIE9TICMjI1xuLkRTX1N0b3JlLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJIYW5kbGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnJkYi5jb3JlO1xuXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuZXhlY3V0b3IuRXhlY3V0b3JNYW5hZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIucG9saWN5LkNoYW5nZVRyYWNrZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5wb2xpY3kuU2F2ZVBvbGljeTtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuKjtcblxucHVibGljIGNsYXNzIFJEQkhhbmRsZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyIGxvZ2dlciA9IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyLmdldExvZ2dlcihSREJIYW5kbGVyLmNsYXNzKTtcblxuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIFJEQlNhdmVyIHNhdmVyO1xuICAgIHByaXZhdGUgZmluYWwgUkRCTG9hZGVyIGxvYWRlcjtcbiAgICBwcml2YXRlIGZpbmFsIFNhdmVQb2xpY3kgc2F2ZVBvbGljeTtcbiAgICBwcml2YXRlIGZpbmFsIENoYW5nZVRyYWNrZXIgY2hhbmdlVHJhY2tlcjtcbiAgICBwcml2YXRlIGZpbmFsIEV4ZWN1dG9yTWFuYWdlciBleGVjdXRvck1hbmFnZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJGaWxlTWFuYWdlciBmaWxlTWFuYWdlcjtcblxuICAgIHByaXZhdGUgdm9sYXRpbGUgYm9vbGVhbiBpc1NhdmluZyA9IGZhbHNlO1xuXG4gICAgcHVibGljIFJEQkhhbmRsZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSkge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICAgICAgdGhpcy5leGVjdXRvck1hbmFnZXIgPSBuZXcgRXhlY3V0b3JNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc2F2ZXIgPSBuZXcgUkRCU2F2ZXIocmVkaXNDb3JlLCBleGVjdXRvck1hbmFnZXIuZ2V0SW9FeGVjdXRvcigpKTtcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBuZXcgUkRCTG9hZGVyKHJlZGlzQ29yZSk7XG4gICAgICAgIHRoaXMuc2F2ZVBvbGljeSA9IG5ldyBTYXZlUG9saWN5KCk7XG4gICAgICAgIHRoaXMuY2hhbmdlVHJhY2tlciA9IG5ldyBDaGFuZ2VUcmFja2VyKCk7XG4gICAgICAgIHRoaXMuZmlsZU1hbmFnZXIgPSBuZXcgUkRCRmlsZU1hbmFnZXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBpbml0aWFsaXplKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9hZCgpO1xuICAgICAgICAgICAgc3RhcnRBdXRvU2F2ZSgpO1xuICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLliJ3lp4vljJZSRELlpITnkIblmajlpLHotKVcIiwgZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHZvaWQgc3RhcnRBdXRvU2F2ZSgpIHtcbiAgICAgICAgZXhlY3V0b3JNYW5hZ2VyLmdldFNjaGVkdWxlcigpLnNjaGVkdWxlQXRGaXhlZFJhdGUoKCkgLT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjaGVja1NhdmVDb25kaXRpb25zKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuiHquWKqOS/neWtmOajgOafpeWksei0pVwiLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMSwgMSwgVGltZVVuaXQuU0VDT05EUyk7XG4gICAgfVxuLi4uXG5cbiAgICBwdWJsaWMgdm9pZCBsb2FkKCkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCLlvIDlp4vliqDovb1SRELmlofku7ZcIik7XG4gICAgICAgIGxvYWRlci5jbGVhckFsbERhdGFiYXNlcygpO1xuXG4gICAgICAgIGlmIChmaWxlTWFuYWdlci5mdWxsUmRiRXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkUkRCKGZpbGVNYW5hZ2VyLmdldEZ1bGxSZGJGaWxlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbGVNYW5hZ2VyLmluY3JlbWVudGFsUmRiRXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkUkRCKGZpbGVNYW5hZ2VyLmdldEluY3JlbWVudGFsUmRiRmlsZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ2dlci5pbmZvKFwiUkRC5paH5Lu25Yqg6L295oiQ5YqfXCIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNodXRkb3duKCkge1xuICAgICAgICBleGVjdXRvck1hbmFnZXIuc2h1dGRvd24oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpc1NhdmluZygpIHtcbiAgICAgICAgcmV0dXJuIGlzU2F2aW5nO1xuICAgIH1cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3JkYi9jb3JlL1JEQkZpbGVNYW5hZ2VyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnJkYi5jb3JlO1xuXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb25zdGFudHMuUkRCQ29uc3RhbnRzO1xuXG5pbXBvcnQgamF2YS5pby5GaWxlO1xuXG5wdWJsaWMgY2xhc3MgUkRCRmlsZU1hbmFnZXIgaW1wbGVtZW50cyBGaWxlTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIEZVTExfUkRCX0ZJTEUgPSBSREJDb25zdGFudHMuUkRCX0ZJTEVfTkFNRTtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU5DUkVNRU5UQUxfUkRCX0ZJTEUgPSBSREJDb25zdGFudHMuUkRCX0ZJTEVfTkFNRSArIFwiLmluY1wiO1xuXG4gICAgcHVibGljIGJvb2xlYW4gZnVsbFJkYkV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWxlKEZVTExfUkRCX0ZJTEUpLmV4aXN0cygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBib29sZWFuIGluY3JlbWVudGFsUmRiRXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpbGUoSU5DUkVNRU5UQUxfUkRCX0ZJTEUpLmV4aXN0cygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBGaWxlIGdldEZ1bGxSZGJGaWxlKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpbGUoRlVMTF9SREJfRklMRSk7XG4gICAgfVxuXG4gICAgcHVibGljIEZpbGUgZ2V0SW5jcmVtZW50YWxSZGJGaWxlKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpbGUoSU5DUkVNRU5UQUxfUkRCX0ZJTEUpO1xuICAgIH1cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3JkYi9jb3JlL1JEQkxvYWRlci5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFJEQkxvYWRlciBpbXBsZW1lbnRzIExvYWRlciB7XG4gICAgcHJpdmF0ZSBmaW5hbCBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyIGxvZ2dlciA9IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyLmdldExvZ2dlcihSREJMb2FkZXIuY2xhc3MpO1xuXG4gICAgcHVibGljIFJEQkxvYWRlcihSZWRpc0NvcmUgcmVkaXNDb3JlKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGxvYWRSREIoRmlsZSBmaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICBpZiAoIWZpbGUuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwiUkRC5paH5Lu25LiN5a2Y5ZyoOiBcIiArIGZpbGUuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSAoRGF0YUlucHV0U3RyZWFtIGRpcyA9IG5ldyBEYXRhSW5wdXRTdHJlYW0obmV3IEZpbGVJbnB1dFN0cmVhbShmaWxlKSkpIHtcbiAgICAgICAgICAgIGlmICghUkRCVXRpbC52YWxpZGF0ZVJEQkhlYWRlcihkaXMpKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCLml6DmlYjnmoRSRELmlofku7bmoLzlvI86IFwiICsgZmlsZS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvYWREYXRhKGRpcyk7XG4gICAgICAgIH0gY2F0Y2ggKEVPRkV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJSRELmlofku7bor7vlj5bml7bpgYfliLDmhI/lpJbnmoTmlofku7bnu5PmnZ9cIiwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9sb2FkZXIvQU9GTG9hZGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZi5sb2FkZXI7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbmltcG9ydCBpby5uZXR0eS5idWZmZXIuVW5wb29sZWQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5CdWxrU3RyaW5nO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwQXJyYXk7XG5cbmltcG9ydCBqYXZhLmlvLkZpbGU7XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYXZhLmlvLlJhbmRvbUFjY2Vzc0ZpbGU7XG5pbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjtcbmltcG9ydCBqYXZhLm5pby5jaGFubmVscy5GaWxlQ2hhbm5lbDtcblxucHVibGljIGNsYXNzIEFPRkxvYWRlciBpbXBsZW1lbnRzIExvYWRlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQU9GTG9hZGVyLmNsYXNzKTtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGxvYWQoU3RyaW5nIGZpbGVuYW1lLCBSZWRpc0NvcmUgcmVkaXNDb3JlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIuW8gOWni+WKoOi9vUFPRuaWh+S7tjogXCIgKyBmaWxlbmFtZSk7XG5cbiAgICAgICAgRmlsZSBmaWxlID0gbmV3IEZpbGUoZmlsZW5hbWUpO1xuICAgICAgICBpZiAoIWZpbGUuZXhpc3RzKCkgfHwgZmlsZS5sZW5ndGgoKSA9PSAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcIkFPRuaWh+S7tuS4jeWtmOWcqOaIluS4uuepuu+8jOi3s+i/h+WKoOi9vVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSAoRmlsZUNoYW5uZWwgY2hhbm5lbCA9IG5ldyBSYW5kb21BY2Nlc3NGaWxlKGZpbGVuYW1lLCBcInJcIikuZ2V0Q2hhbm5lbCgpKSB7XG4gICAgICAgICAgICAvLyAxLiDliJvlu7rnvJPlhrLljLpcbiAgICAgICAgICAgIEJ5dGVCdWZmZXIgYnVmZmVyID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZSg4MTkyKTsgIC8vIOS4gOe6p+e8k+WtmFxuICAgICAgICAgICAgQnl0ZUJ1ZiBieXRlQnVmID0gVW5wb29sZWQuYnVmZmVyKCk7ICAvLyDkuoznuqfnvJPlrZhcblxuICAgICAgICAgICAgTG9hZFN0YXRzIHN0YXRzID0gbmV3IExvYWRTdGF0cygpO1xuICAgICAgICAgICAgaW50IGN1cnJlbnREYkluZGV4ID0gMDtcblxuICAgICAgICAgICAgLy8gMi4g6K+75Y+W5paH5Lu25YaF5a65XG4gICAgICAgICAgICB3aGlsZSAoY2hhbm5lbC5yZWFkKGJ1ZmZlcikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIuZmxpcCgpOyAgLy8g5YiH5o2i5Li66K+75qih5byPXG4gICAgICAgICAgICAgICAgYnl0ZUJ1Zi53cml0ZUJ5dGVzKGJ1ZmZlcik7ICAvLyDlhpnlhaXliLDkuoznuqfnvJPlrZjkuK1cbiAgICAgICAgICAgICAgICBidWZmZXIuY2xlYXIoKTsgIC8vIOa4heepuuS4gOe6p+e8k+WtmFxuXG4gICAgICAgICAgICAgICAgLy8gMy4g5aSE55CG6K+75Y+W5Yiw55qE5ZG95LukXG4gICAgICAgICAgICAgICAgY3VycmVudERiSW5kZXggPSBwcm9jZXNzQ29tbWFuZHMocmVkaXNDb3JlLCBieXRlQnVmLCBzdGF0cywgY3VycmVudERiSW5kZXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcIkFPRuWKoOi9veWujOaIkDog5oiQ5Yqf5Yqg6L29IFwiICsgc3RhdHMuY29tbWFuZHNMb2FkZWQgKyBcIiDmnaHlkb3ku6QsIOWksei0pSBcIiArIHN0YXRzLmNvbW1hbmRzRmFpbGVkICsgXCIg5p2hXCIpO1xuICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLor7vlj5ZBT0bmlofku7bml7blh7rplJlcIiwgZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5cbiAgICBwcml2YXRlIHZvaWQgbG9nUHJvZ3Jlc3MoaW50IGNvbW1hbmRzTG9hZGVkKSB7XG4gICAgICAgIC8vIOavj+WkhOeQhjEwMDAw5p2h5ZG95Luk6K6w5b2V5LiA5qyh5pel5b+XXG4gICAgICAgIGlmIChjb21tYW5kc0xvYWRlZCAlIDEwMDAwID09IDApIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwi5bey5Yqg6L29IFwiICsgY29tbWFuZHNMb2FkZWQgKyBcIiDmnaHlkb3ku6RcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cblBhdGg6IFJlYWRNZS5NRFxuIyBKYXZhIOWunueOsOeahOeugOaYkyBSZWRpcyDmlbDmja7lupNcblxuIyMg6aG555uu5qaC6L+wXG7ov5nmmK/kuIDkuKrln7rkuo4gSmF2YSDlkowgTmV0dHkg5a6e546w55qE6L276YeP57qnIFJlZGlzIOacjeWKoeWZqO+8jOaPkOS+m+S6hiBSZWRpcyDmoLjlv4PmlbDmja7nu5PmnoTlkozlkb3ku6TnmoTlrp7njrDvvIzlubbmlK/mjIEgQU9G77yMUkRC55qE54us56uL5oyB5LmF5YyW77yI5pqC5LiN5pSv5oyB5re35ZCI5qih5byP77yJ44CC5oCn6IO95Y+v6L6+5Y6f54mIIFJlZGlzIOeahOe6piA4MCUtOTAl44CCXG5cbiMjIOW3suWunueOsOWKn+iDvVxuXG4jIyMg5qC45b+D5Yqf6IO9XG4tIFt4XSAqKlJlZGlzIOWNj+iuruWunueOsCoqIC0g5a6M5pW05pSv5oyBIFJFU1AgKFJlZGlzIFNlcmlhbGl6YXRpb24gUHJvdG9jb2wpXG4tIFt4XSAqKuWfuuS6jiBOZXR0eSDnmoTpq5jmgKfog73nvZHnu5zmnI3liqEqKiAtIOWIqeeUqCBOZXR0eSDnmoTkuovku7bpqbHliqjmqKHlnovmj5Dkvpvpq5jlubblj5HmlK/mjIFcbi0gW3hdICoq5pWw5o2u57uT5p6E5bGC5a6e546wKiogLSDpq5jmlYjlhoXlrZjmlbDmja7nu5PmnoTnmoQgSmF2YSDlrp7njrBcblxuIyMjIOaMgeS5heWMluWKn+iDvVxuIyDmjIHkuYXljJblip/og71cblxuIyMgUkRCIOaMgeS5heWMllxuLSAqKuWFqOmHj+W/q+eFpyoqXG4gIC0g5pSv5oyB5ZCO5Y+w6Z2e6Zi75aGe5byP5L+d5a2YKGJnc2F2ZSlcbiAgLSDph4fnlKjkuozov5vliLbntKflh5HmoLzlvI/lrZjlgqhcbiAgLSDoh6rliqjop6blj5HmnaHku7bvvJpcbiAgICAtIDkwMOenkuWGheiHs+WwkTHmrKHkv67mlLlcbiAgICAtIDMwMOenkuWGheiHs+WwkTEw5qyh5L+u5pS5XG4gICAgLSA2MOenkuWGheiHs+WwkTEwMDAw5qyh5L+u5pS5XG4gICAgLSDmr4/lsI/ml7blvLrliLblhajph4/lpIfku71cblxuLSAqKuWinumHj+W/q+eFpyoqXG4gIC0g5LuF6K6w5b2V6KKr5L+u5pS555qE6ZSu5YC85a+5XG4gIC0g5b2T5L+u5pS56YePPjEwMOaXtuiHquWKqOinpuWPkVxuICAtIOmHh+eUqOWGmeaXtuWkjeWItuaKgOacr+S8mOWMluWGheWtmOS9v+eUqFxuXG4tICoq6auY57qn54m55oCnKipcbiAgLSDlpJrmlbDmja7lupPmlK/mjIFcbiAgLSDljp/lrZDmlofku7bmm7/mjaLkv53or4HmlbDmja7lronlhahcbiAgLSDlkK/liqjml7boh6rliqjliqDovb1SRELmlofku7ZcblxuIyMgQU9GIOaMgeS5heWMllxuLSAqKuWQjOatpeetlueVpSoqXG4gIC0gYEFMV0FZU2A6IOavj+asoeWGmeWFpemDveWQjOatpeWIsOejgeebmFxuICAtIGBFVkVSWVNFQ2A6IOavj+enkuWQjOatpeS4gOasoe+8iOm7mOiupO+8iVxuICAtIGBOT2A6IOeUseaTjeS9nOezu+e7n+WGs+WumuWQjOatpeaXtuaculxuXG4tICoq5qC45b+D5LyY5YyWKipcbiAgLSDlj4znvJPlhrLlvILmraXlhpnlhaVcbiAgLSDlkb3ku6Tml6Xlv5fph4fnlKhSRVNQ5Y2P6K6u5qC85byPXG4gIC0g5ZCv5Yqo5pe26Ieq5Yqo5LuOQU9G5paH5Lu25oGi5aSN5pWw5o2uXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZIYW5kbGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZjtcblxuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5VbnBvb2xlZDtcbmltcG9ydCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuQ29tcGxldGVGdXR1cmU7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLmxvYWRlci5BT0ZMb2FkZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5sb2FkZXIuTG9hZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucHJvY2Vzc29yLkFPRlByb2Nlc3NvcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnByb2Nlc3Nvci5Qcm9jZXNzb3I7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5yZXdyaXRlci5BT0ZSZXdyaXRlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLndyaXRlci5BT0ZXcml0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi53cml0ZXIuV3JpdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuLi4uXG5cbiAgICAvKipcbiAgICAgKiDmnoTpgKBBT0blpITnkIblmahcbiAgICAgKiBAcGFyYW0gZmlsZW5hbWUgQU9G5paH5Lu25ZCNXG4gICAgICogQHRocm93cyBJT0V4Y2VwdGlvbiDlpoLmnpzliJvlu7rmlofku7blpLHotKVcbiAgICAgKi9cbiAgICBwdWJsaWMgQU9GSGFuZGxlcihTdHJpbmcgZmlsZW5hbWUsIFJlZGlzQ29yZSByZWRpc0NvcmUpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgLy8gMS4g6K6+572u6buY6K6k5ZCM5q2l562W55Wl5Li65q+P56eS5ZCM5q2lXG4gICAgICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gQU9GU3luY1N0cmF0ZWd5LkVWRVJZU0VDO1xuICAgICAgICAvLyAyLiDliJvlu7pBT0blhpnlhaXlmahcbiAgICAgICAgdGhpcy53cml0ZXIgPSBuZXcgQU9GV3JpdGVyKGZpbGVuYW1lLCBzeW5jU3RyYXRlZ3kpO1xuICAgICAgICAvLyAzLiDliJvlu7pBT0blpITnkIblmajvvIzorr7nva7nvJPlhrLljLrlpKflsI/kuLoyTUJcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBuZXcgQU9GUHJvY2Vzc29yKHdyaXRlciwgMiAqIDEwMjQgKiAxMDI0KTtcbiAgICAgICAgLy8gNC4g5Yib5bu6QU9G5Yqg6L295ZmoXG4gICAgICAgIHRoaXMubG9hZGVyID0gbmV3IEFPRkxvYWRlcigpO1xuICAgICAgICAvLyA1LiDliJvlu7pBT0blkI7lj7DmnI3liqFcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU2VydmljZSA9IG5ldyBBT0ZCYWNrZ3JvdW5kU2VydmljZShwcm9jZXNzb3IsIHN5bmNTdHJhdGVneSk7XG5cbiAgICAgICAgdGhpcy5yZXdyaXRlciA9IG5ldyBBT0ZSZXdyaXRlcihyZWRpc0NvcmUsIGZpbGVuYW1lLDIqMTAyNCoxMDI0KTtcbiAgICAgICAgdGhpcy5yZXdyaXRpbmcgPSBuZXcgQXRvbWljQm9vbGVhbihmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5ZCv5YqoQU9G5aSE55CG5ZmoXG4gICAgICovXG4gICAgcHVibGljIHZvaWQgc3RhcnQoKSB7XG4gICAgICAgIC8vIOWQr+WKqOWQjuWPsOacjeWKoVxuICAgICAgICBiYWNrZ3JvdW5kU2VydmljZS5zdGFydCgpO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvc2VydmVyL015UmVkaXNTZXJ2aWNlLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgTXlSZWRpc1NlcnZpY2UgaW1wbGVtZW50cyBSZWRpc1NlcnZpY2Uge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15UmVkaXNTZXJ2aWNlLmNsYXNzKTtcblxuICAgIC8vIOmAmui/h+S/ruaUuei/meS6m+agh+W/l+adpeW8gOWQr+aIluWFs+mXrUFPRuWSjFJEQuWKn+iDvVxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGJvb2xlYW4gRU5BQkxFX0FPRiA9IHRydWU7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBFTkFCTEVfUkRCID0gZmFsc2U7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29sZWFuIEVOQUJMRV9DT01QUkVTU0lPTiA9IGZhbHNlO1xuXG4gICAgLy8g6buY6K6k5pWw5o2u5bqT5pWw6YeP77yM5LiOUmVkaXPpu5jorqTlgLzkv53mjIHkuIDoh7RcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgREVGQVVMVF9EQl9OVU0gPSAxNjtcblxuICAgIHByaXZhdGUgUmVkaXNDbHVzdGVyIGNsdXN0ZXI7XG4gICAgcHJpdmF0ZSBDbHVzdGVyTm9kZSBjdXJyZW50Tm9kZTtcbiAgICBwcml2YXRlIE1hcDxTdHJpbmcsIENsdXN0ZXJDbGllbnQ+IGNsdXN0ZXJDbGllbnRzID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwPD4oKTtcbiAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlciBjb21tYW5kSGFuZGxlcjtcbi4uLlxuXG4gICAgICAgICAgICAvLyDmlLnkuLrlvILmraXnu5HlrppcbiAgICAgICAgICAgIGJvb3RzdHJhcC5iaW5kKHBvcnQpLmFkZExpc3RlbmVyKChDaGFubmVsRnV0dXJlIGZ1dHVyZSkgLT4ge1xuICAgICAgICAgICAgICAgIGlmIChmdXR1cmUuaXNTdWNjZXNzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJDaGFubmVsID0gZnV0dXJlLmNoYW5uZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwiUmVkaXPmnI3liqHlt7LlkK/liqjvvIznm5HlkKznq6/lj6M6IFwiICsgcG9ydCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g5re75Yqg5YWz6Zet55uR5ZCs5ZmoXG4gICAgICAgICAgICAgICAgICAgIGZ1dHVyZS5jaGFubmVsKCkuY2xvc2VGdXR1cmUoKS5hZGRMaXN0ZW5lcihjbG9zZUZ1dHVyZSAtPiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNsb3NlRnV0dXJlLmlzU3VjY2VzcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5pyN5Yqh5Zmo5byC5bi45YWz6ZetXCIsIGNsb3NlRnV0dXJlLmNhdXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLlkK/liqjmnI3liqHlpLHotKXvvIznq6/lj6M6IFwiICsgcG9ydCwgZnV0dXJlLmNhdXNlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5pyN5Yqh5Zmo5ZCv5Yqo5byC5bi4XCIsIGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oZSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3JkYi9jb3JlL1JEQlNhdmVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LnJkYi5jb3JlO1xuXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvbnN0YW50cy5SREJDb25zdGFudHM7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnV0aWxzLlNraXBMaXN0O1xuXG5pbXBvcnQgamF2YS5pby4qO1xuaW1wb3J0IGphdmEudXRpbC4qO1xuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50Lio7XG5cbnB1YmxpYyBjbGFzcyBSREJTYXZlciBpbXBsZW1lbnRzIFNhdmVye1xuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIEV4ZWN1dG9yU2VydmljZSBpb0V4ZWN1dG9yO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyIGxvZ2dlciA9IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyLmdldExvZ2dlcihSREJTYXZlci5jbGFzcyk7XG5cbiAgICBwdWJsaWMgUkRCU2F2ZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSwgRXhlY3V0b3JTZXJ2aWNlIGlvRXhlY3V0b3IpIHtcbiAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSByZWRpc0NvcmU7XG4gICAgICAgIHRoaXMuaW9FeGVjdXRvciA9IGlvRXhlY3V0b3I7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9Db21wcmVzc2lvbkNvZWRDLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgQ29tcHJlc3Npb25Db2VkQyBleHRlbmRzIEJ5dGVUb01lc3NhZ2VDb2RlYzxCeXRlQnVmPiB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihDb21wcmVzc2lvbkNvZWRDLmNsYXNzKTtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgQ09NUFJFU1NJT05fVEhSRVNIT0xEID0gNjQ7XG4gICAgcHJpdmF0ZSBmaW5hbCBMWjRDb21wcmVzc29yIGNvbXByZXNzb3I7XG4gICAgcHJpdmF0ZSBmaW5hbCBMWjRGYXN0RGVjb21wcmVzc29yIGRlY29tcHJlc3NvcjtcblxuICAgIHB1YmxpYyBDb21wcmVzc2lvbkNvZWRDKCkge1xuICAgICAgICB0aGlzLmNvbXByZXNzb3IgPSBMWjRGYWN0b3J5LmZhc3Rlc3RJbnN0YW5jZSgpLmZhc3RDb21wcmVzc29yKCk7XG4gICAgICAgIHRoaXMuZGVjb21wcmVzc29yID0gTFo0RmFjdG9yeS5mYXN0ZXN0SW5zdGFuY2UoKS5mYXN0RGVjb21wcmVzc29yKCk7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwi5Yid5aeL5YyW5Y6L57yp57yW6Kej56CB5Zmo77yM5Y6L57yp6ZiI5YC8OiBcIiArIENPTVBSRVNTSU9OX1RIUkVTSE9MRCArIFwiIOWtl+iKglwiKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBlbmNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgQnl0ZUJ1ZiBtc2csIEJ5dGVCdWYgb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgLy8g5L+d5a2Y5Y6f5aeLcmVhZGVySW5kZXhcbiAgICAgICAgaW50IHJlYWRlckluZGV4ID0gbXNnLnJlYWRlckluZGV4KCk7XG4gICAgICAgIGludCBvcmlnaW5hbFNpemUgPSBtc2cucmVhZGFibGVCeXRlcygpO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeVJlc3BvbnNlRW5jb2Rlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcblxuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmO1xuaW1wb3J0IGlvLm5ldHR5LmJ1ZmZlci5CeXRlQnVmVXRpbDtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyQ29udGV4dDtcbmltcG9ydCBpby5uZXR0eS5oYW5kbGVyLmNvZGVjLk1lc3NhZ2VUb0J5dGVFbmNvZGVyO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuXG5wdWJsaWMgY2xhc3MgTXlSZXNwb25zZUVuY29kZXIgZXh0ZW5kcyBNZXNzYWdlVG9CeXRlRW5jb2RlcjxSZXNwPiB7XG4gICAgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlSZXNwb25zZUVuY29kZXIuY2xhc3MpO1xuICAgIEBPdmVycmlkZVxuICAgIHByb3RlY3RlZCB2b2lkIGVuY29kZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIHJlc3AsIEJ5dGVCdWYgb3V0KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3Aud3JpdGUocmVzcCwgb3V0KTtcbiAgICAgICAgICAgIC8vLy9sb2dnZXIuaW5mbyhcIkVuY29kZWQgcmVzcG9uc2U6IFwiICsgQnl0ZUJ1ZlV0aWwuaGV4RHVtcChvdXQpKTtcbiAgICAgICAgfSBjYXRjaChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi57yW56CB5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGN0eC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvYW9mL0FPRkJhY2tncm91bmRTZXJ2aWNlLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmFvZjtcblxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucHJvY2Vzc29yLlByb2Nlc3NvcjtcblxuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5cbi8qKlxuICogQU9G5ZCO5Y+w5pyN5Yqh77yM6LSf6LSj566h55CGQU9G55qE5ZCO5Y+w5L+d5a2Y5ZKM5ZCM5q2l5pON5L2cXG4gKi9cbnB1YmxpYyBjbGFzcyBBT0ZCYWNrZ3JvdW5kU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQU9GQmFja2dyb3VuZFNlcnZpY2UuY2xhc3MpO1xuXG4gICAgcHJpdmF0ZSBmaW5hbCBQcm9jZXNzb3IgcHJvY2Vzc29yOyAgICAgICAgICAgLy8gQU9G5aSE55CG5ZmoXG4gICAgcHJpdmF0ZSBmaW5hbCBBT0ZTeW5jU3RyYXRlZ3kgc3luY1N0cmF0ZWd5OyAgLy8g5ZCM5q2l562W55WlXG4gICAgcHJpdmF0ZSBUaHJlYWQgc3luY1RocmVhZDsgICAgICAgICAgICAgICAgICAgLy8g5ZCM5q2l57q/56iLXG5cbiAgICAvKipcbiAgICAgKiDmnoTpgKBBT0blkI7lj7DmnI3liqFcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29yIEFPRuWkhOeQhuWZqFxuICAgICAqIEBwYXJhbSBzeW5jU3RyYXRlZ3kg5ZCM5q2l562W55WlXG4gICAgICovXG4gICAgcHVibGljIEFPRkJhY2tncm91bmRTZXJ2aWNlKFByb2Nlc3NvciBwcm9jZXNzb3IsIEFPRlN5bmNTdHJhdGVneSBzeW5jU3RyYXRlZ3kpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgICAgIHRoaXMuc3luY1N0cmF0ZWd5ID0gc3luY1N0cmF0ZWd5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWQr+WKqEFPRuWQjuWPsOacjeWKoVxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KCkge1xuXG4gICAgICAgIC8vIDIuIOWmguaenOWQjOatpeetlueVpeS4uuavj+enkuWQjOatpe+8jOWIm+W7uuW5tuWQr+WKqOWQjOatpee6v+eoi1xuICAgICAgICBpZiAoc3luY1N0cmF0ZWd5ID09IEFPRlN5bmNTdHJhdGVneS5FVkVSWVNFQykge1xuICAgICAgICAgICAgdGhpcy5zeW5jVGhyZWFkID0gbmV3IFRocmVhZCh0aGlzOjpiYWNrZ3JvdW5kU3luYyk7XG4gICAgICAgICAgICB0aGlzLnN5bmNUaHJlYWQuc2V0TmFtZShcImFvZi1iYWNrZ3JvdW5kLXN5bmNcIik7XG4gICAgICAgICAgICB0aGlzLnN5bmNUaHJlYWQuc2V0RGFlbW9uKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5zeW5jVGhyZWFkLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICog5ZCO5Y+w5ZCM5q2l5pON5L2c77yM5q+P6ZqU5LiA56eS6L+b6KGM5LiA5qyh5Yi355uYXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIGJhY2tncm91bmRTeW5jKCkge1xuICAgICAgICB3aGlsZSAocHJvY2Vzc29yLmlzUnVubmluZygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIDEuIOetieW+hTHnp5JcbiAgICAgICAgICAgICAgICBUaHJlYWQuc2xlZXAoMTAwMCk7XG4gICAgICAgICAgICAgICAgLy8gMi4g5omn6KGM5Yi355uY5pON5L2cXG4gICAgICAgICAgICAgICAgcHJvY2Vzc29yLmZsdXNoKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBT0blkIzmraXplJnor69cIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3JkYi9wb2xpY3kvU2F2ZVBvbGljeS5qYXZhXG4uLi5cblxucHVibC4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVhBR3NETFVlZUJlZFFnRDR3cFdrczgifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6NTA6NTMuOTMxWiIsInJlc3BvbnNlX3RleHQiOiJJIGZvdW5kIHRoZSBsb2c0aiBjb25maWd1cmF0aW9uIGZpbGUsIGJ1dCBpdCBhcHBlYXJzIHRvIGJlIGVuY29kZWQgaW5jb3JyZWN0bHkuIExldCdzIG1vZGlmeSBpdCB0byBwcm9wZXJseSBoYW5kbGUgdGhlIGNsaWVudCBkaXNjb25uZWN0aW9uIGV2ZW50czpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmZTZjZmU2YS02NjAxLTQ2YWQtOGY5NS1hNWZkMDZmMTYyYmIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFRN1U2NnFGUmY0NTZjeUZHR1NFb0RnIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImZpbGVfcGF0aFwiOiBcInNyYy9tYWluL3Jlc291cmNlcy9Mb2c0ai5wcm9wZXJ0aWVzXCIsIFwiZmlsZV9jb250ZW50XCI6IFwiIyMjIyMjIyMjIyMjI1xcbiMgT3V0cHV0IHRvIGNvbnNvbGVcXG4jIyMjIyMjIyMjIyMjXFxuXFxuIyBsb2c0ai5yb290TG9nZ2VyIGxvZyBvdXRwdXQgbGV2ZWwgYW5kIGNhdGVnb3J5OiBvbmx5IG91dHB1dCBsb2dzIG5vdCBsb3dlciB0aGFuIHRoaXMgbGV2ZWwgREVCVUcgPCBJTkZPIDwgV0FSTiA8IEVSUk9SIDwgRkFUQUxcXG4jIFdBUk46IGxvZyBsZXZlbCAgICAgQ09OU09MRTogb3V0cHV0IGxvY2F0aW9uIGRlZmluZWQgYnkgeW91cnNlbGYgICAgICAgbG9nZmlsZTogb3V0cHV0IGxvY2F0aW9uIGRlZmluZWQgYnkgeW91cnNlbGZcXG5sb2c0ai5yb290TG9nZ2VyPUlORk8sQ09OU09MRSxsb2dmaWxlXFxuIyBDb25maWd1cmUgQ09OU09MRSBvdXRwdXQgdG8gY29uc29sZVxcbmxvZzRqLmFwcGVuZGVyLkNPTlNPTEU9b3JnLmFwYWNoZS5sb2c0ai5Db25zb2xlQXBwZW5kZXIgXFxuIyBDb25maWd1cmUgQ09OU09MRSB0byB1c2UgY3VzdG9tIGxheW91dCBtb2RlXFxubG9nNGouYXBwZW5kZXIuQ09OU09MRS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0IFxcbiMgQ29uZmlndXJlIENPTlNPTEUgbG9nIG91dHB1dCBmb3JtYXQgIFtmcmFtZV0gMjAxOS0wOC0yMiAyMjo1MjoxMiwwMDAgICVyIG1pbGxpc2Vjb25kcyAlcCBsb2cgcHJpb3JpdHkgJXQgdGhyZWFkIG5hbWUgJUMgY2xhc3MgbmFtZSB1c3VhbGx5IGZ1bGwgY2xhc3MgbmFtZSAlTCBsaW5lIG51bWJlciBpbiBjb2RlICV4IHRocmVhZCByZWxhdGVkIE5EQyAlbSBsb2cgJW4gbmV3bGluZVxcbmxvZzRqLmFwcGVuZGVyLkNPTlNPTEUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPVtmcmFtZV0gJWR7eXl5eS1NTS1kZCBISDptbTpzcyxTU1N9IC0gJS00ciAlLTVwIFsldF0gJUM6JUwgJXggLSAlbSVuXFxuXFxuIyMjIyMjIyMjIyMjIyMjI1xcbiMgT3V0cHV0IHRvIGxvZyBmaWxlXFxuIyMjIyMjIyMjIyMjIyMjI1xcblxcbiMgQ29uZmlndXJlIGxvZ2ZpbGUgb3V0cHV0IHRvIGZpbGUuIFdoZW4gZmlsZSBzaXplIHJlYWNoZXMgc3BlY2lmaWVkIHNpemUsIGNyZWF0ZSBuZXcgbG9nIGZpbGVcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxcbiMgU2F2ZSBlbmNvZGluZyBmb3JtYXRcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLkVuY29kaW5nPVVURi04XFxuIyBPdXRwdXQgZmlsZSBsb2NhdGlvbiBpcyBsb2dzIGZvbGRlciB1bmRlciBwcm9qZWN0IHJvb3QgZGlyZWN0b3J5XFxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5GaWxlPWxvZ3Mvcm9vdC5sb2dcXG4jIFN1ZmZpeCBjYW4gYmUgS0IsTUIsR0IuIFdoZW4gcmVhY2hpbmcgdGhpcyBzaXplLCBjcmVhdGUgbmV3IGxvZyBmaWxlXFxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5NYXhGaWxlU2l6ZT0xME1CXFxuIyBTZXQgbWF4aW11bSB2YWx1ZSBvZiByb2xsaW5nIGZpbGVzIHRvIDMuIENhbiBjcmVhdGUgcm9vdC5sb2cuMSwgcm9vdC5sb2cuMiwgcm9vdC5sb2cuMyBhbmQgcm9vdC5sb2cgZm91ciBsb2cgZmlsZXNcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLk1heEJhY2t1cEluZGV4PTMgIFxcbiMgQ29uZmlndXJlIGxvZ2ZpbGUgYXMgY3VzdG9tIGxheW91dCBtb2RlXFxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0XFxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5sYXlvdXQuQ29udmVyc2lvblBhdHRlcm49JWR7eXl5eS1NTS1kZCBISDptbTpzc30gJUYgJXAgJW0lblxcblxcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXFxuIyBPdXRwdXQgZGlmZmVyZW50IGxvZ3MgdG8gZGlmZmVyZW50IGZpbGVzIGZvciBkaWZmZXJlbnQgY2xhc3Nlc1xcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXFxuXFxuIyBjbHViLmJhZ2VkYXRlIHBhY2thZ2UgbG9ncyBvdXRwdXQgc2VwYXJhdGVseVxcbmxvZzRqLmxvZ2dlci5jbHViLmJhZ2VkYXRlPURFQlVHLGJhZ2VkYXRlXFxuIyBTZXQgdG8gZmFsc2Ugc28gdGhlc2UgbG9nIG1lc3NhZ2VzIHdvbid0IGJlIGFkZGVkIHRvIHJvb3RMb2dnZXJcXG5sb2c0ai5hZGRpdGl2aXR5LmNsdWIuYmFnZWRhdGU9ZmFsc2VcXG4jIENvbmZpZ3VyYXRpb24gYmVsb3cgaXMgdGhlIHNhbWUgYXMgYWJvdmVcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZT1vcmcuYXBhY2hlLmxvZzRqLlJvbGxpbmdGaWxlQXBwZW5kZXJcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5FbmNvZGluZz1VVEYtOFxcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLkZpbGU9bG9ncy9iYWdlZGF0ZS5sb2dcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5NYXhGaWxlU2l6ZT0xME1CXFxubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuTWF4QmFja3VwSW5kZXg9M1xcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXRcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5sYXlvdXQuQ29udmVyc2lvblBhdHRlcm49JWR7eXl5eS1NTS1kZCBISDptbTpzc30gJUYgJXAgJW0lblxcblxcbiMgU2V0IE15Q29tbWFuZEhhbmRsZXIgdG8gREVCVUcgbGV2ZWwgdG8gc2VlIGNvbm5lY3Rpb24gZXZlbnRzXFxubG9nNGoubG9nZ2VyLnNpdGUuaG5meTI1OC5jb2Rlci5NeUNvbW1hbmRIYW5kbGVyPURFQlVHXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgY3JlYXRlIGEgbmV3IExvZzRqLnByb3BlcnRpZXMgZmlsZSB3aXRoIHByb3BlciBlbmNvZGluZyBhbmQgYWRkIHNwZWNpZmljIGxvZ2dlciBzZXR0aW5ncyBmb3IgdGhlIE15Q29tbWFuZEhhbmRsZXIgY2xhc3M6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL3Jlc291cmNlcy9Mb2c0ai5wcm9wZXJ0aWVzOlxuICAgICAxXHQjIyMjIyMjIyMjIyMjXG4gICAgIDJcdCMg77+977+977+977+977+977+977+977+977+9zKhcbiAgICAgM1x0IyMjIyMjIyMjIyMjI1xuICAgICA0XHRcbiAgICAgNVx0IyBsb2c0ai5yb290TG9nZ2Vy77+977+91r7vv73vv73vv73vv73vv73vv73NvO+/ve+/ve+/vda777+977+977+977+977+977+977+977+92rjDvO+/ve+/ve+/ve+/ve+/ve+/vda+77+977+9z6JERUJVRyA8IElORk8gPCBXQVJOIDwgRVJST1IgPCBGQVRBTFxuICAgICA2XHQjIFdBUk7vv73vv73vv73vv73Wvu+/ve+/ve+/ve+/vSAgICAgQ09OU09MRe+/ve+/ve+/ve+/ve+/vc6777+977+977+91Lzvv73vv73vv73vv73vv73vv73Su++/ve+/ve+/ve+/ve+/ve+/vSAgICAgICBsb2dmaWxl77+977+977+977+977+9zrvvv73vv73vv73UvO+/ve+/ve+/ve+/ve+/ve+/vdK777+977+977+977+977+977+9XG4gICAgIDdcdGxvZzRqLnJvb3RMb2dnZXI9SU5GTyxDT05TT0xFLGxvZ2ZpbGVcbiAgICAgOFx0IyDvv73vv73vv73vv71DT05TT0xF77+977+977+977+977+977+977+977+977+9zKhcbiAgICAgOVx0bG9nNGouYXBwZW5kZXIuQ09OU09MRT1vcmcuYXBhY2hlLmxvZzRqLkNvbnNvbGVBcHBlbmRlciBcbiAgICAxMFx0IyDvv73vv73vv73vv71DT05TT0xF77+977+977+977+9zqrvv73Utu+/ve+/veWyvO+/ve+/vcSjyr1cbiAgICAxMVx0bG9nNGouYXBwZW5kZXIuQ09OU09MRS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0IFxuICAgIDEyXHQjIO+/ve+/ve+/ve+/vUNPTlNPTEXvv73vv73Wvu+/ve+/ve+/ve+/ve+/ve+/ve+/vcq9ICBbZnJhbWVdIDIwMTktMDgtMjIgMjI6NTI6MTIsMDAwICAlcu+/vcS30brvv73vv73vv73vv73vv70gJXDvv73vv73Wvu+/ve+/ve+/ve+/ve+/vci877+9ICV077+937Pvv73vv73vv70gJUPvv73vv73vv73vv73vv73vv73vv73vv73NqO+/ve+/vc6qyKvvv73vv73vv73vv70gJUzvv73vv73vv73vv73vv73Qte+/ve+/vdC677+9ICV477+937Pvv73vv73vv73vv73vv73vv73vv73vv71OREMgJW3vv73vv73WviAlbu+/ve+/ve+/ve+/vVxuICAgIDEzXHRsb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj1bZnJhbWVdICVke3l5eXktTU0tZGQgSEg6bW06c3MsU1NTfSAtICUtNHIgJS01cCBbJXRdICVDOiVMICV4IC0gJW0lblxuICAgIDE0XHRcbiAgICAxNVx0IyMjIyMjIyMjIyMjIyMjI1xuICAgIDE2XHQjIO+/ve+/ve+/ve+/ve+/ve+/ve+/vda+77+9xLzvv73vv73vv71cbiAgICAxN1x0IyMjIyMjIyMjIyMjIyMjI1xuICAgIDE4XHRcbiAgICAxOVx0IyDvv73vv73vv73vv71sb2dmaWxl77+977+977+977+977+977+9xLzvv73vv73vv70g77+9xLzvv73vv73vv73Qoe+/ve+/ve+/ve+/vda477+977+977+937Tvv73vv73Kse+/ve+/ve+/ve+/ve+/ve+/vcK177+977+977+91r7vv73EvO+/vVxuICAgIDIwXHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxuICAgIDIxXHQjIO+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/vcq9XG4gICAgMjJcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuRW5jb2Rpbmc9VVRGLThcbiAgICAyM1x0IyDvv73vv73vv73vv73EvO+/vc6777+9w7Tvv73Oqu+/ve+/vcS/77+977+9xL/CvO+/vcK177+9bG9nc++/vcS877+977+977+977+977+9XG4gICAgMjRcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuRmlsZT1sb2dzL3Jvb3QubG9nXG4gICAgMjVcdCMg77+977+917rvv73vv73vv73vv73vv73vv71LQixNQixHQu+/ve+1ve+/vcO077+90KHvv73ztLS977+977+9wrXvv73vv73vv73Wvu+/vcS877+9XG4gICAgMjZcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4RmlsZVNpemU9MTBNQlxuICAgIDI3XHQjIO+/ve+/ve+/vcO577+977+977+977+9xLzvv73vv73vv73vv73vv73vv73WtTMg1rjvv73vv73vv73Usu+/ve+/ve+/vXJvb3QubG9nLjHvv73vv71yb290LmxvZy4y77+977+9cm9vdC5sb2cuM++/ve+/vXJvb3QubG9n77+9xLjvv73vv73vv73Wvu+/vcS877+9XG4gICAgMjhcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4QmFja3VwSW5kZXg9MyAgXG4gICAgMjlcdCMg77+977+977+977+9bG9nZmlsZc6q77+91Lbvv73vv73lsrzvv73vv73Eo8q9XG4gICAgMzBcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dFxuICAgIDMxXHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXG4gICAgMzJcdFxuICAgIDMzXHQjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgIDM0XHQjIO+/vdSy77+9zazvv73vv73vv73vv73vv73vv73vv73vv73vv73NrO+/ve+/ve+/ve+/vda+77+9xLzvv71cbiAgICAzNVx0IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAzNlx0XG4gICAgMzdcdCMgY2x1Yi5iYWdlZGF0Ze+/ve+/ve+/vcK177+977+977+91r7vv73vv73vv73vv73vv73vv73vv71cbiAgICAzOFx0bG9nNGoubG9nZ2VyLmNsdWIuYmFnZWRhdGU9REVCVUcsYmFnZWRhdGVcbiAgICAzOVx0IyDvv73vv73vv73vv73OqmZhbHNl77+977+977+977+91r7vv73vv73Pou+/vc2y77+977+977+977+977+967W9cm9vdExvZ2dlcu+/ve+/ve+/ve+/vVxuICAgIDQwXHRsb2c0ai5hZGRpdGl2aXR5LmNsdWIuYmFnZWRhdGU9ZmFsc2VcbiAgICA0MVx0IyDvv73vv73vv73vv73Nuu+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/vdK777+977+977+977+9XG4gICAgNDJcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxuICAgIDQzXHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5FbmNvZGluZz1VVEYtOFxuICAgIDQ0XHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5GaWxlPWxvZ3MvYmFnZWRhdGUubG9nXG4gICAgNDVcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLk1heEZpbGVTaXplPTEwTUJcbiAgICA0Nlx0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuTWF4QmFja3VwSW5kZXg9M1xuICAgIDQ3XHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0XG4gICAgNDhcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0OFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNjFvYUFXcXRYTFVuVmhEZXhmMmMybyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkY6L0h1YVJlZGlzIiwiZm9sZGVyUm9vdCI6IkY6L0h1YVJlZGlzIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0wMlQyMDo1MTowMC44NjNaIiwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGNyZWF0ZSBhIG5ldyBMb2c0ai5wcm9wZXJ0aWVzIGZpbGUgd2l0aCBwcm9wZXIgZW5jb2RpbmcgYW5kIGFkZCBzcGVjaWZpYyBsb2dnZXIgc2V0dGluZ3MgZm9yIHRoZSBNeUNvbW1hbmRIYW5kbGVyIGNsYXNzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijc0MjE3NzZjLTNhOGQtNGY5ZS05YWFlLWUxOTAzNDkxYjVhYiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVZKM044dDg0UHJiTG9HV2E3eXZQUm4iLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL3Jlc291cmNlcy9Mb2c0ai5wcm9wZXJ0aWVzXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiMjIyMjIyMjIyMjIyNcXG4jIFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTAzMjhcXG4jIyMjIyMjIyMjIyMjXFxuXFxuIyBsb2c0ai5yb290TG9nZ2VyXFx1ZmZmZFxcdWZmZmRcXHUwNWJlXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDM3Y1xcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA1YmJcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA2YjhcXHUwMGZjXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDViZVxcdWZmZmRcXHVmZmZkXFx1MDNlMkRFQlVHIDwgSU5GTyA8IFdBUk4gPCBFUlJPUiA8IEZBVEFMXFxuIyBXQVJOXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA1YmVcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkICAgICBDT05TT0xFXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwM2JiXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDUzY1xcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA0YmJcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmQgICAgICAgbG9nZmlsZVxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDNiYlxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA1M2NcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwNGJiXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFxubG9nNGoucm9vdExvZ2dlcj1JTkZPLENPTlNPTEUsbG9nZmlsZVxcbiMgXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZENPTlNPTEVcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwMzI4XFxubG9nNGouYXBwZW5kZXIuQ09OU09MRT1vcmcuYXBhY2hlLmxvZzRqLkNvbnNvbGVBcHBlbmRlciBcXG4jIFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRDT05TT0xFXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTAzYWFcXHVmZmZkXFx1MDUzNlxcdWZmZmRcXHVmZmZkXFx1NWNiY1xcdWZmZmRcXHVmZmZkXFx1MDEyM1xcdTAyYmRcXG5sb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXQgXFxuIyBcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkQ09OU09MRVxcdWZmZmRcXHVmZmZkXFx1MDViZVxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwMmJkICBbZnJhbWVdIDIwMTktMDgtMjIgMjI6NTI6MTIsMDAwICAlclxcdWZmZmRcXHUwMTM3XFx1MDQ3YVxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkICVwXFx1ZmZmZFxcdWZmZmRcXHUwNWJlXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwMjNjXFx1ZmZmZCAldFxcdWZmZmRcXHUwN2YzXFx1ZmZmZFxcdWZmZmRcXHVmZmZkICVDXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwMzY4XFx1ZmZmZFxcdWZmZmRcXHUwM2FhXFx1MDIyYlxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmQgJUxcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA0MzVcXHVmZmZkXFx1ZmZmZFxcdTA0M2FcXHVmZmZkICV4XFx1ZmZmZFxcdTA3ZjNcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZE5EQyAlbVxcdWZmZmRcXHVmZmZkXFx1MDViZSAlblxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXG5sb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj1bZnJhbWVdICVke3l5eXktTU0tZGQgSEg6bW06c3MsU1NTfSAtICUtNHIgJS01cCBbJXRdICVDOiVMICV4IC0gJW0lblxcblxcbiMjIyMjIyMjIyMjIyMjIyNcXG4jIFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwNWJlXFx1ZmZmZFxcdTAxM2NcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXG4jIyMjIyMjIyMjIyMjIyMjXFxuXFxuIyBcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkbG9nZmlsZVxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTAxM2NcXHVmZmZkXFx1ZmZmZFxcdWZmZmQgXFx1ZmZmZFxcdTAxM2NcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwNDIxXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA1YjhcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwN2Y0XFx1ZmZmZFxcdWZmZmRcXHUwMmIxXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDBiNVxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA1YmVcXHVmZmZkXFx1MDEzY1xcdWZmZmRcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxcbiMgXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwMmJkXFxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5FbmNvZGluZz1VVEYtOFxcbiMgXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTAxM2NcXHVmZmZkXFx1MDNiYlxcdWZmZmRcXHUwMGY0XFx1ZmZmZFxcdTAzYWFcXHVmZmZkXFx1ZmZmZFxcdTAxM2ZcXHVmZmZkXFx1ZmZmZFxcdTAxM2ZcXHUwMGJjXFx1ZmZmZFxcdTAwYjVcXHVmZmZkbG9nc1xcdWZmZmRcXHUwMTNjXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLkZpbGU9bG9ncy9yb290LmxvZ1xcbiMgXFx1ZmZmZFxcdWZmZmRcXHUwNWZhXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkS0IsTUIsR0JcXHVmZmZkXFx1ZmQ3ZFxcdWZmZmRcXHUwMGY0XFx1ZmZmZFxcdTA0MjFcXHVmZmZkXFx1ZGI5M1xcdWRkM2RcXHVmZmZkXFx1ZmZmZFxcdTAwYjVcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwNWJlXFx1ZmZmZFxcdTAxM2NcXHVmZmZkXFxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5NYXhGaWxlU2l6ZT0xME1CXFxuIyBcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwMGY5XFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTAxM2NcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwNWI1MyBcXHUwNWI4XFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDUzMlxcdWZmZmRcXHVmZmZkXFx1ZmZmZHJvb3QubG9nLjFcXHVmZmZkXFx1ZmZmZHJvb3QubG9nLjJcXHVmZmZkXFx1ZmZmZHJvb3QubG9nLjNcXHVmZmZkXFx1ZmZmZHJvb3QubG9nXFx1ZmZmZFxcdTAxMzhcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwNWJlXFx1ZmZmZFxcdTAxM2NcXHVmZmZkXFxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5NYXhCYWNrdXBJbmRleD0zICBcXG4jIFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRsb2dmaWxlXFx1MDNhYVxcdWZmZmRcXHUwNTM2XFx1ZmZmZFxcdWZmZmRcXHU1Y2JjXFx1ZmZmZFxcdWZmZmRcXHUwMTIzXFx1MDJiZFxcbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dFxcbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPSVke3l5eXktTU0tZGQgSEg6bW06c3N9ICVGICVwICVtJW5cXG5cXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xcbiMgXFx1ZmZmZFxcdTA1MzJcXHVmZmZkXFx1MDM2Y1xcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTAzNmNcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDViZVxcdWZmZmRcXHUwMTNjXFx1ZmZmZFxcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXFxuXFxuIyBjbHViLmJhZ2VkYXRlXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDBiNVxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdTA1YmVcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFxubG9nNGoubG9nZ2VyLmNsdWIuYmFnZWRhdGU9REVCVUcsYmFnZWRhdGVcXG4jIFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwM2FhZmFsc2VcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDViZVxcdWZmZmRcXHVmZmZkXFx1MDNlMlxcdWZmZmRcXHUwMzcyXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHViZDdkcm9vdExvZ2dlclxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXG5sb2c0ai5hZGRpdGl2aXR5LmNsdWIuYmFnZWRhdGU9ZmFsc2VcXG4jIFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHUwMzdhXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXHVmZmZkXFx1MDRiYlxcdWZmZmRcXHVmZmZkXFx1ZmZmZFxcdWZmZmRcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZT1vcmcuYXBhY2hlLmxvZzRqLlJvbGxpbmdGaWxlQXBwZW5kZXJcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5FbmNvZGluZz1VVEYtOFxcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLkZpbGU9bG9ncy9iYWdlZGF0ZS5sb2dcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5NYXhGaWxlU2l6ZT0xME1CXFxubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuTWF4QmFja3VwSW5kZXg9M1xcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXRcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5sYXlvdXQuQ29udmVyc2lvblBhdHRlcm49JWR7eXl5eS1NTS1kZCBISDptbTpzc30gJUYgJXAgJW0lblwiLCBcIm5ld19zdHJcIjogXCIjIyMjIyMjIyMjIyMjXFxuIyBPdXRwdXQgdG8gY29uc29sZVxcbiMjIyMjIyMjIyMjIyNcXG5cXG4jIGxvZzRqLnJvb3RMb2dnZXIgbG9nIG91dHB1dCBsZXZlbCBhbmQgY2F0ZWdvcnk6IG9ubHkgb3V0cHV0IGxvZ3Mgbm90IGxvd2VyIHRoYW4gdGhpcyBsZXZlbCBERUJVRyA8IElORk8gPCBXQVJOIDwgRVJST1IgPCBGQVRBTFxcbiMgV0FSTjogbG9nIGxldmVsICAgICBDT05TT0xFOiBvdXRwdXQgbG9jYXRpb24gZGVmaW5lZCBieSB5b3Vyc2VsZiAgICAgICBsb2dmaWxlOiBvdXRwdXQgbG9jYXRpb24gZGVmaW5lZCBieSB5b3Vyc2VsZlxcbmxvZzRqLnJvb3RMb2dnZXI9SU5GTyxDT05TT0xFLGxvZ2ZpbGVcXG4jIENvbmZpZ3VyZSBDT05TT0xFIG91dHB1dCB0byBjb25zb2xlXFxubG9nNGouYXBwZW5kZXIuQ09OU09MRT1vcmcuYXBhY2hlLmxvZzRqLkNvbnNvbGVBcHBlbmRlciBcXG4jIENvbmZpZ3VyZSBDT05TT0xFIHRvIHVzZSBjdXN0b20gbGF5b3V0IG1vZGVcXG5sb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXQgXFxuIyBDb25maWd1cmUgQ09OU09MRSBsb2cgb3V0cHV0IGZvcm1hdCAgW2ZyYW1lXSAyMDE5LTA4LTIyIDIyOjUyOjEyLDAwMCAgJXIgbWlsbGlzZWNvbmRzICVwIGxvZyBwcmlvcml0eSAldCB0aHJlYWQgbmFtZSAlQyBjbGFzcyBuYW1lIHVzdWFsbHkgZnVsbCBjbGFzcyBuYW1lICVMIGxpbmUgbnVtYmVyIGluIGNvZGUgJXggdGhyZWFkIHJlbGF0ZWQgTkRDICVtIGxvZyAlbiBuZXdsaW5lXFxubG9nNGouYXBwZW5kZXIuQ09OU09MRS5sYXlvdXQuQ29udmVyc2lvblBhdHRlcm49W2ZyYW1lXSAlZHt5eXl5LU1NLWRkIEhIOm1tOnNzLFNTU30gLSAlLTRyICUtNXAgWyV0XSAlQzolTCAleCAtICVtJW5cXG5cXG4jIyMjIyMjIyMjIyMjIyMjXFxuIyBPdXRwdXQgdG8gbG9nIGZpbGVcXG4jIyMjIyMjIyMjIyMjIyMjXFxuXFxuIyBDb25maWd1cmUgbG9nZmlsZSBvdXRwdXQgdG8gZmlsZS4gV2hlbiBmaWxlIHNpemUgcmVhY2hlcyBzcGVjaWZpZWQgc2l6ZSwgY3JlYXRlIG5ldyBsb2cgZmlsZVxcbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGU9b3JnLmFwYWNoZS5sb2c0ai5Sb2xsaW5nRmlsZUFwcGVuZGVyXFxuIyBTYXZlIGVuY29kaW5nIGZvcm1hdFxcbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuRW5jb2Rpbmc9VVRGLThcXG4jIE91dHB1dCBmaWxlIGxvY2F0aW9uIGlzIGxvZ3MgZm9sZGVyIHVuZGVyIHByb2plY3Qgcm9vdCBkaXJlY3RvcnlcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLkZpbGU9bG9ncy9yb290LmxvZ1xcbiMgU3VmZml4IGNhbiBiZSBLQixNQixHQi4gV2hlbiByZWFjaGluZyB0aGlzIHNpemUsIGNyZWF0ZSBuZXcgbG9nIGZpbGVcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLk1heEZpbGVTaXplPTEwTUJcXG4jIFNldCBtYXhpbXVtIHZhbHVlIG9mIHJvbGxpbmcgZmlsZXMgdG8gMy4gQ2FuIGNyZWF0ZSByb290LmxvZy4xLCByb290LmxvZy4yLCByb290LmxvZy4zIGFuZCByb290LmxvZyBmb3VyIGxvZyBmaWxlc1xcbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4QmFja3VwSW5kZXg9MyAgXFxuIyBDb25maWd1cmUgbG9nZmlsZSBhcyBjdXN0b20gbGF5b3V0IG1vZGVcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXRcXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXFxuXFxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcXG4jIE91dHB1dCBkaWZmZXJlbnQgbG9ncyB0byBkaWZmZXJlbnQgZmlsZXMgZm9yIGRpZmZlcmVudCBjbGFzc2VzXFxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcXG5cXG4jIGNsdWIuYmFnZWRhdGUgcGFja2FnZSBsb2dzIG91dHB1dCBzZXBhcmF0ZWx5XFxubG9nNGoubG9nZ2VyLmNsdWIuYmFnZWRhdGU9REVCVUcsYmFnZWRhdGVcXG4jIFNldCB0byBmYWxzZSBzbyB0aGVzZSBsb2cgbWVzc2FnZXMgd29uJ3QgYmUgYWRkZWQgdG8gcm9vdExvZ2dlclxcbmxvZzRqLmFkZGl0aXZpdHkuY2x1Yi5iYWdlZGF0ZT1mYWxzZVxcbiMgQ29uZmlndXJhdGlvbiBiZWxvdyBpcyB0aGUgc2FtZSBhcyBhYm92ZVxcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLkVuY29kaW5nPVVURi04XFxubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuRmlsZT1sb2dzL2JhZ2VkYXRlLmxvZ1xcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLk1heEZpbGVTaXplPTEwTUJcXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5NYXhCYWNrdXBJbmRleD0zXFxubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dFxcbmxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXFxuXFxuIyBTZXQgTXlDb21tYW5kSGFuZGxlciB0byBERUJVRyBsZXZlbCB0byBzZWUgY29ubmVjdGlvbiBldmVudHNcXG5sb2c0ai5sb2dnZXIuc2l0ZS5obmZ5MjU4LmNvZGVyLk15Q29tbWFuZEhhbmRsZXI9REVCVUdcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNDh9XX0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJIG5lZWQgdG8gdXNlIHRoZSBzdHItcmVwbGFjZS1lZGl0b3IgdG8gbW9kaWZ5IHRoZSBleGlzdGluZyBmaWxlOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBhbHJlYWR5IGV4aXN0czogRjovSHVhUmVkaXMvc3JjL21haW4vcmVzb3VyY2VzL0xvZzRqLnByb3BlcnRpZXMiLCJpc19lcnJvciI6dHJ1ZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVE3VTY2cUZSZjQ1NmN5RkdHU0VvRGcifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJGOi9IdWFSZWRpcyIsImZvbGRlclJvb3QiOiJGOi9IdWFSZWRpcyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMDJUMjA6NTE6MTguMzMzWiIsInJlc3BvbnNlX3RleHQiOiJJIG5lZWQgdG8gdXNlIHRoZSBzdHItcmVwbGFjZS1lZGl0b3IgdG8gbW9kaWZ5IHRoZSBleGlzdGluZyBmaWxlOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImQ5Y2M2YmI4LWQ5NmUtNGY4ZC05NjQ4LTEwMjNhN2ZiMDZjMiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTRHdVByY0dDaHB2NFB3Nm5wYW1IeEQiLCJ0b29sX25hbWUiOiJsYXVuY2gtcHJvY2VzcyIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwiY2QgRjovSHVhUmVkaXMgJiYgbXZuIGNsZWFuIGNvbXBpbGVcIiwgXCJ3YWl0XCI6IHRydWUsIFwibWF4X3dhaXRfc2Vjb25kc1wiOiAxMjB9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IGxldCdzIHRlc3Qgb3VyIGNoYW5nZXMgdG8gbWFrZSBzdXJlIHRoZXkgd29yayBjb3JyZWN0bHk6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9tYWluL3Jlc291cmNlcy9Mb2c0ai5wcm9wZXJ0aWVzLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0IyMjIyMjIyMjIyMjI1xuICAgICAyXHQjIE91dHB1dCB0byBjb25zb2xlXG4gICAgIDNcdCMjIyMjIyMjIyMjIyNcbiAgICAgNFx0XG4gICAgIDVcdCMgbG9nNGoucm9vdExvZ2dlciBsb2cgb3V0cHV0IGxldmVsIGFuZCBjYXRlZ29yeTogb25seSBvdXRwdXQgbG9ncyBub3QgbG93ZXIgdGhhbiB0aGlzIGxldmVsIERFQlVHIDwgSU5GTyA8IFdBUk4gPCBFUlJPUiA8IEZBVEFMXG4gICAgIDZcdCMgV0FSTjogbG9nIGxldmVsICAgICBDT05TT0xFOiBvdXRwdXQgbG9jYXRpb24gZGVmaW5lZCBieSB5b3Vyc2VsZiAgICAgICBsb2dmaWxlOiBvdXRwdXQgbG9jYXRpb24gZGVmaW5lZCBieSB5b3Vyc2VsZlxuICAgICA3XHRsb2c0ai5yb290TG9nZ2VyPUlORk8sQ09OU09MRSxsb2dmaWxlXG4gICAgIDhcdCMgQ29uZmlndXJlIENPTlNPTEUgb3V0cHV0IHRvIGNvbnNvbGVcbiAgICAgOVx0bG9nNGouYXBwZW5kZXIuQ09OU09MRT1vcmcuYXBhY2hlLmxvZzRqLkNvbnNvbGVBcHBlbmRlclxuICAgIDEwXHQjIENvbmZpZ3VyZSBDT05TT0xFIHRvIHVzZSBjdXN0b20gbGF5b3V0IG1vZGVcbiAgICAxMVx0bG9nNGouYXBwZW5kZXIuQ09OU09MRS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0XG4gICAgMTJcdCMgQ29uZmlndXJlIENPTlNPTEUgbG9nIG91dHB1dCBmb3JtYXQgIFtmcmFtZV0gMjAxOS0wOC0yMiAyMjo1MjoxMiwwMDAgICVyIG1pbGxpc2Vjb25kcyAlcCBsb2cgcHJpb3JpdHkgJXQgdGhyZWFkIG5hbWUgJUMgY2xhc3MgbmFtZSB1c3VhbGx5IGZ1bGwgY2xhc3MgbmFtZSAlTCBsaW5lIG51bWJlciBpbiBjb2RlICV4IHRocmVhZCByZWxhdGVkIE5EQyAlbSBsb2cgJW4gbmV3bGluZVxuICAgIDEzXHRsb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj1bZnJhbWVdICVke3l5eXktTU0tZGQgSEg6bW06c3MsU1NTfSAtICUtNHIgJS01cCBbJXRdICVDOiVMICV4IC0gJW0lblxuICAgIDE0XHRcbiAgICAxNVx0IyMjIyMjIyMjIyMjIyMjI1xuICAgIDE2XHQjIE91dHB1dCB0byBsb2cgZmlsZVxuICAgIDE3XHQjIyMjIyMjIyMjIyMjIyMjXG4gICAgMThcdFxuICAgIDE5XHQjIENvbmZpZ3VyZSBsb2dmaWxlIG91dHB1dCB0byBmaWxlLiBXaGVuIGZpbGUgc2l6ZSByZWFjaGVzIHNwZWNpZmllZCBzaXplLCBjcmVhdGUgbmV3IGxvZyBmaWxlXG4gICAgMjBcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGU9b3JnLmFwYWNoZS5sb2c0ai5Sb2xsaW5nRmlsZUFwcGVuZGVyXG4gICAgMjFcdCMgU2F2ZSBlbmNvZGluZyBmb3JtYXRcbiAgICAyMlx0bG9nNGouYXBwZW5kZXIubG9nZmlsZS5FbmNvZGluZz1VVEYtOFxuICAgIDIzXHQjIE91dHB1dCBmaWxlIGxvY2F0aW9uIGlzIGxvZ3MgZm9sZGVyIHVuZGVyIHByb2plY3Qgcm9vdCBkaXJlY3RvcnlcbiAgICAyNFx0bG9nNGouYXBwZW5kZXIubG9nZmlsZS5GaWxlPWxvZ3Mvcm9vdC5sb2dcbiAgICAyNVx0IyBTdWZmaXggY2FuIGJlIEtCLE1CLEdCLiBXaGVuIHJlYWNoaW5nIHRoaXMgc2l6ZSwgY3JlYXRlIG5ldyBsb2cgZmlsZVxuICAgIDI2XHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlLk1heEZpbGVTaXplPTEwTUJcbiAgICAyN1x0IyBTZXQgbWF4aW11bSB2YWx1ZSBvZiByb2xsaW5nIGZpbGVzIHRvIDMuIENhbiBjcmVhdGUgcm9vdC5sb2cuMSwgcm9vdC5sb2cuMiwgcm9vdC5sb2cuMyBhbmQgcm9vdC5sb2cgZm91ciBsb2cgZmlsZXNcbiAgICAyOFx0bG9nNGouYXBwZW5kZXIubG9nZmlsZS5NYXhCYWNrdXBJbmRleD0zXG4gICAgMjlcdCMgQ29uZmlndXJlIGxvZ2ZpbGUgYXMgY3VzdG9tIGxheW91dCBtb2RlXG4gICAgMzBcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dFxuICAgIDMxXHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXG4gICAgMzJcdFxuICAgIDMzXHQjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgIDM0XHQjIE91dHB1dCBkaWZmZXJlbnQgbG9ncyB0byBkaWZmZXJlbnQgZmlsZXMgZm9yIGRpZmZlcmVudCBjbGFzc2VzXG4gICAgMzVcdCMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICAgMzZcdFxuICAgIDM3XHQjIGNsdWIuYmFnZWRhdGUgcGFja2FnZSBsb2dzIG91dHB1dCBzZXBhcmF0ZWx5XG4gICAgMzhcdGxvZzRqLmxvZ2dlci5jbHViLmJhZ2VkYXRlPURFQlVHLGJhZ2VkYXRlXG4gICAgMzlcdCMgU2V0IHRvIGZhbHNlIHNvIHRoZXNlIGxvZyBtZXNzYWdlcyB3b24ndCBiZSBhZGRlZCB0byByb290TG9nZ2VyXG4gICAgNDBcdGxvZzRqLmFkZGl0aXZpdHkuY2x1Yi5iYWdlZGF0ZT1mYWxzZVxuICAgIDQxXHQjIENvbmZpZ3VyYXRpb24gYmVsb3cgaXMgdGhlIHNhbWUgYXMgYWJvdmVcbiAgICA0Mlx0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGU9b3JnLmFwYWNoZS5sb2c0ai5Sb2xsaW5nRmlsZUFwcGVuZGVyXG4gICAgNDNcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLkVuY29kaW5nPVVURi04XG4gICAgNDRcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLkZpbGU9bG9ncy9iYWdlZGF0ZS5sb2dcbiAgICA0NVx0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuTWF4RmlsZVNpemU9MTBNQlxuICAgIDQ2XHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5NYXhCYWNrdXBJbmRleD0zXG4gICAgNDdcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXRcbiAgICA0OFx0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPSVke3l5eXktTU0tZGQgSEg6bW06c3N9ICVGICVwICVtJW5cbiAgICA0OVx0XG4gICAgNTBcdCMgU2V0IE15Q29tbWFuZEhhbmRsZXIgdG8gREVCVUcgbGV2ZWwgdG8gc2VlIGNvbm5lY3Rpb24gZXZlbnRzXG4gICAgNTFcdGxvZzRqLmxvZ2dlci5zaXRlLmhuZnkyNTguY29kZXIuTXlDb21tYW5kSGFuZGxlcj1ERUJVR1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFWSjNOOHQ4NFByYkxvR1dhN3l2UFJuIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRjovSHVhUmVkaXMiLCJmb2xkZXJSb290IjoiRjovSHVhUmVkaXMifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTAyVDIwOjUxOjUyLjc3OFoiLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCdzIHRlc3Qgb3VyIGNoYW5nZXMgdG8gbWFrZSBzdXJlIHRoZXkgd29yayBjb3JyZWN0bHk6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiJlODdjNWRmYS1lYTYxLTRiOTQtYWJiNi1kOWZlODAwOTliMDEiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJyZXF1ZXN0X2lkIjoiYTcwOTNiMTItOGZmNC00NDE5LTlkOGYtZmQzYWNlMDIwMjI3IiwidXVpZCI6IjUzNzBjMjViLTRlYzItNGQ1My05OTY1LWU3MTY4MzJjMzEzOCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MCwidG9UaW1lc3RhbXAiOjE3NDYyMTkyMDY5MDMsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiM2Q0YzY0ZmYtMWZjZS00YTJmLTgwZTUtMjRhMDFiZWE0M2M0Iiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjZDgxMmMxNy1iZmFlLTRkODctODM1MC03OGY4NTY4NWE5ODgiLCJyZXF1ZXN0X21lc3NhZ2UiOiJbZnJhbWVdIDIwMjUtMDUtMDMgMDQ6NTQ6MDUsNDAyIC0gMjA5MjUgREVCVUcgW3JlZGlzLWNtZC00LTFdIHNpdGUuaG5meTI1OC5jb2Rlci5NeUNvbW1hbmRIYW5kbGVyOjE2MiAgLSBDbGllbnQgY29ubmVjdGlvbiBjbG9zZWQ6IC8xMjcuMC4wLjE6NTA0NzFcclxuamF2YS5pby5JT0V4Y2VwdGlvbjog6L+c56iL5Li75py65by66L+r5YWz6Zet5LqG5LiA5Liq546w5pyJ55qE6L+e5o6l44CCXHJcblx0YXQgc3VuLm5pby5jaC5Tb2NrZXREaXNwYXRjaGVyLnJlYWQwKE5hdGl2ZSBNZXRob2QpXHJcblx0YXQgc3VuLm5pby5jaC5Tb2NrZXREaXNwYXRjaGVyLnJlYWQoU29ja2V0RGlzcGF0Y2hlci5qYXZhOjQzKVxyXG5cdGF0IHN1bi5uaW8uY2guSU9VdGlsLnJlYWRJbnRvTmF0aXZlQnVmZmVyKElPVXRpbC5qYXZhOjIyMylcclxuXHRhdCBzdW4ubmlvLmNoLklPVXRpbC5yZWFkKElPVXRpbC5qYXZhOjE5MilcclxuXHRhdCBzdW4ubmlvLmNoLlNvY2tldENoYW5uZWxJbXBsLnJlYWQoU29ja2V0Q2hhbm5lbEltcGwuamF2YTozNzkpXHJcblx0YXQgaW8ubmV0dHkuYnVmZmVyLlBvb2xlZEJ5dGVCdWYuc2V0Qnl0ZXMoUG9vbGVkQnl0ZUJ1Zi5qYXZhOjI1MylcclxuXHRhdCBpby5uZXR0eS5idWZmZXIuQWJzdHJhY3RCeXRlQnVmLndyaXRlQnl0ZXMoQWJzdHJhY3RCeXRlQnVmLmphdmE6MTEzMylcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvU29ja2V0Q2hhbm5lbC5kb1JlYWRCeXRlcyhOaW9Tb2NrZXRDaGFubmVsLmphdmE6MzUwKVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLkFic3RyYWN0TmlvQnl0ZUNoYW5uZWwkTmlvQnl0ZVVuc2FmZS5yZWFkKEFic3RyYWN0TmlvQnl0ZUNoYW5uZWwuamF2YToxNDgpXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnByb2Nlc3NTZWxlY3RlZEtleShOaW9FdmVudExvb3AuamF2YTo3MTQpXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnByb2Nlc3NTZWxlY3RlZEtleXNPcHRpbWl6ZWQoTmlvRXZlbnRMb29wLmphdmE6NjUwKVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcC5wcm9jZXNzU2VsZWN0ZWRLZXlzKE5pb0V2ZW50TG9vcC5qYXZhOjU3NilcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucnVuKE5pb0V2ZW50TG9vcC5qYXZhOjQ5MylcclxuXHRhdCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuU2luZ2xlVGhyZWFkRXZlbnRFeGVjdXRvciQ0LnJ1bihTaW5nbGVUaHJlYWRFdmVudEV4ZWN1dG9yLmphdmE6OTg5KVxyXG5cdGF0IGlvLm5ldHR5LnV0aWwuaW50ZXJuYWwuVGhyZWFkRXhlY3V0b3JNYXAkMi5ydW4oVGhyZWFkRXhlY3V0b3JNYXAuamF2YTo3NClcclxuXHRhdCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuRmFzdFRocmVhZExvY2FsUnVubmFibGUucnVuKEZhc3RUaHJlYWRMb2NhbFJ1bm5hYmxlLmphdmE6MzApXHJcblx0YXQgamF2YS5sYW5nLlRocmVhZC5ydW4oVGhyZWFkLmphdmE6NzUwKVxyXG5bZnJhbWVdIDIwMjUtMDUtMDMgMDQ6NTQ6MDUsNDA3IC0gMjA5MzAgREVCVUcgW3JlZGlzLWNtZC00LTFdIHNpdGUuaG5meTI1OC5jb2Rlci5NeUNvbW1hbmRIYW5kbGVyOjE1MSAgLSBDbGllbnQgZGlzY29ubmVjdGVkOiAvMTI3LjAuMC4xOjUwNDcxXHJcbiDnjrDlnKjov5jmmK/kvJrmipvkuKrlvILluLgg6L+Z5bqU6K+l5piv5q2j5bi45oOF5Ya15ZCnIOS9huaYr+eci+edgOW+iOS4jeiIkuacjSIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJbZnJhbWVdIDIwMjUtMDUtMDMgMDQ6NTQ6MDUsNDAyIC0gMjA5MjUgREVCVUcgW3JlZGlzLWNtZC00LTFdIHNpdGUuaG5meTI1OC5jb2Rlci5NeUNvbW1hbmRIYW5kbGVyOjE2MiAgLSBDbGllbnQgY29ubmVjdGlvbiBjbG9zZWQ6IC8xMjcuMC4wLjE6NTA0NzFcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiamF2YS5pby5JT0V4Y2VwdGlvbjog6L+c56iL5Li75py65by66L+r5YWz6Zet5LqG5LiA5Liq546w5pyJ55qE6L+e5o6l44CCXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgc3VuLm5pby5jaC5Tb2NrZXREaXNwYXRjaGVyLnJlYWQwKE5hdGl2ZSBNZXRob2QpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgc3VuLm5pby5jaC5Tb2NrZXREaXNwYXRjaGVyLnJlYWQoU29ja2V0RGlzcGF0Y2hlci5qYXZhOjQzKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IHN1bi5uaW8uY2guSU9VdGlsLnJlYWRJbnRvTmF0aXZlQnVmZmVyKElPVXRpbC5qYXZhOjIyMylcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBzdW4ubmlvLmNoLklPVXRpbC5yZWFkKElPVXRpbC5qYXZhOjE5MilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBzdW4ubmlvLmNoLlNvY2tldENoYW5uZWxJbXBsLnJlYWQoU29ja2V0Q2hhbm5lbEltcGwuamF2YTozNzkpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgaW8ubmV0dHkuYnVmZmVyLlBvb2xlZEJ5dGVCdWYuc2V0Qnl0ZXMoUG9vbGVkQnl0ZUJ1Zi5qYXZhOjI1MylcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS5idWZmZXIuQWJzdHJhY3RCeXRlQnVmLndyaXRlQnl0ZXMoQWJzdHJhY3RCeXRlQnVmLmphdmE6MTEzMylcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvU29ja2V0Q2hhbm5lbC5kb1JlYWRCeXRlcyhOaW9Tb2NrZXRDaGFubmVsLmphdmE6MzUwKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLkFic3RyYWN0TmlvQnl0ZUNoYW5uZWwkTmlvQnl0ZVVuc2FmZS5yZWFkKEFic3RyYWN0TmlvQnl0ZUNoYW5uZWwuamF2YToxNDgpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnByb2Nlc3NTZWxlY3RlZEtleShOaW9FdmVudExvb3AuamF2YTo3MTQpXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnByb2Nlc3NTZWxlY3RlZEtleXNPcHRpbWl6ZWQoTmlvRXZlbnRMb29wLmphdmE6NjUwKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcC5wcm9jZXNzU2VsZWN0ZWRLZXlzKE5pb0V2ZW50TG9vcC5qYXZhOjU3NilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucnVuKE5pb0V2ZW50TG9vcC5qYXZhOjQ5MylcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuU2luZ2xlVGhyZWFkRXZlbnRFeGVjdXRvciQ0LnJ1bihTaW5nbGVUaHJlYWRFdmVudEV4ZWN1dG9yLmphdmE6OTg5KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGlvLm5ldHR5LnV0aWwuaW50ZXJuYWwuVGhyZWFkRXhlY3V0b3JNYXAkMi5ydW4oVGhyZWFkRXhlY3V0b3JNYXAuamF2YTo3NClcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBpby5uZXR0eS51dGlsLmNvbmN1cnJlbnQuRmFzdFRocmVhZExvY2FsUnVubmFibGUucnVuKEZhc3RUaHJlYWRMb2NhbFJ1bm5hYmxlLmphdmE6MzApXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgamF2YS5sYW5nLlRocmVhZC5ydW4oVGhyZWFkLmphdmE6NzUwKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJbZnJhbWVdIDIwMjUtMDUtMDMgMDQ6NTQ6MDUsNDA3IC0gMjA5MzAgREVCVUcgW3JlZGlzLWNtZC00LTFdIHNpdGUuaG5meTI1OC5jb2Rlci5NeUNvbW1hbmRIYW5kbGVyOjE1MSAgLSBDbGllbnQgZGlzY29ubmVjdGVkOiAvMTI3LjAuMC4xOjUwNDcxXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IiDnjrDlnKjov5jmmK/kvJrmipvkuKrlvILluLgg6L+Z5bqU6K+l5piv5q2j5bi45oOF5Ya15ZCnIOS9huaYr+eci+edgOW+iOS4jeiIkuacjSJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi5piv55qE77yM6L+Z5piv5q2j5bi45oOF5Ya144CC546w5Zyo55qE6L6T5Ye66KGo5piO5oiR5Lus55qE5L+u5pS55bey57uP55Sf5pWI5LqG77yM5byC5bi45bey57uP6KKr5q2j56Gu5Zyw5aSE55CG5Li6REVCVUfnuqfliKvnmoTml6Xlv5fvvIzogIzkuI3mmK9FUlJPUue6p+WIq+OAglxuXG7ku47ml6Xlv5fkuK3lj6/ku6XnnIvliLDkuKTmnaHkv6Hmga/vvJpcbjEuIOesrOS4gOadoeaYr+WuouaIt+err+i/nuaOpeWFs+mXreeahERFQlVH5pel5b+X77yM5pi+56S65LqG5byC5bi46K+m5oOFXG4yLiDnrKzkuozmnaHmmK9jaGFubmVsSW5hY3RpdmXmlrnms5XkuK3orrDlvZXnmoTlrqLmiLfnq6/mlq3lvIDov57mjqXnmoRERUJVR+aXpeW/l1xuXG7ov5nkupvml6Xlv5fmmK/pooTmnJ/nmoTooYzkuLrvvIzooajmmI7lvZPlrqLmiLfnq6/kvb/nlKhDdHJsK0Pmlq3lvIDov57mjqXml7bvvIzmnI3liqHlmajmraPnoa7lnLDor4bliKvliLDkuobov5nmmK/kuIDkuKrmraPluLjnmoTlrqLmiLfnq6/mlq3lvIDkuovku7bvvIzogIzkuI3mmK/plJnor6/jgIJcblxu5aaC5p6c5L2g6KeJ5b6X55yL5Yiw6L+Z5Lqb5pel5b+X5LuN54S25LiN6IiS5pyN77yM5oiR5Lus5Y+v5Lul6L+b5LiA5q2l5LyY5YyW5Luj56CB77yM6K6p6L+Z5Lqb5a6i5oi356uv5pat5byA6L+e5o6l55qE5pel5b+X5a6M5YWo5LiN5pi+56S644CC5Lul5LiL5piv5Lik56eN5pa55qGI77yaXG5cbiMjIyDmlrnmoYgx77ya6LCD5pW05pel5b+X57qn5YirXG7miJHku6zlj6/ku6XlsIZNeUNvbW1hbmRIYW5kbGVy55qE5pel5b+X57qn5Yir5LuOREVCVUfmlLnkuLpJTkZP77yM6L+Z5qC3REVCVUfnuqfliKvnmoTml6Xlv5flsLHkuI3kvJrmmL7npLrkuobvvJpcblxuYGBgcHJvcGVydGllc1xuIyDlsIbnuqfliKvku45ERUJVR+aUueS4uklORk9cbmxvZzRqLmxvZ2dlci5zaXRlLmhuZnkyNTguY29kZXIuTXlDb21tYW5kSGFuZGxlcj1JTkZPXG5gYGBcblxuIyMjIOaWueahiDLvvJrlrozlhajpmpDol4/lrqLmiLfnq6/mlq3lvIDov57mjqXnmoTml6Xlv5dcbuaIkeS7rOWPr+S7peS/ruaUuU15Q29tbWFuZEhhbmRsZXLnsbvvvIzlnKhpc0NsaWVudERpc2Nvbm5lY3RFeGNlcHRpb27mlrnms5XkuK3lrozlhajkuI3orrDlvZXku7vkvZXml6Xlv5fvvJpcblxuYGBgamF2YVxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgVGhyb3dhYmxlIGNhdXNlKSB7XG4gICAgLy8g5qOA5p+l5piv5ZCm5piv5a6i5oi356uv5pat5byA6L+e5o6l5a+86Ie055qE5byC5bi4XG4gICAgaWYgKGlzQ2xpZW50RGlzY29ubmVjdEV4Y2VwdGlvbihjYXVzZSkpIHtcbiAgICAgICAgLy8g5a6i5oi356uv5pat5byA6L+e5o6l77yM5LiN6K6w5b2V5Lu75L2V5pel5b+XXG4gICAgICAgIC8vIOmdmem7mOWkhOeQhlxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWFtuS7luexu+Wei+eahOW8guW4uOS7jeeEtuiusOW9leS4uumUmeivr1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgICAgICAvLyDlj6rmnInlnKjpgJrpgZPku43nhLbmtLvot4Pml7bmiY3lsJ3or5XlhpnlhaXlk43lupRcbiAgICAgICAgaWYgKGN0eC5jaGFubmVsKCkuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiBcIiArIGNhdXNlLmdldE1lc3NhZ2UoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIOWmguaenOi/nuaOpeW3sue7j+S4jeWPr+eUqO+8jOWFs+mXreWug1xuICAgIGlmICghY3R4LmNoYW5uZWwoKS5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIGN0eC5jbG9zZSgpO1xuICAgIH1cbn1cblxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBjaGFubmVsSW5hY3RpdmUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCkge1xuICAgIC8vIOWuouaIt+err+aWreW8gOi/nuaOpeaXtuiwg+eUqO+8jOS4jeiusOW9leS7u+S9leaXpeW/l1xuICAgIC8vIOiwg+eUqOeItuexu+aWueazleehruS/neS6i+S7tuS8oOaSrVxuICAgIGN0eC5maXJlQ2hhbm5lbEluYWN0aXZlKCk7XG59XG5gYGBcblxu5L2g5oOz6KaB6YeH55So5ZOq56eN5pa55qGI77yf5oiR5Y+v5Lul5biu5L2g5a6e546w44CCXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6IltmcmFtZV0gMjAyNS0wNS0wMyAwNDo1NDowNSw0MDIgLSAyMDkyNSBERUJVRyBbcmVkaXMtY21kLTQtMV0gc2l0ZS5obmZ5MjU4LmNvZGVyLk15Q29tbWFuZEhhbmRsZXI6MTYyICAtIENsaWVudCBjb25uZWN0aW9uIGNsb3NlZDogLzEyNy4wLjAuMTo1MDQ3MVxyXG5qYXZhLmlvLklPRXhjZXB0aW9uOiDov5znqIvkuLvmnLrlvLrov6vlhbPpl63kuobkuIDkuKrnjrDmnInnmoTov57mjqXjgIJcclxuXHRhdCBzdW4ubmlvLmNoLlNvY2tldERpc3BhdGNoZXIucmVhZDAoTmF0aXZlIE1ldGhvZClcclxuXHRhdCBzdW4ubmlvLmNoLlNvY2tldERpc3BhdGNoZXIucmVhZChTb2NrZXREaXNwYXRjaGVyLmphdmE6NDMpXHJcblx0YXQgc3VuLm5pby5jaC5JT1V0aWwucmVhZEludG9OYXRpdmVCdWZmZXIoSU9VdGlsLmphdmE6MjIzKVxyXG5cdGF0IHN1bi5uaW8uY2guSU9VdGlsLnJlYWQoSU9VdGlsLmphdmE6MTkyKVxyXG5cdGF0IHN1bi5uaW8uY2guU29ja2V0Q2hhbm5lbEltcGwucmVhZChTb2NrZXRDaGFubmVsSW1wbC5qYXZhOjM3OSlcclxuXHRhdCBpby5uZXR0eS5idWZmZXIuUG9vbGVkQnl0ZUJ1Zi5zZXRCeXRlcyhQb29sZWRCeXRlQnVmLmphdmE6MjUzKVxyXG5cdGF0IGlvLm5ldHR5LmJ1ZmZlci5BYnN0cmFjdEJ5dGVCdWYud3JpdGVCeXRlcyhBYnN0cmFjdEJ5dGVCdWYuamF2YToxMTMzKVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwuc29ja2V0Lm5pby5OaW9Tb2NrZXRDaGFubmVsLmRvUmVhZEJ5dGVzKE5pb1NvY2tldENoYW5uZWwuamF2YTozNTApXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uQWJzdHJhY3ROaW9CeXRlQ2hhbm5lbCROaW9CeXRlVW5zYWZlLnJlYWQoQWJzdHJhY3ROaW9CeXRlQ2hhbm5lbC5qYXZhOjE0OClcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucHJvY2Vzc1NlbGVjdGVkS2V5KE5pb0V2ZW50TG9vcC5qYXZhOjcxNClcclxuXHRhdCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3AucHJvY2Vzc1NlbGVjdGVkS2V5c09wdGltaXplZChOaW9FdmVudExvb3AuamF2YTo2NTApXHJcblx0YXQgaW8ubmV0dHkuY2hhbm5lbC5uaW8uTmlvRXZlbnRMb29wLnByb2Nlc3NTZWxlY3RlZEtleXMoTmlvRXZlbnRMb29wLmphdmE6NTc2KVxyXG5cdGF0IGlvLm5ldHR5LmNoYW5uZWwubmlvLk5pb0V2ZW50TG9vcC5ydW4oTmlvRXZlbnRMb29wLmphdmE6NDkzKVxyXG5cdGF0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5TaW5nbGVUaHJlYWRFdmVudEV4ZWN1dG9yJDQucnVuKFNpbmdsZVRocmVhZEV2ZW50RXhlY3V0b3IuamF2YTo5ODkpXHJcblx0YXQgaW8ubmV0dHkudXRpbC5pbnRlcm5hbC5UaHJlYWRFeGVjdXRvck1hcCQyLnJ1bihUaHJlYWRFeGVjdXRvck1hcC5qYXZhOjc0KVxyXG5cdGF0IGlvLm5ldHR5LnV0aWwuY29uY3VycmVudC5GYXN0VGhyZWFkTG9jYWxSdW5uYWJsZS5ydW4oRmFzdFRocmVhZExvY2FsUnVubmFibGUuamF2YTozMClcclxuXHRhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQuamF2YTo3NTApXHJcbltmcmFtZV0gMjAyNS0wNS0wMyAwNDo1NDowNSw0MDcgLSAyMDkzMCBERUJVRyBbcmVkaXMtY21kLTQtMV0gc2l0ZS5obmZ5MjU4LmNvZGVyLk15Q29tbWFuZEhhbmRsZXI6MTUxICAtIENsaWVudCBkaXNjb25uZWN0ZWQ6IC8xMjcuMC4wLjE6NTA0NzFcclxuIOeOsOWcqOi/mOaYr+S8muaKm+S4quW8guW4uCDov5nlupTor6XmmK/mraPluLjmg4XlhrXlkKcg5L2G5piv55yL552A5b6I5LiN6IiS5pyNIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRjovSHVhUmVkaXMiLCJmb2xkZXJSb290IjoiRjovSHVhUmVkaXMifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlLCJjdXJyZW50VGVybWluYWwiOnsidGVybWluYWxJZCI6MywiY3VycmVudFdvcmtpbmdEaXJlY3RvcnkiOiJGOi9IdWFSZWRpcyJ9fX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTAyVDIwOjU0OjMyLjI5OFoiLCJyZXNwb25zZV90ZXh0Ijoi5piv55qE77yM6L+Z5piv5q2j5bi45oOF5Ya144CC546w5Zyo55qE6L6T5Ye66KGo5piO5oiR5Lus55qE5L+u5pS55bey57uP55Sf5pWI5LqG77yM5byC5bi45bey57uP6KKr5q2j56Gu5Zyw5aSE55CG5Li6REVCVUfnuqfliKvnmoTml6Xlv5fvvIzogIzkuI3mmK9FUlJPUue6p+WIq+OAglxuXG7ku47ml6Xlv5fkuK3lj6/ku6XnnIvliLDkuKTmnaHkv6Hmga/vvJpcbjEuIOesrOS4gOadoeaYr+WuouaIt+err+i/nuaOpeWFs+mXreeahERFQlVH5pel5b+X77yM5pi+56S65LqG5byC5bi46K+m5oOFXG4yLiDnrKzkuozmnaHmmK9jaGFubmVsSW5hY3RpdmXmlrnms5XkuK3orrDlvZXnmoTlrqLmiLfnq6/mlq3lvIDov57mjqXnmoRERUJVR+aXpeW/l1xuXG7ov5nkupvml6Xlv5fmmK/pooTmnJ/nmoTooYzkuLrvvIzooajmmI7lvZPlrqLmiLfnq6/kvb/nlKhDdHJsK0Pmlq3lvIDov57mjqXml7bvvIzmnI3liqHlmajmraPnoa7lnLDor4bliKvliLDkuobov5nmmK/kuIDkuKrmraPluLjnmoTlrqLmiLfnq6/mlq3lvIDkuovku7bvvIzogIzkuI3mmK/plJnor6/jgIJcblxu5aaC5p6c5L2g6KeJ5b6X55yL5Yiw6L+Z5Lqb5pel5b+X5LuN54S25LiN6IiS5pyN77yM5oiR5Lus5Y+v5Lul6L+b5LiA5q2l5LyY5YyW5Luj56CB77yM6K6p6L+Z5Lqb5a6i5oi356uv5pat5byA6L+e5o6l55qE5pel5b+X5a6M5YWo5LiN5pi+56S644CC5Lul5LiL5piv5Lik56eN5pa55qGI77yaXG5cbiMjIyDmlrnmoYgx77ya6LCD5pW05pel5b+X57qn5YirXG7miJHku6zlj6/ku6XlsIZNeUNvbW1hbmRIYW5kbGVy55qE5pel5b+X57qn5Yir5LuOREVCVUfmlLnkuLpJTkZP77yM6L+Z5qC3REVCVUfnuqfliKvnmoTml6Xlv5flsLHkuI3kvJrmmL7npLrkuobvvJpcblxuYGBgcHJvcGVydGllc1xuIyDlsIbnuqfliKvku45ERUJVR+aUueS4uklORk9cbmxvZzRqLmxvZ2dlci5zaXRlLmhuZnkyNTguY29kZXIuTXlDb21tYW5kSGFuZGxlcj1JTkZPXG5gYGBcblxuIyMjIOaWueahiDLvvJrlrozlhajpmpDol4/lrqLmiLfnq6/mlq3lvIDov57mjqXnmoTml6Xlv5dcbuaIkeS7rOWPr+S7peS/ruaUuU15Q29tbWFuZEhhbmRsZXLnsbvvvIzlnKhpc0NsaWVudERpc2Nvbm5lY3RFeGNlcHRpb27mlrnms5XkuK3lrozlhajkuI3orrDlvZXku7vkvZXml6Xlv5fvvJpcblxuYGBgamF2YVxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgVGhyb3dhYmxlIGNhdXNlKSB7XG4gICAgLy8g5qOA5p+l5piv5ZCm5piv5a6i5oi356uv5pat5byA6L+e5o6l5a+86Ie055qE5byC5bi4XG4gICAgaWYgKGlzQ2xpZW50RGlzY29ubmVjdEV4Y2VwdGlvbihjYXVzZSkpIHtcbiAgICAgICAgLy8g5a6i5oi356uv5pat5byA6L+e5o6l77yM5LiN6K6w5b2V5Lu75L2V5pel5b+XXG4gICAgICAgIC8vIOmdmem7mOWkhOeQhlxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWFtuS7luexu+Wei+eahOW8guW4uOS7jeeEtuiusOW9leS4uumUmeivr1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgICAgICAvLyDlj6rmnInlnKjpgJrpgZPku43nhLbmtLvot4Pml7bmiY3lsJ3or5XlhpnlhaXlk43lupRcbiAgICAgICAgaWYgKGN0eC5jaGFubmVsKCkuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiBcIiArIGNhdXNlLmdldE1lc3NhZ2UoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIOWmguaenOi/nuaOpeW3sue7j+S4jeWPr+eUqO+8jOWFs+mXreWug1xuICAgIGlmICghY3R4LmNoYW5uZWwoKS5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIGN0eC5jbG9zZSgpO1xuICAgIH1cbn1cblxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBjaGFubmVsSW5hY3RpdmUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCkge1xuICAgIC8vIOWuouaIt+err+aWreW8gOi/nuaOpeaXtuiwg+eUqO+8jOS4jeiusOW9leS7u+S9leaXpeW/l1xuICAgIC8vIOiwg+eUqOeItuexu+aWueazleehruS/neS6i+S7tuS8oOaSrVxuICAgIGN0eC5maXJlQ2hhbm5lbEluYWN0aXZlKCk7XG59XG5gYGBcblxu5L2g5oOz6KaB6YeH55So5ZOq56eN5pa55qGI77yf5oiR5Y+v5Lul5biu5L2g5a6e546w44CCXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtN2QxODQ2MDktNWZiOS00ZjY3LTllZTEtYWYxZTAxYzRhZDAwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1kYzg4NjA5ZC05M2IxLTQxNDYtYmU2Ni05OTMwZThjNjVlMDIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTUyNTk0YjAzLWFjMzUtNDdlMS1hYmM4LTc3MGEyNzgwZDAyYiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtODM3ODQ1ZGQtM2FhOC00OGViLTgwNzgtMzExNTFmNWZlMGIzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS01MWVlYzJiZS1hYzI2LTRkZTgtYTg4NC1jYjE0YzIxOThkNmYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTJhNmM4OWExLWQ4NzUtNDk4Ni1hZTgzLTc1ZDgxMTllNzBhYyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZDliY2VjNjQtY2ZlZC00ZGMyLTk3NDktMWRhNTIxMjViNmJiIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1mZTRjMjlkZC1hNThlLTQ2OTYtOTczYy1iZTc0MzE5Mzg4YTkiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTJmN2M2NjJmLTA3OWYtNDA0ZS05ZDg5LWViNmI4YTg3ZmE4MCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZGJjMDIyYzItZjIzYy00NWUwLWI0ZWItNDYxNTk3M2IwMTdlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifX0sInRvb2xVc2VTdGF0ZXMiOnsiNjEyN2U4MjctMTYxNS00YzgzLTgxNzUtY2Q5ZTU5ZmIzMDgyO3Rvb2x1X3ZydHhfMDE0d2U2ZFdtMUZBVVdxUW1FTVRRUlhjIjp7InJlcXVlc3RJZCI6IjYxMjdlODI3LTE2MTUtNGM4My04MTc1LWNkOWU1OWZiMzA4MiIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDE0d2U2ZFdtMUZBVVdxUW1FTVRRUlhjIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXI7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5TaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5Mb2dnZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLkFPRkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNsdXN0ZXIuUmVkaXNDbHVzdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZFR5cGU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguc2VydmVyLk15UmVkaXNTZXJ2aWNlO1xuXG5pbXBvcnQgamF2YS51dGlsLkVudW1TZXQ7XG5pbXBvcnQgamF2YS51dGlsLlNldDtcblxuQENoYW5uZWxIYW5kbGVyLlNoYXJhYmxlXG5wdWJsaWMgY2xhc3MgTXlDb21tYW5kSGFuZGxlciBleHRlbmRzIFNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjxSZXNwPiB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlDb21tYW5kSGFuZGxlci5jbGFzcyk7XG4gICAgcHJpdmF0ZSBmaW5hbCBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuICAgIHByaXZhdGUgZmluYWwgQU9GSGFuZGxlciBhb2ZIYW5kbGVyO1xuICAgIHByaXZhdGUgZmluYWwgUkRCSGFuZGxlciByZGJIYW5kbGVyO1xuXG4gICAgLy8g5L2/55SoRW51bVNldOaPkOmrmOafpeaJvuaViOeOh1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFNldDxDb21tYW5kVHlwZT4gV1JJVEVfQ09NTUFORFMgPSBFbnVtU2V0Lm9mKFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuU0VULCBDb21tYW5kVHlwZS5ERUwsIENvbW1hbmRUeXBlLklOQ1IsIENvbW1hbmRUeXBlLk1TRVQsXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5FWFBJUkUsIENvbW1hbmRUeXBlLlNBREQsIENvbW1hbmRUeXBlLlNSRU0sIENvbW1hbmRUeXBlLlNQT1AsXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5IU0VULCBDb21tYW5kVHlwZS5ITUVTVCwgQ29tbWFuZFR5cGUuSERFTCxcbiAgICAgICAgICAgIENvbW1hbmRUeXBlLkxQVVNILCBDb21tYW5kVHlwZS5SUFVTSCwgQ29tbWFuZFR5cGUuTFBPUCwgQ29tbWFuZFR5cGUuUlBPUCwgQ29tbWFuZFR5cGUuTFJFTSxcbiAgICAgICAgICAgIENvbW1hbmRUeXBlLlpBREQsIENvbW1hbmRUeXBlLlpSRU0sQ29tbWFuZFR5cGUuU0VMRUNUXG4gICAgKTtcblxuICAgIHB1YmxpYyBNeUNvbW1hbmRIYW5kbGVyKFJlZGlzQ29yZSByZWRpc0NvcmUsIEFPRkhhbmRsZXIgYW9mSGFuZGxlciwgUkRCSGFuZGxlciByZGJIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgICAgICB0aGlzLmFvZkhhbmRsZXIgPSBhb2ZIYW5kbGVyO1xuICAgICAgICB0aGlzLnJkYkhhbmRsZXIgPSByZGJIYW5kbGVyO1xuXG5cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBjaGFubmVsUmVhZDAoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCBtc2cpIHtcbiAgICAgICAgaWYgKG1zZyBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgICAgICAgICAgUmVzcEFycmF5IGFycmF5ID0gKFJlc3BBcnJheSkgbXNnO1xuICAgICAgICAgICAgUmVzcCByZXNwb25zZSA9IHByb2Nlc3NDb21tYW5kKGFycmF5KTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiB1bmtub3duIHJlcXVlc3QgdHlwZVwiKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgUmVzcCBwcm9jZXNzQ29tbWFuZChSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIGlmIChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZW1wdHkgY29tbWFuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZXNwW10gYXJyYXkgPSBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKTtcbiAgICAgICAgICAgIFN0cmluZyBjb21tYW5kTmFtZSA9ICgoQnVsa1N0cmluZykgYXJyYXlbMF0pLmdldENvbnRlbnQoKS50b1V0ZjhTdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgQ29tbWFuZFR5cGUgY29tbWFuZFR5cGU7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZFR5cGUgPSBDb21tYW5kVHlwZS52YWx1ZU9mKGNvbW1hbmROYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biBjb21tYW5kICdcIiArIGNvbW1hbmROYW1lICsgXCInXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlSW5DbHVzdGVyKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNsdXN0ZXJDb21tYW5kKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBDb21tYW5kIGNvbW1hbmQgPSBjb21tYW5kVHlwZS5nZXRTdXBwbGllcigpLmFwcGx5KHJlZGlzQ29yZSk7XG4gICAgICAgICAgICBjb21tYW5kLnNldENvbnRleHQoYXJyYXkpO1xuXG4gICAgICAgICAgICBSZXNwIHJlc3VsdCA9IGNvbW1hbmQuaGFuZGxlKCk7XG5cbiAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGFycmF5Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZGJIYW5kbGVyLm5vdGlmeURhdGFDaGFuZ2VkKHJlZGlzQ29yZS5nZXRDdXJyZW50REIoKS5nZXRJZCgpLCAoKEJ1bGtTdHJpbmcpIGFycmF5WzFdKS5nZXRDb250ZW50KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDlpoLmnpzlkK/nlKjkuoZBT0bvvIzorrDlvZXlkb3ku6RcbiAgICAgICAgICAgaWYgKGFvZkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkpe1xuICAgICAgICAgICAgICAgIGFvZkhhbmRsZXIuYXBwZW5kKGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIGNvbW1hbmRcIiwgZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYm9vbGVhbiBzaG91bGRIYW5kbGVJbkNsdXN0ZXIoQ29tbWFuZFR5cGUgY29tbWFuZFR5cGUsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgUmVkaXNDbHVzdGVyIGNsdXN0ZXIgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q2x1c3RlcigpO1xuICAgICAgICByZXR1cm4gY2x1c3RlciAhPSBudWxsICYmIGNsdXN0ZXIuaXNTaGFyZGluZ0VuYWJsZWQoKSAmJlxuICAgICAgICAgICAgICAgIChjb21tYW5kVHlwZSA9PSBDb21tYW5kVHlwZS5HRVQgfHwgY29tbWFuZFR5cGUgPT0gQ29tbWFuZFR5cGUuU0VUKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIFJlc3AgaGFuZGxlQ2x1c3RlckNvbW1hbmQoQ29tbWFuZFR5cGUgY29tbWFuZFR5cGUsIFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgUmVkaXNDbHVzdGVyIGNsdXN0ZXIgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q2x1c3RlcigpO1xuICAgICAgICBCeXRlc1dyYXBwZXIga2V5ID0gKChCdWxrU3RyaW5nKSBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKVsxXSkuZ2V0Q29udGVudCgpO1xuICAgICAgICBTdHJpbmcgdGFyZ2V0Tm9kZUlkID0gY2x1c3Rlci5nZXROb2RlRm9yS2V5KGtleSk7XG4gICAgICAgIFN0cmluZyBjdXJyZW50Tm9kZUlkID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldEN1cnJlbnROb2RlKCkuZ2V0SWQoKTtcblxuICAgICAgICBpZiAoY3VycmVudE5vZGVJZC5lcXVhbHModGFyZ2V0Tm9kZUlkKSkge1xuICAgICAgICAgICAgQ29tbWFuZCBjb21tYW5kID0gY29tbWFuZFR5cGUuZ2V0U3VwcGxpZXIoKS5hcHBseShyZWRpc0NvcmUpO1xuICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGNvbW1hbmRBcnJheS5nZXRBcnJheSgpKTtcbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcblxuICAgICAgICAgICAgLy8g56Gu5L+d5pys5Zyw5omn6KGM5pe25Lmf6Kem5Y+RUkRCXG4gICAgICAgICAgICBpZiAocmRiSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSAmJiBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgcmRiSGFuZGxlci5ub3RpZnlEYXRhQ2hhbmdlZChyZWRpc0NvcmUuZ2V0Q3VycmVudERCKCkuZ2V0SWQoKSwga2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gZm9yd2FyZFRvVGFyZ2V0Tm9kZSh0YXJnZXROb2RlSWQsIGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBSZXNwIGZvcndhcmRUb1RhcmdldE5vZGUoU3RyaW5nIHRhcmdldE5vZGVJZCwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8g6I635Y+W55uu5qCH6IqC54K555qE5pyN5Yqh5a6e5L6LXG4gICAgICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAgICAgICAgICBNeVJlZGlzU2VydmljZSB0YXJnZXRTZXJ2aWNlID0gY2x1c3Rlci5nZXROb2RlKHRhcmdldE5vZGVJZCk7XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXRTZXJ2aWNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDovazlj5Hlkb3ku6TliLDnm67moIfoioLngrlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0U2VydmljZS5leGVjdXRlQ29tbWFuZChjb21tYW5kQXJyYXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiB0YXJnZXQgbm9kZSBub3QgYXZhaWxhYmxlOiBcIiArIHRhcmdldE5vZGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBmb3J3YXJkaW5nIGNvbW1hbmQgdG8gbm9kZSBcIiArIHRhcmdldE5vZGVJZCwgZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBmb3J3YXJkaW5nIGZhaWxlZDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgVGhyb3dhYmxlIGNhdXNlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGluIGNvbW1hbmQgaGFuZGxlclwiLCBjYXVzZSk7XG4gICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3NlcnZlci9NeVJlZGlzU2VydmljZS5qYXZhXG4uLi5cbmltcG9ydCBzaXRlLmhuZnkyNTguY2hhbm5lbC5EZWZhdWx0Q2hhbm5lbFNlbGVjdFN0cmF0ZWd5O1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jaGFubmVsLkxvY2FsQ2hhbm5lbE9wdGlvbjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLkFPRkhhbmRsZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC4qO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuY29yZS5SREJIYW5kbGVyO1xuXG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbmltcG9ydCBqYXZhLnV0aWwuTWFwO1xuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwO1xuLi4uXG5cbiAgICBwcml2YXRlIGZpbmFsIGludCBwb3J0O1xuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIGZpbmFsIExvY2FsQ2hhbm5lbE9wdGlvbiBjaGFubmVsT3B0aW9uO1xuICAgIHByaXZhdGUgZmluYWwgRXZlbnRFeGVjdXRvckdyb3VwIGNvbW1hbmRFeGVjdXRvcjtcbiAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcjtcblxuICAgIHByaXZhdGUgQ2hhbm5lbCBzZXJ2ZXJDaGFubmVsO1xuICAgIHByaXZhdGUgRXZlbnRMb29wR3JvdXAgYm9zc0dyb3VwO1xuICAgIHByaXZhdGUgRXZlbnRMb29wR3JvdXAgd29ya2VyR3JvdXA7XG5cbiAgICAvLyDmt7vliqDmlrnms5XnrqHnkIbpm4bnvqTov57mjqVcbiAgICBwdWJsaWMgdm9pZCBhZGRDbHVzdGVyQ2xpZW50KFN0cmluZyBub2RlSWQsIENsdXN0ZXJDbGllbnQgY2xpZW50KSB7XG4gICAgICAgIGNsdXN0ZXJDbGllbnRzLnB1dChub2RlSWQsIGNsaWVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIENsdXN0ZXJDbGllbnQgZ2V0Q2x1c3RlckNsaWVudChTdHJpbmcgbm9kZUlkKSB7XG4gICAgICAgIHJldHVybiBjbHVzdGVyQ2xpZW50cy5nZXQobm9kZUlkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRDbHVzdGVyKFJlZGlzQ2x1c3RlciBjbHVzdGVyKSB7XG4gICAgICAgIHRoaXMuY2x1c3RlciA9IGNsdXN0ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIFJlZGlzQ2x1c3RlciBnZXRDbHVzdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbHVzdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEN1cnJlbnROb2RlKENsdXN0ZXJOb2RlIG5vZGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG5vZGU7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgICAgIC8vIOWIm+W7uue7n+S4gOeahOWRveS7pOWkhOeQhuWZqFxuICAgICAgICAgICAgdGhpcy5jb21tYW5kSGFuZGxlciA9IG5ldyBNeUNvbW1hbmRIYW5kbGVyKHJlZGlzQ29yZSwgYW9mSGFuZGxlciwgcmRiSGFuZGxlcik7XG5cbiAgICAgICAgICAgIFNlcnZlckJvb3RzdHJhcCBib290c3RyYXAgPSBuZXcgU2VydmVyQm9vdHN0cmFwKCk7XG4gICAgICAgICAgICBib290c3RyYXAuZ3JvdXAoYm9zc0dyb3VwLCB3b3JrZXJHcm91cClcbiAgICAgICAgICAgICAgICAgICAgLmNoYW5uZWwoY2hhbm5lbE9wdGlvbi5nZXRDaGFubmVsQ2xhc3MoKSkuXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uKENoYW5uZWxPcHRpb24uU09fS0VFUEFMSVZFLCB0cnVlKS5cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRPcHRpb24oQ2hhbm5lbE9wdGlvbi5UQ1BfTk9ERUxBWSwgdHJ1ZSkuXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uKENoYW5uZWxPcHRpb24uQUxMT0NBVE9SLCBQb29sZWRCeXRlQnVmQWxsb2NhdG9yLkRFRkFVTFQpXG4gICAgICAgICAgICAgICAgICAgIC5jaGlsZEhhbmRsZXIobmV3IENoYW5uZWxJbml0aWFsaXplcjxTb2NrZXRDaGFubmVsPigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgaW5pdENoYW5uZWwoU29ja2V0Q2hhbm5lbCBjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5uZWxQaXBlbGluZSBwaXBlbGluZSA9IGNoLnBpcGVsaW5lKCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15RGVjb2RlcigpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmFkZExhc3QobmV3IE15UmVzcG9uc2VFbmNvZGVyKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoRU5BQkxFX0NPTVBSRVNTSU9OKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgQ29tcHJlc3Npb25Db2VkQygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChjb21tYW5kRXhlY3V0b3IsIGNvbW1hbmRIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4uLi5cblxuICAgIHB1YmxpYyB2b2lkIHNlbmRNZXNzYWdlVG9Ob2RlKFN0cmluZyB0b05vZGVJZCwgUmVzcCBtZXNzYWdlKSB7XG4gICAgICAgIENsdXN0ZXJDbGllbnQgY2xpZW50ID0gY2x1c3RlckNsaWVudHMuZ2V0KHRvTm9kZUlkKTtcbiAgICAgICAgaWYgKGNsaWVudCAhPSBudWxsICYmIGNsaWVudC5pc0FjdGl2ZSgpKSB7ICAvLyDnoa7kv53ov57mjqXmtLvot4NcbiAgICAgICAgICAgIGNsaWVudC5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIk5vIGFjdGl2ZSBjb25uZWN0aW9uIHRvIG5vZGUgXCIgKyB0b05vZGVJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTXlSZWRpc1NlcnZpY2UgZ2V0UmVkaXNTZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUmVkaXNDb3JlIGdldFJlZGlzQ29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHJlZGlzQ29yZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50IGdldFBvcnQoKSB7XG4gICAgICAgIHJldHVybiBwb3J0O1xuICAgIH1cblxuICAgIHB1YmxpYyBSZXNwIGV4ZWN1dGVDb21tYW5kKFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRIYW5kbGVyLnByb2Nlc3NDb21tYW5kKGNvbW1hbmRBcnJheSk7XG4gICAgfVxuXG4gICAgcHVibGljIENsdXN0ZXJOb2RlIGdldEN1cnJlbnROb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50Tm9kZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlciBnZXRDb21tYW5kSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZEhhbmRsZXI7XG4gICAgfVxuXG4gICAgcHVibGljIEFPRkhhbmRsZXIgZ2V0QW9mSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW9mSGFuZGxlcjtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NsdXN0ZXIvQ2x1c3RlckNsaWVudC5qYXZhXG4uLi5cblxuICAgIHB1YmxpYyBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBjb25uZWN0KCkge1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuXG4gICAgICAgIGdyb3VwID0gbmV3IE5pb0V2ZW50TG9vcEdyb3VwKCk7XG4gICAgICAgIEJvb3RzdHJhcCBib290c3RyYXAgPSBuZXcgQm9vdHN0cmFwKCk7XG4gICAgICAgIGJvb3RzdHJhcC5ncm91cChncm91cClcbiAgICAgICAgICAgICAgICAuY2hhbm5lbChOaW9Tb2NrZXRDaGFubmVsLmNsYXNzKVxuICAgICAgICAgICAgICAgIC5vcHRpb24oQ2hhbm5lbE9wdGlvbi5DT05ORUNUX1RJTUVPVVRfTUlMTElTLCA1MDAwKVxuICAgICAgICAgICAgICAgIC5oYW5kbGVyKG5ldyBDaGFubmVsSW5pdGlhbGl6ZXI8U29ja2V0Q2hhbm5lbD4oKSB7XG4gICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBpbml0Q2hhbm5lbChTb2NrZXRDaGFubmVsIGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDaGFubmVsUGlwZWxpbmUgcGlwZWxpbmUgPSBjaC5waXBlbGluZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlEZWNvZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlSZXNwb25zZUVuY29kZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBDbHVzdGVyQ2xpZW50SGFuZGxlcigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbm5lY3RXaXRoUmV0cnkoYm9vdHN0cmFwLCBob3N0LCBwb3J0LCBmdXR1cmUsIDMsIDEwMDApO1xuICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9Db21tYW5kLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvbW1hbmQ7XG5cbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcblxucHVibGljIGludGVyZmFjZSBDb21tYW5kIHtcbiAgICBDb21tYW5kVHlwZSBnZXRUeXBlKCk7XG4gICAgdm9pZCBzZXRDb250ZXh0KFJlc3BbXSBhcnJheSk7XG4gICAgUmVzcCBoYW5kbGUoKTsgLy8g6L+U5ZueUmVzcOWvueixoeiAjOS4jeaYr+ebtOaOpeWGmeWFpWNoYW5uZWxcbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9JbmZvLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgSW5mbyBpbXBsZW1lbnRzIENvbW1hbmRcbiB7XG5cbiAgICAgcHJpdmF0ZSBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuXG4gICAgIHB1YmxpYyBJbmZvKFJlZGlzQ29yZSByZWRpc0NvcmUpXG4gICAgIHtcbiAgICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgICB9XG4gICAgIEBPdmVycmlkZVxuICAgICBwdWJsaWMgQ29tbWFuZFR5cGUgZ2V0VHlwZSgpXG4gICAgIHtcbiAgICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5JTkZPO1xuICAgICB9XG4gXG4gICAgIEBPdmVycmlkZVxuICAgICBwdWJsaWMgdm9pZCBzZXRDb250ZXh0KFJlc3BbXSBhcnJheSlcbiAgICAge1xuXG4gICAgIH1cbiBcbiAgICAgQE92ZXJyaWRlXG4gICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpXG4gICAgIHtcbiAgICAgICAgIExpc3Q8U3RyaW5nPiBsaXN0ID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgICBsaXN0LmFkZChcInJlZGlzX3ZlcnNpb246amZpcmVfcmVkaXNfbW9ja1wiKTtcbiAgICAgICAgIGxpc3QuYWRkKFwib3M6XCIgKyBTeXN0ZW0uZ2V0UHJvcGVydHkoXCJvcy5uYW1lXCIpKTtcbiAgICAgICAgIGxpc3QuYWRkKFwicHJvY2Vzc19pZDpcIiArIGdldFBpZCgpKTtcbiAgICAgICAgIE9wdGlvbmFsPFN0cmluZz4gcmVkdWNlID0gbGlzdC5zdHJlYW0oKS5tYXAobmFtZSAtPiBuYW1lICsgXCJcXHJcXG5cIikucmVkdWNlKChmaXJzdCwgc2Vjb25kKSAtPiBmaXJzdCArIHNlY29uZCk7XG4gICAgICAgICBTdHJpbmcgICAgICAgICAgIHMgICAgICA9IHJlZHVjZS5nZXQoKTtcbiAgICAgICAgIHJldHVybiBuZXcgQnVsa1N0cmluZyhuZXcgQnl0ZXNXcmFwcGVyKHMuZ2V0Qnl0ZXMoU3RhbmRhcmRDaGFyc2V0cy5VVEZfOCkpKTtcbiAgICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvQmdzYXZlLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICBpZiAocmRiSGFuZGxlciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkVSUiBSREIgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/lnKjov5vooYzkv53lrZhcbiAgICAgICAgaWYgKHJkYkhhbmRsZXIuaXNTYXZpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJFUlIgQmFja2dyb3VuZCBzYXZlIGFscmVhZHkgaW4gcHJvZ3Jlc3NcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDop6blj5HlkI7lj7Dlhajph4/kv53lrZhcbiAgICAgICAgYm9vbGVhbiBzdGFydGVkID0gcmRiSGFuZGxlci5iZ3NhdmUodHJ1ZSk7XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkJhY2tncm91bmQgc2F2aW5nIHN0YXJ0ZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkVSUiBCYWNrZ3JvdW5kIHNhdmUgY291bGQgbm90IGJlIHN0YXJ0ZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvU2VsZWN0LmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgU2VsZWN0IGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgcHJpdmF0ZSBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuICAgIHByaXZhdGUgaW50IGluZGV4O1xuXG4gICAgcHVibGljIFNlbGVjdChSZWRpc0NvcmUgcmVkaXNDb3JlKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBDb21tYW5kVHlwZSBnZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuU0VMRUNUO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHNldENvbnRleHQoUmVzcFtdIGFycmF5KSB7XG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPCAyIHx8ICEoYXJyYXlbMV0gaW5zdGFuY2VvZiBCdWxrU3RyaW5nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgU0VMRUNUIGNvbW1hbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXggPSBJbnRlZ2VyLnBhcnNlSW50KCgoQnVsa1N0cmluZykgYXJyYXlbMV0pLmdldENvbnRlbnQoKS50b1V0ZjhTdHJpbmcoKSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVkaXNDb3JlLnNlbGVjdERCKGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwiT0tcIik7XG4gICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkVSUiBpbnZhbGlkIERCIGluZGV4XCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvU2F2ZS5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFNhdmUgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJIYW5kbGVyIHJkYkhhbmRsZXI7XG5cbiAgICBwdWJsaWMgU2F2ZShSZWRpc0NvcmUgcmVkaXNDb3JlKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgICAgICB0aGlzLnJkYkhhbmRsZXIgPSAoKFJlZGlzQ29yZUltcGwpIHJlZGlzQ29yZSkuZ2V0UkRCSGFuZGxlcigpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBDb21tYW5kVHlwZSBnZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuU0FWRTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzZXRDb250ZXh0KFJlc3BbXSBhcnJheSkge1xuICAgICAgICAvLyBTQVZFIOWRveS7pOS4jemcgOimgemineWkluWPguaVsCzmiYDku6Xov5nph4zkuI3pnIDopoHlgZrku7vkvZXkuotcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUmVzcCBoYW5kbGUoKSB7XG4gICAgICAgIGlmIChyZGJIYW5kbGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwiRVJSIFJEQiBwZXJzaXN0ZW5jZSBpcyBub3QgZW5hYmxlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZGJIYW5kbGVyLnNhdmUoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwiT0tcIik7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcIkVSUiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL1BpbmcuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29tbWFuZC5pbXBsO1xuXG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuQnVsa1N0cmluZztcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuU2ltcGxlU3RyaW5nO1xuXG5wdWJsaWMgY2xhc3MgUGluZyBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBDb21tYW5kVHlwZSBnZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUElORztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzZXRDb250ZXh0KFJlc3BbXSBhcnJheSkge1xuXG4gICAgfVxuXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUmVzcCBoYW5kbGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwiUE9OR1wiKTtcbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL2ltcGwvU2V0L1NtZW1lYmVycy5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBSZXNwIGhhbmRsZSgpIHtcbiAgICAgICAgUmVkaXNEYXRhIHJlZGlzRGF0YSA9IHJlZGlzQ29yZS5nZXQoa2V5KTtcbiAgICAgICAgaWYocmVkaXNEYXRhID09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJubyBzdWNoIHNldFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZihyZWRpc0RhdGEgaW5zdGFuY2VvZiBSZWRpc1NldCl7XG4gICAgICAgICAgICBSZWRpc1NldCByZWRpc1NldCA9IChSZWRpc1NldCkgcmVkaXNEYXRhO1xuICAgICAgICAgICAgQ29sbGVjdGlvbjxCeXRlc1dyYXBwZXI+IGtleXMgPSByZWRpc1NldC5rZXlzKCk7XG4gICAgICAgICAgICBSZXNwW10gYnVsa1N0cmluZ3MgPSBrZXlzLnN0cmVhbSgpXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoQnVsa1N0cmluZzo6bmV3KVxuICAgICAgICAgICAgICAgICAgICAudG9BcnJheShSZXNwW106Om5ldyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BBcnJheShidWxrU3RyaW5ncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJXUk9OR1RZUEUgT3BlcmF0aW9uIGFnYWluc3QgYSBrZXkgaG9sZGluZyB0aGUgd3Jvbmcga2luZCBvZiB2YWx1ZVwiKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9UeXBlLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICBSZWRpc0RhdGEgcmVkaXNEYXRhID0gcmVkaXNDb3JlLmdldChrZXkpO1xuICAgICAgICBpZiAocmVkaXNEYXRhID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwibm9uZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWRpc0RhdGEgaW5zdGFuY2VvZiBSZWRpc1N0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJzdHJpbmdcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocmVkaXNEYXRhIGluc3RhbmNlb2YgUmVkaXNMaXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVN0cmluZyhcImxpc3RcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocmVkaXNEYXRhIGluc3RhbmNlb2YgUmVkaXNTZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwic2V0XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZGlzRGF0YSBpbnN0YW5jZW9mIFJlZGlzWnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJ6c2V0XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZGlzRGF0YSBpbnN0YW5jZW9mIFJlZGlzSGFzaCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVTdHJpbmcoXCJoYXNoXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2ltcGxlU3RyaW5nKFwibm9uZVwiKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9IYXNoL0htZ2V0LmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICBSZWRpc0RhdGEgcmVkaXNEYXRhID0gcmVkaXNDb3JlLmdldChrZXkpO1xuICAgICAgICBmb3IoQnl0ZXNXcmFwcGVyIGZpZWxkOmZpZWxkcyl7XG4gICAgICAgICAgICBpZihyZWRpc0RhdGEgPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJXUk9OR1RZUEUgT3BlcmF0aW9uIGFnYWluc3QgYSBrZXkgaG9sZGluZyB0aGUgd3Jvbmcga2luZCBvZiB2YWx1ZVwiKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKHJlZGlzRGF0YSBpbnN0YW5jZW9mIFJlZGlzSGFzaCl7XG4gICAgICAgICAgICAgICAgUmVkaXNIYXNoIHJlZGlzSGFzaCA9IChSZWRpc0hhc2gpIHJlZGlzRGF0YTtcbiAgICAgICAgICAgICAgICBNYXA8Qnl0ZXNXcmFwcGVyLCBCeXRlc1dyYXBwZXI+IG1hcCA9IHJlZGlzSGFzaC5nZXRNYXAoKTtcbiAgICAgICAgICAgICAgICBSZXNwW10gYXJyYXkgPSBuZXcgUmVzcFtmaWVsZHMuc2l6ZSgpXTtcbiAgICAgICAgICAgICAgICBmb3IoaW50IGk9MDtpPGZpZWxkcy5zaXplKCk7aSsrKXtcbiAgICAgICAgICAgICAgICAgICAgaWYobWFwLmNvbnRhaW5zS2V5KGZpZWxkcy5nZXQoaSkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W2ldID0gbmV3IEJ1bGtTdHJpbmcobWFwLmdldChmaWVsZHMuZ2V0KGkpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbaV0gPSBuZXcgQnVsa1N0cmluZyhuZXcgQnl0ZXNXcmFwcGVyKChcIihuaWwpXCIpLmdldEJ5dGVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BBcnJheShhcnJheSk7XG5cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiV1JPTkdUWVBFIE9wZXJhdGlvbiBhZ2FpbnN0IGEga2V5IGhvbGRpbmcgdGhlIHdyb25nIGtpbmQgb2YgdmFsdWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL1N0cmluZy9HZXQuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBHZXQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBwcml2YXRlIEJ5dGVzV3JhcHBlciBrZXk7XG4gICAgcHJpdmF0ZSBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuXG4gICAgcHVibGljIEdldChSZWRpc0NvcmUgcmVkaXNDb3JlKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBDb21tYW5kVHlwZSBnZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuR0VUO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHNldENvbnRleHQoUmVzcFtdIGFycmF5KSB7XG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPCAyIHx8ICEoYXJyYXlbMV0gaW5zdGFuY2VvZiBCdWxrU3RyaW5nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgR0VUIGNvbW1hbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5rZXkgPSAoKEJ1bGtTdHJpbmcpIGFycmF5WzFdKS5nZXRDb250ZW50KCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICBSZWRpc1N0cmluZyB2YWx1ZSA9IChSZWRpc1N0cmluZykgcmVkaXNDb3JlLmdldChrZXkpO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIEJ1bGtTdHJpbmcuTnVsbEJ1bGtTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCdWxrU3RyaW5nKHZhbHVlLmdldFZhbHVlKCkpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29tbWFuZC9pbXBsL0xpc3QvTHJhbmdlLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFJlc3AgaGFuZGxlKCkge1xuICAgICAgICBSZWRpc0RhdGEgcmVkaXNEYXRhID0gcmVkaXNDb3JlLmdldChrZXkpO1xuICAgICAgICBpZiAocmVkaXNEYXRhID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnVsa1N0cmluZyhuZXcgQnl0ZXNXcmFwcGVyKFwiXCIuZ2V0Qnl0ZXMoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWRpc0RhdGEgaW5zdGFuY2VvZiBSZWRpc0xpc3QpIHtcbiAgICAgICAgICAgIFJlZGlzTGlzdCByZWRpc0xpc3QgPSAoUmVkaXNMaXN0KSByZWRpc0RhdGE7XG4gICAgICAgICAgICBMaXN0PEJ5dGVzV3JhcHBlcj4gbHJhbmdlID0gcmVkaXNMaXN0LmxyYW5nZShzdGFydCwgZW5kKTtcblxuICAgICAgICAgICAgLy8g55u05o6l5Yib5bu6UmVzcEFycmF577yM6YG/5YWN5Lit6Ze06ZuG5ZCIXG4gICAgICAgICAgICBSZXNwW10gcmVzcEFycmF5ID0gbmV3IFJlc3BbbHJhbmdlLnNpemUoKV07XG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxyYW5nZS5zaXplKCk7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3BBcnJheVtpXSA9IG5ldyBCdWxrU3RyaW5nKGxyYW5nZS5nZXQoaSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BBcnJheShyZXNwQXJyYXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiV1JPTkdUWVBFIE9wZXJhdGlvbiBhZ2FpbnN0IGEga2V5IGhvbGRpbmcgdGhlIHdyb25nIGtpbmQgb2YgdmFsdWVcIik7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb21tYW5kL0NvbW1hbmRUeXBlLmphdmFcbi4uLlxuXG5wdWJsaWMgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgUElORyhjb3JlIC0+IG5ldyBQaW5nKCkpLFxuICAgIElORk8oSW5mbzo6bmV3KSxcbiAgICBTRVQoU2V0OjpuZXcpLFxuICAgIERFTChEZWw6Om5ldyksXG4gICAgSU5DUihJbmNyOjpuZXcpLFxuICAgIE1TRVQoTXNldDo6bmV3KSxcbiAgICBFWElTVChFeGlzdDo6bmV3KSxcbiAgICBFWFBJUkUoRXhwaXJlOjpuZXcpLFxuICAgIFNBREQoU2FkZDo6bmV3KSxcbiAgICBUVEwoVHRsOjpuZXcpLFxuICAgIFNNRU1CRVJTKFNtZW1lYmVyczo6bmV3KSxcbiAgICBTSVNNRU1CRVIoU2lzbWVtYmVyOjpuZXcpLFxuICAgIFNDQVJEKFNjYXJkOjpuZXcpLFxuICAgIFNSRU0oU3JlbTo6bmV3KSxcbiAgICBTUE9QKFNwb3A6Om5ldyksXG4gICAgSFNFVChIc2V0OjpuZXcpLFxuICAgIEhHRVQoSGdldDo6bmV3KSxcbiAgICBITUVTVChIbWVzdDo6bmV3KSxcbiAgICBIR0VUQUxMKEhnZXRhbGw6Om5ldyksXG4gICAgSE1HRVQoSG1nZXQ6Om5ldyksXG4gICAgSERFTChIZGVsOjpuZXcpLFxuICAgIEhFWElTVFMoSGV4aXN0czo6bmV3KSxcbiAgICBITEVOKEhsZW46Om5ldyksXG4gICAgTFBVU0goTHB1c2g6Om5ldyksXG4gICAgUlBVU0goUnB1c2g6Om5ldyksXG4gICAgTFJBTkdFKExyYW5nZTo6bmV3KSxcbiAgICBMTEVOKExsZW46Om5ldyksXG4gICAgTFBPUChMcG9wOjpuZXcpLFxuICAgIFJQT1AoUnBvcDo6bmV3KSxcbiAgICBMUkVNKExyZW06Om5ldyksXG4gICAgWkFERChaYWRkOjpuZXcpLFxuICAgIFpSQU5HRShacmFuZ2U6Om5ldyksXG4gICAgWlJFVlJBTkdFKFpyZXZyYW5nZTo6bmV3KSxcbiAgICBaUkFOR0VCWVNDT1JFKFpyYW5nZWJ5c2NvcmU6Om5ldyksXG4gICAgWlJFTShacmVtOjpuZXcpLFxuICAgIFpDQVJEKFpjYXJkOjpuZXcpLFxuICAgIFpTQ09SRShac2NvcmU6Om5ldyksXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NvbW1hbmQvaW1wbC9TLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOWVlZjMxNjMtNjliOC00MGFmLWE0NDQtNGJkOGJhYzJmNjVkO3Rvb2x1X3ZydHhfMDE5S0hubnlQYmZOZWo0bnhrMlJ2Szd3Ijp7InJlcXVlc3RJZCI6IjllZWYzMTYzLTY5YjgtNDBhZi1hNDQ0LTRiZDhiYWMyZjY1ZCIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDE5S0hubnlQYmZOZWo0bnhrMlJ2Szd3IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvc2VydmVyL015UmVkaXNTZXJ2aWNlLmphdmFcbi4uLlxuaW1wb3J0IHNpdGUuaG5meTI1OC5jaGFubmVsLkRlZmF1bHRDaGFubmVsU2VsZWN0U3RyYXRlZ3k7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuTG9jYWxDaGFubmVsT3B0aW9uO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YuQU9GSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmRUeXBlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb3JlLlJEQkhhbmRsZXI7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEudXRpbC5NYXA7XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudEhhc2hNYXA7XG4uLi5cblxuICAgIHByaXZhdGUgZmluYWwgaW50IHBvcnQ7XG4gICAgcHJpdmF0ZSBmaW5hbCBSZWRpc0NvcmUgcmVkaXNDb3JlO1xuICAgIHByaXZhdGUgZmluYWwgTG9jYWxDaGFubmVsT3B0aW9uIGNoYW5uZWxPcHRpb247XG4gICAgcHJpdmF0ZSBmaW5hbCBFdmVudEV4ZWN1dG9yR3JvdXAgY29tbWFuZEV4ZWN1dG9yO1xuICAgIHByaXZhdGUgZmluYWwgQU9GSGFuZGxlciBhb2ZIYW5kbGVyO1xuICAgIHByaXZhdGUgZmluYWwgUkRCSGFuZGxlciByZGJIYW5kbGVyO1xuXG4gICAgcHJpdmF0ZSBDaGFubmVsIHNlcnZlckNoYW5uZWw7XG4gICAgcHJpdmF0ZSBFdmVudExvb3BHcm91cCBib3NzR3JvdXA7XG4gICAgcHJpdmF0ZSBFdmVudExvb3BHcm91cCB3b3JrZXJHcm91cDtcblxuICAgIC8vIOa3u+WKoOaWueazleeuoeeQhumbhue+pOi/nuaOpVxuICAgIHB1YmxpYyB2b2lkIGFkZENsdXN0ZXJDbGllbnQoU3RyaW5nIG5vZGVJZCwgQ2x1c3RlckNsaWVudCBjbGllbnQpIHtcbiAgICAgICAgY2x1c3RlckNsaWVudHMucHV0KG5vZGVJZCwgY2xpZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgQ2x1c3RlckNsaWVudCBnZXRDbHVzdGVyQ2xpZW50KFN0cmluZyBub2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIGNsdXN0ZXJDbGllbnRzLmdldChub2RlSWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldENsdXN0ZXIoUmVkaXNDbHVzdGVyIGNsdXN0ZXIpIHtcbiAgICAgICAgdGhpcy5jbHVzdGVyID0gY2x1c3RlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgUmVkaXNDbHVzdGVyIGdldENsdXN0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsdXN0ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0Q3VycmVudE5vZGUoQ2x1c3Rlck5vZGUgbm9kZSkge1xuICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gbm9kZTtcbiAgICB9XG4uLi5cblxuICAgICAgICAgICAgLy8g5Yib5bu657uf5LiA55qE5ZG95Luk5aSE55CG5ZmoXG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRIYW5kbGVyID0gbmV3IE15Q29tbWFuZEhhbmRsZXIocmVkaXNDb3JlLCBhb2ZIYW5kbGVyLCByZGJIYW5kbGVyKTtcblxuICAgICAgICAgICAgU2VydmVyQm9vdHN0cmFwIGJvb3RzdHJhcCA9IG5ldyBTZXJ2ZXJCb290c3RyYXAoKTtcbiAgICAgICAgICAgIGJvb3RzdHJhcC5ncm91cChib3NzR3JvdXAsIHdvcmtlckdyb3VwKVxuICAgICAgICAgICAgICAgICAgICAuY2hhbm5lbChjaGFubmVsT3B0aW9uLmdldENoYW5uZWxDbGFzcygpKS5cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRPcHRpb24oQ2hhbm5lbE9wdGlvbi5TT19LRUVQQUxJVkUsIHRydWUpLlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbihDaGFubmVsT3B0aW9uLlRDUF9OT0RFTEFZLCB0cnVlKS5cbiAgICAgICAgICAgICAgICAgICAgY2hpbGRPcHRpb24oQ2hhbm5lbE9wdGlvbi5BTExPQ0FUT1IsIFBvb2xlZEJ5dGVCdWZBbGxvY2F0b3IuREVGQVVMVClcbiAgICAgICAgICAgICAgICAgICAgLmNoaWxkSGFuZGxlcihuZXcgQ2hhbm5lbEluaXRpYWxpemVyPFNvY2tldENoYW5uZWw+KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBpbml0Q2hhbm5lbChTb2NrZXRDaGFubmVsIGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbm5lbFBpcGVsaW5lIHBpcGVsaW5lID0gY2gucGlwZWxpbmUoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlEZWNvZGVyKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlSZXNwb25zZUVuY29kZXIoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihFTkFCTEVfQ09NUFJFU1NJT04pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBDb21wcmVzc2lvbkNvZWRDKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KGNvbW1hbmRFeGVjdXRvciwgY29tbWFuZEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8g5pS55Li65byC5q2l57uR5a6aXG4gICAgICAgICAgICBib290c3RyYXAuYmluZChwb3J0KS5hZGRMaXN0ZW5lcigoQ2hhbm5lbEZ1dHVyZSBmdXR1cmUpIC0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZnV0dXJlLmlzU3VjY2VzcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyQ2hhbm5lbCA9IGZ1dHVyZS5jaGFubmVsKCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlZGlz5pyN5Yqh5bey5ZCv5Yqo77yM55uR5ZCs56uv5Y+jOiBcIiArIHBvcnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOWFs+mXreebkeWQrOWZqFxuICAgICAgICAgICAgICAgICAgICBmdXR1cmUuY2hhbm5lbCgpLmNsb3NlRnV0dXJlKCkuYWRkTGlzdGVuZXIoY2xvc2VGdXR1cmUgLT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZUZ1dHVyZS5pc1N1Y2Nlc3MoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuacjeWKoeWZqOW8guW4uOWFs+mXrVwiLCBjbG9zZUZ1dHVyZS5jYXVzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5ZCv5Yqo5pyN5Yqh5aSx6LSl77yM56uv5Y+jOiBcIiArIHBvcnQsIGZ1dHVyZS5jYXVzZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuacjeWKoeWZqOWQr+WKqOW8guW4uFwiLCBlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgY2xvc2UoKSB7XG4gICAgICAgIC8vIOWFiOWFs+mXree9kee7nOebuOWFs+i1hOa6kFxuICAgICAgICBpZiAoc2VydmVyQ2hhbm5lbCAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZXJ2ZXJDaGFubmVsLmNsb3NlKCkuYXdhaXRVbmludGVycnVwdGlibHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3b3JrZXJHcm91cCAhPSBudWxsKSB7XG4gICAgICAgICAgICB3b3JrZXJHcm91cC5zaHV0ZG93bkdyYWNlZnVsbHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChib3NzR3JvdXAgIT0gbnVsbCkge1xuICAgICAgICAgICAgYm9zc0dyb3VwLnNodXRkb3duR3JhY2VmdWxseSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g54S25ZCO5YWz6Zet5oyB5LmF5YyW55u45YWzXG4gICAgICAgIGlmIChFTkFCTEVfUkRCICYmIHJkYkhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmRiSGFuZGxlci5zYXZlKCkuZXhjZXB0aW9uYWxseShlIC0+IHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJSRELkv53lrZjlpLHotKVcIiwgZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJkYkhhbmRsZXIuc2h1dGRvd24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChFTkFCTEVfQU9GICYmIGFvZkhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgYW9mSGFuZGxlci5zdG9wKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29tbWFuZEV4ZWN1dG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbW1hbmRFeGVjdXRvci5zaHV0ZG93bkdyYWNlZnVsbHkoKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlEZWNvZGVyLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgTXlEZWNvZGVyIGV4dGVuZHMgQnl0ZVRvTWVzc2FnZURlY29kZXIge1xuICAgIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15RGVjb2Rlci5jbGFzcyk7XG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZGVjb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgaW4sIExpc3Q8T2JqZWN0PiBvdXQpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGluLnJlYWRhYmxlQnl0ZXMoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvL2xvZ2dlci5pbmZvKFwi5byA5aeL6Kej56CBXCIpO1xuICAgICAgICAgICAgICAgIC8vIOagh+iusOW9k+WJjeivu+WPluS9jee9rlxuICAgICAgICAgICAgICAgIGluLm1hcmtSZWFkZXJJbmRleCgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIFJlc3AgZGVjb2RlZCA9IFJlc3AuZGVjb2RlKGluKTtcbiAgICAgICAgICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuino+eggeaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LmFkZChkZWNvZGVkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLop6PnoIHlvILluLg6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpbi5yZXNldFJlYWRlckluZGV4KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5oC75L2T5byC5bi4OiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY2x1c3Rlci9DbHVzdGVyQ2xpZW50LmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNsdXN0ZXI7XG5cbmltcG9ydCBpby5uZXR0eS5ib290c3RyYXAuQm9vdHN0cmFwO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuKjtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLm5pby5OaW9FdmVudExvb3BHcm91cDtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLnNvY2tldC5Tb2NrZXRDaGFubmVsO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuc29ja2V0Lm5pby5OaW9Tb2NrZXRDaGFubmVsO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5jb2Rlci5NeURlY29kZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvZGVyLk15UmVzcG9uc2VFbmNvZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC5SZXNwO1xuXG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29tcGxldGFibGVGdXR1cmU7XG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGltZVVuaXQ7XG5cbnB1YmxpYyBjbGFzcyBDbHVzdGVyQ2xpZW50IHtcbiAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBob3N0O1xuICAgIHByaXZhdGUgZmluYWwgaW50IHBvcnQ7XG4gICAgcHJpdmF0ZSBDaGFubmVsIGNoYW5uZWw7XG4gICAgcHJpdmF0ZSBFdmVudExvb3BHcm91cCBncm91cDtcblxuICAgIHB1YmxpYyBDbHVzdGVyQ2xpZW50KFN0cmluZyBob3N0LCBpbnQgcG9ydCkge1xuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgICAgICB0aGlzLnBvcnQgPSBwb3J0O1xuICAgIH1cblxuICAgIHB1YmxpYyBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBjb25uZWN0KCkge1xuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBmdXR1cmUgPSBuZXcgQ29tcGxldGFibGVGdXR1cmU8PigpO1xuXG4gICAgICAgIGdyb3VwID0gbmV3IE5pb0V2ZW50TG9vcEdyb3VwKCk7XG4gICAgICAgIEJvb3RzdHJhcCBib290c3RyYXAgPSBuZXcgQm9vdHN0cmFwKCk7XG4gICAgICAgIGJvb3RzdHJhcC5ncm91cChncm91cClcbiAgICAgICAgICAgICAgICAuY2hhbm5lbChOaW9Tb2NrZXRDaGFubmVsLmNsYXNzKVxuICAgICAgICAgICAgICAgIC5vcHRpb24oQ2hhbm5lbE9wdGlvbi5DT05ORUNUX1RJTUVPVVRfTUlMTElTLCA1MDAwKVxuICAgICAgICAgICAgICAgIC5oYW5kbGVyKG5ldyBDaGFubmVsSW5pdGlhbGl6ZXI8U29ja2V0Q2hhbm5lbD4oKSB7XG4gICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZVxuICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCBpbml0Q2hhbm5lbChTb2NrZXRDaGFubmVsIGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDaGFubmVsUGlwZWxpbmUgcGlwZWxpbmUgPSBjaC5waXBlbGluZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlEZWNvZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuYWRkTGFzdChuZXcgTXlSZXNwb25zZUVuY29kZXIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZS5hZGRMYXN0KG5ldyBDbHVzdGVyQ2xpZW50SGFuZGxlcigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbm5lY3RXaXRoUmV0cnkoYm9vdHN0cmFwLCBob3N0LCBwb3J0LCBmdXR1cmUsIDMsIDEwMDApO1xuICAgICAgICByZXR1cm4gZnV0dXJlO1xuICAgIH1cblxuICAgIHByaXZhdGUgdm9pZCBjb25uZWN0V2l0aFJldHJ5KEJvb3RzdHJhcCBib290c3RyYXAsIFN0cmluZyBob3N0LCBpbnQgcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZTxWb2lkPiBmdXR1cmUsIGludCByZXRyaWVzLCBsb25nIGRlbGF5TXMpIHtcbiAgICAgICAgYm9vdHN0cmFwLmNvbm5lY3QoaG9zdCwgcG9ydCkuYWRkTGlzdGVuZXIoKENoYW5uZWxGdXR1cmVMaXN0ZW5lcikgZiAtPiB7XG4gICAgICAgICAgICBpZiAoZi5pc1N1Y2Nlc3MoKSkge1xuICAgICAgICAgICAgICAgIGNoYW5uZWwgPSBmLmNoYW5uZWwoKTtcbiAgICAgICAgICAgICAgICBmdXR1cmUuY29tcGxldGUobnVsbCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJldHJpZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGYoXCJDb25uZWN0aW9uIHRvICVzOiVkIGZhaWxlZCwgJWQgcmV0cmllcyBsZWZ0LiBSZXRyeWluZy4uLiVuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0LCBwb3J0LCByZXRyaWVzKTtcbiAgICAgICAgICAgICAgICBmLmNoYW5uZWwoKS5ldmVudExvb3AoKS5zY2hlZHVsZSgoKSAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0V2l0aFJldHJ5KGJvb3RzdHJhcCwgaG9zdCwgcG9ydCwgZnV0dXJlLCByZXRyaWVzIC0gMSwgZGVsYXlNcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheU1zLCBUaW1lVW5pdC5NSUxMSVNFQ09ORFMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmdXR1cmUuY29tcGxldGVFeGNlcHRpb25hbGx5KGYuY2F1c2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNlbmRNZXNzYWdlKFJlc3AgcmVzcCkge1xuICAgICAgICBpZiAoY2hhbm5lbCAhPSBudWxsICYmIGNoYW5uZWwuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgY2hhbm5lbC53cml0ZUFuZEZsdXNoKHJlc3ApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiQ2hhbm5lbCBpcyBub3QgYWN0aXZlLiBDYW5ub3Qgc2VuZCBtZXNzYWdlLlwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGlmIChjaGFubmVsICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3JvdXAgIT0gbnVsbCkge1xuICAgICAgICAgICAgZ3JvdXAuc2h1dGRvd25HcmFjZWZ1bGx5KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIGNoYW5uZWwgIT0gbnVsbCAmJiBjaGFubmVsLmlzQWN0aXZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgQ2x1c3RlckNsaWVudEhhbmRsZXIgZXh0ZW5kcyBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI8UmVzcD4ge1xuICAgICAgICBAT3ZlcnJpZGVcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJSZWNlaXZlZCBjbHVzdGVyIG1lc3NhZ2U6IFwiICsgbXNnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEBPdmVycmlkZVxuICAgICAgICBwdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgVGhyb3dhYmxlIGNhdXNlKSB7XG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFeGNlcHRpb24gaW4gQ2x1c3RlckNsaWVudEhhbmRsZXI6IFwiICsgY2F1c2UuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIGN0eC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jaGFubmVsL29wdGlvbnMvS3F1ZXVlQ2hhbm5lbE9wdGlvbi5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5jaGFubmVsLm9wdGlvbnM7XG5cbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkV2ZW50TG9vcEdyb3VwO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwua3F1ZXVlLktRdWV1ZUV2ZW50TG9vcEdyb3VwO1xuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwua3F1ZXVlLktRdWV1ZVNlcnZlclNvY2tldENoYW5uZWw7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNoYW5uZWwuTG9jYWxDaGFubmVsT3B0aW9uO1xuXG5wdWJsaWMgY2xhc3MgS3F1ZXVlQ2hhbm5lbE9wdGlvbiBpbXBsZW1lbnRzIExvY2FsQ2hhbm5lbE9wdGlvbiB7XG4gICAgcHJpdmF0ZSBmaW5hbCBLUXVldWVFdmVudExvb3BHcm91cCBzaW5nbGVFdmVudExvb3A7XG5cbiAgICBwdWJsaWMgS3F1ZXVlQ2hhbm5lbE9wdGlvbigpIHtcbiAgICAgICAgdGhpcy5zaW5nbGVFdmVudExvb3AgPSBuZXcgS1F1ZXVlRXZlbnRMb29wR3JvdXAoMSwgciAtPiB7XG4gICAgICAgICAgICBUaHJlYWQgdCA9IG5ldyBUaHJlYWQociwgXCJSZWRpcy1FdmVudExvb3BcIik7XG4gICAgICAgICAgICB0LnNldERhZW1vbihmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEV2ZW50TG9vcEdyb3VwIGJvc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbmdsZUV2ZW50TG9vcDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgc2VsZWN0b3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaW5nbGVFdmVudExvb3A7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENsYXNzIGdldENoYW5uZWxDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIEtRdWV1ZVNlcnZlclNvY2tldENoYW5uZWwuY2xhc3M7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmFcbnBhY2thZ2Ugc2l0ZS5obmZ5MjU4LmNvZGVyO1xuXG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlcjtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyQ29udGV4dDtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLlNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguUmVkaXNDb3JlO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YuQU9GSGFuZGxlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguY2x1c3Rlci5SZWRpc0NsdXN0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbmltcG9ydCBzaXRlLmhuZnkyNTguZGF0YXR5cGUuQnl0ZXNXcmFwcGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5wcm90b2NhbC4qO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuY29yZS5SREJIYW5kbGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5zZXJ2ZXIuTXlSZWRpc1NlcnZpY2U7XG5cbmltcG9ydCBqYXZhLnV0aWwuRW51bVNldDtcbmltcG9ydCBqYXZhLnV0aWwuU2V0O1xuXG5AQ2hhbm5lbEhhbmRsZXIuU2hhcmFibGVcbnB1YmxpYyBjbGFzcyBNeUNvbW1hbmRIYW5kbGVyIGV4dGVuZHMgU2ltcGxlQ2hhbm5lbEluYm91bmRIYW5kbGVyPFJlc3A+IHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihNeUNvbW1hbmRIYW5kbGVyLmNsYXNzKTtcbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJIYW5kbGVyIHJkYkhhbmRsZXI7XG5cbiAgICAvLyDkvb/nlKhFbnVtU2V05o+Q6auY5p+l5om+5pWI546HXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU2V0PENvbW1hbmRUeXBlPiBXUklURV9DT01NQU5EUyA9IEVudW1TZXQub2YoXG4gICAgICAgICAgICBDb21tYW5kVHlwZS5TRVQsIENvbW1hbmRUeXBlLkRFTCwgQ29tbWFuZFR5cGUuSU5DUiwgQ29tbWFuZFR5cGUuTVNFVCxcbiAgICAgICAgICAgIENvbW1hbmRUeXBlLkVYUElSRSwgQ29tbWFuZFR5cGUuU0FERCwgQ29tbWFuZFR5cGUuU1JFTSwgQ29tbWFuZFR5cGUuU1BPUCxcbiAgICAgICAgICAgIENvbW1hbmRUeXBlLkhTRVQsIENvbW1hbmRUeXBlLkhNRVNULCBDb21tYW5kVHlwZS5IREVMLFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuTFBVU0gsIENvbW1hbmRUeXBlLlJQVVNILCBDb21tYW5kVHlwZS5MUE9QLCBDb21tYW5kVHlwZS5SUE9QLCBDb21tYW5kVHlwZS5MUkVNLFxuICAgICAgICAgICAgQ29tbWFuZFR5cGUuWkFERCwgQ29tbWFuZFR5cGUuWlJFTSxDb21tYW5kVHlwZS5TRUxFQ1RcbiAgICApO1xuXG4gICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSwgQU9GSGFuZGxlciBhb2ZIYW5kbGVyLCBSREJIYW5kbGVyIHJkYkhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSByZWRpc0NvcmU7XG4gICAgICAgIHRoaXMuYW9mSGFuZGxlciA9IGFvZkhhbmRsZXI7XG4gICAgICAgIHRoaXMucmRiSGFuZGxlciA9IHJkYkhhbmRsZXI7XG5cblxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHByb3RlY3RlZCB2b2lkIGNoYW5uZWxSZWFkMChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBSZXNwIG1zZykge1xuICAgICAgICBpZiAobXNnIGluc3RhbmNlb2YgUmVzcEFycmF5KSB7XG4gICAgICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBtc2c7XG4gICAgICAgICAgICBSZXNwIHJlc3BvbnNlID0gcHJvY2Vzc0NvbW1hbmQoYXJyYXkpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gcmVxdWVzdCB0eXBlXCIpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBSZXNwIHByb2Nlc3NDb21tYW5kKFJlc3BBcnJheSBjb21tYW5kQXJyYXkpIHtcbiAgICAgICAgaWYgKGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBlbXB0eSBjb21tYW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFJlc3BbXSBhcnJheSA9IGNvbW1hbmRBcnJheS5nZXRBcnJheSgpO1xuICAgICAgICAgICAgU3RyaW5nIGNvbW1hbmROYW1lID0gKChCdWxrU3RyaW5nKSBhcnJheVswXSkuZ2V0Q29udGVudCgpLnRvVXRmOFN0cmluZygpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICBDb21tYW5kVHlwZSBjb21tYW5kVHlwZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kVHlwZSA9IENvbW1hbmRUeXBlLnZhbHVlT2YoY29tbWFuZE5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiB1bmtub3duIGNvbW1hbmQgJ1wiICsgY29tbWFuZE5hbWUgKyBcIidcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRIYW5kbGVJbkNsdXN0ZXIoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2x1c3RlckNvbW1hbmQoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICAgICAgICAgIGNvbW1hbmQuc2V0Q29udGV4dChhcnJheSk7XG5cbiAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcblxuICAgICAgICAgICAgaWYgKHJkYkhhbmRsZXIgIT0gbnVsbCAmJiBXUklURV9DT01NQU5EUy5jb250YWlucyhjb21tYW5kVHlwZSkgJiYgYXJyYXkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksICgoQnVsa1N0cmluZykgYXJyYXlbMV0pLmdldENvbnRlbnQoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWmguaenOWQr+eUqOS6hkFPRu+8jOiusOW9leWRveS7pFxuICAgICAgICAgICBpZiAoYW9mSGFuZGxlciAhPSBudWxsICYmIFdSSVRFX0NPTU1BTkRTLmNvbnRhaW5zKGNvbW1hbmRUeXBlKSl7XG4gICAgICAgICAgICAgICAgYW9mSGFuZGxlci5hcHBlbmQoY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgY29tbWFuZFwiLCBlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBib29sZWFuIHNob3VsZEhhbmRsZUluQ2x1c3RlcihDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAgICAgIHJldHVybiBjbHVzdGVyICE9IG51bGwgJiYgY2x1c3Rlci5pc1NoYXJkaW5nRW5hYmxlZCgpICYmXG4gICAgICAgICAgICAgICAgKGNvbW1hbmRUeXBlID09IENvbW1hbmRUeXBlLkdFVCB8fCBjb21tYW5kVHlwZSA9PSBDb21tYW5kVHlwZS5TRVQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgUmVzcCBoYW5kbGVDbHVzdGVyQ29tbWFuZChDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAgICAgIEJ5dGVzV3JhcHBlciBrZXkgPSAoKEJ1bGtTdHJpbmcpIGNvbW1hbmRBcnJheS5nZXRBcnJheSgpWzFdKS5nZXRDb250ZW50KCk7XG4gICAgICAgIFN0cmluZyB0YXJnZXROb2RlSWQgPSBjbHVzdGVyLmdldE5vZGVGb3JLZXkoa2V5KTtcbiAgICAgICAgU3RyaW5nIGN1cnJlbnROb2RlSWQgPSByZWRpc0NvcmUuZ2V0UmVkaXNTZXJ2aWNlKCkuZ2V0Q3VycmVudE5vZGUoKS5nZXRJZCgpO1xuXG4gICAgICAgIGlmIChjdXJyZW50Tm9kZUlkLmVxdWFscyh0YXJnZXROb2RlSWQpKSB7XG4gICAgICAgICAgICBDb21tYW5kIGNvbW1hbmQgPSBjb21tYW5kVHlwZS5nZXRTdXBwbGllcigpLmFwcGx5KHJlZGlzQ29yZSk7XG4gICAgICAgICAgICBjb21tYW5kLnNldENvbnRleHQoY29tbWFuZEFycmF5LmdldEFycmF5KCkpO1xuICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuXG4gICAgICAgICAgICAvLyDnoa7kv53mnKzlnLDmiafooYzml7bkuZ/op6blj5FSREJcbiAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICByZGJIYW5kbGVyLm5vdGlmeURhdGFDaGFuZ2VkKHJlZGlzQ29yZS5nZXRDdXJyZW50REIoKS5nZXRJZCgpLCBrZXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBmb3J3YXJkVG9UYXJnZXROb2RlKHRhcmdldE5vZGVJZCwgY29tbWFuZEFycmF5KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIFJlc3AgZm9yd2FyZFRvVGFyZ2V0Tm9kZShTdHJpbmcgdGFyZ2V0Tm9kZUlkLCBSZXNwQXJyYXkgY29tbWFuZEFycmF5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyDojrflj5bnm67moIfoioLngrnnmoTmnI3liqHlrp7kvotcbiAgICAgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIHRhcmdldFNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUodGFyZ2V0Tm9kZUlkKTtcblxuICAgICAgICAgICAgaWYgKHRhcmdldFNlcnZpY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIOi9rOWPkeWRveS7pOWIsOebruagh+iKgueCuVxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRTZXJ2aWNlLmV4ZWN1dGVDb21tYW5kKGNvbW1hbmRBcnJheSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHRhcmdldCBub2RlIG5vdCBhdmFpbGFibGU6IFwiICsgdGFyZ2V0Tm9kZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZvcndhcmRpbmcgY29tbWFuZCB0byBub2RlIFwiICsgdGFyZ2V0Tm9kZUlkLCBlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIGZvcndhcmRpbmcgZmFpbGVkOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXCIsIGNhdXNlKTtcbiAgICAgICAgY3R4LndyaXRlQW5kRmx1c2gobmV3IEVycm9ycyhcIkVSUiBcIiArIGNhdXNlLmdldE1lc3NhZ2UoKSkpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY2hhbm5lbC9vcHRpb25zL0Vwb2xsQ2hhbm5lbE9wdGlvbi5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIEVwb2xsQ2hhbm5lbE9wdGlvbiBpbXBsZW1lbnRzIExvY2FsQ2hhbm5lbE9wdGlvbiB7XG4gICAgcHJpdmF0ZSBmaW5hbCBFcG9sbEV2ZW50TG9vcEdyb3VwIHNpbmdsZUV2ZW50TG9vcDtcblxuICAgIHB1YmxpYyBFcG9sbENoYW5uZWxPcHRpb24oKSB7XG4gICAgICAgIHRoaXMuc2luZ2xlRXZlbnRMb29wID0gbmV3IEVwb2xsRXZlbnRMb29wR3JvdXAoMSwgciAtPiB7XG4gICAgICAgICAgICBUaHJlYWQgdCA9IG5ldyBUaHJlYWQociwgXCJSZWRpcy1FdmVudExvb3BcIik7XG4gICAgICAgICAgICB0LnNldERhZW1vbihmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEV2ZW50TG9vcEdyb3VwIGJvc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbmdsZUV2ZW50TG9vcDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgRXZlbnRMb29wR3JvdXAgc2VsZWN0b3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaW5nbGVFdmVudExvb3A7IC8vIOS9v+eUqOWQjOS4gOS4quS6i+S7tuW+queOr+e7hFxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBDbGFzcyBnZXRDaGFubmVsQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiBFcG9sbFNlcnZlclNvY2tldENoYW5uZWwuY2xhc3M7XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY2hhbm5lbC9vcHRpb25zL1NlbGVjdENoYW5uZWxPcHRpb24uamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBTZWxlY3RDaGFubmVsT3B0aW9uIGltcGxlbWVudHMgTG9jYWxDaGFubmVsT3B0aW9uIHtcbiAgICBwcml2YXRlIGZpbmFsIEV2ZW50TG9vcEdyb3VwIGJvc3NHcm91cDtcbiAgICBwcml2YXRlIGZpbmFsIEV2ZW50TG9vcEdyb3VwIHdvcmtlckdyb3VwO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBJT19USFJFQURTID0gTWF0aC5taW4oOCwgUnVudGltZS5nZXRSdW50aW1lKCkuYXZhaWxhYmxlUHJvY2Vzc29ycygpICogMik7XG5cbiAgICBwdWJsaWMgU2VsZWN0Q2hhbm5lbE9wdGlvbigpIHtcbiAgICAgICAgVGhyZWFkRmFjdG9yeSBib3NzRmFjdG9yeSA9IG5ldyBEZWZhdWx0VGhyZWFkRmFjdG9yeShcInJlZGlzLWJvc3NcIik7XG4gICAgICAgIFRocmVhZEZhY3Rvcnkgd29ya2VyRmFjdG9yeSA9IG5ldyBEZWZhdWx0VGhyZWFkRmFjdG9yeShcInJlZGlzLWlvXCIpO1xuICAgICAgICB0aGlzLmJvc3NHcm91cCA9IG5ldyBOaW9FdmVudExvb3BHcm91cCgxLCBib3NzRmFjdG9yeSk7XG4gICAgICAgIHRoaXMud29ya2VyR3JvdXAgPSBuZXcgTmlvRXZlbnRMb29wR3JvdXAoSU9fVEhSRUFEUywgd29ya2VyRmFjdG9yeSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEV2ZW50TG9vcEdyb3VwIGJvc3MoKSB7XG4gICAgICAgIHJldHVybiBib3NzR3JvdXA7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEV2ZW50TG9vcEdyb3VwIHNlbGVjdG9ycygpIHtcbiAgICAgICAgcmV0dXJuIHdvcmtlckdyb3VwO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBDbGFzczw/PiBnZXRDaGFubmVsQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiBOaW9TZXJ2ZXJTb2NrZXRDaGFubmVsLmNsYXNzO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY2hhbm5lbC9Mb2NhbENoYW5uZWxPcHRpb24uamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY2hhbm5lbDtcblxuaW1wb3J0IGlvLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDtcbmltcG9ydCBpby5uZXR0eS5jaGFubmVsLkV2ZW50TG9vcEdyb3VwO1xuXG5wdWJsaWMgaW50ZXJmYWNlIExvY2FsQ2hhbm5lbE9wdGlvbjwgQyBleHRlbmRzIENoYW5uZWw+ICB7XG4gICAgLyoqXG4gICAgICogQHJldHVybiDov5Tlm57ojrflj5Z0Y3Dnur/nqItcbiAgICAgKi9cbiAgICBFdmVudExvb3BHcm91cCBib3NzKCk7XG4gICAgLyoqXG4gICAgICogQHJldHVybiDov5Tlm57lpITnkIZ0Y3Dnur/nqItcbiAgICAgKi9cbiAgICBFdmVudExvb3BHcm91cCBzZWxlY3RvcnMoKTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIOi/lOWbnueuoemBk+exu+Wei1xuICAgICAqL1xuICAgIENsYXNzPD8gZXh0ZW5kcyBDPiBnZXRDaGFubmVsQ2xhc3MoKTtcbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2NsdXN0ZXIvQ2x1c3Rlck1hbmFnZXIuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBDbHVzdGVyTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBSZWRpc0NsdXN0ZXIgY2x1c3RlcjtcblxuICAgIHB1YmxpYyBDbHVzdGVyTWFuYWdlcigpIHtcbiAgICAgICAgdGhpcy5jbHVzdGVyID0gbmV3IFJlZGlzQ2x1c3RlcigpO1xuICAgICAgICBjbHVzdGVyLnNldFNoYXJkaW5nRW5hYmxlZCh0cnVlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBpbml0aWFsaXplQ2x1c3RlcigpIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24ge1xuXG4gICAgICAgIC8vIOWFiOa3u+WKoOaJgOacieiKgueCuVxuICAgICAgICBjbHVzdGVyLmFkZE5vZGUoXCJub2RlMVwiLCBcImxvY2FsaG9zdFwiLCA2Mzc5KTtcblxuICAgICAgICBjbHVzdGVyLmFkZE5vZGUoXCJub2RlMlwiLCBcImxvY2FsaG9zdFwiLCA2MzgwKTtcbiAgICAgICAgY2x1c3Rlci5hZGROb2RlKFwibm9kZTNcIiwgXCJsb2NhbGhvc3RcIiwgNjM4MSk7XG5cbiAgICAgICAgLy8g5YWI5ZCv5Yqo5omA5pyJ6IqC54K55pyN5YqhXG4gICAgICAgIGNsdXN0ZXIuc3RhcnQoKTtcblxuICAgICAgICAvLyDnrYnlvoXmiYDmnInoioLngrnlkK/liqjlrozmiJBcbiAgICAgICAgVGhyZWFkLnNsZWVwKDIwMDApOyAvLyDnrYnlvoUy56eS56Gu5L+d5pyN5Yqh5ZCv5YqoXG5cbiAgICAgICAgLy8g54S25ZCO5bu656uL6IqC54K56Ze06L+e5o6lXG4gICAgICAgIGNsdXN0ZXIuY29ubmVjdE5vZGVzKCk7XG5cbiAgICAgICAgLy8g5YaN562J5b6F6L+e5o6l5bu656uLXG4gICAgICAgIFRocmVhZC5zbGVlcCgxMDAwKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZW5kTWVzc2FnZUJldHdlZW5Ob2RlcyhTdHJpbmcgZnJvbU5vZGVJZCwgU3RyaW5nIHRvTm9kZUlkLCBSZXNwIG1lc3NhZ2UpIHtcbiAgICAgICAgTXlSZWRpc1NlcnZpY2UgZnJvbVNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUoZnJvbU5vZGVJZCk7XG4gICAgICAgIGlmIChmcm9tU2VydmljZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBmcm9tU2VydmljZS5zZW5kTWVzc2FnZVRvTm9kZSh0b05vZGVJZCwgbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L1JlZGlzQ2x1c3RlckxhdW5jaGVyLmphdmFcbi4uLlxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBzdGFydE5vZGUoUmVkaXNDbHVzdGVyIGNsdXN0ZXIsIFN0cmluZyBub2RlSWQsIGludCBwb3J0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTdGFydGluZyBub2RlIFwiICsgbm9kZUlkICsgXCIgb24gcG9ydCBcIiArIHBvcnQpO1xuICAgICAgICAgICAgY2x1c3Rlci5hZGROb2RlKG5vZGVJZCwgXCJsb2NhbGhvc3RcIiwgcG9ydCk7XG4gICAgICAgICAgICBNeVJlZGlzU2VydmljZSBzZXJ2aWNlID0gY2x1c3Rlci5nZXROb2RlKG5vZGVJZCk7XG4gICAgICAgICAgICBzZXJ2aWNlLnN0YXJ0KCk7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJOb2RlIFwiICsgbm9kZUlkICsgXCIgc3RhcnRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkZhaWxlZCB0byBzdGFydCBub2RlIFwiICsgbm9kZUlkICsgXCI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgTEFUQ0guY291bnREb3duKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGtlZXBSdW5uaW5nKCkge1xuICAgICAgICBSdW50aW1lLmdldFJ1bnRpbWUoKS5hZGRTaHV0ZG93bkhvb2sobmV3IFRocmVhZCgoKSAtPiB7XG4gICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTaHV0dGluZyBkb3duIFJlZGlzIGNsdXN0ZXIuLi5cIik7XG4gICAgICAgIH0pKTtcblxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBUaHJlYWQuc2xlZXAoMTAwMCk7XG4gICAgICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4uLi5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjU1Y2FjZTU5LTlhZTYtNGRmOS04OTAzLTY4YTUwODgxMGVjYTt0b29sdV92cnR4XzAxR21ONjZCeU1DaWdxdGI2MTRwWHdwaiI6eyJyZXF1ZXN0SWQiOiI1NWNhY2U1OS05YWU2LTRkZjktODkwMy02OGE1MDg4MTBlY2EiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxR21ONjZCeU1DaWdxdGI2MTRwWHdwaiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlDb21tYW5kSGFuZGxlci5qYXZhOlxuICAgICAxXHRwYWNrYWdlIHNpdGUuaG5meTI1OC5jb2RlcjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLkNoYW5uZWxIYW5kbGVyO1xuICAgICA0XHRpbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBpby5uZXR0eS5jaGFubmVsLlNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjtcbiAgICAgNlx0aW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuICAgICA3XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LlJlZGlzQ29yZTtcbiAgICAgOFx0aW1wb3J0IHNpdGUuaG5meTI1OC5hb2YuQU9GSGFuZGxlcjtcbiAgICAgOVx0aW1wb3J0IHNpdGUuaG5meTI1OC5jbHVzdGVyLlJlZGlzQ2x1c3RlcjtcbiAgICAxMFx0aW1wb3J0IHNpdGUuaG5meTI1OC5jb21tYW5kLkNvbW1hbmQ7XG4gICAgMTFcdGltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbiAgICAxMlx0aW1wb3J0IHNpdGUuaG5meTI1OC5kYXRhdHlwZS5CeXRlc1dyYXBwZXI7XG4gICAgMTNcdGltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuKjtcbiAgICAxNFx0aW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuY29yZS5SREJIYW5kbGVyO1xuICAgIDE1XHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5NeVJlZGlzU2VydmljZTtcbiAgICAxNlx0XG4gICAgMTdcdGltcG9ydCBqYXZhLnV0aWwuRW51bVNldDtcbiAgICAxOFx0aW1wb3J0IGphdmEudXRpbC5TZXQ7XG4gICAgMTlcdFxuICAgIDIwXHRAQ2hhbm5lbEhhbmRsZXIuU2hhcmFibGVcbiAgICAyMVx0cHVibGljIGNsYXNzIE15Q29tbWFuZEhhbmRsZXIgZXh0ZW5kcyBTaW1wbGVDaGFubmVsSW5ib3VuZEhhbmRsZXI8UmVzcD4ge1xuICAgIDIyXHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoTXlDb21tYW5kSGFuZGxlci5jbGFzcyk7XG4gICAgMjNcdCAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgMjRcdCAgICBwcml2YXRlIGZpbmFsIEFPRkhhbmRsZXIgYW9mSGFuZGxlcjtcbiAgICAyNVx0ICAgIHByaXZhdGUgZmluYWwgUkRCSGFuZGxlciByZGJIYW5kbGVyO1xuICAgIDI2XHRcbiAgICAyN1x0ICAgIC8vIOS9v+eUqEVudW1TZXTmj5Dpq5jmn6Xmib7mlYjnjodcbiAgICAyOFx0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFNldDxDb21tYW5kVHlwZT4gV1JJVEVfQ09NTUFORFMgPSBFbnVtU2V0Lm9mKFxuICAgIDI5XHQgICAgICAgICAgICBDb21tYW5kVHlwZS5TRVQsIENvbW1hbmRUeXBlLkRFTCwgQ29tbWFuZFR5cGUuSU5DUiwgQ29tbWFuZFR5cGUuTVNFVCxcbiAgICAzMFx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuRVhQSVJFLCBDb21tYW5kVHlwZS5TQURELCBDb21tYW5kVHlwZS5TUkVNLCBDb21tYW5kVHlwZS5TUE9QLFxuICAgIDMxXHQgICAgICAgICAgICBDb21tYW5kVHlwZS5IU0VULCBDb21tYW5kVHlwZS5ITUVTVCwgQ29tbWFuZFR5cGUuSERFTCxcbiAgICAzMlx0ICAgICAgICAgICAgQ29tbWFuZFR5cGUuTFBVU0gsIENvbW1hbmRUeXBlLlJQVVNILCBDb21tYW5kVHlwZS5MUE9QLCBDb21tYW5kVHlwZS5SUE9QLCBDb21tYW5kVHlwZS5MUkVNLFxuICAgIDMzXHQgICAgICAgICAgICBDb21tYW5kVHlwZS5aQURELCBDb21tYW5kVHlwZS5aUkVNLENvbW1hbmRUeXBlLlNFTEVDVFxuICAgIDM0XHQgICAgKTtcbiAgICAzNVx0XG4gICAgMzZcdCAgICBwdWJsaWMgTXlDb21tYW5kSGFuZGxlcihSZWRpc0NvcmUgcmVkaXNDb3JlLCBBT0ZIYW5kbGVyIGFvZkhhbmRsZXIsIFJEQkhhbmRsZXIgcmRiSGFuZGxlcikge1xuICAgIDM3XHQgICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgIDM4XHQgICAgICAgIHRoaXMuYW9mSGFuZGxlciA9IGFvZkhhbmRsZXI7XG4gICAgMzlcdCAgICAgICAgdGhpcy5yZGJIYW5kbGVyID0gcmRiSGFuZGxlcjtcbiAgICA0MFx0XG4gICAgNDFcdFxuICAgIDQyXHQgICAgfVxuICAgIDQzXHRcbiAgICA0NFx0ICAgIEBPdmVycmlkZVxuICAgIDQ1XHQgICAgcHJvdGVjdGVkIHZvaWQgY2hhbm5lbFJlYWQwKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFJlc3AgbXNnKSB7XG4gICAgNDZcdCAgICAgICAgaWYgKG1zZyBpbnN0YW5jZW9mIFJlc3BBcnJheSkge1xuICAgIDQ3XHQgICAgICAgICAgICBSZXNwQXJyYXkgYXJyYXkgPSAoUmVzcEFycmF5KSBtc2c7XG4gICAgNDhcdCAgICAgICAgICAgIFJlc3AgcmVzcG9uc2UgPSBwcm9jZXNzQ29tbWFuZChhcnJheSk7XG4gICAgNDlcdCAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChyZXNwb25zZSk7XG4gICAgNTFcdCAgICAgICAgICAgIH1cbiAgICA1Mlx0ICAgICAgICB9IGVsc2Uge1xuICAgIDUzXHQgICAgICAgICAgICBjdHgud3JpdGVBbmRGbHVzaChuZXcgRXJyb3JzKFwiRVJSIHVua25vd24gcmVxdWVzdCB0eXBlXCIpKTtcbiAgICA1NFx0ICAgICAgICB9XG4gICAgNTVcdCAgICB9XG4gICAgNTZcdFxuICAgIDU3XHQgICAgcHVibGljIFJlc3AgcHJvY2Vzc0NvbW1hbmQoUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgIDU4XHQgICAgICAgIGlmIChjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKS5sZW5ndGggPT0gMCkge1xuICAgIDU5XHQgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBlbXB0eSBjb21tYW5kXCIpO1xuICAgIDYwXHQgICAgICAgIH1cbiAgICA2MVx0XG4gICAgNjJcdCAgICAgICAgdHJ5IHtcbiAgICA2M1x0ICAgICAgICAgICAgUmVzcFtdIGFycmF5ID0gY29tbWFuZEFycmF5LmdldEFycmF5KCk7XG4gICAgNjRcdCAgICAgICAgICAgIFN0cmluZyBjb21tYW5kTmFtZSA9ICgoQnVsa1N0cmluZykgYXJyYXlbMF0pLmdldENvbnRlbnQoKS50b1V0ZjhTdHJpbmcoKS50b1VwcGVyQ2FzZSgpO1xuICAgIDY1XHQgICAgICAgICAgICBDb21tYW5kVHlwZSBjb21tYW5kVHlwZTtcbiAgICA2Nlx0XG4gICAgNjdcdCAgICAgICAgICAgIHRyeSB7XG4gICAgNjhcdCAgICAgICAgICAgICAgICBjb21tYW5kVHlwZSA9IENvbW1hbmRUeXBlLnZhbHVlT2YoY29tbWFuZE5hbWUpO1xuICAgIDY5XHQgICAgICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkge1xuICAgIDcwXHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgdW5rbm93biBjb21tYW5kICdcIiArIGNvbW1hbmROYW1lICsgXCInXCIpO1xuICAgIDcxXHQgICAgICAgICAgICB9XG4gICAgNzJcdFxuICAgIDczXHQgICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlSW5DbHVzdGVyKGNvbW1hbmRUeXBlLCBjb21tYW5kQXJyYXkpKSB7XG4gICAgNzRcdCAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2x1c3RlckNvbW1hbmQoY29tbWFuZFR5cGUsIGNvbW1hbmRBcnJheSk7XG4gICAgNzVcdCAgICAgICAgICAgIH1cbiAgICA3Nlx0XG4gICAgNzdcdCAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgICA3OFx0ICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGFycmF5KTtcbiAgICA3OVx0XG4gICAgODBcdCAgICAgICAgICAgIFJlc3AgcmVzdWx0ID0gY29tbWFuZC5oYW5kbGUoKTtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGFycmF5Lmxlbmd0aCA+IDEpIHtcbiAgICA4M1x0ICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksICgoQnVsa1N0cmluZykgYXJyYXlbMV0pLmdldENvbnRlbnQoKSk7XG4gICAgODRcdCAgICAgICAgICAgIH1cbiAgICA4NVx0XG4gICAgODZcdCAgICAgICAgICAgIC8vIOWmguaenOWQr+eUqOS6hkFPRu+8jOiusOW9leWRveS7pFxuICAgIDg3XHQgICAgICAgICAgIGlmIChhb2ZIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpKXtcbiAgICA4OFx0ICAgICAgICAgICAgICAgIGFvZkhhbmRsZXIuYXBwZW5kKGNvbW1hbmRBcnJheSk7XG4gICAgODlcdCAgICAgICAgICAgIH1cbiAgICA5MFx0XG4gICAgOTFcdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgOTJcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICA5M1x0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBjb21tYW5kXCIsIGUpO1xuICAgIDk0XHQgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9ycyhcIkVSUiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA5NVx0ICAgICAgICB9XG4gICAgOTZcdCAgICB9XG4gICAgOTdcdFxuICAgIDk4XHQgICAgcHJpdmF0ZSBib29sZWFuIHNob3VsZEhhbmRsZUluQ2x1c3RlcihDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgIDk5XHQgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgIDEwMFx0ICAgICAgICByZXR1cm4gY2x1c3RlciAhPSBudWxsICYmIGNsdXN0ZXIuaXNTaGFyZGluZ0VuYWJsZWQoKSAmJlxuICAgMTAxXHQgICAgICAgICAgICAgICAgKGNvbW1hbmRUeXBlID09IENvbW1hbmRUeXBlLkdFVCB8fCBjb21tYW5kVHlwZSA9PSBDb21tYW5kVHlwZS5TRVQpO1xuICAgMTAyXHQgICAgfVxuICAgMTAzXHRcbiAgIDEwNFx0ICAgIHByaXZhdGUgUmVzcCBoYW5kbGVDbHVzdGVyQ29tbWFuZChDb21tYW5kVHlwZSBjb21tYW5kVHlwZSwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgMTA1XHQgICAgICAgIFJlZGlzQ2x1c3RlciBjbHVzdGVyID0gcmVkaXNDb3JlLmdldFJlZGlzU2VydmljZSgpLmdldENsdXN0ZXIoKTtcbiAgIDEwNlx0ICAgICAgICBCeXRlc1dyYXBwZXIga2V5ID0gKChCdWxrU3RyaW5nKSBjb21tYW5kQXJyYXkuZ2V0QXJyYXkoKVsxXSkuZ2V0Q29udGVudCgpO1xuICAgMTA3XHQgICAgICAgIFN0cmluZyB0YXJnZXROb2RlSWQgPSBjbHVzdGVyLmdldE5vZGVGb3JLZXkoa2V5KTtcbiAgIDEwOFx0ICAgICAgICBTdHJpbmcgY3VycmVudE5vZGVJZCA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDdXJyZW50Tm9kZSgpLmdldElkKCk7XG4gICAxMDlcdFxuICAgMTEwXHQgICAgICAgIGlmIChjdXJyZW50Tm9kZUlkLmVxdWFscyh0YXJnZXROb2RlSWQpKSB7XG4gICAxMTFcdCAgICAgICAgICAgIENvbW1hbmQgY29tbWFuZCA9IGNvbW1hbmRUeXBlLmdldFN1cHBsaWVyKCkuYXBwbHkocmVkaXNDb3JlKTtcbiAgIDExMlx0ICAgICAgICAgICAgY29tbWFuZC5zZXRDb250ZXh0KGNvbW1hbmRBcnJheS5nZXRBcnJheSgpKTtcbiAgIDExM1x0ICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBjb21tYW5kLmhhbmRsZSgpO1xuICAgMTE0XHRcbiAgIDExNVx0ICAgICAgICAgICAgLy8g56Gu5L+d5pys5Zyw5omn6KGM5pe25Lmf6Kem5Y+RUkRCXG4gICAxMTZcdCAgICAgICAgICAgIGlmIChyZGJIYW5kbGVyICE9IG51bGwgJiYgV1JJVEVfQ09NTUFORFMuY29udGFpbnMoY29tbWFuZFR5cGUpICYmIGNvbW1hbmRBcnJheS5nZXRBcnJheSgpLmxlbmd0aCA+IDEpIHtcbiAgIDExN1x0ICAgICAgICAgICAgICAgIHJkYkhhbmRsZXIubm90aWZ5RGF0YUNoYW5nZWQocmVkaXNDb3JlLmdldEN1cnJlbnREQigpLmdldElkKCksIGtleSk7XG4gICAxMThcdCAgICAgICAgICAgIH1cbiAgIDExOVx0XG4gICAxMjBcdCAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAxMjFcdCAgICAgICAgfSBlbHNlIHtcbiAgIDEyMlx0ICAgICAgICAgICAgUmVzcCByZXN1bHQgPSBmb3J3YXJkVG9UYXJnZXROb2RlKHRhcmdldE5vZGVJZCwgY29tbWFuZEFycmF5KTtcbiAgIDEyM1x0ICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgIDEyNFx0ICAgICAgICB9XG4gICAxMjVcdCAgICB9XG4gICAxMjZcdFxuICAgMTI3XHQgICAgcHJpdmF0ZSBSZXNwIGZvcndhcmRUb1RhcmdldE5vZGUoU3RyaW5nIHRhcmdldE5vZGVJZCwgUmVzcEFycmF5IGNvbW1hbmRBcnJheSkge1xuICAgMTI4XHQgICAgICAgIHRyeSB7XG4gICAxMjlcdCAgICAgICAgICAgIC8vIOiOt+WPluebruagh+iKgueCueeahOacjeWKoeWunuS+i1xuICAgMTMwXHQgICAgICAgICAgICBSZWRpc0NsdXN0ZXIgY2x1c3RlciA9IHJlZGlzQ29yZS5nZXRSZWRpc1NlcnZpY2UoKS5nZXRDbHVzdGVyKCk7XG4gICAxMzFcdCAgICAgICAgICAgIE15UmVkaXNTZXJ2aWNlIHRhcmdldFNlcnZpY2UgPSBjbHVzdGVyLmdldE5vZGUodGFyZ2V0Tm9kZUlkKTtcbiAgIDEzMlx0XG4gICAxMzNcdCAgICAgICAgICAgIGlmICh0YXJnZXRTZXJ2aWNlICE9IG51bGwpIHtcbiAgIDEzNFx0ICAgICAgICAgICAgICAgIC8vIOi9rOWPkeWRveS7pOWIsOebruagh+iKgueCuVxuICAgMTM1XHQgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZEFycmF5KTtcbiAgIDEzNlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDEzN1x0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3JzKFwiRVJSIHRhcmdldCBub2RlIG5vdCBhdmFpbGFibGU6IFwiICsgdGFyZ2V0Tm9kZUlkKTtcbiAgIDEzOFx0ICAgICAgICAgICAgfVxuICAgMTM5XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxNDBcdCAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGZvcndhcmRpbmcgY29tbWFuZCB0byBub2RlIFwiICsgdGFyZ2V0Tm9kZUlkLCBlKTtcbiAgIDE0MVx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTQyXHQgICAgICAgIH1cbiAgIDE0M1x0ICAgIH1cbiAgIDE0NFx0XG4gICAxNDVcdCAgICBAT3ZlcnJpZGVcbiAgIDE0Nlx0ICAgIHB1YmxpYyB2b2lkIGV4Y2VwdGlvbkNhdWdodChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBUaHJvd2FibGUgY2F1c2UpIHtcbiAgIDE0N1x0ICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBpbiBjb21tYW5kIGhhbmRsZXJcIiwgY2F1c2UpO1xuICAgMTQ4XHQgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbiAgIDE0OVx0ICAgIH1cbiAgIDE1MFx0fVxuICAgMTUxXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDE1MVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMzRiMWFiNDYtZjRmNy00ZjA0LTllY2QtZDczOTliODIzMjFmO3Rvb2x1X3ZydHhfMDFMVXR0Z3RLNThzV1ZVa1hWYlQxNFBKIjp7InJlcXVlc3RJZCI6IjM0YjFhYjQ2LWY0ZjctNGYwNC05ZWNkLWQ3Mzk5YjgyMzIxZiIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFMVXR0Z3RLNThzV1ZVa1hWYlQxNFBKIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9jb2Rlci9NeUNvbW1hbmRIYW5kbGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDEzXHRpbXBvcnQgc2l0ZS5obmZ5MjU4LnByb3RvY2FsLio7XG4gICAgMTRcdGltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmNvcmUuUkRCSGFuZGxlcjtcbiAgICAxNVx0aW1wb3J0IHNpdGUuaG5meTI1OC5zZXJ2ZXIuTXlSZWRpc1NlcnZpY2U7XG4gICAgMTZcdFxuICAgIDE3XHRpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcbiAgICAxOFx0aW1wb3J0IGphdmEubmV0LlNvY2tldEV4Y2VwdGlvbjtcbiAgICAxOVx0aW1wb3J0IGphdmEudXRpbC5FbnVtU2V0O1xuICAgIDIwXHRpbXBvcnQgamF2YS51dGlsLlNldDtcbiAgICAyMVx0XG4gICAgMjJcdEBDaGFubmVsSGFuZGxlci5TaGFyYWJsZVxuICAgIDIzXHRwdWJsaWMgY2xhc3MgTXlDb21tYW5kSGFuZGxlciBleHRlbmRzIFNpbXBsZUNoYW5uZWxJbmJvdW5kSGFuZGxlcjxSZXNwPiB7XG4gICAgMjRcdCAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihNeUNvbW1hbmRIYW5kbGVyLmNsYXNzKTtcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMV06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDE0M1x0ICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcnMoXCJFUlIgZm9yd2FyZGluZyBmYWlsZWQ6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgMTQ0XHQgICAgICAgIH1cbiAgIDE0NVx0ICAgIH1cbiAgIDE0Nlx0XG4gICAxNDdcdCAgICBAT3ZlcnJpZGVcbiAgIDE0OFx0ICAgIHB1YmxpYyB2b2lkIGNoYW5uZWxJbmFjdGl2ZShDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4KSB7XG4gICAxNDlcdCAgICAgICAgLy8g5a6i5oi356uv5pat5byA6L+e5o6l5pe26LCD55SoXG4gICAxNTBcdCAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAxNTFcdCAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkNsaWVudCBkaXNjb25uZWN0ZWQ6IFwiICsgY3R4LmNoYW5uZWwoKS5yZW1vdGVBZGRyZXNzKCkpO1xuICAgMTUyXHQgICAgICAgIH1cbiAgIDE1M1x0ICAgICAgICAvLyDosIPnlKjniLbnsbvmlrnms5Xnoa7kv53kuovku7bkvKDmkq1cbiAgIDE1NFx0ICAgICAgICBjdHguZmlyZUNoYW5uZWxJbmFjdGl2ZSgpO1xuICAgMTU1XHQgICAgfVxuICAgMTU2XHRcbiAgIDE1N1x0ICAgIEBPdmVycmlkZVxuICAgMTU4XHQgICAgcHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIFRocm93YWJsZSBjYXVzZSkge1xuICAgMTU5XHQgICAgICAgIC8vIOajgOafpeaYr+WQpuaYr+WuouaIt+err+aWreW8gOi/nuaOpeWvvOiHtOeahOW8guW4uFxuICAgMTYwXHQgICAgICAgIGlmIChpc0NsaWVudERpc2Nvbm5lY3RFeGNlcHRpb24oY2F1c2UpKSB7XG4gICAxNjFcdCAgICAgICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkge1xuICAgMTYyXHQgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiQ2xpZW50IGNvbm5lY3Rpb24gY2xvc2VkOiBcIiArIGN0eC5jaGFubmVsKCkucmVtb3RlQWRkcmVzcygpLCBjYXVzZSk7XG4gICAxNjNcdCAgICAgICAgICAgIH1cbiAgIDE2NFx0ICAgICAgICB9IGVsc2Uge1xuICAgMTY1XHQgICAgICAgICAgICAvLyDlhbbku5bnsbvlnovnmoTlvILluLjku43nhLborrDlvZXkuLrplJnor69cbiAgIDE2Nlx0ICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgaW4gY29tbWFuZCBoYW5kbGVyXCIsIGNhdXNlKTtcbiAgIDE2N1x0ICAgICAgICAgICAgLy8g5Y+q5pyJ5Zyo6YCa6YGT5LuN54S25rS76LeD5pe25omN5bCd6K+V5YaZ5YWl5ZON5bqUXG4gICAxNjhcdCAgICAgICAgICAgIGlmIChjdHguY2hhbm5lbCgpLmlzQWN0aXZlKCkpIHtcbiAgIDE2OVx0ICAgICAgICAgICAgICAgIGN0eC53cml0ZUFuZEZsdXNoKG5ldyBFcnJvcnMoXCJFUlIgXCIgKyBjYXVzZS5nZXRNZXNzYWdlKCkpKTtcbiAgIDE3MFx0ICAgICAgICAgICAgfVxuICAgMTcxXHQgICAgICAgIH1cbiAgIDE3Mlx0ICAgICAgICAvLyDlpoLmnpzov57mjqXlt7Lnu4/kuI3lj6/nlKjvvIzlhbPpl63lroNcbiAgIDE3M1x0ICAgICAgICBpZiAoIWN0eC5jaGFubmVsKCkuaXNBY3RpdmUoKSkge1xuICAgMTc0XHQgICAgICAgICAgICBjdHguY2xvc2UoKTtcbiAgIDE3NVx0ICAgICAgICB9XG4gICAxNzZcdCAgICB9XG4gICAxNzdcdFxuICAgMTc4XHQgICAgLyoqXG4gICAxNzlcdCAgICAgKiDliKTmlq3lvILluLjmmK/lkKbmmK/nlLHlrqLmiLfnq6/mlq3lvIDov57mjqXlvJXotbfnmoRcbiAgIDE4MFx0ICAgICAqXG4gICAxODFcdCAgICAgKiBAcGFyYW0gY2F1c2Ug5byC5bi4XG4gICAxODJcdCAgICAgKiBAcmV0dXJuIOWmguaenOaYr+i/nuaOpeaWreW8gOW8guW4uOi/lOWbnnRydWVcbiAgIDE4M1x0ICAgICAqL1xuICAgMTg0XHQgICAgcHJpdmF0ZSBib29sZWFuIGlzQ2xpZW50RGlzY29ubmVjdEV4Y2VwdGlvbihUaHJvd2FibGUgY2F1c2UpIHtcbiAgIDE4NVx0ICAgICAgICBpZiAoY2F1c2UgaW5zdGFuY2VvZiBJT0V4Y2VwdGlvbikge1xuICAgMTg2XHQgICAgICAgICAgICBTdHJpbmcgbWVzc2FnZSA9IGNhdXNlLmdldE1lc3NhZ2UoKTtcbiAgIDE4N1x0ICAgICAgICAgICAgLy8g5qOA5p+l5ZCE56eN5Y+v6IO955qE6L+e5o6l5pat5byA5raI5oGvXG4gICAxODhcdCAgICAgICAgICAgIHJldHVybiBtZXNzYWdlICE9IG51bGwgJiYgKFxuICAgMTg5XHQgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250YWlucyhcIkNvbm5lY3Rpb24gcmVzZXQgYnkgcGVlclwiKSB8fFxuICAgMTkwXHQgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250YWlucyhcIui/nOeoi+S4u+acuuW8uui/q+WFs+mXreS6huS4gOS4queOsOacieeahOi/nuaOpVwiKSB8fFxuICAgMTkxXHQgICAgICAgICAgICAgICAgbWVzc2FnZS5jb250YWlucyhcIkJyb2tlbiBwaXBlXCIpIHx8XG4gICAxOTJcdCAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFwiQ29ubmVjdGlvbiByZWZ1c2VkXCIpIHx8XG4gICAxOTNcdCAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5zKFwiQ29ubmVjdGlvbiBjbG9zZWRcIikgfHxcbiAgIDE5NFx0ICAgICAgICAgICAgICAgIGNhdXNlIGluc3RhbmNlb2YgU29ja2V0RXhjZXB0aW9uXG4gICAxOTVcdCAgICAgICAgICAgICk7XG4gICAxOTZcdCAgICAgICAgfVxuICAgMTk3XHQgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDE5OFx0ICAgIH1cbiAgIDE5OVx0fVxuICAgMjAwXHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZDY2NzkzMTItNjQ2Ni00NDkxLWFjZjUtZThhMjFhZThkOGE0O3Rvb2x1X3ZydHhfMDFYQUdzRExVZWVCZWRRZ0Q0d3BXa3M4Ijp7InJlcXVlc3RJZCI6ImQ2Njc5MzEyLTY0NjYtNDQ5MS1hY2Y1LWU4YTIxYWU4ZDhhNCIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFYQUdzRExVZWVCZWRRZ0Q0d3BXa3M4IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL0xvZzRqLnByb3BlcnRpZXNcbiMjIyMjIyMjIyMjIyNcbiMgw4rDpMKzw7bCtcK9wr/DmMOWw4bDjMKoXG4jIyMjIyMjIyMjIyMjXG5cbiMgbG9nNGoucm9vdExvZ2dlcsOIw5XDlsK+w4rDpMKzw7bDgMOgwrHDsMK6w43CvMK2wrHDsMKjwrrDlsK7w4rDpMKzw7bCssK7wrXDjcOTw5rCuMODwrzCtsKxw7DCtcOEw4jDlcOWwr7DkMOFw4/CokRFQlVHIDwgSU5GTyA8IFdBUk4gPCBFUlJPUiA8IEZBVEFMXG4jIFdBUk7Co8K6w4jDlcOWwr7CvMK2wrHDsCAgICAgQ09OU09MRcKjwrrDisOkwrPDtsOOwrvDlsODw5fDlMK8wrrCtsKow5LDpcK1w4TDksK7wrjDtsODw7vDl8OWICAgICAgIGxvZ2ZpbGXCo8K6w4rDpMKzw7bDjsK7w5bDg8OXw5TCvMK6wrbCqMOSw6XCtcOEw5LCu8K4w7bDg8O7w5fDllxubG9nNGoucm9vdExvZ2dlcj1JTkZPLENPTlNPTEUsbG9nZmlsZVxuIyDDhcOkw5bDg0NPTlNPTEXDisOkwrPDtsK1wr3Cv8OYw5bDhsOMwqhcbmxvZzRqLmFwcGVuZGVyLkNPTlNPTEU9b3JnLmFwYWNoZS5sb2c0ai5Db25zb2xlQXBwZW5kZXIgXG4jIMOFw6TDlsODQ09OU09MRcOJw6jDlsODw47CqsOXw5TCtsKow5LDpcKywrzCvsOWw4TCo8OKwr1cbmxvZzRqLmFwcGVuZGVyLkNPTlNPTEUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dCBcbiMgw4XDpMOWw4NDT05TT0xFw4jDlcOWwr7CtcOEw4rDpMKzw7bCuMOxw4rCvSAgW2ZyYW1lXSAyMDE5LTA4LTIyIDIyOjUyOjEyLDAwMCAgJXLCusOEwrfDkcK6w4HDg8Orw4rDvSAlcMOIw5XDlsK+wrXDhMOTw4XDj8OIwrzCtiAldMOPw5/Cs8OMw4PDuyAlQ8OLw7nDisO0w4DDoMODw7vDjcKowrPCo8OOwqrDiMKrw4DDoMODw7sgJUzCtMO6w4LDq8OWw5DCtcOEw5DDkMK6w4UgJXjDj8OfwrPDjMOPw6DCucOYw4HCqsK1w4ROREMgJW3DiMOVw5bCviAlbsK7wrvDkMOQXG5sb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj1bZnJhbWVdICVke3l5eXktTU0tZGQgSEg6bW06c3MsU1NTfSAtICUtNHIgJS01cCBbJXRdICVDOiVMICV4IC0gJW0lblxuXG4jIyMjIyMjIyMjIyMjIyMjXG4jIMOKw6TCs8O2wrXCvcOIw5XDlsK+w47DhMK8w77DlsOQXG4jIyMjIyMjIyMjIyMjIyMjXG5cbiMgw4XDpMOWw4Nsb2dmaWxlw4rDpMKzw7bCtcK9w47DhMK8w77DlsOQIMOOw4TCvMO+wrTDs8OQwqHCtcK9wrTDr8OWwrjCtsKowrPDn8K0w6fCtcOEw4rCscK6w7LCssO6w4nDusOQw4LCtcOEw4jDlcOWwr7DjsOEwrzDvlxubG9nNGouYXBwZW5kZXIubG9nZmlsZT1vcmcuYXBhY2hlLmxvZzRqLlJvbGxpbmdGaWxlQXBwZW5kZXJcbiMgwrHCo8K0w6bCscOgw4LDq8K4w7HDisK9XG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLkVuY29kaW5nPVVURi04XG4jIMOKw6TCs8O2w47DhMK8w77DjsK7w5bDg8K0w4vDjsKqw4/DrsOEwr/CuMO5w4TCv8OCwrzDj8OCwrXDhGxvZ3PDjsOEwrzDvsK8w5DDlsOQXG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLkZpbGU9bG9ncy9yb290LmxvZ1xuIyDCusOzw5fCusK/w4nDksOUw4rDh0tCLE1CLEdCwrTDr8K1wr3CuMODwrTDs8OQwqHCusOzwrTCtMK9wqjDkMOCwrXDhMOIw5XDlsK+w47DhMK8w75cbmxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4RmlsZVNpemU9MTBNQlxuIyDDicOow5bDg8K5w7bCtsKow47DhMK8w77CtcOEw5fDrsK0w7PDlsK1MyDDlsK4wr/DicOSw5TCssO6w4nDunJvb3QubG9nLjHCocKicm9vdC5sb2cuMsKhwqJyb290LmxvZy4zwrrDjXJvb3QubG9nw4vDhMK4w7bDiMOVw5bCvsOOw4TCvMO+XG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLk1heEJhY2t1cEluZGV4PTMgIFxuIyDDhcOkw5bDg2xvZ2ZpbGXDjsKqw5fDlMK2wqjDksOlwrLCvMK+w5bDhMKjw4rCvVxubG9nNGouYXBwZW5kZXIubG9nZmlsZS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0XG5sb2c0ai5hcHBlbmRlci5sb2dmaWxlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIMK2w5TCssK7w43CrMK1w4TDgMOgw4rDpMKzw7bCssK7w43CrMK1w4TDiMOVw5bCvsOOw4TCvMO+XG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuXG4jIGNsdWIuYmFnZWRhdGXCsMO8w4/DgsK1w4TDiMOVw5bCvsK1wqXCtsOAw4rDpMKzw7ZcbmxvZzRqLmxvZ2dlci5jbHViLmJhZ2VkYXRlPURFQlVHLGJhZ2VkYXRlXG4jIMOJw6jDlsODw47CqmZhbHNlwrjDg8OIw5XDlsK+w5DDhcOPwqLCvsONwrLCu8K7w6HCvMOTw4jDq8K1wr1yb290TG9nZ2Vyw5bDkMOBw4tcbmxvZzRqLmFkZGl0aXZpdHkuY2x1Yi5iYWdlZGF0ZT1mYWxzZVxuIyDDj8OCw4PDpsK+w43CusONw4nDj8ODw6bDhcOkw5bDg8OSwrvDkcO5w4HDi1xubG9nNGouYXBwZW5kZXIuYmFnZWRhdGU9b3JnLmFwYWNoZS5sb2c0ai5Sb2xsaW5nRmlsZUFwcGVuZGVyXG5sb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5FbmNvZGluZz1VVEYtOFxubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuRmlsZT1sb2dzL2JhZ2VkYXRlLmxvZ1xubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuTWF4RmlsZVNpemU9MTBNQlxubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuTWF4QmFja3VwSW5kZXg9M1xubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dFxubG9nNGouYXBwZW5kZXIuYmFnZWRhdGUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPSVke3l5eXktTU0tZGQgSEg6bW06c3N9ICVGICVwICVtJW4uLi5cblBhdGg6IHBvbS54bWxcbjw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PlxuPHByb2plY3QgeG1sbnM9XCJodHRwOi8vbWF2ZW4uYXBhY2hlLm9yZy9QT00vNC4wLjBcIlxuICAgICAgICAgeG1sbnM6eHNpPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2VcIlxuICAgICAgICAgeHNpOnNjaGVtYUxvY2F0aW9uPVwiaHR0cDovL21hdmVuLmFwYWNoZS5vcmcvUE9NLzQuMC4wIGh0dHA6Ly9tYXZlbi5hcGFjaGUub3JnL3hzZC9tYXZlbi00LjAuMC54c2RcIj5cbiAgICA8bW9kZWxWZXJzaW9uPjQuMC4wPC9tb2RlbFZlcnNpb24+XG5cbiAgICA8Z3JvdXBJZD5zaXRlLmhuZnkyNTg8L2dyb3VwSWQ+XG4gICAgPGFydGlmYWN0SWQ+SHVhUmVkaXM8L2FydGlmYWN0SWQ+XG4gICAgPHZlcnNpb24+MS4wLVNOQVBTSE9UPC92ZXJzaW9uPlxuXG4gICAgPHByb3BlcnRpZXM+XG4gICAgICAgIDxtYXZlbi5jb21waWxlci5zb3VyY2U+ODwvbWF2ZW4uY29tcGlsZXIuc291cmNlPlxuICAgICAgICA8bWF2ZW4uY29tcGlsZXIudGFyZ2V0Pjg8L21hdmVuLmNvbXBpbGVyLnRhcmdldD5cbiAgICAgICAgPHByb2plY3QuYnVpbGQuc291cmNlRW5jb2Rpbmc+VVRGLTg8L3Byb2plY3QuYnVpbGQuc291cmNlRW5jb2Rpbmc+XG4gICAgPC9wcm9wZXJ0aWVzPlxuXG4gICAgPGRlcGVuZGVuY2llcz5cbiAgICAgICAgPGRlcGVuZGVuY3k+XG4gICAgICAgICAgICA8Z3JvdXBJZD5pby5uZXR0eTwvZ3JvdXBJZD5cbiAgICAgICAgICAgIDxhcnRpZmFjdElkPm5ldHR5LWFsbDwvYXJ0aWZhY3RJZD5cbiAgICAgICAgICAgIDx2ZXJzaW9uPjQuMS41MS5GaW5hbDwvdmVyc2lvbj5cbiAgICAgICAgPC9kZXBlbmRlbmN5PlxuXG4gICAgICAgIDxkZXBlbmRlbmN5PlxuICAgICAgICAgICAgPGdyb3VwSWQ+bG9nNGo8L2dyb3VwSWQ+XG4gICAgICAgICAgICA8YXJ0aWZhY3RJZD5sb2c0ajwvYXJ0aWZhY3RJZD5cbiAgICAgICAgICAgIDx2ZXJzaW9uPjEuMi4xNzwvdmVyc2lvbj5cbiAgICAgICAgPC9kZXBlbmRlbmN5PlxuXG4gICAgICAgIDxkZXBlbmRlbmN5PlxuICAgICAgICAgICAgPGdyb3VwSWQ+b3JnLmFwYWNoZS5jb21tb25zPC9ncm91cElkPlxuICAgICAgICAgICAgPGFydGlmYWN0SWQ+Y29tbW9ucy1wb29sMjwvYXJ0aWZhY3RJZD5cbiAgICAgICAgICAgIDx2ZXJzaW9uPjIuMTEuMTwvdmVyc2lvbj5cbiAgICAgICAgPC9kZXBlbmRlbmN5PlxuXG4gICAgICAgIDwhLS0gSk1IIENvcmUgLS0+XG4gICAgICAgIDxkZXBlbmRlbmN5PlxuICAgICAgICAgICAgPGdyb3VwSWQ+b3JnLm9wZW5qZGsuam1oPC9ncm91cElkPlxuICAgICAgICAgICAgPGFydGlmYWN0SWQ+am1oLWNvcmU8L2FydGlmYWN0SWQ+XG4gICAgICAgICAgICA8dmVyc2lvbj4xLjM1PC92ZXJzaW9uPlxuICAgICAgICA8L2RlcGVuZGVuY3k+XG5cbiAgICAgICAgPCEtLSBKTUggQW5ub3RhdGlvbiBQcm9jZXNzb3IgLS0+XG4gICAgICAgIDxkZXBlbmRlbmN5PlxuICAgICAgICAgICAgPGdyb3VwSWQ+b3JnLm9wZW5qZGsuam1oPC9ncm91cElkPlxuICAgICAgICAgICAgPGFydGlmYWN0SWQ+am1oLWdlbmVyYXRvci1hbm5wcm9jZXNzPC9hcnRpZmFjdElkPlxuICAgICAgICAgICAgPHZlcnNpb24+MS4zNTwvdmVyc2lvbj5cbiAgICAgICAgICAgIDxzY29wZT5wcm92aWRlZDwvc2NvcGU+XG4gICAgICAgIDwvZGVwZW5kZW5jeT5cblxuICAgICAgICA8ZGVwZW5kZW5jeT5cbiAgICAgICAgICAgIDxncm91cElkPm9yZy5sejQ8L2dyb3VwSWQ+XG4gICAgICAgICAgICA8YXJ0aWZhY3RJZD5sejQtamF2YTwvYXJ0aWZhY3RJZD5cbiAgICAgICAgICAgIDx2ZXJzaW9uPjEuOC4wPC92ZXJzaW9uPlxuICAgICAgICA8L2RlcGVuZGVuY3k+XG5cblxuICAgICAgICA8ZGVwZW5kZW5jeT5cbiAgICAgICAgICAgIDxncm91cElkPmlvLmdpdGh1Yi5rYXJsYXRlbXA8L2dyb3VwSWQ+XG4gICAgICAgICAgICA8YXJ0aWZhY3RJZD51bnNhZmUtYWNjZXNzb3I8L2FydGlmYWN0SWQ+XG4gICAgICAgICAgICA8dmVyc2lvbj4xLjcuMDwvdmVyc2lvbj5cbiAgICAgICAgPC9kZXBlbmRlbmN5PlxuXG4gICAgPC9kZXBlbmRlbmNpZXM+XG5cbjwvcHJvamVjdD4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L1JlZGlzU2VydmVyU3RhcnRlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1ODtcblxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5zZXJ2ZXIuTXlSZWRpc1NlcnZpY2U7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnNlcnZlci5SZWRpc1NlcnZpY2U7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG5wdWJsaWMgY2xhc3MgUmVkaXNTZXJ2ZXJTdGFydGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihSZWRpc1NlcnZlclN0YXJ0ZXIuY2xhc3MpO1xuICAgIHByaXZhdGUgc3RhdGljIFJlZGlzU2VydmljZSByZWRpc1NlcnZpY2U7XG5cbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICAvL+m7mOiupOerr+WPo1xuICAgICAgICBpbnQgcG9ydCA9IDYzNzk7XG5cbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwb3J0ID0gSW50ZWdlci5wYXJzZUludChhcmdzWzBdKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW52YWxpZCBwb3J0IG51bWJlciwgdXNpbmcgZGVmYXVsdDogXCIgKyBwb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWIm+W7uuW5tuWQr+WKqFJlZGlz5pyN5YqhXG4gICAgICAgIHJlZGlzU2VydmljZSA9IG5ldyBNeVJlZGlzU2VydmljZShwb3J0KTtcblxuICAgICAgICAvLyDmt7vliqDlhbPpl63pkqnlrZBcbiAgICAgICAgUnVudGltZS5nZXRSdW50aW1lKCkuYWRkU2h1dGRvd25Ib29rKG5ldyBUaHJlYWQoKCkgLT4ge1xuICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIuato+WcqOWFs+mXrVJlZGlz5pyN5Yqh5ZmoLi4uXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZWRpc1NlcnZpY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAvLyDnu5nkuIDkupvml7bpl7Torqnml6Xlv5flrozmiJDlhpnlhaVcbiAgICAgICAgICAgICAgICBUaHJlYWQuc2xlZXAoNTAwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5YWz6Zet5pyN5Yqh5pe25Y+R55Sf6ZSZ6K+vXCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9sb2dnZXIuaW5mbyhcIlJlZGlz5pyN5Yqh5Zmo5bey5YWz6ZetXCIpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmVkaXNTZXJ2aWNlLnN0YXJ0KCk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiAuZ2l0aWdub3JlXG50YXJnZXQvXG4hLm12bi93cmFwcGVyL21hdmVuLXdyYXBwZXIuamFyXG4hKiovc3JjL21haW4vKiovdGFyZ2V0L1xuISoqL3NyYy90ZXN0LyoqL3RhcmdldC9cblxuIyMjIEludGVsbGlKIElERUEgIyMjXG4uaWRlYS9tb2R1bGVzLnhtbFxuLmlkZWEvamFyUmVwb3NpdG9yaWVzLnhtbFxuLmlkZWEvY29tcGlsZXIueG1sXG4uaWRlYS9saWJyYXJpZXMvXG4qLml3c1xuKi5pbWxcbiouaXByXG5cbiMjIyBFY2xpcHNlICMjI1xuLmFwdF9nZW5lcmF0ZWRcbi5jbGFzc3BhdGhcbi5mYWN0b3J5cGF0aFxuLnByb2plY3Rcbi5zZXR0aW5nc1xuLnNwcmluZ0JlYW5zXG4uc3RzNC1jYWNoZVxuXG4jIyMgTmV0QmVhbnMgIyMjXG4vbmJwcm9qZWN0L3ByaXZhdGUvXG4vbmJidWlsZC9cbi9kaXN0L1xuL25iZGlzdC9cbi8ubmItZ3JhZGxlL1xuYnVpbGQvXG4hKiovc3JjL21haW4vKiovYnVpbGQvXG4hKiovc3JjL3Rlc3QvKiovYnVpbGQvXG5cbiMjIyBWUyBDb2RlICMjI1xuLnZzY29kZS9cblxuIyMjIE1hYyBPUyAjIyNcbi5EU19TdG9yZS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvcmRiL2NvcmUvUkRCSGFuZGxlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5yZGIuY29yZTtcblxuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLkJ5dGVzV3JhcHBlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLmV4ZWN1dG9yLkV4ZWN1dG9yTWFuYWdlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucmRiLnBvbGljeS5DaGFuZ2VUcmFja2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIucG9saWN5LlNhdmVQb2xpY3k7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50Lio7XG5cbnB1YmxpYyBjbGFzcyBSREJIYW5kbGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlciBsb2dnZXIgPSBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlci5nZXRMb2dnZXIoUkRCSGFuZGxlci5jbGFzcyk7XG5cbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBSREJTYXZlciBzYXZlcjtcbiAgICBwcml2YXRlIGZpbmFsIFJEQkxvYWRlciBsb2FkZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBTYXZlUG9saWN5IHNhdmVQb2xpY3k7XG4gICAgcHJpdmF0ZSBmaW5hbCBDaGFuZ2VUcmFja2VyIGNoYW5nZVRyYWNrZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBFeGVjdXRvck1hbmFnZXIgZXhlY3V0b3JNYW5hZ2VyO1xuICAgIHByaXZhdGUgZmluYWwgUkRCRmlsZU1hbmFnZXIgZmlsZU1hbmFnZXI7XG5cbiAgICBwcml2YXRlIHZvbGF0aWxlIGJvb2xlYW4gaXNTYXZpbmcgPSBmYWxzZTtcblxuICAgIHB1YmxpYyBSREJIYW5kbGVyKFJlZGlzQ29yZSByZWRpc0NvcmUpIHtcbiAgICAgICAgdGhpcy5yZWRpc0NvcmUgPSByZWRpc0NvcmU7XG4gICAgICAgIHRoaXMuZXhlY3V0b3JNYW5hZ2VyID0gbmV3IEV4ZWN1dG9yTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNhdmVyID0gbmV3IFJEQlNhdmVyKHJlZGlzQ29yZSwgZXhlY3V0b3JNYW5hZ2VyLmdldElvRXhlY3V0b3IoKSk7XG4gICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFJEQkxvYWRlcihyZWRpc0NvcmUpO1xuICAgICAgICB0aGlzLnNhdmVQb2xpY3kgPSBuZXcgU2F2ZVBvbGljeSgpO1xuICAgICAgICB0aGlzLmNoYW5nZVRyYWNrZXIgPSBuZXcgQ2hhbmdlVHJhY2tlcigpO1xuICAgICAgICB0aGlzLmZpbGVNYW5hZ2VyID0gbmV3IFJEQkZpbGVNYW5hZ2VyKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvYWQoKTtcbiAgICAgICAgICAgIHN0YXJ0QXV0b1NhdmUoKTtcbiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5Yid5aeL5YyWUkRC5aSE55CG5Zmo5aSx6LSlXCIsIGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2b2lkIHN0YXJ0QXV0b1NhdmUoKSB7XG4gICAgICAgIGV4ZWN1dG9yTWFuYWdlci5nZXRTY2hlZHVsZXIoKS5zY2hlZHVsZUF0Rml4ZWRSYXRlKCgpIC0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2hlY2tTYXZlQ29uZGl0aW9ucygpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCLoh6rliqjkv53lrZjmo4Dmn6XlpLHotKVcIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEsIDEsIFRpbWVVbml0LlNFQ09ORFMpO1xuICAgIH1cbi4uLlxuXG4gICAgcHVibGljIHZvaWQgbG9hZCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwi5byA5aeL5Yqg6L29UkRC5paH5Lu2XCIpO1xuICAgICAgICBsb2FkZXIuY2xlYXJBbGxEYXRhYmFzZXMoKTtcblxuICAgICAgICBpZiAoZmlsZU1hbmFnZXIuZnVsbFJkYkV4aXN0cygpKSB7XG4gICAgICAgICAgICBsb2FkZXIubG9hZFJEQihmaWxlTWFuYWdlci5nZXRGdWxsUmRiRmlsZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWxlTWFuYWdlci5pbmNyZW1lbnRhbFJkYkV4aXN0cygpKSB7XG4gICAgICAgICAgICBsb2FkZXIubG9hZFJEQihmaWxlTWFuYWdlci5nZXRJbmNyZW1lbnRhbFJkYkZpbGUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZXIuaW5mbyhcIlJEQuaWh+S7tuWKoOi9veaIkOWKn1wiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzaHV0ZG93bigpIHtcbiAgICAgICAgZXhlY3V0b3JNYW5hZ2VyLnNodXRkb3duKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGJvb2xlYW4gaXNTYXZpbmcoKSB7XG4gICAgICAgIHJldHVybiBpc1NhdmluZztcbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJGaWxlTWFuYWdlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5yZGIuY29yZTtcblxuaW1wb3J0IHNpdGUuaG5meTI1OC5yZGIuY29uc3RhbnRzLlJEQkNvbnN0YW50cztcblxuaW1wb3J0IGphdmEuaW8uRmlsZTtcblxucHVibGljIGNsYXNzIFJEQkZpbGVNYW5hZ2VyIGltcGxlbWVudHMgRmlsZU1hbmFnZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBGVUxMX1JEQl9GSUxFID0gUkRCQ29uc3RhbnRzLlJEQl9GSUxFX05BTUU7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIElOQ1JFTUVOVEFMX1JEQl9GSUxFID0gUkRCQ29uc3RhbnRzLlJEQl9GSUxFX05BTUUgKyBcIi5pbmNcIjtcblxuICAgIHB1YmxpYyBib29sZWFuIGZ1bGxSZGJFeGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmlsZShGVUxMX1JEQl9GSUxFKS5leGlzdHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYm9vbGVhbiBpbmNyZW1lbnRhbFJkYkV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWxlKElOQ1JFTUVOVEFMX1JEQl9GSUxFKS5leGlzdHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgRmlsZSBnZXRGdWxsUmRiRmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWxlKEZVTExfUkRCX0ZJTEUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBGaWxlIGdldEluY3JlbWVudGFsUmRiRmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWxlKElOQ1JFTUVOVEFMX1JEQl9GSUxFKTtcbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJMb2FkZXIuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBSREJMb2FkZXIgaW1wbGVtZW50cyBMb2FkZXIge1xuICAgIHByaXZhdGUgZmluYWwgUmVkaXNDb3JlIHJlZGlzQ29yZTtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlciBsb2dnZXIgPSBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlci5nZXRMb2dnZXIoUkRCTG9hZGVyLmNsYXNzKTtcblxuICAgIHB1YmxpYyBSREJMb2FkZXIoUmVkaXNDb3JlIHJlZGlzQ29yZSkge1xuICAgICAgICB0aGlzLnJlZGlzQ29yZSA9IHJlZGlzQ29yZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBsb2FkUkRCKEZpbGUgZmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgaWYgKCFmaWxlLmV4aXN0cygpKSB7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcIlJEQuaWh+S7tuS4jeWtmOWcqDogXCIgKyBmaWxlLmdldE5hbWUoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkgKERhdGFJbnB1dFN0cmVhbSBkaXMgPSBuZXcgRGF0YUlucHV0U3RyZWFtKG5ldyBGaWxlSW5wdXRTdHJlYW0oZmlsZSkpKSB7XG4gICAgICAgICAgICBpZiAoIVJEQlV0aWwudmFsaWRhdGVSREJIZWFkZXIoZGlzKSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwi5peg5pWI55qEUkRC5paH5Lu25qC85byPOiBcIiArIGZpbGUuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2FkRGF0YShkaXMpO1xuICAgICAgICB9IGNhdGNoIChFT0ZFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiUkRC5paH5Lu26K+75Y+W5pe26YGH5Yiw5oSP5aSW55qE5paH5Lu257uT5p2fXCIsIGUpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvbG9hZGVyL0FPRkxvYWRlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5hb2YubG9hZGVyO1xuXG5pbXBvcnQgaW8ubmV0dHkuYnVmZmVyLkJ5dGVCdWY7XG5pbXBvcnQgaW8ubmV0dHkuYnVmZmVyLlVucG9vbGVkO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmNvbW1hbmQuQ29tbWFuZDtcbmltcG9ydCBzaXRlLmhuZnkyNTguY29tbWFuZC5Db21tYW5kVHlwZTtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuQnVsa1N0cmluZztcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcEFycmF5O1xuXG5pbXBvcnQgamF2YS5pby5GaWxlO1xuaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247XG5pbXBvcnQgamF2YS5pby5SYW5kb21BY2Nlc3NGaWxlO1xuaW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7XG5pbXBvcnQgamF2YS5uaW8uY2hhbm5lbHMuRmlsZUNoYW5uZWw7XG5cbnB1YmxpYyBjbGFzcyBBT0ZMb2FkZXIgaW1wbGVtZW50cyBMb2FkZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKEFPRkxvYWRlci5jbGFzcyk7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBsb2FkKFN0cmluZyBmaWxlbmFtZSwgUmVkaXNDb3JlIHJlZGlzQ29yZSkgdGhyb3dzIElPRXhjZXB0aW9uIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCLlvIDlp4vliqDovb1BT0bmlofku7Y6IFwiICsgZmlsZW5hbWUpO1xuXG4gICAgICAgIEZpbGUgZmlsZSA9IG5ldyBGaWxlKGZpbGVuYW1lKTtcbiAgICAgICAgaWYgKCFmaWxlLmV4aXN0cygpIHx8IGZpbGUubGVuZ3RoKCkgPT0gMCkge1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bmlofku7bkuI3lrZjlnKjmiJbkuLrnqbrvvIzot7Pov4fliqDovb1cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkgKEZpbGVDaGFubmVsIGNoYW5uZWwgPSBuZXcgUmFuZG9tQWNjZXNzRmlsZShmaWxlbmFtZSwgXCJyXCIpLmdldENoYW5uZWwoKSkge1xuICAgICAgICAgICAgLy8gMS4g5Yib5bu657yT5Yay5Yy6XG4gICAgICAgICAgICBCeXRlQnVmZmVyIGJ1ZmZlciA9IEJ5dGVCdWZmZXIuYWxsb2NhdGUoODE5Mik7ICAvLyDkuIDnuqfnvJPlrZhcbiAgICAgICAgICAgIEJ5dGVCdWYgYnl0ZUJ1ZiA9IFVucG9vbGVkLmJ1ZmZlcigpOyAgLy8g5LqM57qn57yT5a2YXG5cbiAgICAgICAgICAgIExvYWRTdGF0cyBzdGF0cyA9IG5ldyBMb2FkU3RhdHMoKTtcbiAgICAgICAgICAgIGludCBjdXJyZW50RGJJbmRleCA9IDA7XG5cbiAgICAgICAgICAgIC8vIDIuIOivu+WPluaWh+S7tuWGheWuuVxuICAgICAgICAgICAgd2hpbGUgKGNoYW5uZWwucmVhZChidWZmZXIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyLmZsaXAoKTsgIC8vIOWIh+aNouS4uuivu+aooeW8j1xuICAgICAgICAgICAgICAgIGJ5dGVCdWYud3JpdGVCeXRlcyhidWZmZXIpOyAgLy8g5YaZ5YWl5Yiw5LqM57qn57yT5a2Y5LitXG4gICAgICAgICAgICAgICAgYnVmZmVyLmNsZWFyKCk7ICAvLyDmuIXnqbrkuIDnuqfnvJPlrZhcblxuICAgICAgICAgICAgICAgIC8vIDMuIOWkhOeQhuivu+WPluWIsOeahOWRveS7pFxuICAgICAgICAgICAgICAgIGN1cnJlbnREYkluZGV4ID0gcHJvY2Vzc0NvbW1hbmRzKHJlZGlzQ29yZSwgYnl0ZUJ1Ziwgc3RhdHMsIGN1cnJlbnREYkluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJBT0bliqDovb3lrozmiJA6IOaIkOWKn+WKoOi9vSBcIiArIHN0YXRzLmNvbW1hbmRzTG9hZGVkICsgXCIg5p2h5ZG95LukLCDlpLHotKUgXCIgKyBzdGF0cy5jb21tYW5kc0ZhaWxlZCArIFwiIOadoVwiKTtcbiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi6K+75Y+WQU9G5paH5Lu25pe25Ye66ZSZXCIsIGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuXG4gICAgcHJpdmF0ZSB2b2lkIGxvZ1Byb2dyZXNzKGludCBjb21tYW5kc0xvYWRlZCkge1xuICAgICAgICAvLyDmr4/lpITnkIYxMDAwMOadoeWRveS7pOiusOW9leS4gOasoeaXpeW/l1xuICAgICAgICBpZiAoY29tbWFuZHNMb2FkZWQgJSAxMDAwMCA9PSAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcIuW3suWKoOi9vSBcIiArIGNvbW1hbmRzTG9hZGVkICsgXCIg5p2h5ZG95LukXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBSZWFkTWUuTURcbiMgSmF2YSDlrp7njrDnmoTnroDmmJMgUmVkaXMg5pWw5o2u5bqTXG5cbiMjIOmhueebruamgui/sFxu6L+Z5piv5LiA5Liq5Z+65LqOIEphdmEg5ZKMIE5ldHR5IOWunueOsOeahOi9u+mHj+e6pyBSZWRpcyDmnI3liqHlmajvvIzmj5DkvpvkuoYgUmVkaXMg5qC45b+D5pWw5o2u57uT5p6E5ZKM5ZG95Luk55qE5a6e546w77yM5bm25pSv5oyBIEFPRu+8jFJEQueahOeLrOeri+aMgeS5heWMlu+8iOaaguS4jeaUr+aMgea3t+WQiOaooeW8j++8ieOAguaAp+iDveWPr+i+vuWOn+eJiCBSZWRpcyDnmoTnuqYgODAlLTkwJeOAglxuXG4jIyDlt7Llrp7njrDlip/og71cblxuIyMjIOaguOW/g+WKn+iDvVxuLSBbeF0gKipSZWRpcyDljY/orq7lrp7njrAqKiAtIOWujOaVtOaUr+aMgSBSRVNQIChSZWRpcyBTZXJpYWxpemF0aW9uIFByb3RvY29sKVxuLSBbeF0gKirln7rkuo4gTmV0dHkg55qE6auY5oCn6IO9572R57uc5pyN5YqhKiogLSDliKnnlKggTmV0dHkg55qE5LqL5Lu26amx5Yqo5qih5Z6L5o+Q5L6b6auY5bm25Y+R5pSv5oyBXG4tIFt4XSAqKuaVsOaNrue7k+aehOWxguWunueOsCoqIC0g6auY5pWI5YaF5a2Y5pWw5o2u57uT5p6E55qEIEphdmEg5a6e546wXG5cbiMjIyDmjIHkuYXljJblip/og71cbiMg5oyB5LmF5YyW5Yqf6IO9XG5cbiMjIFJEQiDmjIHkuYXljJZcbi0gKirlhajph4/lv6vnhacqKlxuICAtIOaUr+aMgeWQjuWPsOmdnumYu+WhnuW8j+S/neWtmChiZ3NhdmUpXG4gIC0g6YeH55So5LqM6L+b5Yi257Sn5YeR5qC85byP5a2Y5YKoXG4gIC0g6Ieq5Yqo6Kem5Y+R5p2h5Lu277yaXG4gICAgLSA5MDDnp5LlhoXoh7PlsJEx5qyh5L+u5pS5XG4gICAgLSAzMDDnp5LlhoXoh7PlsJExMOasoeS/ruaUuVxuICAgIC0gNjDnp5LlhoXoh7PlsJExMDAwMOasoeS/ruaUuVxuICAgIC0g5q+P5bCP5pe25by65Yi25YWo6YeP5aSH5Lu9XG5cbi0gKirlop7ph4/lv6vnhacqKlxuICAtIOS7heiusOW9leiiq+S/ruaUueeahOmUruWAvOWvuVxuICAtIOW9k+S/ruaUuemHjz4xMDDml7boh6rliqjop6blj5FcbiAgLSDph4fnlKjlhpnml7blpI3liLbmioDmnK/kvJjljJblhoXlrZjkvb/nlKhcblxuLSAqKumrmOe6p+eJueaApyoqXG4gIC0g5aSa5pWw5o2u5bqT5pSv5oyBXG4gIC0g5Y6f5a2Q5paH5Lu25pu/5o2i5L+d6K+B5pWw5o2u5a6J5YWoXG4gIC0g5ZCv5Yqo5pe26Ieq5Yqo5Yqg6L29UkRC5paH5Lu2XG5cbiMjIEFPRiDmjIHkuYXljJZcbi0gKirlkIzmraXnrZbnlaUqKlxuICAtIGBBTFdBWVNgOiDmr4/mrKHlhpnlhaXpg73lkIzmraXliLDno4Hnm5hcbiAgLSBgRVZFUllTRUNgOiDmr4/np5LlkIzmraXkuIDmrKHvvIjpu5jorqTvvIlcbiAgLSBgTk9gOiDnlLHmk43kvZzns7vnu5/lhrPlrprlkIzmraXml7bmnLpcblxuLSAqKuaguOW/g+S8mOWMlioqXG4gIC0g5Y+M57yT5Yay5byC5q2l5YaZ5YWlXG4gIC0g5ZG95Luk5pel5b+X6YeH55SoUkVTUOWNj+iuruagvOW8j1xuICAtIOWQr+WKqOaXtuiHquWKqOS7jkFPRuaWh+S7tuaBouWkjeaVsOaNrlxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9hb2YvQU9GSGFuZGxlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5hb2Y7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbmltcG9ydCBpby5uZXR0eS5idWZmZXIuVW5wb29sZWQ7XG5pbXBvcnQgaW8ubmV0dHkudXRpbC5jb25jdXJyZW50LkNvbXBsZXRlRnV0dXJlO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTG9nZ2VyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5sb2FkZXIuQU9GTG9hZGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YubG9hZGVyLkxvYWRlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnByb2Nlc3Nvci5BT0ZQcm9jZXNzb3I7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi5wcm9jZXNzb3IuUHJvY2Vzc29yO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2YucmV3cml0ZXIuQU9GUmV3cml0ZXI7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmFvZi53cml0ZXIuQU9GV3JpdGVyO1xuaW1wb3J0IHNpdGUuaG5meTI1OC5hb2Yud3JpdGVyLldyaXRlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcbi4uLlxuXG4gICAgLyoqXG4gICAgICog5p6E6YCgQU9G5aSE55CG5ZmoXG4gICAgICogQHBhcmFtIGZpbGVuYW1lIEFPRuaWh+S7tuWQjVxuICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24g5aaC5p6c5Yib5bu65paH5Lu25aSx6LSlXG4gICAgICovXG4gICAgcHVibGljIEFPRkhhbmRsZXIoU3RyaW5nIGZpbGVuYW1lLCBSZWRpc0NvcmUgcmVkaXNDb3JlKSB0aHJvd3MgSU9FeGNlcHRpb24ge1xuICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIC8vIDEuIOiuvue9rum7mOiupOWQjOatpeetlueVpeS4uuavj+enkuWQjOatpVxuICAgICAgICB0aGlzLnN5bmNTdHJhdGVneSA9IEFPRlN5bmNTdHJhdGVneS5FVkVSWVNFQztcbiAgICAgICAgLy8gMi4g5Yib5bu6QU9G5YaZ5YWl5ZmoXG4gICAgICAgIHRoaXMud3JpdGVyID0gbmV3IEFPRldyaXRlcihmaWxlbmFtZSwgc3luY1N0cmF0ZWd5KTtcbiAgICAgICAgLy8gMy4g5Yib5bu6QU9G5aSE55CG5Zmo77yM6K6+572u57yT5Yay5Yy65aSn5bCP5Li6Mk1CXG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gbmV3IEFPRlByb2Nlc3Nvcih3cml0ZXIsIDIgKiAxMDI0ICogMTAyNCk7XG4gICAgICAgIC8vIDQuIOWIm+W7ukFPRuWKoOi9veWZqFxuICAgICAgICB0aGlzLmxvYWRlciA9IG5ldyBBT0ZMb2FkZXIoKTtcbiAgICAgICAgLy8gNS4g5Yib5bu6QU9G5ZCO5Y+w5pyN5YqhXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNlcnZpY2UgPSBuZXcgQU9GQmFja2dyb3VuZFNlcnZpY2UocHJvY2Vzc29yLCBzeW5jU3RyYXRlZ3kpO1xuXG4gICAgICAgIHRoaXMucmV3cml0ZXIgPSBuZXcgQU9GUmV3cml0ZXIocmVkaXNDb3JlLCBmaWxlbmFtZSwyKjEwMjQqMTAyNCk7XG4gICAgICAgIHRoaXMucmV3cml0aW5nID0gbmV3IEF0b21pY0Jvb2xlYW4oZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWQr+WKqEFPRuWkhOeQhuWZqFxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KCkge1xuICAgICAgICAvLyDlkK/liqjlkI7lj7DmnI3liqFcbiAgICAgICAgYmFja2dyb3VuZFNlcnZpY2Uuc3RhcnQoKTtcbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3NlcnZlci9NeVJlZGlzU2VydmljZS5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIE15UmVkaXNTZXJ2aWNlIGltcGxlbWVudHMgUmVkaXNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyLmdldExvZ2dlcihNeVJlZGlzU2VydmljZS5jbGFzcyk7XG5cbiAgICAvLyDpgJrov4fkv67mlLnov5nkupvmoIflv5fmnaXlvIDlkK/miJblhbPpl61BT0blkoxSRELlip/og71cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29sZWFuIEVOQUJMRV9BT0YgPSB0cnVlO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGJvb2xlYW4gRU5BQkxFX1JEQiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBFTkFCTEVfQ09NUFJFU1NJT04gPSBmYWxzZTtcblxuICAgIC8vIOm7mOiupOaVsOaNruW6k+aVsOmHj++8jOS4jlJlZGlz6buY6K6k5YC85L+d5oyB5LiA6Ie0XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IERFRkFVTFRfREJfTlVNID0gMTY7XG5cbiAgICBwcml2YXRlIFJlZGlzQ2x1c3RlciBjbHVzdGVyO1xuICAgIHByaXZhdGUgQ2x1c3Rlck5vZGUgY3VycmVudE5vZGU7XG4gICAgcHJpdmF0ZSBNYXA8U3RyaW5nLCBDbHVzdGVyQ2xpZW50PiBjbHVzdGVyQ2xpZW50cyA9IG5ldyBDb25jdXJyZW50SGFzaE1hcDw+KCk7XG4gICAgcHVibGljIE15Q29tbWFuZEhhbmRsZXIgY29tbWFuZEhhbmRsZXI7XG4uLi5cblxuICAgICAgICAgICAgLy8g5pS55Li65byC5q2l57uR5a6aXG4gICAgICAgICAgICBib290c3RyYXAuYmluZChwb3J0KS5hZGRMaXN0ZW5lcigoQ2hhbm5lbEZ1dHVyZSBmdXR1cmUpIC0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZnV0dXJlLmlzU3VjY2VzcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyQ2hhbm5lbCA9IGZ1dHVyZS5jaGFubmVsKCk7XG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIlJlZGlz5pyN5Yqh5bey5ZCv5Yqo77yM55uR5ZCs56uv5Y+jOiBcIiArIHBvcnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOWFs+mXreebkeWQrOWZqFxuICAgICAgICAgICAgICAgICAgICBmdXR1cmUuY2hhbm5lbCgpLmNsb3NlRnV0dXJlKCkuYWRkTGlzdGVuZXIoY2xvc2VGdXR1cmUgLT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZUZ1dHVyZS5pc1N1Y2Nlc3MoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuacjeWKoeWZqOW8guW4uOWFs+mXrVwiLCBjbG9zZUZ1dHVyZS5jYXVzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwi5ZCv5Yqo5pyN5Yqh5aSx6LSl77yM56uv5Y+jOiBcIiArIHBvcnQsIGZ1dHVyZS5jYXVzZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIuacjeWKoeWZqOWQr+WKqOW8guW4uFwiLCBlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvY29yZS9SREJTYXZlci5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5yZGIuY29yZTtcblxuaW1wb3J0IHNpdGUuaG5meTI1OC5SZWRpc0NvcmU7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LmRhdGF0eXBlLio7XG5pbXBvcnQgc2l0ZS5obmZ5MjU4LnJkYi5jb25zdGFudHMuUkRCQ29uc3RhbnRzO1xuaW1wb3J0IHNpdGUuaG5meTI1OC51dGlscy5Ta2lwTGlzdDtcblxuaW1wb3J0IGphdmEuaW8uKjtcbmltcG9ydCBqYXZhLnV0aWwuKjtcbmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC4qO1xuXG5wdWJsaWMgY2xhc3MgUkRCU2F2ZXIgaW1wbGVtZW50cyBTYXZlcntcbiAgICBwcml2YXRlIGZpbmFsIFJlZGlzQ29yZSByZWRpc0NvcmU7XG4gICAgcHJpdmF0ZSBmaW5hbCBFeGVjdXRvclNlcnZpY2UgaW9FeGVjdXRvcjtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlciBsb2dnZXIgPSBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlci5nZXRMb2dnZXIoUkRCU2F2ZXIuY2xhc3MpO1xuXG4gICAgcHVibGljIFJEQlNhdmVyKFJlZGlzQ29yZSByZWRpc0NvcmUsIEV4ZWN1dG9yU2VydmljZSBpb0V4ZWN1dG9yKSB7XG4gICAgICAgIHRoaXMucmVkaXNDb3JlID0gcmVkaXNDb3JlO1xuICAgICAgICB0aGlzLmlvRXhlY3V0b3IgPSBpb0V4ZWN1dG9yO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvQ29tcHJlc3Npb25Db2VkQy5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIENvbXByZXNzaW9uQ29lZEMgZXh0ZW5kcyBCeXRlVG9NZXNzYWdlQ29kZWM8Qnl0ZUJ1Zj4ge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlci5nZXRMb2dnZXIoQ29tcHJlc3Npb25Db2VkQy5jbGFzcyk7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IENPTVBSRVNTSU9OX1RIUkVTSE9MRCA9IDY0O1xuICAgIHByaXZhdGUgZmluYWwgTFo0Q29tcHJlc3NvciBjb21wcmVzc29yO1xuICAgIHByaXZhdGUgZmluYWwgTFo0RmFzdERlY29tcHJlc3NvciBkZWNvbXByZXNzb3I7XG5cbiAgICBwdWJsaWMgQ29tcHJlc3Npb25Db2VkQygpIHtcbiAgICAgICAgdGhpcy5jb21wcmVzc29yID0gTFo0RmFjdG9yeS5mYXN0ZXN0SW5zdGFuY2UoKS5mYXN0Q29tcHJlc3NvcigpO1xuICAgICAgICB0aGlzLmRlY29tcHJlc3NvciA9IExaNEZhY3RvcnkuZmFzdGVzdEluc3RhbmNlKCkuZmFzdERlY29tcHJlc3NvcigpO1xuICAgICAgICBsb2dnZXIuaW5mbyhcIuWIneWni+WMluWOi+e8qee8luino+eggeWZqO+8jOWOi+e8qemYiOWAvDogXCIgKyBDT01QUkVTU0lPTl9USFJFU0hPTEQgKyBcIiDlrZfoioJcIik7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZW5jb2RlKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEJ5dGVCdWYgbXNnLCBCeXRlQnVmIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgIC8vIOS/neWtmOWOn+Wni3JlYWRlckluZGV4XG4gICAgICAgIGludCByZWFkZXJJbmRleCA9IG1zZy5yZWFkZXJJbmRleCgpO1xuICAgICAgICBpbnQgb3JpZ2luYWxTaXplID0gbXNnLnJlYWRhYmxlQnl0ZXMoKTtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvY29kZXIvTXlSZXNwb25zZUVuY29kZXIuamF2YVxucGFja2FnZSBzaXRlLmhuZnkyNTguY29kZXI7XG5cbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZjtcbmltcG9ydCBpby5uZXR0eS5idWZmZXIuQnl0ZUJ1ZlV0aWw7XG5pbXBvcnQgaW8ubmV0dHkuY2hhbm5lbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7XG5pbXBvcnQgaW8ubmV0dHkuaGFuZGxlci5jb2RlYy5NZXNzYWdlVG9CeXRlRW5jb2RlcjtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTgucHJvdG9jYWwuUmVzcDtcblxucHVibGljIGNsYXNzIE15UmVzcG9uc2VFbmNvZGVyIGV4dGVuZHMgTWVzc2FnZVRvQnl0ZUVuY29kZXI8UmVzcD4ge1xuICAgIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKE15UmVzcG9uc2VFbmNvZGVyLmNsYXNzKTtcbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBlbmNvZGUoQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgUmVzcCByZXNwLCBCeXRlQnVmIG91dCkgdGhyb3dzIEV4Y2VwdGlvbiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwLndyaXRlKHJlc3AsIG91dCk7XG4gICAgICAgICAgICAvLy8vbG9nZ2VyLmluZm8oXCJFbmNvZGVkIHJlc3BvbnNlOiBcIiArIEJ5dGVCdWZVdGlsLmhleER1bXAob3V0KSk7XG4gICAgICAgIH0gY2F0Y2goRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIue8lueggeW8guW4uDogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICBjdHguY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L2FvZi9BT0ZCYWNrZ3JvdW5kU2VydmljZS5qYXZhXG5wYWNrYWdlIHNpdGUuaG5meTI1OC5hb2Y7XG5cbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxvZ2dlcjtcbmltcG9ydCBzaXRlLmhuZnkyNTguYW9mLnByb2Nlc3Nvci5Qcm9jZXNzb3I7XG5cbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG4vKipcbiAqIEFPRuWQjuWPsOacjeWKoe+8jOi0n+i0o+euoeeQhkFPRueahOWQjuWPsOS/neWtmOWSjOWQjOatpeaTjeS9nFxuICovXG5wdWJsaWMgY2xhc3MgQU9GQmFja2dyb3VuZFNlcnZpY2Uge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKEFPRkJhY2tncm91bmRTZXJ2aWNlLmNsYXNzKTtcblxuICAgIHByaXZhdGUgZmluYWwgUHJvY2Vzc29yIHByb2Nlc3NvcjsgICAgICAgICAgIC8vIEFPRuWkhOeQhuWZqFxuICAgIHByaXZhdGUgZmluYWwgQU9GU3luY1N0cmF0ZWd5IHN5bmNTdHJhdGVneTsgIC8vIOWQjOatpeetlueVpVxuICAgIHByaXZhdGUgVGhyZWFkIHN5bmNUaHJlYWQ7ICAgICAgICAgICAgICAgICAgIC8vIOWQjOatpee6v+eoi1xuXG4gICAgLyoqXG4gICAgICog5p6E6YCgQU9G5ZCO5Y+w5pyN5YqhXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciBBT0blpITnkIblmahcbiAgICAgKiBAcGFyYW0gc3luY1N0cmF0ZWd5IOWQjOatpeetlueVpVxuICAgICAqL1xuICAgIHB1YmxpYyBBT0ZCYWNrZ3JvdW5kU2VydmljZShQcm9jZXNzb3IgcHJvY2Vzc29yLCBBT0ZTeW5jU3RyYXRlZ3kgc3luY1N0cmF0ZWd5KSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLnN5bmNTdHJhdGVneSA9IHN5bmNTdHJhdGVneTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlkK/liqhBT0blkI7lj7DmnI3liqFcbiAgICAgKi9cbiAgICBwdWJsaWMgdm9pZCBzdGFydCgpIHtcblxuICAgICAgICAvLyAyLiDlpoLmnpzlkIzmraXnrZbnlaXkuLrmr4/np5LlkIzmraXvvIzliJvlu7rlubblkK/liqjlkIzmraXnur/nqItcbiAgICAgICAgaWYgKHN5bmNTdHJhdGVneSA9PSBBT0ZTeW5jU3RyYXRlZ3kuRVZFUllTRUMpIHtcbiAgICAgICAgICAgIHRoaXMuc3luY1RocmVhZCA9IG5ldyBUaHJlYWQodGhpczo6YmFja2dyb3VuZFN5bmMpO1xuICAgICAgICAgICAgdGhpcy5zeW5jVGhyZWFkLnNldE5hbWUoXCJhb2YtYmFja2dyb3VuZC1zeW5jXCIpO1xuICAgICAgICAgICAgdGhpcy5zeW5jVGhyZWFkLnNldERhZW1vbih0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuc3luY1RocmVhZC5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIOWQjuWPsOWQjOatpeaTjeS9nO+8jOavj+malOS4gOenkui/m+ihjOS4gOasoeWIt+ebmFxuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCBiYWNrZ3JvdW5kU3luYygpIHtcbiAgICAgICAgd2hpbGUgKHByb2Nlc3Nvci5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyAxLiDnrYnlvoUx56eSXG4gICAgICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDEwMDApO1xuICAgICAgICAgICAgICAgIC8vIDIuIOaJp+ihjOWIt+ebmOaTjeS9nFxuICAgICAgICAgICAgICAgIHByb2Nlc3Nvci5mbHVzaCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuaW50ZXJydXB0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQU9G5ZCM5q2l6ZSZ6K+vXCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL3NpdGUvaG5meTI1OC9yZGIvcG9saWN5L1NhdmVQb2xpY3kuamF2YVxuLi4uXG5cbnB1YmwuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJhNTVhNzBmZS1iYzUyLTQwYjgtOTA0Mi01NGJiNzkzNWI5OWQ7dG9vbHVfdnJ0eF8wMTYxb2FBV3F0WExVblZoRGV4ZjJjMm8iOnsicmVxdWVzdElkIjoiYTU1YTcwZmUtYmM1Mi00MGI4LTkwNDItNTRiYjc5MzViOTlkIiwidG9vbFVzZUlkIjoidG9vbHVfdnJ0eF8wMTYxb2FBV3F0WExVblZoRGV4ZjJjMm8iLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL3Jlc291cmNlcy9Mb2c0ai5wcm9wZXJ0aWVzOlxuICAgICAxXHQjIyMjIyMjIyMjIyMjXG4gICAgIDJcdCMg77+977+977+977+977+977+977+977+977+9zKhcbiAgICAgM1x0IyMjIyMjIyMjIyMjI1xuICAgICA0XHRcbiAgICAgNVx0IyBsb2c0ai5yb290TG9nZ2Vy77+977+91r7vv73vv73vv73vv73vv73vv73NvO+/ve+/ve+/vda777+977+977+977+977+977+977+977+92rjDvO+/ve+/ve+/ve+/ve+/ve+/vda+77+977+9z6JERUJVRyA8IElORk8gPCBXQVJOIDwgRVJST1IgPCBGQVRBTFxuICAgICA2XHQjIFdBUk7vv73vv73vv73vv73Wvu+/ve+/ve+/ve+/vSAgICAgQ09OU09MRe+/ve+/ve+/ve+/ve+/vc6777+977+977+91Lzvv73vv73vv73vv73vv73vv73Su++/ve+/ve+/ve+/ve+/ve+/vSAgICAgICBsb2dmaWxl77+977+977+977+977+9zrvvv73vv73vv73UvO+/ve+/ve+/ve+/ve+/ve+/vdK777+977+977+977+977+977+9XG4gICAgIDdcdGxvZzRqLnJvb3RMb2dnZXI9SU5GTyxDT05TT0xFLGxvZ2ZpbGVcbiAgICAgOFx0IyDvv73vv73vv73vv71DT05TT0xF77+977+977+977+977+977+977+977+977+9zKhcbiAgICAgOVx0bG9nNGouYXBwZW5kZXIuQ09OU09MRT1vcmcuYXBhY2hlLmxvZzRqLkNvbnNvbGVBcHBlbmRlciBcbiAgICAxMFx0IyDvv73vv73vv73vv71DT05TT0xF77+977+977+977+9zqrvv73Utu+/ve+/veWyvO+/ve+/vcSjyr1cbiAgICAxMVx0bG9nNGouYXBwZW5kZXIuQ09OU09MRS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0IFxuICAgIDEyXHQjIO+/ve+/ve+/ve+/vUNPTlNPTEXvv73vv73Wvu+/ve+/ve+/ve+/ve+/ve+/ve+/vcq9ICBbZnJhbWVdIDIwMTktMDgtMjIgMjI6NTI6MTIsMDAwICAlcu+/vcS30brvv73vv73vv73vv73vv70gJXDvv73vv73Wvu+/ve+/ve+/ve+/ve+/vci877+9ICV077+937Pvv73vv73vv70gJUPvv73vv73vv73vv73vv73vv73vv73vv73NqO+/ve+/vc6qyKvvv73vv73vv73vv70gJUzvv73vv73vv73vv73vv73Qte+/ve+/vdC677+9ICV477+937Pvv73vv73vv73vv73vv73vv73vv73vv71OREMgJW3vv73vv73WviAlbu+/ve+/ve+/ve+/vVxuICAgIDEzXHRsb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj1bZnJhbWVdICVke3l5eXktTU0tZGQgSEg6bW06c3MsU1NTfSAtICUtNHIgJS01cCBbJXRdICVDOiVMICV4IC0gJW0lblxuICAgIDE0XHRcbiAgICAxNVx0IyMjIyMjIyMjIyMjIyMjI1xuICAgIDE2XHQjIO+/ve+/ve+/ve+/ve+/ve+/ve+/vda+77+9xLzvv73vv73vv71cbiAgICAxN1x0IyMjIyMjIyMjIyMjIyMjI1xuICAgIDE4XHRcbiAgICAxOVx0IyDvv73vv73vv73vv71sb2dmaWxl77+977+977+977+977+977+9xLzvv73vv73vv70g77+9xLzvv73vv73vv73Qoe+/ve+/ve+/ve+/vda477+977+977+937Tvv73vv73Kse+/ve+/ve+/ve+/ve+/ve+/vcK177+977+977+91r7vv73EvO+/vVxuICAgIDIwXHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxuICAgIDIxXHQjIO+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/vcq9XG4gICAgMjJcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuRW5jb2Rpbmc9VVRGLThcbiAgICAyM1x0IyDvv73vv73vv73vv73EvO+/vc6777+9w7Tvv73Oqu+/ve+/vcS/77+977+9xL/CvO+/vcK177+9bG9nc++/vcS877+977+977+977+977+9XG4gICAgMjRcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuRmlsZT1sb2dzL3Jvb3QubG9nXG4gICAgMjVcdCMg77+977+917rvv73vv73vv73vv73vv73vv71LQixNQixHQu+/ve+1ve+/vcO077+90KHvv73ztLS977+977+9wrXvv73vv73vv73Wvu+/vcS877+9XG4gICAgMjZcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4RmlsZVNpemU9MTBNQlxuICAgIDI3XHQjIO+/ve+/ve+/vcO577+977+977+977+9xLzvv73vv73vv73vv73vv73vv73WtTMg1rjvv73vv73vv73Usu+/ve+/ve+/vXJvb3QubG9nLjHvv73vv71yb290LmxvZy4y77+977+9cm9vdC5sb2cuM++/ve+/vXJvb3QubG9n77+9xLjvv73vv73vv73Wvu+/vcS877+9XG4gICAgMjhcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4QmFja3VwSW5kZXg9MyAgXG4gICAgMjlcdCMg77+977+977+977+9bG9nZmlsZc6q77+91Lbvv73vv73lsrzvv73vv73Eo8q9XG4gICAgMzBcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dFxuICAgIDMxXHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXG4gICAgMzJcdFxuICAgIDMzXHQjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgIDM0XHQjIO+/vdSy77+9zazvv73vv73vv73vv73vv73vv73vv73vv73vv73NrO+/ve+/ve+/ve+/vda+77+9xLzvv71cbiAgICAzNVx0IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAzNlx0XG4gICAgMzdcdCMgY2x1Yi5iYWdlZGF0Ze+/ve+/ve+/vcK177+977+977+91r7vv73vv73vv73vv73vv73vv73vv71cbiAgICAzOFx0bG9nNGoubG9nZ2VyLmNsdWIuYmFnZWRhdGU9REVCVUcsYmFnZWRhdGVcbiAgICAzOVx0IyDvv73vv73vv73vv73OqmZhbHNl77+977+977+977+91r7vv73vv73Pou+/vc2y77+977+977+977+977+967W9cm9vdExvZ2dlcu+/ve+/ve+/ve+/vVxuICAgIDQwXHRsb2c0ai5hZGRpdGl2aXR5LmNsdWIuYmFnZWRhdGU9ZmFsc2VcbiAgICA0MVx0IyDvv73vv73vv73vv73Nuu+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/ve+/vdK777+977+977+977+9XG4gICAgNDJcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlPW9yZy5hcGFjaGUubG9nNGouUm9sbGluZ0ZpbGVBcHBlbmRlclxuICAgIDQzXHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5FbmNvZGluZz1VVEYtOFxuICAgIDQ0XHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5GaWxlPWxvZ3MvYmFnZWRhdGUubG9nXG4gICAgNDVcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLk1heEZpbGVTaXplPTEwTUJcbiAgICA0Nlx0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuTWF4QmFja3VwSW5kZXg9M1xuICAgIDQ3XHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0XG4gICAgNDhcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLmxheW91dC5Db252ZXJzaW9uUGF0dGVybj0lZHt5eXl5LU1NLWRkIEhIOm1tOnNzfSAlRiAlcCAlbSVuXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0OFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZmU2Y2ZlNmEtNjYwMS00NmFkLThmOTUtYTVmZDA2ZjE2MmJiO3Rvb2x1X3ZydHhfMDFRN1U2NnFGUmY0NTZjeUZHR1NFb0RnIjp7InJlcXVlc3RJZCI6ImZlNmNmZTZhLTY2MDEtNDZhZC04Zjk1LWE1ZmQwNmYxNjJiYiIsInRvb2xVc2VJZCI6InRvb2x1X3ZydHhfMDFRN1U2NnFGUmY0NTZjeUZHR1NFb0RnIiwicGhhc2UiOjYsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBhbHJlYWR5IGV4aXN0czogRjovSHVhUmVkaXMvc3JjL21haW4vcmVzb3VyY2VzL0xvZzRqLnByb3BlcnRpZXMiLCJpc0Vycm9yIjp0cnVlLCJyZXF1ZXN0SWQiOiIifX0sIjc0MjE3NzZjLTNhOGQtNGY5ZS05YWFlLWUxOTAzNDkxYjVhYjt0b29sdV92cnR4XzAxVkozTjh0ODRQcmJMb0dXYTd5dlBSbiI6eyJyZXF1ZXN0SWQiOiI3NDIxNzc2Yy0zYThkLTRmOWUtOWFhZS1lMTkwMzQ5MWI1YWIiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxVkozTjh0ODRQcmJMb0dXYTd5dlBSbiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vcmVzb3VyY2VzL0xvZzRqLnByb3BlcnRpZXMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICAxXHQjIyMjIyMjIyMjIyMjXG4gICAgIDJcdCMgT3V0cHV0IHRvIGNvbnNvbGVcbiAgICAgM1x0IyMjIyMjIyMjIyMjI1xuICAgICA0XHRcbiAgICAgNVx0IyBsb2c0ai5yb290TG9nZ2VyIGxvZyBvdXRwdXQgbGV2ZWwgYW5kIGNhdGVnb3J5OiBvbmx5IG91dHB1dCBsb2dzIG5vdCBsb3dlciB0aGFuIHRoaXMgbGV2ZWwgREVCVUcgPCBJTkZPIDwgV0FSTiA8IEVSUk9SIDwgRkFUQUxcbiAgICAgNlx0IyBXQVJOOiBsb2cgbGV2ZWwgICAgIENPTlNPTEU6IG91dHB1dCBsb2NhdGlvbiBkZWZpbmVkIGJ5IHlvdXJzZWxmICAgICAgIGxvZ2ZpbGU6IG91dHB1dCBsb2NhdGlvbiBkZWZpbmVkIGJ5IHlvdXJzZWxmXG4gICAgIDdcdGxvZzRqLnJvb3RMb2dnZXI9SU5GTyxDT05TT0xFLGxvZ2ZpbGVcbiAgICAgOFx0IyBDb25maWd1cmUgQ09OU09MRSBvdXRwdXQgdG8gY29uc29sZVxuICAgICA5XHRsb2c0ai5hcHBlbmRlci5DT05TT0xFPW9yZy5hcGFjaGUubG9nNGouQ29uc29sZUFwcGVuZGVyXG4gICAgMTBcdCMgQ29uZmlndXJlIENPTlNPTEUgdG8gdXNlIGN1c3RvbSBsYXlvdXQgbW9kZVxuICAgIDExXHRsb2c0ai5hcHBlbmRlci5DT05TT0xFLmxheW91dD1vcmcuYXBhY2hlLmxvZzRqLlBhdHRlcm5MYXlvdXRcbiAgICAxMlx0IyBDb25maWd1cmUgQ09OU09MRSBsb2cgb3V0cHV0IGZvcm1hdCAgW2ZyYW1lXSAyMDE5LTA4LTIyIDIyOjUyOjEyLDAwMCAgJXIgbWlsbGlzZWNvbmRzICVwIGxvZyBwcmlvcml0eSAldCB0aHJlYWQgbmFtZSAlQyBjbGFzcyBuYW1lIHVzdWFsbHkgZnVsbCBjbGFzcyBuYW1lICVMIGxpbmUgbnVtYmVyIGluIGNvZGUgJXggdGhyZWFkIHJlbGF0ZWQgTkRDICVtIGxvZyAlbiBuZXdsaW5lXG4gICAgMTNcdGxvZzRqLmFwcGVuZGVyLkNPTlNPTEUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPVtmcmFtZV0gJWR7eXl5eS1NTS1kZCBISDptbTpzcyxTU1N9IC0gJS00ciAlLTVwIFsldF0gJUM6JUwgJXggLSAlbSVuXG4gICAgMTRcdFxuICAgIDE1XHQjIyMjIyMjIyMjIyMjIyMjXG4gICAgMTZcdCMgT3V0cHV0IHRvIGxvZyBmaWxlXG4gICAgMTdcdCMjIyMjIyMjIyMjIyMjIyNcbiAgICAxOFx0XG4gICAgMTlcdCMgQ29uZmlndXJlIGxvZ2ZpbGUgb3V0cHV0IHRvIGZpbGUuIFdoZW4gZmlsZSBzaXplIHJlYWNoZXMgc3BlY2lmaWVkIHNpemUsIGNyZWF0ZSBuZXcgbG9nIGZpbGVcbiAgICAyMFx0bG9nNGouYXBwZW5kZXIubG9nZmlsZT1vcmcuYXBhY2hlLmxvZzRqLlJvbGxpbmdGaWxlQXBwZW5kZXJcbiAgICAyMVx0IyBTYXZlIGVuY29kaW5nIGZvcm1hdFxuICAgIDIyXHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlLkVuY29kaW5nPVVURi04XG4gICAgMjNcdCMgT3V0cHV0IGZpbGUgbG9jYXRpb24gaXMgbG9ncyBmb2xkZXIgdW5kZXIgcHJvamVjdCByb290IGRpcmVjdG9yeVxuICAgIDI0XHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlLkZpbGU9bG9ncy9yb290LmxvZ1xuICAgIDI1XHQjIFN1ZmZpeCBjYW4gYmUgS0IsTUIsR0IuIFdoZW4gcmVhY2hpbmcgdGhpcyBzaXplLCBjcmVhdGUgbmV3IGxvZyBmaWxlXG4gICAgMjZcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUuTWF4RmlsZVNpemU9MTBNQlxuICAgIDI3XHQjIFNldCBtYXhpbXVtIHZhbHVlIG9mIHJvbGxpbmcgZmlsZXMgdG8gMy4gQ2FuIGNyZWF0ZSByb290LmxvZy4xLCByb290LmxvZy4yLCByb290LmxvZy4zIGFuZCByb290LmxvZyBmb3VyIGxvZyBmaWxlc1xuICAgIDI4XHRsb2c0ai5hcHBlbmRlci5sb2dmaWxlLk1heEJhY2t1cEluZGV4PTNcbiAgICAyOVx0IyBDb25maWd1cmUgbG9nZmlsZSBhcyBjdXN0b20gbGF5b3V0IG1vZGVcbiAgICAzMFx0bG9nNGouYXBwZW5kZXIubG9nZmlsZS5sYXlvdXQ9b3JnLmFwYWNoZS5sb2c0ai5QYXR0ZXJuTGF5b3V0XG4gICAgMzFcdGxvZzRqLmFwcGVuZGVyLmxvZ2ZpbGUubGF5b3V0LkNvbnZlcnNpb25QYXR0ZXJuPSVke3l5eXktTU0tZGQgSEg6bW06c3N9ICVGICVwICVtJW5cbiAgICAzMlx0XG4gICAgMzNcdCMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICAgMzRcdCMgT3V0cHV0IGRpZmZlcmVudCBsb2dzIHRvIGRpZmZlcmVudCBmaWxlcyBmb3IgZGlmZmVyZW50IGNsYXNzZXNcbiAgICAzNVx0IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAzNlx0XG4gICAgMzdcdCMgY2x1Yi5iYWdlZGF0ZSBwYWNrYWdlIGxvZ3Mgb3V0cHV0IHNlcGFyYXRlbHlcbiAgICAzOFx0bG9nNGoubG9nZ2VyLmNsdWIuYmFnZWRhdGU9REVCVUcsYmFnZWRhdGVcbiAgICAzOVx0IyBTZXQgdG8gZmFsc2Ugc28gdGhlc2UgbG9nIG1lc3NhZ2VzIHdvbid0IGJlIGFkZGVkIHRvIHJvb3RMb2dnZXJcbiAgICA0MFx0bG9nNGouYWRkaXRpdml0eS5jbHViLmJhZ2VkYXRlPWZhbHNlXG4gICAgNDFcdCMgQ29uZmlndXJhdGlvbiBiZWxvdyBpcyB0aGUgc2FtZSBhcyBhYm92ZVxuICAgIDQyXHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZT1vcmcuYXBhY2hlLmxvZzRqLlJvbGxpbmdGaWxlQXBwZW5kZXJcbiAgICA0M1x0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuRW5jb2Rpbmc9VVRGLThcbiAgICA0NFx0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGUuRmlsZT1sb2dzL2JhZ2VkYXRlLmxvZ1xuICAgIDQ1XHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5NYXhGaWxlU2l6ZT0xME1CXG4gICAgNDZcdGxvZzRqLmFwcGVuZGVyLmJhZ2VkYXRlLk1heEJhY2t1cEluZGV4PTNcbiAgICA0N1x0bG9nNGouYXBwZW5kZXIuYmFnZWRhdGUubGF5b3V0PW9yZy5hcGFjaGUubG9nNGouUGF0dGVybkxheW91dFxuICAgIDQ4XHRsb2c0ai5hcHBlbmRlci5iYWdlZGF0ZS5sYXlvdXQuQ29udmVyc2lvblBhdHRlcm49JWR7eXl5eS1NTS1kZCBISDptbTpzc30gJUYgJXAgJW0lblxuICAgIDQ5XHRcbiAgICA1MFx0IyBTZXQgTXlDb21tYW5kSGFuZGxlciB0byBERUJVRyBsZXZlbCB0byBzZWUgY29ubmVjdGlvbiBldmVudHNcbiAgICA1MVx0bG9nNGoubG9nZ2VyLnNpdGUuaG5meTI1OC5jb2Rlci5NeUNvbW1hbmRIYW5kbGVyPURFQlVHXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImQ5Y2M2YmI4LWQ5NmUtNGY4ZC05NjQ4LTEwMjNhN2ZiMDZjMjt0b29sdV92cnR4XzAxNEd1UHJjR0NocHY0UHc2bnBhbUh4RCI6eyJyZXF1ZXN0SWQiOiJkOWNjNmJiOC1kOTZlLTRmOGQtOTY0OC0xMDIzYTdmYjA2YzIiLCJ0b29sVXNlSWQiOiJ0b29sdV92cnR4XzAxNEd1UHJjR0NocHY0UHc2bnBhbUh4RCIsInBoYXNlIjo4LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUgYXJlIHRoZSByZXN1bHRzIGZyb20gZXhlY3V0aW5nIHRoZSBjb21tYW5kLlxuICAgICAgICA8cmV0dXJuLWNvZGU+XG4gICAgICAgIC0xXG4gICAgICAgIDwvcmV0dXJuLWNvZGU+XG4gICAgICAgIDxzdGRvdXQ+XG4gICAgICAgIFx1MDAxYls/OTAwMWhcdTAwMWJbPzEwMDRoXHUwMDFiWz8yNWxcdTAwMWJbMkpcdTAwMWJbbVx1MDAxYltIXHUwMDFiXTA7RDpcXEdpdFxcZ2l0LWNtZC5leGUgLSBtdm4gIGNsZWFuIGNvbXBpbGVcdTAwMDdcdTAwMWJbPzI1aFx1MDAxYls/MjVsXHUwMDFiWzg7MTU7MTczdFx1MDAxYltLXG5cdTAwMWJbS1xuXHUwMDFiW0tcblx1MDAxYltLXG5cdTAwMWJbS1xuXHUwMDFiW0tcblx1MDAxYltLXG5cdTAwMWJbS1xuXHUwMDFiW0tcblx1MDAxYltLXG5cdTAwMWJbS1xuXHUwMDFiW0tcblx1MDAxYltLXG5cdTAwMWJbS1xuXHUwMDFiW0tcdTAwMWJbSFx1MDAxYls/MjVoXHUwMDFiWz8yNWxcdTAwMWJbS1xuXHUwMDFiW0tcblx1MDAxYltLXG5cdTAwMWJbS1xuXHUwMDFiW0tcblx1MDAxYltLXHUwMDFiW0hcdTAwMWJbPzI1aFtcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBTY2FubmluZyBmb3IgcHJvamVjdHMuLi5cbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBcdTAwMWJbMW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTwgXHUwMDFiWzM2bVx1MDAxYlsyMm1zaXRlLmhuZnkyNTg6SHVhUmVkaXNcdTAwMWJbbVx1MDAxYlsxbSA+LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHUwMDFiWzIybVxuW1x1MDAxYlszNG1cdTAwMWJbMW1JTkZPXHUwMDFiW21dIFx1MDAxYlsxbUJ1aWxkaW5nIEh1YVJlZGlzIDEuMC1TTkFQU0hPVFx1MDAxYlsyMm1cbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSAgIGZyb20gcG9tLnhtbFxuW1x1MDAxYlszNG1cdTAwMWJbMW1JTkZPXHUwMDFiW21dIFx1MDAxYlsxbS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tWyBqYXIgXS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHUwMDFiWzIybVxuRG93bmxvYWRpbmcgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvYXBhY2hlL2NvbW1vbnMvY29tbW9ucy1wb29sMi8yLjExLjEvY29tbW9ucy1wb29sMi0yLjExLjEucG9tXG5Eb3dubG9hZGVkIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL2FwYWNoZS9jb21tb25zL2NvbW1vbnMtcG9vbDIvMi4xMS4xL2NvbW1vbnMtcG9vbDItMi4xMS4xLnBvbSAoMCBCIGF0IDAgQi9zKVxuRG93bmxvYWRpbmcgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvanVuaXQvanVuaXQtYm9tLzUuOC4wLU0xL2p1bml0LWJvbS01LjguMC1NMS5wb21cbkRvd25sb2FkZWQgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvanVuaXQvanVuaXQtYm9tLzUuOC4wLU0xL2p1bml0LWJvbS01LjguMC1NMS5wb20gKDAgQiBhdCAwIEIvcylcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL29wZW5qZGsvam1oL2ptaC1jb3JlLzEuMzUvam1oLWNvcmUtMS4zNS5wb21cbkRvd25sb2FkZWQgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvb3Blbmpkay9qbWgvam1oLWNvcmUvMS4zNS9qbWgtY29yZS0xLjM1LnBvbSAoMCBCIGF0IDAgQi9zKVxuRG93bmxvYWRpbmcgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvb3Blbmpkay9qbWgvam1oLXBhcmVudC8xLjM1L2ptaC1wYXJlbnQtMS4zNS5wb21cbkRvd25sb2FkZWQgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvb3Blbmpkay9qbWgvam1oLXBhcmVudC8xLjM1L2ptaC1wYXJlbnQtMS4zNS5wb20gKDAgQiBhdCAwIEIvcylcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvbmV0L3NmL2pvcHQtc2ltcGxlL2pvcHQtc2ltcGxlLzUuMC40L2pvcHQtc2ltcGxlLTUuMC40LnBvbVxuRG93bmxvYWRlZCBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL25ldC9zZi9qb3B0LXNpbXBsZS9qb3B0LXNpbXBsZS81LjAuNC9qb3B0LXNpbXBsZS01LjAuNC5wb20gKDAgQiBhdCAwIEIvcylcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL2FwYWNoZS9jb21tb25zL2NvbW1vbnMtbWF0aDMvMy4yL2NvbW1vbnMtbWF0aDMtMy4yLnBvbVxuRG93bmxvYWRlZCBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL29yZy9hcGFjaGUvY29tbW9ucy9jb21tb25zLW1hdGgzLzMuMi9jb21tb25zLW1hdGgzLTMuMi5wb20gKDAgQiBhdCAwIEIvcylcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL2FwYWNoZS9jb21tb25zL2NvbW1vbnMtcGFyZW50LzI4L2NvbW1vbnMtcGFyZW50LTI4LnBvbVxuRG93bmxvYWRlZCBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL29yZy9hcGFjaGUvY29tbW9ucy9jb21tb25zLXBhcmVudC8yOC9jb21tb25zLXBhcmVudC0yOC5wb20gKDAgQiBhdCAwIEIvcylcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL29wZW5qZGsvam1oL2ptaC1nZW5lcmF0b3ItYW5ucHJvY2Vzcy8xLjM1L2ptaC1nZW5lcmF0b3ItYW5ucHJvY2Vzcy0xLjM1LnBvbVxuRG93bmxvYWRlZCBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL29yZy9vcGVuamRrL2ptaC9qbWgtZ2VuZXJhdG9yLWFubnByb2Nlc3MvMS4zNS9qbWgtZ2VuZXJhdG9yLWFubnByb2Nlc3MtMS4zNS5wb20gKDAgQiBcblx1MDAxYls1OzE3M0ggYXQgMCBCL3MpXG5Eb3dubG9hZGluZyBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL2lvL2dpdGh1Yi9rYXJsYXRlbXAvdW5zYWZlLWFjY2Vzc29yLzEuNy4wL3Vuc2FmZS1hY2Nlc3Nvci0xLjcuMC5wb21cbkRvd25sb2FkZWQgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9pby9naXRodWIva2FybGF0ZW1wL3Vuc2FmZS1hY2Nlc3Nvci8xLjcuMC91bnNhZmUtYWNjZXNzb3ItMS43LjAucG9tICgwIEIgYXQgMCBCL3MpXG5Eb3dubG9hZGluZyBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL29yZy9hcGFjaGUvY29tbW9ucy9jb21tb25zLXBvb2wyLzIuMTEuMS9jb21tb25zLXBvb2wyLTIuMTEuMS5qYXJcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL2FwYWNoZS9jb21tb25zL2NvbW1vbnMtbWF0aDMvMy4yL2NvbW1vbnMtbWF0aDMtMy4yLmphclxuRG93bmxvYWRpbmcgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvb3Blbmpkay9qbWgvam1oLWdlbmVyYXRvci1hbm5wcm9jZXNzLzEuMzUvam1oLWdlbmVyYXRvci1hbm5wcm9jZXNzLTEuMzUuamFyICAgICBcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL29wZW5qZGsvam1oL2ptaC1jb3JlLzEuMzUvam1oLWNvcmUtMS4zNS5qYXJcbkRvd25sb2FkaW5nIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvbmV0L3NmL2pvcHQtc2ltcGxlL2pvcHQtc2ltcGxlLzUuMC40L2pvcHQtc2ltcGxlLTUuMC40LmphclxuRG93bmxvYWRlZCBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL29yZy9vcGVuamRrL2ptaC9qbWgtY29yZS8xLjM1L2ptaC1jb3JlLTEuMzUuamFyICgwIEIgYXQgMCBCL3MpXG5Eb3dubG9hZGluZyBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL2lvL2dpdGh1Yi9rYXJsYXRlbXAvdW5zYWZlLWFjY2Vzc29yLzEuNy4wL3Vuc2FmZS1hY2Nlc3Nvci0xLjcuMC5qYXJcbkRvd25sb2FkZWQgZnJvbSBhbGltYXZlbnJlcG9zaXRvcnk6IGh0dHA6Ly9tYXZlbi5hbGl5dW4uY29tL25leHVzL2NvbnRlbnQvZ3JvdXBzL3B1YmxpYy9vcmcvYXBhY2hlL2NvbW1vbnMvY29tbW9ucy1wb29sMi8yLjExLjEvY29tbW9ucy1wb29sMi0yLjExLjEuamFyICgwIEIgYXQgMCBCL3MpXG5Eb3dubG9hZGVkIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvbmV0L3NmL2pvcHQtc2ltcGxlL2pvcHQtc2ltcGxlLzUuMC40L2pvcHQtc2ltcGxlLTUuMC40LmphciAoMCBCIGF0IDAgQi9zKVxuRG93bmxvYWRlZCBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL29yZy9vcGVuamRrL2ptaC9qbWgtZ2VuZXJhdG9yLWFubnByb2Nlc3MvMS4zNS9qbWgtZ2VuZXJhdG9yLWFubnByb2Nlc3MtMS4zNS5qYXIgKDAgQiBcblx1MDAxYls1OzE3M0ggYXQgMCBCL3MpXG5Eb3dubG9hZGVkIGZyb20gYWxpbWF2ZW5yZXBvc2l0b3J5OiBodHRwOi8vbWF2ZW4uYWxpeXVuLmNvbS9uZXh1cy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvb3JnL2FwYWNoZS9jb21tb25zL2NvbW1vbnMtbWF0aDMvMy4yL2NvbW1vbnMtbWF0aDMtMy4yLmphciAoMCBCIGF0IDAgQi9zKVxuRG93bmxvYWRlZCBmcm9tIGFsaW1hdmVucmVwb3NpdG9yeTogaHR0cDovL21hdmVuLmFsaXl1bi5jb20vbmV4dXMvY29udGVudC9ncm91cHMvcHVibGljL2lvL2dpdGh1Yi9rYXJsYXRlbXAvdW5zYWZlLWFjY2Vzc29yLzEuNy4wL3Vuc2FmZS1hY2Nlc3Nvci0xLjcuMC5qYXIgKDAgQiBhdCAwIEIvcylcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXVx1MDAxYltLXG5bXHUwMDFiWzM0bVx1MDAxYlsxbUlORk9cdTAwMWJbbV0gXHUwMDFiWzFtLS0tIFx1MDAxYlszMm1cdTAwMWJbMjJtbWF2ZW4tY2xlYW4tcGx1Z2luOjIuNTpjbGVhbiBcdTAwMWJbbVx1MDAxYlsxbShkZWZhdWx0LWNsZWFuKVx1MDAxYlsyMm0gQCBcdTAwMWJbMzZtSHVhUmVkaXNcdTAwMWJbbVx1MDAxYlsxbSAtLS1cdTAwMWJbMjJtXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBEZWxldGluZyBGOlxcSHVhUmVkaXNcXHRhcmdldFxuW1x1MDAxYlszNG1cdTAwMWJbMW1JTkZPXHUwMDFiW21dIFxuW1x1MDAxYlszNG1cdTAwMWJbMW1JTkZPXHUwMDFiW21dIFx1MDAxYlsxbS0tLSBcdTAwMWJbMzJtXHUwMDFiWzIybW1hdmVuLXJlc291cmNlcy1wbHVnaW46Mi42OnJlc291cmNlcyBcdTAwMWJbbVx1MDAxYlsxbShkZWZhdWx0LXJlc291cmNlcylcdTAwMWJbMjJtIEAgXHUwMDFiWzM2bUh1YVJlZGlzXHUwMDFiW21cdTAwMWJbMW0gLS0tXHUwMDFiWzIybVx1MDAxYltLXG5bXHUwMDFiWzM0bVx1MDAxYlsxbUlORk9cdTAwMWJbbV0gVXNpbmcgJ1VURi04JyBlbmNvZGluZyB0byBjb3B5IGZpbHRlcmVkIHJlc291cmNlcy5cbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBDb3B5aW5nIDEgcmVzb3VyY2VcdTAwMWJbS1xuW1x1MDAxYlszNG1cdTAwMWJbMW1JTkZPXHUwMDFiW21dXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBcdTAwMWJbMW0tLS0gXHUwMDFiWzMybVx1MDAxYlsyMm1tYXZlbi1jb21waWxlci1wbHVnaW46My4xOmNvbXBpbGUgXHUwMDFiW21cdTAwMWJbMW0oZGVmYXVsdC1jb21waWxlKVx1MDAxYlsyMm0gQCBcdTAwMWJbMzZtSHVhUmVkaXNcdTAwMWJbbVx1MDAxYlsxbSAtLS1cdTAwMWJbMjJtXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBDaGFuZ2VzIGRldGVjdGVkIC0gcmVjb21waWxpbmcgdGhlIG1vZHVsZSFcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBDb21waWxpbmcgMTE1IHNvdXJjZSBmaWxlcyB0byBGOlxcSHVhUmVkaXNcXHRhcmdldFxcY2xhc3Nlc1x1MDAxYltLXG5bXHUwMDFiWzMzbVx1MDAxYlsxbVdBUk5JTkdcdTAwMWJbbV0gL0Y6L0h1YVJlZGlzL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3NlcnZlci9NeVJlZGlzU2VydmljZS5qYXZhOlszLDQ2XSBjb20uc3VuLmNvcmJhLnNlLmltcGwucHJlc2VudGF0aW9uLnJtaS5FeGNlcHRpb25IYW5kbGVy5piv5YaF6YOo5LiT55SoIEFQSSwg5Y+v6IO95Lya5Zyo5pyq5p2l5Y+R6KGM54mIXG5cdTAwMWJbNTsxNzJI54mI5Lit5Yig6ZmkXG5bXHUwMDFiWzMzbVx1MDAxYlsxbVdBUk5JTkdcdTAwMWJbbV0gL0Y6L0h1YVJlZGlzL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3NlcnZlci9NeVJlZGlzU2VydmljZS5qYXZhOlszLDQ2XSBjb20uc3VuLmNvcmJhLnNlLmltcGwucHJlc2VudGF0aW9uLnJtaS5FeGNlcHRpb25IYW5kbGVy5piv5YaF6YOo5LiT55SoIEFQSSwg5Y+v6IO95Lya5Zyo5pyq5p2l5Y+R6KGM54mIXG5cdTAwMWJbNTsxNzJI54mI5Lit5Yig6ZmkXG5bXHUwMDFiWzMzbVx1MDAxYlsxbVdBUk5JTkdcdTAwMWJbbV0gL0Y6L0h1YVJlZGlzL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3NlcnZlci9NeVJlZGlzU2VydmljZS5qYXZhOlszLDQ2XSBjb20uc3VuLmNvcmJhLnNlLmltcGwucHJlc2VudGF0aW9uLnJtaS5FeGNlcHRpb25IYW5kbGVy5piv5YaF6YOo5LiT55SoIEFQSSwg5Y+v6IO95Lya5Zyo5pyq5p2l5Y+R6KGM54mIXG5cdTAwMWJbNTsxNzJI54mI5Lit5Yig6ZmkXG5bXHUwMDFiWzMzbVx1MDAxYlsxbVdBUk5JTkdcdTAwMWJbbV0gL0Y6L0h1YVJlZGlzL3NyYy9tYWluL2phdmEvc2l0ZS9obmZ5MjU4L3NlcnZlci9NeVJlZGlzU2VydmljZS5qYXZhOiBGOlxcSHVhUmVkaXNcXHNyY1xcbWFpblxcamF2YVxcc2l0ZVxcaG5meTI1OFxcc2VydmVyXFxNeVJlZGlzU2VydmljZS5qYXZh5L2/55So5LqG5pyq57uP5qOA5p+l5oiW5LiN5a6J5YWo55qE5pON5L2c44CCXHUwMDFiWzY7MUhcbltcdTAwMWJbMzNtXHUwMDFiWzFtV0FSTklOR1x1MDAxYlttXSAvRjovSHVhUmVkaXMvc3JjL21haW4vamF2YS9zaXRlL2huZnkyNTgvc2VydmVyL015UmVkaXNTZXJ2aWNlLmphdmE6IOacieWFs+ivpue7huS/oeaBrywg6K+35L2/55SoIC1YbGludDp1bmNoZWNrZWQg6YeN5paw57yW6K+R44CCXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBcdTAwMWJbMW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cdTAwMWJbMjJtXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBcdTAwMWJbMzJtXHUwMDFiWzFtQlVJTEQgU1VDQ0VTU1x1MDAxYlttXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBcdTAwMWJbMW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cdTAwMWJbMjJtXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBUb3RhbCB0aW1lOiAgMTEuNTQ4IHNcdTAwMWJbS1xuW1x1MDAxYlszNG1cdTAwMWJbMW1JTkZPXHUwMDFiW21dIEZpbmlzaGVkIGF0OiAyMDI1LTA1LTAzVDA0OjUyOjE2KzA4OjAwXHUwMDFiW0tcbltcdTAwMWJbMzRtXHUwMDFiWzFtSU5GT1x1MDAxYlttXSBcdTAwMWJbMW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cdTAwMWJbMjJtXHUwMDFiW0tcblx1MDAxYl0wO0Q6XFxHaXRcXGdpdC1jbWQuZXhlXHUwMDA3XG5GOlxcSHVhUmVkaXM+XG5cbkY6XFxIdWFSZWRpcz5cbiAgICAgICAgPC9zdGRvdXQ+XG4gICAgICAgIDxzdGRlcnI+XG4gICAgICAgIFxuICAgICAgICA8L3N0ZGVycj4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19fSwiZHJhZnRFeGNoYW5nZSI6eyJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIn1dfSwic3RhdHVzIjoiZHJhZnQifSwicmVxdWVzdElkcyI6W10sImlzUGlubmVkIjpmYWxzZSwiaXNTaGFyZWFibGUiOnRydWUsImV4dHJhRGF0YSI6eyJpc0FnZW50Q29udmVyc2F0aW9uIjp0cnVlLCJoYXNEaXJ0eUVkaXRzIjpmYWxzZSwiYmFzZWxpbmVUaW1lc3RhbXAiOjE3NDYyMTkyMDY5MDN9LCJwZXJzb25hVHlwZSI6MH19LCJhZ2VudEV4ZWN1dGlvbk1vZGUiOiJhdXRvIiwiaXNBZ2VudEVkaXRzQ29sbGFwc2VkIjpmYWxzZSwic29ydENvbnZlcnNhdGlvbnNCeSI6Imxhc3RNZXNzYWdlVGltZXN0YW1wIn0=" />
      </map>
    </option>
  </component>
</project>